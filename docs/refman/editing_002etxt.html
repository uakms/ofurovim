<!DOCTYPE html>
<html lang="ja">
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>

<title>editing.txt (Vim Reference Manual)</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="description" content="editing.txt (Vim Reference Manual)">
<meta name="keywords" content="editing.txt (Vim Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="Mu-Ci-.html" rel="start" title="目次">
<link href="Indexes-CP.html" rel="index" title="Indexes CP">
<link href="Mu-Ci-.html" rel="up" title="目次">
<link href="motion_002etxt.html" rel="next" title="motion.txt">
<link href="starting_002etxt.html" rel="prev" title="starting.txt">
<style>
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="ja">
<span id="editing_002etxt"></span><div class="header">
<p>
Up: <a href="Mu-Ci-.html" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="huairunoBian-Ji-toBao-Cun-"></span><h2 class="unnumbered">ファイルの編輯と保存</h2>
<pre class="verbatim">*editing.txt*   For Vim バージョン 8.1.  Last change: 2019 Sep 27


		  VIMリファレンスマニュアル    by Bram Moolenaar
</pre>

<span id="edit_002dfiles"></span><span id="index-edit_002dfiles"></span>
<span id="index-huairunoBian-Ji-"></span>
<span id="huairunoBian-Ji-"></span><h3 class="section">ファイルの編輯</h3>

<table>
<tr><td width="50%">1. はじめに</td><td width="50%">|<a href="#edit_002dintro">edit-intro</a>|</td></tr>
<tr><td width="50%">2. ファイルの編輯</td><td width="50%">|<a href="#edit_002da_002dfile">edit-a-file</a>|</td></tr>
<tr><td width="50%">3. 引數リスト</td><td width="50%">|<a href="#argument_002dlist">argument-list</a>|</td></tr>
<tr><td width="50%">4. 書き込み</td><td width="50%">|<a href="#writing">writing</a>|</td></tr>
<tr><td width="50%">5. 書き込みと終了</td><td width="50%">|<a href="#write_002dquit">write-quit</a>|</td></tr>
<tr><td width="50%">6. ダイアログ</td><td width="50%">|<a href="#edit_002ddialogs">edit-dialogs</a>|</td></tr>
<tr><td width="50%">7. カレントディレクトリ</td><td width="50%">|<a href="#current_002ddirectory">current-directory</a>|</td></tr>
<tr><td width="50%">8. バイナリファイルの編輯</td><td width="50%">|<a href="#edit_002dbinary">edit-binary</a>|</td></tr>
<tr><td width="50%">9. 暗號化</td><td width="50%">|<a href="#encryption">encryption</a>|</td></tr>
<tr><td width="50%">10. タイムスタンプ</td><td width="50%">|<a href="#timestamps">timestamps</a>|</td></tr>
<tr><td width="50%">11. ファイル檢索</td><td width="50%">|<a href="#file_002dsearching">file-searching</a>|</td></tr>
</table>

<span id="edit_002dintro"></span><span id="index-edit_002dintro"></span>
<span id="g_t1_002e-hazimeni-1"></span><h3 class="section">1. はじめに</h3>

<p>「Vim でファイルを編輯する」とは、以下のことを表します。
</p>
<ol>
<li> バッファへファイルを讀み込む
</li><li> 編輯コマンドによりバッファの內容を變更する
</li><li> バッファをファイルへ書き込む
</li></ol>

<span id="current_002dfile"></span><span id="index-current_002dfile"></span>
<p>バッファを書き込まない限り、元のファイルは變更を受けないままで殘つてゐます。ファイルの編輯を始める (バッファにファイルを讀み込む) と、そのファイルの名前は「カレントファイル名」として記憶されます。これをカレントバッファの名前とも呼びます。コマンドラインでは &quot;%&quot; で表せます |<a href="cmdline_002etxt.html#g_t_003a_005f_0025">:_%</a>|。
</p>
<span id="alternate_002dfile"></span><span id="index-alternate_002dfile"></span>
<p>カレントファイル名が既に存在したときは、前の方は「代替ファイル名」になります。これはコマンドラインでは &quot;#&quot; で表され |<a href="cmdline_002etxt.html#g_t_003a_005f_0023">:_#</a>|、|<a href="#CTRL_002d_005e">CTRL-^</a>| を使ふとカレントファイルと代替ファイルを切り替へることができます。ただし |<a href="#g_t_003akeepalt">:keepalt</a>| を使つたときは代替ファイル名は變はりません。代替ファイル名はウィンドウごとに記憶されます。
</p>
<span id="g_t_003akeepalt"></span><span id="g_t_003akeepa"></span><span id="index-_003akeepalt"></span>
<span id="index-_003akeepa"></span>
<dl compact="compact">
<dt>:keepalt {cmd}</dt>
<dd><p>現在の代替ファイル名を變へずに {cmd} を實行します。
</p><blockquote>
<p><strong>Note:</strong> <br>
閒接的に呼び出されるコマンド (例へば函數によつて) は代替ファイル名を變へてしまふことに注意してください。
</p></blockquote>
</dd>
</dl>

<p>全てのファイル名はバッファリストに記憶されます。編輯 (例へば &quot;<code>:e filename</code>&quot;) や保存 (例へば &quot;<code>:w filename</code>&quot;) のためにファイル名を入力すると、そのファイル名がリストに追加されます。このリストを使へば、どのファイルを編輯したかを覺えておいたり、コマンド <kbd>CTRL-^</kbd> によつてあるファイルから別のファイルへ素早く移行することができます (例へばテキストをコピーするとき)。まづファイルの番號を、次に <kbd>CTRL-^</kbd> を打ち込みます。
</p>

<span id="CTRL_002dG"></span><span id="g_t_003af"></span><span id="g_t_003afi"></span><span id="g_t_003afile"></span><span id="index-CTRL_002dG"></span>
<span id="index-_003af"></span>
<span id="index-_003afi"></span>
<span id="index-_003afile"></span>
<dl compact="compact">
<dt>CTRL-G または</dt>
<dt>:f[ile]</dt>
<dd><p>カレントファイル名 (これは &quot;<code>:cd</code>&quot; が使はれたとき以外は打ち込まれた通り {譯注: 普通、カレントディレクトリのファイルを編輯するときはパスを省いて打ち込むと思ひますが、さうするとパスなしのファイル名になります})、カーソル位置 (これはオプション &rsquo;<samp>ruler</samp>&rsquo; がオフのとき) とファイルの狀態 (讀込專用、變更あり、讀込エラー、新規ファイル) を表示します。このメッセージを短くする方法については、オプション &rsquo;<samp>shortmess</samp>&rsquo; を參照してください。
</p>
</dd>
<dt>:f[ile]!</dt>
<dd><p>|<a href="#g_t_003afile">:file</a>| と同樣ですが、&rsquo;<samp>shortmess</samp>&rsquo; が設定されてゐるときでも名前を切り詰めません。
</p>
</dd>
<dt>{count}CTRL-G</dt>
<dd><p><kbd>CTRL-G</kbd> と同樣ですが、カレントファイル名をフルパスで表示します。{count} が 2 以上なら、カレントバッファの番號も表示します。
</p></dd>
</dl>

<span id="g_005fCTRL_002dG"></span><span id="word_002dcount"></span><span id="byte_002dcount"></span><span id="index-g_005fCTRL_002dG"></span>
<span id="index-word_002dcount"></span>
<span id="index-byte_002dcount"></span>
<dl compact="compact">
<dt>g CTRL-G</dt>
<dd><p>カーソルの現在の位置を、列、行、單語、文字、バイト、の 5 種類の單位で表示します。文字數とバイト數が同じのときは文字位置が省略されます。
</p>
<p>行の中に畫面上で 1 文字分以上の幅を占める文字 (&lt;Tab&gt; または特殊文字) があるときは、「實際」の列番號と畫面上の列番號の兩方が、ダッシュで區切られて表示されます {譯注: 例へば、タブ幅 &rsquo;<samp>tabstop</samp>&rsquo; が 8 のとき、行頭の &lt;Tab&gt; の次では「實際」の列番號は 2、畫面上の列番號は 9 となり、&quot;1-8&quot; と表示されます}。オプション &rsquo;<samp>ruler</samp>&rsquo; と |<a href="eval_002etxt.html#wordcount_0028_0029">wordcount()</a>| 函數も參照してください。
</p></dd>
</dl>

<span id="v_005fg_005fCTRL_002dG"></span><span id="index-v_005fg_005fCTRL_002dG"></span>
<dl compact="compact">
<dt>{Visual}g CTRL-G</dt>
<dd><p>&quot;g CTRL-G&quot; と似てゐますが、單語、文字、行、バイトの項目はビジュアル選擇領域內で數へられて表示されます。矩形ビジュアルモードでは、何列目かも表示されます。
</p>
<p>矩形ビジュアルモードでは桁數も表示されます ({Visual} については |<a href="visual_002etxt.html#Visual_002dmode">Visual-mode</a>| を參照してください。)
</p>
<span id="g_t_003afile_005ff"></span><span id="index-_003afile_005ff"></span>
</dd>
<dt>:f[ile][!] {name}</dt>
<dd><p>カレントファイル名を {name} に設定します。! をつけると |<a href="#g_t_003afile">:file</a>| のやうにメッセージを切り詰めなくなります。
</p>
<p>バッファが名前を持つならその名前が代替ファイル名 |<a href="#alternate_002dfile">alternate-file</a>| になります。元の名前を保持するためにリストされない (unlisted) バッファが作成されます。
<span id="g_t_003a0file"></span><span id="index-_003a0file"></span>
</p></dd>
<dt>:0f[ile][!]</dt>
<dd><p>カレントバッファの名前を削除します。! をつけると |<a href="#g_t_003afile">:file</a>| のやうにメッセージを切り詰めなくなります。
</p>
</dd>
<dt>:buffers</dt>
<dt>:files</dt>
<dt>:ls</dt>
<dd><p>現在認識してゐるファイル名を全て一覽表示します。|<a href="windows_002etxt.html">windows.txt</a>| |<a href="windows_002etxt.html#g_t_003afiles">:files</a>| |<a href="windows_002etxt.html#g_t_003abuffers">:buffers</a>| |<a href="windows_002etxt.html#g_t_003als">:ls</a>| を參照してください。
</p></dd>
</dl>

<p>Vim は入力したファイル名のフルパス名を記憶してゐます。ファイル名が表示されるとき、大抵は打ち込んだ名前だけが表示されますが、コマンド |<a href="#g_t_003acd">:cd</a>| でディレクトリを移動した後では、フルパス名が使はれます。
</p>
<span id="home_002dreplace"></span><span id="index-home_002dreplace"></span>
<p>環境變數 <code>$HOME</code> が設定されてゐて、ファイル名がその文字列で始まつてゐるなら、ファイル名のその部分は &quot;~&quot; に置き換へられて表示されます。これはファイル名を短くするためです。ファイルを讀み書きするときはフルパス名が使はれ、&quot;~&quot; はファイル名を表示するときだけに使はれます。ファイル名の置き換へを行つたところ &quot;~&quot; だけになつてしまふときは、代はりに &quot;~/&quot; が使はれます (オプション &rsquo;<samp>backupext</samp>&rsquo; が &quot;~&quot; に設定されたときに混亂を防ぐため)。
</p>
<p>バッファを書き出すとき、既定ではカレントファイル名を用ゐます。そのため、コマンド &quot;<kbd>ZZ</kbd>&quot; や &quot;<code>:wq</code>&quot; を使ふと、元のファイルは上書きされてしまふことになります。これを望まないなら、コマンド &quot;<code>:write</code>&quot; の引數にファイル名を與へることで、バッファを別のファイルに書き出せます。例:
</p>
<pre class="verbatim">vim テスト用 {譯注: これはシェルに對して}
[コマンドでバッファを編輯する]
:w 新ファイル
:q
</pre>
<p>かうすると &quot;新ファイル&quot; が生成されますが、これは &quot;テスト用&quot; を編輯してコピーしたものです。ファイル &quot;テスト用&quot; は變更されないまま殘ります。しかしどちらにしろ、オプション &rsquo;<samp>backup</samp>&rsquo; がオンのときは、Vim は元のファイルを上書きする前に、元のファイルの名前を變更するかコピーします。元のファイルが必要なことに氣づいたときは、このファイルを使へます。&rsquo;<samp>patchmode</samp>&rsquo; も參照してください。
</p>
<p>普通、バックアップファイルの名前は元のファイル名に &rsquo;<samp>backupext</samp>&rsquo; を追加したものになります。既定値は &quot;~&quot; といふ妙なものですが、これはたまたま存在してゐるファイルに上書きするのを避けるためなのです。&quot;.bak&quot; の方がよければ、&rsquo;<samp>backupext</samp>&rsquo; を變更してください。MS-DOS 機等で、MS-DOS 系のファイルシステム (例へば、messydos や crossdos ) が使はれてゐることが檢出されたときや、&rsquo;<samp>shortname</samp>&rsquo; がオンのときには、餘分なドットは &rsquo;_&rsquo; に置き換へられます。&rsquo;<samp>backupdir</samp>&rsquo; を設定することで、バックアップファイルを他のディレクトリに置くことができます。
</p>
<span id="auto_002dshortname"></span><span id="index-auto_002dshortname"></span>
<blockquote>
<p><strong>技術的情報:</strong> <br>
Amiga ではファイル名に 30 文字まで使へます。しかし MS-DOS 互換のファイルシステムで有效なのは 8 文字＋ 3 文字に過ぎません。Vim は &quot;.swp&quot; ファイルを生成するときにファイルシステムの判別を試みます。MS-DOS 系のファイルシステムと思はれるときは、&rsquo;<samp>shortname</samp>&rsquo; をオンにするのと同じ效果を持つフラグがオンになります。このフラグは新ファイルの編輯を開始するとすぐにオフにされます。このフラグはカレントファイルのための &quot;.swp&quot; ファイルと &quot;.~&quot; ファイルの名前を作るときに使はれます。しかし、ユーザーが普通のファイルシステムで編輯作業を行ひ、MS-DOS 系のファイルシステムに保存するときには、フラグはオンにはなりません。そのときは、&quot;.~&quot; ファイルの生成が失敗してエラーメッセージが表示されます。そのときはオプション &rsquo;<samp>shortname</samp>&rsquo; を使つてくさだい。
</p></blockquote>

<p>ファイル名を指定せずに編輯を始めたときは、メッセージ欄に &quot;[無題]&quot; と表示されます。コマンド &quot;<code>:write</code>&quot; がファイル名引數付きで使はれたときは、そのファイル名がカレントファイルのファイル名に設定されます。
</p>
<p>かうなるのはフラグ &rsquo;<var>F</var>&rsquo; |<a href="options_002etxt.html#cpo_002dF">cpo-F</a>| がオプション &rsquo;<samp>cpoptions</samp>&rsquo; に含まれてゐるときだけです (既定では含まれてゐます)。これは空のバッファにテキストを入力してから、それをファイルに保存するときに便利です。
</p>
<p>&rsquo;<samp>cpoptions</samp>&rsquo; が &rsquo;<var>f</var>&rsquo; |<a href="options_002etxt.html#cpo_002df">cpo-f</a>| を含んでゐるときは (既定では含まれて「いません」)、&quot;<code>:read file</code>&quot; でファイル名が設定されます。これは引數なしで Vim を起動してから、&quot;<code>:read file</code>&quot; でファイルの編輯を開始するときに便利です。
</p>
<p>ファイル名が設定されてゐて &rsquo;<samp>filetype</samp>&rsquo; が空のとき、ファイルタイプ判別自動コマンドが發生します。
<span id="not_002dedited"></span><span id="index-not_002dedited"></span>
ファイル名が設定されるのはその名前のファイルの編輯を本當に始めるより前なので、そのファイルを誤つて上書きしないやうになつてゐます。これはフラグ &quot;<var>notedited</var>&quot; を設定することで可能になります。このフラグの狀態はコマンド <kbd>CTRL-G</kbd> か &quot;<code>:file</code>&quot; で確認できます。フラグ &quot;<var>notedited</var>&quot; がオンのときは &quot;[Not edited]&quot; と表示されます。カレントファイルの名前でバッファ內容を書き出すとき (&quot;<code>:w!</code>&quot; で)、フラグ &quot;<var>notedited</var>&quot; はオフに設定されます。
</p>
<span id="abandon"></span><span id="index-abandon"></span>
<p>Vim はバッファが變更されたかどうかを記憶してゐて、變更點が誤つて失はれないやうになつてゐます。保存せずに終了しようとしたり、別のファイルの編輯を開始しようとすると、Vim は拒否します。この保護を無效にするためには、コマンドに &rsquo;!&rsquo; を追加してください。この場合、變更は失はれます。例へばバッファの內容が變更されてゐるとき、&quot;<code>:q</code>&quot; は使へませんが &quot;<code>:q!</code>&quot; は使へます。バッファの內容が變更されたかどうかを見るためにはコマンド <kbd>CTRL-G</kbd> を使つてください。バッファが變更されてゐたときは、メッセージに文字列 &quot;[變更あり]&quot;、&rsquo;<var>m</var>&rsquo; フラグが &rsquo;<samp>shortmess</samp>&rsquo; のときは &quot;+&quot; が含まれます。
</p>
<p>確認なしで變更を保存してほしいなら、オプション &rsquo;<samp>autowriteall</samp>&rsquo; をオンにしてください。關聯するオプションには &rsquo;<samp>autowrite</samp>&rsquo; がありますが、これは Vi 互換で、全てのコマンドに對して動作するわけではありません。
</p>
<p>變更されたバッファを保存せずにそのままにしておきたいなら、オプション &rsquo;<samp>hidden</samp>&rsquo; をオンにしてください。|<a href="windows_002etxt.html#hidden_002dbuffer">hidden-buffer</a>| を參照してください。いくつかのコマンドは &rsquo;<samp>hidden</samp>&rsquo; がオンになつてゐなくてもこのやうに振る舞ふので、コマンドについてはヘルプを參照してください。
</p>
<span id="edit_002da_002dfile"></span><span id="index-edit_002da_002dfile"></span>
<span id="index-huairunoBian-Ji--1"></span>
<span id="g_t2_002e-huairunoBian-Ji-"></span><h3 class="section">2. ファイルの編輯</h3>

<span id="g_t_003ae"></span><span id="g_t_003aedit"></span><span id="reload"></span><span id="index-_003ae"></span>
<span id="index-_003aedit"></span>
<span id="index-reload"></span>
<dl compact="compact">
<dt>:e[dit] [++opt] [+cmd]</dt>
<dd><p>カレントファイルを開きます。これは Vim 外部でカレントファイルに變更が加へられたとき、開き直すのに便利です。カレントバッファに變更が加へられてゐるのに、オプション &rsquo;<samp>autowriteall</samp>&rsquo; がオフであるか、ファイルが書き込み可能でないときは、實行に失敗します。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003aedit_0021"></span><span id="discard"></span><span id="index-_003aedit_0021"></span>
<span id="index-discard"></span>
</dd>
<dt>:e[dit]! [++opt] [+cmd]</dt>
<dd><p>どのやうな場合でもカレントファイルを開きます。カレントバッファに對する變更は全て失はれます。これは編輯作業をもう一度最初からやり直したいときに便利です。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003aedit_005ff"></span><span id="index-_003aedit_005ff"></span>
</dd>
<dt>:e[dit] [++opt] [+cmd] {file}</dt>
<dd><p>{file} を開きます。
</p>
<p>カレントバッファに變更が加へられてゐると實行に失敗します。ただしオプション &rsquo;<samp>hidden</samp>&rsquo; がオンであるときと、&rsquo;<samp>autowriteall</samp>&rsquo; がオンであり、かつファイルが書き込み可能なときには實行できます。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003aedit_0021_005ff"></span><span id="index-_003aedit_0021_005ff"></span>
</dd>
<dt>:e[dit]! [++opt] [+cmd] {file}</dt>
<dd><p>どのやうな場合でも {file} を開きます。カレントバッファに對する變更は全て失はれます。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
</dd>
<dt>:e[dit] [++opt] [+cmd] #[count]</dt>
<dd><p>[count] 番目のバッファ (コマンド |<a href="windows_002etxt.html#g_t_003afiles">:files</a>| で表示されるもの) を開きます。このコマンドは [count] <kbd>CTRL-^</kbd> と同じです。しかし代替バッファがファイル名を持たないと &quot;<code>:e #</code>&quot; は機能しませんが、<kbd>CTRL-^</kbd> はそのときも機能します。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003aene"></span><span id="g_t_003aenew"></span><span id="index-_003aene"></span>
<span id="index-_003aenew"></span>
</dd>
<dt>:ene[w]</dt>
<dd><p>無名のバッファの編輯を新規に開始します。カレントバッファに變更が加へられてゐると實行に失敗します。ただしオプション &rsquo;<samp>hidden</samp>&rsquo; がオンであるときと、&rsquo;<samp>autowriteall</samp>&rsquo; がオンであり、かつファイルが書き込み可能なときには實行できます。
</p>
<p>&rsquo;<samp>fileformats</samp>&rsquo; の値が空でないとき、その先頭の形式が新バッファに適用されます。&rsquo;<samp>fileformats</samp>&rsquo; の値が空のときは、カレントバッファの &rsquo;<samp>fileformat</samp>&rsquo; の値が使はれます。
</p>
<span id="g_t_003aene_0021"></span><span id="g_t_003aenew_0021"></span><span id="index-_003aene_0021"></span>
<span id="index-_003aenew_0021"></span>
</dd>
<dt>:ene[w]!</dt>
<dd><p>無名のバッファの編輯を新規に開始します。カレントバッファに對する變更は全て失はれます。
</p>
<p>オプション &rsquo;<samp>fileformat</samp>&rsquo; の値はコマンド |<a href="#g_t_003aenew">:enew</a>| と同樣に設定されます。
</p>
<span id="g_t_003afin"></span><span id="g_t_003afind"></span><span id="index-_003afin"></span>
<span id="index-_003afind"></span>
</dd>
<dt>:fin[d][!] [++opt] [+cmd] {file}</dt>
<dd><p>オプション &rsquo;<samp>path</samp>&rsquo; 內のディレクトリから {file} を探し、それを編輯 |<a href="#g_t_003aedit">:edit</a>| します。
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bfile_005fin_005fpath">+file_in_path</a>| 機能付きでコンパイルされたときのみ有效}
</p>
</dd>
<dt>:{count}fin[d][!] [++opt] [+cmd] {file}</dt>
<dd><p>コマンド &quot;<code>:find</code>&quot; と同樣ですが、オプション &rsquo;<samp>path</samp>&rsquo; 內のディレクトリで {count} にマッチしたファイルを編輯します。つまり &quot;<code>:2find file</code>&quot; とすると &rsquo;<samp>path</samp>&rsquo; 內で 2 番目に見つかつた &quot;file&quot; を編輯します。&rsquo;<samp>path</samp>&rsquo; 內で見つかつたマッチが {count} より少ないと、エラーメッセージが表示されます。
</p>
<span id="g_t_003aex"></span><span id="index-_003aex"></span>
</dd>
<dt>:ex [++opt] [+cmd] [file]</dt>
<dd><p>|<a href="#g_t_003aedit">:edit</a>| と同じです。
</p>
<span id="g_t_003avi"></span><span id="g_t_003avisual"></span><span id="index-_003avi"></span>
<span id="index-_003avisual"></span>
</dd>
<dt>:vi[sual][!] [++opt] [+cmd] [file]</dt>
<dd><p>Ex モード內では: Ex モード (|<a href="intro_002etxt.html#Ex_002dmode">Ex-mode</a>|) からノーマルモードに戾ります。それ以外はコマンド |<a href="#g_t_003aedit">:edit</a>| と同じです。
</p>
<span id="g_t_003avie"></span><span id="g_t_003aview"></span><span id="index-_003avie"></span>
<span id="index-_003aview"></span>
</dd>
<dt>:vie[w][!] [++opt] [+cmd] file</dt>
<dd><p>Ex モード內では: Ex モード (|<a href="intro_002etxt.html#Ex_002dmode">Ex-mode</a>|) からノーマルモードに戾ります。それ以外はコマンド |<a href="#g_t_003aedit">:edit</a>| と同じですが、そのバッファに對してオプション &rsquo;<samp>readonly</samp>&rsquo; をオンにします。
</p>
<span id="CTRL_002d_005e"></span><span id="CTRL_002d6"></span><span id="index-CTRL_002d_005e"></span>
<span id="index-CTRL_002d6"></span>
</dd>
<dt>CTRL-^</dt>
<dd><p>代替ファイルを編輯します。たいていの場合、代替ファイルは前に編輯したファイルです。これを使ふと 2 つのファイル閒を素早く切り替へることができます。これは &quot;<code>:e #</code>&quot; と同じですが、對象のファイル名が無い場合も機能します。
</p>
<p>オプション &rsquo;<samp>autowrite</samp>&rsquo; か &rsquo;<samp>autowriteall</samp>&rsquo; がオンならば、バッファを移動するときに書き込みをします。
</p>
<p>たいていは &quot;^&quot; と &quot;6&quot; は同じキーです。<code class="tt-key">CTRL</code> を押しながら <code class="tt-key">6</code> のキーを押せば <kbd>CTRL-^</kbd> を押したのと同じ效果を得られます。しかし英語排列でないキーボードでは他のキーが割り當てられます。
</p>
</dd>
<dt>{count}CTRL-^</dt>
<dd><p>[count] 番目の代替ファイルを編輯します (コマンド &quot;<code>:e #[count]</code>&quot; と同じ)。[count] が指定されないと、前に編輯したファイルを編輯します。これを使ふと 2 つ (かそれ以上) のファイル閒を素早く行き來できます。
</p>
<p>さらに詳しくは上の |<a href="#CTRL_002d_005e">CTRL-^</a>| を參照。
</p>
<span id="g_t_005df"></span><span id="g_t_005bf"></span><span id="index-_005df"></span>
<span id="index-_005bf"></span>
</dd>
<dt>[count]]f</dt>
<dt>[count][f</dt>
<dd><p>コマンド &quot;gf&quot; と同じです。推奬されません。
</p>
<span id="gf"></span><span id="E446"></span><span id="E447"></span><span id="index-gf"></span>
<span id="index-E446"></span>
<span id="index-E447"></span>
</dd>
<dt>[count]gf</dt>
<dd><p>カーソルの下か後ろの名前のファイルを編輯します。覺え方: &quot;goto file&quot;。
</p>
<p>オプション &rsquo;<samp>isfname</samp>&rsquo; により、どの文字がファイル名に使はれるはずなのかを調べます。ファイル名に續く句讀點の &quot;.,:;!&quot; は無視されます。エスケープされた複數のスペース &quot;\ &quot; は 1 つのスペースに減らされます。
</p>
<p>&rsquo;<samp>path</samp>&rsquo; により、ファイルを探すディレクトリ名のリストを調べます。カレントファイルに對して相對的なファイルも探されます。
</p>
<p>&rsquo;<samp>suffixesadd</samp>&rsquo; により、擴張子を補つたファイル名を調べます。
ファイルが見つからないと、&rsquo;<samp>includeexpr</samp>&rsquo; によつてファイル名を修正し、再びファイルを探します。
</p>
<p>[count] が指定されると、&rsquo;<samp>path</samp>&rsquo; 內で見つかつた [count] 番目のファイルを編輯します。
</p>
<p>Vim がカレントファイルの破毀 |<a href="#abandon">abandon</a>| を拒否したときは、このコマンドの實行は失敗します。
</p>
<p>このファイルを新しいウィンドウで編輯したいときは |<a href="windows_002etxt.html#CTRL_002dW_005fCTRL_002dF">CTRL-W_CTRL-F</a>| を使つてください。
新しいファイルを編輯したいなら次のやうにします。
</p><pre class="verbatim">:e &lt;cfile&gt;
</pre><p>どのやうな場合でもコマンド gf を機能させるには次のやうにします。
</p><pre class="verbatim">:map gf :e &lt;cfile&gt;&lt;CR&gt;
</pre><p>カーソル下のファイル名が &quot;type://machine/path&quot; のやうなハイパーテキストリンクであるなら、プラグイン |<a href="pi_005fnetrw_002etxt.html#netrw">netrw</a>| が必要になります。
</p>
<p>Unix では、文字 &rsquo;~&rsquo; は &quot;~user/file&quot; のやうに展開されます。環境變數も展開されます |<a href="options_002etxt.html#expand_002denv">expand-env</a>|。
</p>
<p>{Vimが |<a href="various_002etxt.html#g_t_002bfile_005fin_005fpath">+file_in_path</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<span id="v_005fgf"></span><span id="index-v_005fgf"></span>
</dd>
<dt>{Visual}[count]gf</dt>
<dd><p>コマンド &quot;gf&quot; と同じですが、編輯するファイルの名前にはビジュアル選擇されたテキストが使はれます。オプション &rsquo;<samp>isfname</samp>&rsquo; の値は無視されます。先頭の空白は無視されますが、それ以外の空白や特殊文字はファイル名に含まれます。({Visual} については |<a href="visual_002etxt.html#Visual_002dmode">Visual-mode</a>| を參照してください。)
</p>
<span id="gF"></span><span id="index-gF"></span>
</dd>
<dt>[count]gF</dt>
<dd><p>&quot;gf&quot; と同じですが、ファイル名の後に番號があるときは、その行へカーソルが移動する點が異なります。ファイル名と行番號は、ファイル名ではない文字 (&rsquo;<samp>isfname</samp>&rsquo; を參照してください) かつ數字ではない文字で區切られてなければなりません。ファイル名、區切り文字、番號の閒の空白文字は無視されます。
</p>
<p>例:
</p><pre class="verbatim">eval.c:10
eval.c @ 20
eval.c (30)
eval.c 40
</pre>
<span id="v_005fgF"></span><span id="index-v_005fgF"></span>
</dd>
<dt>{Visual}[count]gF</dt>
<dd><p>&quot;v_gf&quot; と同じです。
</p></dd>
</dl>

<p>以上のコマンドは 1 つのファイルの編輯を開始するために使用されます。これはファイルがバッファに讀み込まれ、カレントファイル名が設定されることを意味します。開かれるファイルはカレントディレクトリに依存します。コマンド |<a href="#g_t_003acd">:cd</a>| を參照してください。
</p>
<p>ファイルが讀み込まれた後に表示されるメッセージの說明については |<a href="insert_002etxt.html#read_002dmessages">read-messages</a>| を參照してください。
</p>
<p>バッファ內がめちやめちやになつて最初からもう 1 度やり直したいときには、コマンド &quot;<code>:e!</code>&quot; が使へます。コマンド &quot;<code>:e</code>&quot; が便利なのは、カレントファイル名を變更したときだけです。
</p>
<span id="g_t_003afilename"></span><span id="g_t_007bfile_007d"></span><span id="index-_003afilename"></span>
<span id="index-_007bfile_007d"></span>
<p>ファイル名を指定する場所で使へる特殊なアイテムについては、この節で書かれてゐることの他に |<a href="cmdline_002etxt.html#cmdline_002dspecial">cmdline-special</a>| に書かれてゐます。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
Unix と MS-DOS 以外に對する注意: 1 つのファイル名を受け付けるコマンド (&quot;<code>:edit file</code>&quot; 等) では、ファイル名に空白が入つてゐても構ひませんが、ファイル名末尾の空白は無視されます。これは、空白を含むファイル名が普通にあるシステム (MS-Windows, Amiga 等) では便利です。例: &quot;<code>:e   Long File Name </code>&quot; を實行すると、ファイル &quot;Long File Name&quot; を開きます。
</p>
<p>2 つ以上のファイル名を受け付けるコマンド (&quot;<code>:next file1 file2</code>&quot; 等) では、ファイル名內の空白は &rsquo;\&rsquo; でエスケープしなければなりません。
</p></blockquote>

<span id="wildcard"></span><span id="wildcards"></span><span id="index-wildcard"></span>
<span id="index-wildcards"></span>
<span id="index-wairudokado"></span>
<p>{file} 內のワイルドカードは展開されます。ただし、ファイル名補完と同樣に &rsquo;<samp>wildignore</samp>&rsquo; と &rsquo;<samp>suffixes</samp>&rsquo; が適用されます。使用できるワイルドカードの種類はシステムによつて異なります。標準的なものは以下です。
</p><table>
<tr><td width="15%">?</td><td width="85%">あらゆる 1 文字にマッチ</td></tr>
<tr><td width="15%">*</td><td width="85%">何もないのも含め、全てにマッチ</td></tr>
<tr><td width="15%">**</td><td width="85%">何もないのも含め、全てにマッチ。ディレクトリを再歸的にたどる。</td></tr>
<tr><td width="15%">[abc]</td><td width="85%">&rsquo;a&rsquo;, &rsquo;b&rsquo; または &rsquo;c&rsquo; にマッチ</td></tr>
</table>

<p>ワイルドカードとしての特別な意味を無效にするには、前に &rsquo;\&rsquo; を置いてください。しかし MS-Windows では &rsquo;\&rsquo; がパスの區切り文字なので、オプション &rsquo;<samp>isfname</samp>&rsquo; の値に &quot;[&quot; が含まれてゐると、&quot;path\[abc]&quot; はワイルドカード扱ひになつてしまひます。これを避ける單純な方法は、&quot;path\[[]abc]&quot; とすることです。かうすると文字通りのファイル &quot;path[abc]&quot; を編輯できます。
</p>
<span id="starstar_002dwildcard"></span><span id="index-starstar_002dwildcard"></span>
<p>&quot;**&quot; の展開は、Unix, Win32, Mac OS/X、その他數種類のシステムでのみ使用できます。&quot;**&quot; はディレクトリツリーを再歸的に檢索します。深さの上限は 100 ディレクトリです。
</p><blockquote>
<p><strong>Note:</strong> <br>
いくつかのコマンドでは、この擧動が少し異なることに注意してください。|<a href="#file_002dsearching">file-searching</a>| を參照してください。
</p></blockquote>
<p>例:
</p><pre class="verbatim">:n **/*.txt
</pre><p>これは次のファイルにマッチします:
</p><pre class="verbatim">aaa.txt
subdir/bbb.txt
a/b/c/d/ccc.txt
</pre><p>&quot;**&quot; の直前または直後にワイルドカード以外の文字が使用されてゐる場合、これらはトップディレクトリでのみマッチします。これらは、ツリーのさらに下のディレクトリには使用されません。例:
</p><pre class="verbatim">:n /usr/inc**/types.h
</pre><p>これは次のファイルにマッチします:
</p><pre class="verbatim">/usr/include/types.h
/usr/include/sys/types.h
/usr/inc/old/types.h
</pre><blockquote>
<p><strong>Note:</strong> <br>
&quot;/inc&quot; とマッチする必要がないため、&quot;/sys&quot; を含むパスが含まれてゐることに注意してください。したがつて、&quot;/usr/inc*/inc*/inc*&quot; ではなく、&quot;/usr/inc*/*/*...&quot; にマッチするやうなものです。
</p></blockquote>

<span id="backtick_002dexpansion"></span><span id="g_t_0060_002dexpansion"></span><span id="index-backtick_002dexpansion"></span>
<span id="index-_0060_002dexpansion"></span>
<p>Unix などではファイル名の引數にバッククォート &rsquo;&lsquo;&rsquo; も使へます。例:
</p><pre class="verbatim">:next `find . -name ver\\*.c -print`
:view `ls -t *.patch  \| head -n1`
</pre><p>Vim はバッククォート內のコマンドをシェルで實行し、その標準出力を Vim コマンドの引數とします (シェルからのエラーメッセージは破毀されます)。
</p>
<p>Vim が何のシェルコマンドを實行してゐるのか確認するためには、&rsquo;<samp>verbose</samp>&rsquo; オプションに 4 を設定します。シェルコマンドが 0 以外の終了コードを返した場合、エラーメッセージが表示され Vim コマンドは中斷されます。これを防ぐためには、次のやうにしてシェルが常に 0 を返すやうにします:
</p><pre class="verbatim">:next `find . -name ver\\*.c -print \|\| true`
</pre>
<p>アスタリスク &rsquo;*&rsquo; の前の &rsquo;\&rsquo; は、シェルが find を實行する前に &quot;ver*.c&quot; を展開してしまふのを防ぐために必要となります。シェルのパイプ記號 &quot;|&quot; の前のバックスラッシュは Vim がコマンドの終はりとしてパースするのを防ぎます。
</p>
<p>これは、必ず項目全體がバッククォートで括られてゐるといふ制限付きで、他の多くのシステムでも機能します。最初のバッククォートの直前や最後のバッククォートの直後に文字列を書くことはできません。
</p>
<span id="g_t_0060_003d"></span><span id="index-_0060_003d"></span>
<p>バッククォート內を、外部コマンドとしてではなく Vim の式として展開させることもできます。そのためには初めのバッククォートのすぐ後に等號を置きます。例:
</p><pre class="verbatim">:e `=tempname()`
</pre><p>この式はほとんど何でも含むことができます。そのため、これを使つて &rsquo;&quot;&rsquo;, &rsquo;|&rsquo;, &rsquo;%&rsquo;, &rsquo;#&rsquo; の特別な意味を打ち消すこともできます。ただし、他のワイルドカードと同樣に &rsquo;<samp>wildignore</samp>&rsquo; は適用されます。
</p>
<p>この式の中の環境變數は式が評價される時に展開されます。したがつてこれは機能します:
</p><pre class="verbatim">:e `=$HOME . '/.vimrc'`
</pre><p>これは機能しません。<code>$HOME</code> は文字列內にあり、文字通りに用ゐられます:
</p><pre class="verbatim">:e `='$HOME' . '/.vimrc'`
</pre>
<p>式が文字列を返したときは名前は改行で區切られます。式の結果がリスト (|<a href="eval_002etxt.html#List">List</a>|) のときは各要素が名前として扱はれます。改行によつても名前は區切られます。
</p><blockquote>
<p><strong>Note:</strong> <br>
そのやうな式はファイル名が Ex コマンドの引數として期待される場所でのみサポートされることに注意してください。
</p></blockquote>

<span id="g_t_002b_002bopt"></span><span id="g_t_005b_002b_002bopt_005d"></span><span id="index-_002b_002bopt"></span>
<span id="index-_005b_002b_002bopt_005d"></span>
<p>引數のうち [++opt] はオプション &rsquo;<samp>fileformat</samp>&rsquo;, &rsquo;<samp>fileencoding</samp>&rsquo; または &rsquo;<samp>binary</samp>&rsquo; の値を、そのコマンドに限つてある値に指定し、不正な文字への對應を指定するために使はれます。指定の形式は次の通りです。
</p><pre class="verbatim">++{optname}
</pre><p>または
</p><pre class="verbatim">++{optname}={value}
</pre>
<span id="g_t_002b_002bff"></span><span id="g_t_002b_002benc"></span><span id="g_t_002b_002bbin"></span><span id="g_t_002b_002bnobin"></span><span id="g_t_002b_002bedit"></span><span id="index-_002b_002bff"></span>
<span id="index-_002b_002benc"></span>
<span id="index-_002b_002bbin"></span>
<span id="index-_002b_002bnobin"></span>
<span id="index-_002b_002bedit"></span>
<p>{optname} は次のうちのどれかです:
</p><table>
<tr><td width="40%">ff または fileformat</td><td width="60%">&rsquo;<samp>fileformat</samp>&rsquo; を指定</td></tr>
<tr><td width="40%">enc または encoding</td><td width="60%">&rsquo;<samp>fileencoding</samp>&rsquo; を指定</td></tr>
<tr><td width="40%">bin または binary</td><td width="60%">&rsquo;<samp>binary</samp>&rsquo; を指定</td></tr>
<tr><td width="40%">nobin または nobinary</td><td width="60%">&rsquo;<samp>binary</samp>&rsquo; を無效にする</td></tr>
<tr><td width="40%">bad</td><td width="60%">不正な文字への對應を指定する</td></tr>
<tr><td width="40%">edit</td><td width="60%">|<a href="insert_002etxt.html#g_t_003aread">:read</a>| 用。ファイルを編輯するときと同じやうにオプションの値を保つ</td></tr>
</table>

<p>{value} に空白を含めてはいけません。値は、そのオプションに對して適切なものなら何でもよい。例:
</p><pre class="verbatim">:e ++ff=unix
</pre><p>かうすると &rsquo;<samp>fileformat</samp>&rsquo; を &quot;<var>unix</var>&quot; に設定して同じファイルを編輯し直します。
</p><pre class="verbatim">:w ++enc=latin1 newfile
</pre><p>かうするとカレントバッファの內容を latin1 の文字コードで &quot;newfile&quot; に書き出します。
</p>
<p>空白で區切られた複數の [++opt] 引數になるかもしれません。それらはみな |<a href="#g_t_002bcmd">+cmd</a>| 引數よりも前に指定しなければなりません。
</p>
<span id="g_t_002b_002bbad"></span><span id="index-_002b_002bbad"></span>
<p>&quot;++bad=&quot; の引數は、變換できない文字と不正なバイトをどうするかを指定します。とりうる値は次の 3 つのうちどれかです:
</p><table>
<tr><td width="20%">++bad=X</td><td width="80%">不正な文字をこの 1 バイト文字で置き換へる</td></tr>
<tr><td width="20%">++bad=keep</td><td width="80%">不正な文字を變換せずにそのままにしておく
<blockquote>
<p><strong>Note:</strong> <br>
これを使ふとテキスト中に不正なバイトが現れることになることに注意してください！
</p></blockquote></td></tr>
<tr><td width="20%">++bad=drop</td><td width="80%">不正な文字を削除する</td></tr>
</table>

<p>既定値は &quot;++bad=?&quot; のやうになつてゐます。つまり、不正な文字をそれぞれクエスチョンマーク ? で置き換へます。逆クエスチョンマーク ¿ (latin-1 の 0xBF) が使はれる場所もあります。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
++bad をつけてエラーにならなかつたとしても、すべてのコマンドが ++bad に對應してゐるわけではないことに注意してください。例 |<a href="#g_t_003awrite">:write</a>|。
</p></blockquote>

<blockquote>
<p><strong>Note:</strong> <br>
讀み込み時に上の方法で &rsquo;<samp>fileformat</samp>&rsquo; と &rsquo;<samp>fileencoding</samp>&rsquo; を指定すると、それらは以後その値に設定されることに注意してください。書き込み時に設定してもさうはならず、次に書き込むときには以前の値が使はれます。&rsquo;<samp>binary</samp>&rsquo; オプションも同樣です。
</p></blockquote>


<span id="g_t_002bcmd"></span><span id="g_t_005b_002bcmd_005d"></span><span id="index-_002bcmd"></span>
<span id="index-_005b_002bcmd_005d"></span>
<p>引數 [+cmd] は、新しく開いたファイルでカーソルの位置を指定したり、他のあらゆるコマンドを實行するために使はれます:
</p><table>
<tr><td width="25%">+</td><td width="75%">最後の行で編輯を開始する</td></tr>
<tr><td width="25%">+{num}</td><td width="75%">{num} 行目で編輯を開始する</td></tr>
<tr><td width="25%">+/{pat}</td><td width="75%">{pat} を含んだ最初の行で編輯を開始する</td></tr>
<tr><td width="25%">+{command}</td><td width="75%">新しいファイルを開いた後に {command} を實行する。{command} には任意の Ex コマンドが使へる</td></tr>
</table>
<p>{pat} や {command} に空白を含めるためには、その前に &rsquo;\&rsquo; を付けます。&rsquo;\&rsquo; そのものを使ふには 2 回ずつ繰り返してください。
</p><pre class="verbatim">:edit  +/The\ book           ファイル
:edit  +/dir\ dirname\\      ファイル
:edit  +set\ dir=c:\\\\temp  ファイル
</pre><blockquote>
<p><strong>Note:</strong> <br>
最後の例では &rsquo;\&rsquo; の繰り返しが 2 回行はれてゐることに注意してください。&quot;+cmd&quot; の引數なので 1 回、コマンド &quot;<code>:set</code>&quot; のためにもう 1 回です。
</p></blockquote>

<span id="file_002dformats"></span><span id="index-file_002dformats"></span>
<p>オプション &rsquo;<samp>fileformat</samp>&rsquo; はファイルに對して &lt;EOL&gt; の形式を設定します:
</p><table>
<thead><tr><th width="30%">&rsquo;<samp>fileformat</samp>&rsquo;</th><th width="45%">&lt;EOL&gt; の文字</th><th width="25%">形式の名稱
<span id="DOS_002dformat"></span><span id="index-DOS_002dformat"></span></th></tr></thead>
<tr><td width="30%">&quot;dos&quot;</td><td width="45%">&lt;CR&gt;&lt;NL&gt; または &lt;NL&gt;</td><td width="25%">DOS 形式
<span id="Unix_002dformat"></span><span id="index-Unix_002dformat"></span></td></tr>
<tr><td width="30%">&quot;unix&quot;</td><td width="45%">&lt;NL&gt;</td><td width="25%">Unix 形式
<span id="Mac_002dformat"></span><span id="index-Mac_002dformat"></span></td></tr>
<tr><td width="30%">&quot;mac&quot;</td><td width="45%">&lt;CR&gt;</td><td width="25%">Mac 形式</td></tr>
</table>
<p>以前はオプション &rsquo;<samp>textmode</samp>&rsquo; が使はれてゐました。現在ではそれはもはや使はれてゐません。
</p>
<p>ファイルを讀み込むときに、上で述べた文字は &lt;EOL&gt; として解釋されます。DOS 形式 (MS-DOS、OS/2 と Win32 での既定値) では、&lt;CR&gt;&lt;NL&gt; と &lt;NL&gt; の兩方が &lt;EOL&gt; と解釋されます。
</p><blockquote>
<p><strong>Note:</strong> <br>
DOS 形式でファイルを保存するときには、&lt;NL&gt; 1 個ごとに對して &lt;CR&gt; が追加されることに注意してください。|<a href="insert_002etxt.html#file_002dread">file-read</a>| も參照してください。
</p></blockquote>

<p>ファイルを書き込むときには、上で述べた文字が &lt;EOL&gt; として使はれます。DOS 形式では &lt;CR&gt;&lt;NL&gt; が使はれます。|<a href="#DOS_002dformat_002dwrite">DOS-format-write</a>| も參照してください。
</p>
<p>DOS 形式でファイルを讀み込んで、Unix 形式でそれを保存することも可能です。(&rsquo;<samp>fileformats</samp>&rsquo; が &quot;dos&quot; を含んでゐると假定すると) 以下の操作は全ての &lt;CR&gt;&lt;NL&gt; を &lt;NL&gt; で置き換へることになります。
</p><pre class="verbatim">:e ファイル
:set fileformat=unix
:w
</pre><p>(&rsquo;<samp>fileformats</samp>&rsquo; の値に &quot;unix&quot; が含まれてゐるとき) Unix 形式でファイルを讀み込んで、DOS 形式で保存すると、&lt;NL&gt; は全て &lt;CR&gt;&lt;NL&gt; で置き換へられます。
</p><pre class="verbatim">:e ファイル
:set fileformat=dos
:w
</pre>
<p>新しいファイルの編輯を開始したときオプション &rsquo;<samp>fileformats</samp>&rsquo; の値が空でないなら (それがデフォルト)、Vim はファイルが指定された形式で改行されてゐるかどうか檢出を試みます。値が &quot;<var>unix</var>,<var>dos</var>&quot; であるときは、Vim は 1 個の &lt;NL&gt; (Unix と Amiga 形式) か &lt;CR&gt;&lt;NL&gt; の組 (MS-DOS 形式) が使はれるものとして行を調べます。全ての行が &lt;CR&gt;&lt;NL&gt; で終はつてゐるときだけ、&rsquo;<samp>fileformat</samp>&rsquo; の値は &quot;<var>dos</var>&quot; に設定され、さうでなければ &quot;<var>unix</var>&quot; に設定されます。&rsquo;<samp>fileformats</samp>&rsquo; の値が &quot;<var>mac</var>&quot; を含んでゐて、ファイルに &lt;NL&gt; が 1 個も見つからないときは、&rsquo;<samp>fileformat</samp>&rsquo; の値は &quot;<var>mac</var>&quot; に設定されます。
</p>
<p>&rsquo;<samp>fileformat</samp>&rsquo; の値が MS-DOS 以外のシステム上で &quot;<var>dos</var>&quot; に設定されると、普通でないことが起きてゐることを氣づかせるために、メッセージ &quot;[dosフォーマット]&quot; が表示されます。&rsquo;<samp>fileformat</samp>&rsquo; の値が &quot;<var>unix</var>&quot; であると、MS-DOSシステムでは &quot;[unixフォーマット]&quot; のメッセージが表示されます。&rsquo;<samp>fileformat</samp>&rsquo; の値が &quot;<var>mac</var>&quot; であると、Macintosh 以外の全てのシステムでは、メッセージ &quot;[macフォーマット]&quot; が表示されます。
</p>
<p>オプション &rsquo;<samp>fileformats</samp>&rsquo; の値が空で、DOS 形式が使用されてゐるけれども、ファイルを讀み込んでゐるときにいくつかの行が &lt;CR&gt;&lt;NL&gt; で終はつてゐなかつたならば、ファイルのメッセージ內に &quot;[CR無]&quot; が含まれます。
</p>
<p>&rsquo;<samp>fileformats</samp>&rsquo; の値が空で、Mac 形式が使用されてゐるけれども、ファイルを讀み込んでゐるときに &lt;NL&gt; が見つかつたならば、ファイルのメッセージ內に &quot;[NL無]&quot; が含まれます。
</p>
<p>新しいファイルが存在しないと、&rsquo;<samp>fileformats</samp>&rsquo; の値が空のときにはカレントバッファの &rsquo;<samp>fileformat</samp>&rsquo; の値が使はれます。さうでなければ、&rsquo;<samp>fileformats</samp>&rsquo; 內の 1 番目の形式が新しいファイルに對して用ゐられます。
</p>
<p>實行可能ファイルやバイナリファイル、Vim script ファイルを編輯する前には、オプション &rsquo;<samp>binary</samp>&rsquo; をオンに設定するべきです。これにはオプション &quot;-b&quot; を付けて Vim を起動するのが簡單です。かうすると &rsquo;<samp>fileformat</samp>&rsquo; が使はれなくなります。こうしないと 1 個の &lt;NL&gt; が不意に &lt;CR&gt;&lt;NL&gt; で置き換へられてしまふことを覺悟しなければなりません。
</p>
<p>オプション &rsquo;<samp>key</samp>&rsquo; をオンに設定することで、保存されるファイルを暗號化できます。これは他人がユーザーのファイルを讀むことに對して、ある程度の安全を保證します。|<a href="#encryption">encryption</a>|
</p>

<span id="argument_002dlist"></span><span id="arglist"></span><span id="index-argument_002dlist"></span>
<span id="index-arglist"></span>
<span id="index-Yin-Shu-risuto"></span>
<span id="g_t3_002e-Yin-Shu-risuto"></span><h3 class="section">3. 引數リスト</h3>

<p>Vim の開始時に複數のファイル名を與へると、それらは引數リストとして記憶されます。リスト內のファイルにはどれでも移動できます。
</p>
<p>これをコマンド |<a href="windows_002etxt.html#g_t_003abuffers">:buffers</a>| で表示されるバッファリストと混同してはいけません。引數リストは Vi から既にありましたが、バッファリストは Vim で新たに導入されました。引數リスト內のファイルはバッファリストにも含まれます (コマンド |<a href="windows_002etxt.html#g_t_003abdel">:bdel</a>| や |<a href="windows_002etxt.html#g_t_003abwipe">:bwipe</a>| で消去されない限り)。逆にバッファリスト內のファイルが引數リストに含まれないことは普通にあります。
</p>
<p>この話題はユーザーマニュアルの第 |<a href="usr_005f07_002etxt.html#g_t07_002e2">07.2</a>| 章で紹介されてゐます。
</p>
<p>グローバルな引數リストが 1 個あり、これは既定では全てのウィンドウに使はれます。ウィンドウについてローカルな引數リストを新たに創ることもできます。|<a href="#g_t_003aarglocal">:arglocal</a>| を參照してください。
</p>
<p>引數リストは以下のコマンド及び expression 用函數 |<a href="eval_002etxt.html#argc_0028_0029">argc()</a>| と |<a href="eval_002etxt.html#argv_0028_0029">argv()</a>| で利用することができます。これらはみなカレントウィンドウの引數リストに對して働きます。
</p>
<span id="g_t_003aar"></span><span id="g_t_003aarg"></span><span id="g_t_003aargs"></span><span id="index-_003aar"></span>
<span id="index-_003aarg"></span>
<span id="index-_003aargs"></span>
<dl compact="compact">
<dt>:ar[gs]</dt>
<dd><p>引數リストを表示します。カレントファイルは &rsquo;[&rsquo; &rsquo;]&rsquo; で挾まれて表示されます。
</p>
<span id="g_t_003aargs_005ff"></span><span id="index-_003aargs_005ff"></span>
</dd>
<dt>:ar[gs] [++opt] [+cmd] {arglist}</dt>
<dd><p>{arglist} を新たな引數リストとして定義し、そのうち最初のファイルの編輯を始めます。變更點があり、Vim がカレントバッファを抛棄 |<a href="#abandon">abandon</a>| したくないときには失敗します。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003aargs_005ff_0021"></span><span id="index-_003aargs_005ff_0021"></span>
</dd>
<dt>:ar[gs]! [++opt] [+cmd] {arglist}</dt>
<dd><p>{arglist} を新たな引數リストとして定義し、そのうち最初のファイルの編輯を始めます。カレントバッファに對する變更點は全て失はれます。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003aarge"></span><span id="g_t_003aargedit"></span><span id="index-_003aarge"></span>
<span id="index-_003aargedit"></span>
</dd>
<dt>:[count]arge[dit][!] [++opt] [+cmd] {name} ..</dt>
<dd><p>引數リストに {name}s を追加し、その編輯を始めます。{name} が既に引數リスト內にあるときは、その編輯を始めます。これはコマンド |<a href="#g_t_003aargadd">:argadd</a>| を使ひ、次に |<a href="#g_t_003aedit">:edit</a>| を使ふのと同じです。
</p>
<p>ファイル名中のスペースは &quot;\&quot; でエスケープされなければなりません。
</p>
<p>[count] は |<a href="#g_t_003aargadd">:argadd</a>| と同樣に使はれます。
</p>
<p>もしもカレントファイルが抛棄 |<a href="#abandon">abandon</a>| することができないなら、編輯されてゐないことを除いて、引數リストに {name}s が加へられます。複製の終了はチェックしません。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003aarga"></span><span id="g_t_003aargadd"></span><span id="E479"></span><span id="index-_003aarga"></span>
<span id="index-_003aargadd"></span>
<span id="index-E479"></span>
</dd>
<dt>:[count]arga[dd] {name} ..</dt>
<dt>:[count]arga[dd]</dt>
<dd><p>引數リストに {name} を追加します。{name} が省略された時は引數リストに現在のバッファ名を追加します。
[count] が省かれると {name} は引數リストの現在の項目の次に插入されます。指定されると [count] 番目の項目の次に插入されます。引數リストが &quot;a b c&quot; で &quot;b&quot; が現在の引數の場合のコマンドの結果一覽:
</p><table>
<thead><tr><th width="50%">コマンド</th><th width="50%">新たな引數リスト</th></tr></thead>
<tr><td width="50%">:argadd x</td><td width="50%">a b x c</td></tr>
<tr><td width="50%">:0argadd x</td><td width="50%">x a b c</td></tr>
<tr><td width="50%">:1argadd x</td><td width="50%">a x b c</td></tr>
<tr><td width="50%">:$argadd x</td><td width="50%">a b c x</td></tr>
</table>
<p>最後の 1 つの後に:
</p><table>
<tr><td width="50%">:+2argadd y</td><td width="50%">a b c x y</td></tr>
</table>
<p>重複檢査はないので、1 個のファイルを引數リストに 2 回加へることもできます。現在編輯中のファイルは變更されません。
</p><blockquote>
<p><strong>Note:</strong> <br>
次の方法が使へることに注意してください。
</p><pre class="verbatim">:args ## x
</pre><p>これは項目 &quot;x&quot; を追加して新たなリストを竝び替へます。
</p></blockquote>

<span id="g_t_003aargd"></span><span id="g_t_003aargdelete"></span><span id="E480"></span><span id="index-_003aargd"></span>
<span id="index-_003aargdelete"></span>
<span id="index-E480"></span>
</dd>
<dt>:argd[elete] {pattern} ..</dt>
<dd><p>{pattern} にマッチするファイルを引數リストから削除します。{pattern} の意味はファイルパターンと同樣なので、|<a href="autocmd_002etxt.html#file_002dpattern">file-pattern</a>| を參照してください。現在の項目を削除するには &quot;%&quot; が使へます。
</p>
<p>このコマンドは現在編輯中のファイルが引數リストから削除されたときでも、それをそのままに保ちます。
</p>
<p>例:
</p><pre class="verbatim">:argdel *.obj
</pre>
</dd>
<dt>:[range]argd[elete]</dt>
<dd><p>引數リストから {range} の範圍のファイルを削除します。
</p>
<p>例:
</p><pre class="verbatim">:10,$argdel
</pre><p>10 以降が削除され、1 から 9 は殘ります。
</p><pre class="verbatim">:$argd
</pre><p>最後の引數を削除します。
</p><pre class="verbatim">:argd
:.argd
</pre><p>現在の引數を削除します。
</p><pre class="verbatim">:%argd
</pre><p>引數リストから全てのファイルを削除します。範圍の上限が大きすぎるときは、最後の引數までが削除されます。
</p>
<span id="g_t_003aargu"></span><span id="g_t_003aargument"></span><span id="index-_003aargu"></span>
<span id="index-_003aargument"></span>
</dd>
<dt>:[count]argu[ment] [count] [++opt] [+cmd]</dt>
<dd><p>引數リスト內で [count] 番目のファイルを編輯します。[count] が省かれると現在の項目を編輯します。變更點があり、Vim がカレントバッファを抛棄 |<a href="#abandon">abandon</a>| したくないときには失敗します。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
</dd>
<dt>:[count]argu[ment]! [count] [++opt] [+cmd]</dt>
<dd><p>引數リスト內で [count] 番目のファイルを編輯します。カレントバッファに對するいかなる變更も失はれます。[count] が省かれると現在の項目を編輯します。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003an"></span><span id="g_t_003ane"></span><span id="g_t_003anext"></span><span id="E165"></span><span id="E163"></span><span id="index-_003an"></span>
<span id="index-_003ane"></span>
<span id="index-_003anext"></span>
<span id="index-E165"></span>
<span id="index-E163"></span>
</dd>
<dt>:[count]n[ext] [++opt] [+cmd]</dt>
<dd><p>引數リストの中で [count] 個次のファイルを編輯します。變更點があり、Vim がカレントバッファを抛棄 |<a href="#abandon">abandon</a>| したくないときには失敗します。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
</dd>
<dt>:[count]n[ext]! [++opt] [+cmd]</dt>
<dd><p>引數リストの中で [count] 個次のファイルを編輯します。カレントバッファに對するいかなる變更も失はれます。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003anext_005ff"></span><span id="index-_003anext_005ff"></span>
</dd>
<dt>:n[ext] [++opt] [+cmd] {arglist}</dt>
<dd><p>コマンド |<a href="#g_t_003aargs_005ff">:args_f</a>| と同じです。
</p>
</dd>
<dt>:n[ext]! [++opt] [+cmd] {arglist}</dt>
<dd><p>コマンド |<a href="#g_t_003aargs_005ff_0021">:args_f!</a>| と同じです。
</p>
<span id="g_t_003aNext"></span><span id="g_t_003aN"></span><span id="E164"></span><span id="index-_003aNext"></span>
<span id="index-_003aN"></span>
<span id="index-E164"></span>
</dd>
<dt>:[count]N[ext] [count] [++opt] [+cmd]</dt>
<dd><p>引數リストの中で [count] 個前のファイルを編輯します。變更點があり、Vim がカレントバッファを破毀 |<a href="#abandon">abandon</a>| したくないときには失敗します。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
</dd>
<dt>:[count]N[ext]! [count] [++opt] [+cmd]</dt>
<dd><p>引數リスト內で [count] 個前のファイルを編輯します。カレントバッファに對するいかなる變更も失はれます。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003aprev"></span><span id="g_t_003aprevious"></span><span id="index-_003aprev"></span>
<span id="index-_003aprevious"></span>
</dd>
<dt>:[count]prev[ious] [count] [++opt] [+cmd]</dt>
<dd><p>コマンド |<a href="#g_t_003aNext">:Next</a>| と同じです。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003arew"></span><span id="g_t_003arewind"></span><span id="index-_003arew"></span>
<span id="index-_003arewind"></span>
</dd>
<dt>:rew[ind] [++opt] [+cmd]</dt>
<dd><p>引數リスト內で最初のファイルの編輯を始めます。變更點があり、Vim がカレントバッファを抛棄 |<a href="#abandon">abandon</a>| したくないときには失敗します。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
</dd>
<dt>:rew[ind]! [++opt] [+cmd]</dt>
<dd><p>引數リスト內で最初のファイルを編輯します。カレントバッファに對するいかなる變更も失はれます。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003afir"></span><span id="g_t_003afirst"></span><span id="index-_003afir"></span>
<span id="index-_003afirst"></span>
</dd>
<dt>:fir[st][!] [++opt] [+cmd]</dt>
<dd><p>コマンド |<a href="#g_t_003arewind">:rewind</a>| の別名。
</p>
<span id="g_t_003ala"></span><span id="g_t_003alast"></span><span id="index-_003ala"></span>
<span id="index-_003alast"></span>
</dd>
<dt>:la[st] [++opt] [+cmd]</dt>
<dd><p>引數リスト內で最後のファイルの編輯を始めます。變更點があり、Vim がカレントバッファを抛棄 |<a href="#abandon">abandon</a>| したくないときには失敗します。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
</dd>
<dt>:la[st]! [++opt] [+cmd]</dt>
<dd><p>引數リスト內で最初のファイルを編輯します。カレントバッファに對するいかなる變更も失はれます。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003awn"></span><span id="g_t_003awnext"></span><span id="index-_003awn"></span>
<span id="index-_003awnext"></span>
</dd>
<dt>:[count]wn[ext] [++opt]</dt>
<dd><p>カレントファイルを書き込み、引數リスト內で [count] 個次のファイルの編輯を始めます。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
</dd>
<dt>:[count]wn[ext] [++opt] {file}</dt>
<dd><p>カレントファイルを {file} に書き込み、引數リスト內で [count] 個次のファイルの編輯を始めます。ただし {file} が既に存在し、オプション &rsquo;<samp>writeany</samp>&rsquo; がオフのときは失敗します。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
</dd>
<dt>:[count]wn[ext]! [++opt] {file}</dt>
<dd><p>カレントファイルを {file} に書き込み、引數リスト內で [count] 個次のファイルの編輯を始めます。
</p>
<p>|<a href="#g_t_002b_002bopt">++opt</a>| と |<a href="#g_t_002bcmd">+cmd</a>| も參照してください。
</p>
<span id="g_t_003awN"></span><span id="g_t_003awNext"></span><span id="g_t_003awp"></span><span id="g_t_003awprevious"></span><span id="index-_003awN"></span>
<span id="index-_003awNext"></span>
<span id="index-_003awp"></span>
<span id="index-_003awprevious"></span>
</dd>
<dt>:[count]wN[ext][!] [++opt] [file]</dt>
<dt>:[count]wp[revious][!] [++opt] [file]</dt>
<dd><p>コマンド |<a href="#g_t_003awnext">:wnext</a>| と同じですが、次でなく前のファイルに移ります。
</p>
<p>上のコマンドの [count] の既定値は 1 です。[count] を 2 回使へるコマンドもあります。最後 (最も右) のものが使はれます。
</p>
<p>引數 [+cmd] が存在しないなら、カーソルはそのファイルに對して最後に認識された位置に置かれます。オプション &rsquo;<samp>startofline</samp>&rsquo; がオンのときは、カーソルは行の最初の非空白文字に置かれ、オフのときは最後に認識された列が使はれます。最後に認識されたカーソル位置がないときは、カーソルは最初の行 (Ex モードでは最後の行) に置かれます。
</p>
<span id="g_t_007barglist_007d"></span><span id="index-_007barglist_007d"></span>
<p>引數リスト內のワイルドカードは展開され、ファイル名は竝び替へられます。ですから C のソースファイルを全て編輯するには、コマンド &quot;vim *.c&quot; が使へます。Vim の中でコマンド &quot;:n *.c&quot; としても同じです。
</p>
<p>ファイル名は空白文字によつて區切られます。ファイル名にスペースまたはタブを含めるには、その前にバックスラッシュを書いてください。例へば、&quot;foo bar&quot; といふ 1 つのファイルを開くにはこうします:
</p><pre class="verbatim">:next foo\ bar
</pre>
<p>Unix およびその他いくつかのシステムではバッククォートも使へます。例:
</p><pre class="verbatim">:n `find . -name \\*.c -print`
</pre><p>アスタリスクの前の &rsquo;\&rsquo; は、&quot;*.c&quot; がプログラム find を實行する前にシェルで展開されるのを防ぐために必要となります。
</p>
<span id="arglist_002dposition"></span><span id="index-arglist_002dposition"></span>
<p>引數リストがあるときは、ウィンドウのタイトル (それがあつて、オプション &rsquo;<samp>title</samp>&rsquo; オンならば) やコマンド <kbd>CTRL-G</kbd> で出るファイルメッセージで編輯してゐるファイルを知ることができます。次のやうなものが表示されるでせう。
</p><pre class="verbatim">(file 4 of 11)
</pre><p>オプション &rsquo;<samp>shortmess</samp>&rsquo; の値が &rsquo;<var>f</var>&rsquo; を含んでゐるときは以下のやうになります。
</p><pre class="verbatim">(4 of 11)
</pre><p>實際は引數リスト內の現在の位置でないファイルを編輯してゐるなら、以下のやうになります。
</p><pre class="verbatim">(file (4) of 11)
</pre><p>これは、引數リストの中の 4 番目にゐるけれども、編輯中のファイルは引數リストの中の 4 番目でないことを意味します。これは &quot;<code>:e file</code>&quot; をするときに起こります。
</p></dd>
</dl>


<span id="index-rokarunaYin-Shu-risuto"></span>
<span id="rokarunaYin-Shu-risuto"></span><h4 class="unnumberedsubsec">ローカルな引數リスト</h4>

<span id="g_t_003aarglocal"></span><span id="index-_003aarglocal"></span>
<dl compact="compact">
<dt>:argl[ocal]</dt>
<dd><p>グローバルな引數リストのローカルなコピーを作ります。別のファイルの編輯は始めません。
</p>
</dd>
<dt>:argl[ocal][!] [++opt] [+cmd] {arglist}</dt>
<dd><p>カレントウィンドウについてローカルな、新たな引數リストを定義します。ウィンドウが 1 個のときは |<a href="#g_t_003aargs_005ff">:args_f</a>| と同じです。
</p>
<span id="g_t_003aargglobal"></span><span id="index-_003aargglobal"></span>
</dd>
<dt>:argg[lobal]</dt>
<dd><p>カレントウィンドウにグローバルな引數リストを使ひます。別のファイルの編輯は始めません。
</p>
</dd>
<dt>:argg[lobal][!] [++opt] [+cmd] {arglist}</dt>
<dd><p>カレントウィンドウにグローバルな引數リストを使ひます。コマンド |<a href="#g_t_003aargs_005ff">:args_f</a>| と同樣、グローバルな引數リストを新たに定義します。グローバルな引數リストを使つてゐるウィンドウは全てこの新しいリストを參照するやうになります。
</p></dd>
</dl>

<p>複數の引數リストが存在可能であり、それらはウィンドウ同士で共有できます。共有されてゐるときは、あるウィンドウ內で引數リストに變更を加へると、別のウィンドウの引數リストも影響を受けます。
</p>
<p>ウィンドウが分割されると、新しいウィンドウはカレントウィンドウから引數リストを受け繼ぎます。すると 2 個のウィンドウは、片方でコマンド |<a href="#g_t_003aarglocal">:arglocal</a>| か |<a href="#g_t_003aargglobal">:argglobal</a>| を使つて別の引數リストを使ふやうになるまで、そのリストを共有することになります。
</p>

<span id="index-Yin-Shu-risutowoShi-u"></span>
<span id="Yin-Shu-risutowoShi-u"></span><h4 class="unnumberedsubsec">引數リストを使ふ</h4>

<span id="g_t_003aargdo"></span><span id="index-_003aargdo"></span>
<dl compact="compact">
<dt>:[range]argdo[!] {cmd}</dt>
<dd><p>引數リスト內の全てのファイルで {cmd} を實行します。または [range] が指定された場合、その範圍內の引數のみで實行します。以下と同樣の動作になります。
</p><pre class="verbatim">:rewind
:{cmd}
:next
:{cmd}
etc.
</pre></dd>
</dl>
<p>カレントファイルを抛棄 |<a href="#abandon">abandon</a>| できず、&rsquo;!&rsquo; も付けられてゐないときは、實行は失敗します。どれかのファイル內でエラーが檢出されると、引數リスト內の以降のファイルには進みません。
引數リスト末尾のファイル (またはエラーの起きたファイル) がカレントファイルになります。{cmd} の中では &rsquo;|&rsquo; で複數のコマンドを連結できます。{cmd} は引數リストに變更を加へてはいけません。
</p><blockquote>
<p><strong>Note:</strong> <br>
このコマンドの實行中、オプション &rsquo;<samp>eventignore</samp>&rsquo; で自動コマンドのイベント Syntax を指定することでそれを無效化することができます。かうすると各ファイルの處理がかなり高速になります。
</p></blockquote>

<p>|<a href="windows_002etxt.html#g_t_003awindo">:windo</a>|, |<a href="tabpage_002etxt.html#g_t_003atabdo">:tabdo</a>|, |<a href="windows_002etxt.html#g_t_003abufdo">:bufdo</a>|, |<a href="quickfix_002etxt.html#g_t_003acdo">:cdo</a>|, |<a href="quickfix_002etxt.html#g_t_003aldo">:ldo</a>|, |<a href="quickfix_002etxt.html#g_t_003acfdo">:cfdo</a>|, |<a href="quickfix_002etxt.html#g_t_003alfdo">:lfdo</a>| も參照してください。
</p>
<p>例:
</p><pre class="verbatim">:args *.c
:argdo set ff=unix | update
</pre><p>かうするとオプション &rsquo;<samp>fileformat</samp>&rsquo; の値を &quot;unix&quot; に設定し、變更があつたファイルを保存します。それが全ての *.c ファイルについて行はれます。
</p>
<p>例:
</p><pre class="verbatim">:args *.[ch]
:argdo %s/\&lt;my_foo\&gt;/My_Foo/ge | update
</pre><p>かうすると全ての *.c ファイルと *.h ファイルで單語 &quot;my_foo&quot; を &quot;My_Foo&quot; に變へます。コマンド &quot;<code>:substitute</code>&quot; でフラグ &quot;e&quot; を使つて &quot;my_foo&quot; といふ單語の使はれてゐないファイルでエラーが起きるのを防いでゐます。コマンド &quot;<code>:update</code>&quot; は變更のあつたファイルのみを保存します。
</p>
<span id="writing"></span><span id="save_002dfile"></span><span id="index-writing"></span>
<span id="index-save_002dfile"></span>
<span id="index-Shu-kiIp-mi"></span>
<span id="g_t4_002e-Shu-kiIp-mi"></span><h3 class="section">4. 書き込み</h3>

<blockquote>
<p><strong>Note:</strong><br>
オプション &rsquo;<samp>write</samp>&rsquo; がオフのときは、どのファイルも書き込めないことに注意してください。
</p></blockquote>

<span id="g_t_003aw"></span><span id="g_t_003awrite"></span><span id="E502"></span><span id="E503"></span><span id="E504"></span><span id="E505"></span><span id="E512"></span><span id="E514"></span><span id="E667"></span><span id="E796"></span><span id="index-_003aw"></span>
<span id="index-_003awrite"></span>
<span id="index-E502"></span>
<span id="index-E503"></span>
<span id="index-E504"></span>
<span id="index-E505"></span>
<span id="index-E512"></span>
<span id="index-E514"></span>
<span id="index-E667"></span>
<span id="index-E796"></span>
<dl compact="compact">
<dt>:w[rite] [++opt]</dt>
<dd><p>バッファ全體をカレントファイルに書き込みます。これはファイルに對する變更點を保存するときの普通の方法です。オプション &rsquo;<samp>readonly</samp>&rsquo; がオンであるかファイルに書き込めない理由が何かあるときには實行に失敗します。
</p>
<p>++opt については |<a href="#g_t_002b_002bopt">++opt</a>| を參照してください。ただし ++bin, ++nobin, ++ff, ++enc だけが有效です。{譯注: 他に ++bad, ++edit もあるけれど、この 2 つは <code>:w</code> のオプションに使へないといふこと}
</p>
</dd>
<dt>:w[rite]! [++opt]</dt>
<dd><p>&quot;<code>:write</code>&quot; と似てゐますが、&rsquo;<samp>readonly</samp>&rsquo; がオンであつたり書き込みが拒否される理由があつても無理矢理書き込みを行ひます。
</p><blockquote>
<p><strong>Note:</strong> <br>
これはファイルの權限や所屬を變更したり、(シンボリック) リンクを途切れさせるかもしれないことに注意してください。それを避けるには &rsquo;<samp>cpoptions</samp>&rsquo; にフラグ &rsquo;<var>W</var>&rsquo; を追加してください。
</p></blockquote>

</dd>
<dt>:[range]w[rite][!] [++opt]</dt>
<dd><p>指定された範圍の行をカレントファイルに書き出します。これは普通の操作ではありません。ファイルがバッファ內の全ての行を含むやうにならないからです。
</p>
<span id="g_t_003aw_005ff"></span><span id="g_t_003awrite_005ff"></span><span id="index-_003aw_005ff"></span>
<span id="index-_003awrite_005ff"></span>
</dd>
<dt>:[range]w[rite] [++opt] {file}</dt>
<dd><p>指定された範圍の行をファイル {file} に書き出します。ただしそれが既に存在し、かつオプション &rsquo;<samp>writeany</samp>&rsquo; がオフのときは失敗します。
</p>
<span id="g_t_003aw_0021"></span><span id="index-_003aw_0021"></span>
</dd>
<dt>:[range]w[rite]! [++opt] {file}</dt>
<dd><p>指定された範圍の行をファイル {file} に書き出します。既存のファイルは上書きされます。
</p>
<span id="g_t_003aw_005fa"></span><span id="g_t_003awrite_005fa"></span><span id="E494"></span><span id="index-_003aw_005fa"></span>
<span id="index-_003awrite_005fa"></span>
<span id="index-E494"></span>
</dd>
<dt>:[range]w[rite][!] [++opt] &gt;&gt;</dt>
<dd><p>指定された範圍の行をカレントファイルに追加します。
</p>
</dd>
<dt>:[range]w[rite][!] [++opt] &gt;&gt; {file}</dt>
<dd><p>指定された範圍の行をファイル {file} に追加します。&rsquo;!&rsquo; を付けるとそのファイルがまだ存在しなくても書き込みを行ひます。
</p>
<span id="g_t_003aw_005fc"></span><span id="g_t_003awrite_005fc"></span><span id="index-_003aw_005fc"></span>
<span id="index-_003awrite_005fc"></span>
</dd>
<dt>:[range]w[rite] [++opt] !{cmd}</dt>
<dd><p>[range] の行を標準入力として {cmd} を實行します (&rsquo;!&rsquo; の前の空白に注意)。{cmd} は &quot;:!{cmd}&quot; のやうに實行され、全ての &rsquo;!&rsquo; は前囘のコマンドに置き換へられます |<a href="various_002etxt.html#g_t_003a_0021">:!</a>。
</p>
<p>コマンド &quot;<code>:w</code>&quot; での [range] の既定値はバッファ全體 (1,$) です。バッファ全體を書き込むと、そのバッファは變更されてゐないとみなされるやうになります。
</p>
<p>&quot;<code>:w somefile</code>&quot; によつて別のファイルに書き出した場合は、&rsquo;<samp>cpoptions</samp>&rsquo; の &quot;+&quot; フラグに依存します。&quot;+&quot; が含まれてゐる場合は、バッファがまだ元のファイルと異なつてゐたとしても、書き込みコマンドによつて &rsquo;<samp>modified</samp>&rsquo; フラグがオフになります。
</p>
<p>&quot;<code>:w</code>&quot; にファイル名が與へられるとそれが代替ファイルになります。これは例へば書き込みに失敗した後に &quot;<code>:w #</code>&quot; でもう一度試したいときに使へます。オプション &rsquo;<samp>cpoptions</samp>&rsquo; からフラグ &rsquo;<var>A</var>&rsquo; を取り除くとこれを無效化できます。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
書き込みには &rsquo;<samp>fsync</samp>&rsquo; オプションが關係してきます。設定されてゐる場合には書き込みがより遲くなるかもしれません。(しかしより安全です。)
</p></blockquote>

<span id="g_t_003asav"></span><span id="g_t_003asaveas"></span><span id="index-_003asav"></span>
<span id="index-_003asaveas"></span>
</dd>
<dt>:sav[eas][!] [++opt] {file}</dt>
<dd><p>カレントファイルをファイル名 {file} として保存し、カレントバッファのファイル名を {file} に變へます。それまでのカレントファイルの名前は代替ファイルの名前になります。既存のファイルを上書きするには [!] が必要になります。
</p>
<p>&rsquo;<samp>filetype</samp>&rsquo; が空の場合、保存の前に新しいファイル名に對してファイルタイプ檢出が行はれます。保存が成功すると &rsquo;<samp>readonly</samp>&rsquo; がオフになります。
</p>
<span id="g_t_003aup"></span><span id="g_t_003aupdate"></span><span id="index-_003aup"></span>
<span id="index-_003aupdate"></span>
</dd>
<dt>:[range]up[date][!] [++opt] [&gt;&gt;] [file]</dt>
<dd><p>&quot;<code>:write</code>&quot; と似てゐますが、バッファに變更點があるときのみ書き込みを行ひます。
</p></dd>
</dl>


<span id="buffer_002dwrite"></span><span id="index-buffer_002dwrite"></span>
<span id="Fu-Shu-batuhuadenoShu-kiIp-mi"></span><h4 class="unnumberedsubsec">複數バッファでの書き込み</h4>

<span id="g_t_003awa"></span><span id="g_t_003awall"></span><span id="index-_003awa"></span>
<span id="index-_003awall"></span>
<dl compact="compact">
<dt>:wa[ll]</dt>
<dd><p>變更點のあるバッファを全て書き込みます。ファイル名を持たないバッファに對してはエラーメッセージが表示されます。讀み込み專用のバッファは書き込まれません。
</p>
</dd>
<dt>:wa[ll]!</dt>
<dd><p>變更點のあるバッファを、讀み込み專用であつても全て書き込みます。ファイル名を持たないバッファは書き込まれず、エラーメッセージが表示されます。
</p></dd>
</dl>


<p>Vim は別の場所で變更を受けたファイルを上書きしようとしたときには警告します。|<a href="#timestamp">timestamp</a>| を參照してください。
</p>
<span id="backup"></span><span id="E207"></span><span id="E506"></span><span id="E507"></span><span id="E508"></span><span id="E509"></span><span id="E510"></span><span id="index-backup"></span>
<span id="index-E207"></span>
<span id="index-E506"></span>
<span id="index-E507"></span>
<span id="index-E508"></span>
<span id="index-E509"></span>
<span id="index-E510"></span>
<p>オプション &rsquo;<samp>backup</samp>&rsquo;, &rsquo;<samp>writebackup</samp>&rsquo; または &rsquo;<samp>patchmode</samp>&rsquo; がオンのときに既存のファイルに (追加でなく) 書き込まうとすると、元のファイルのバックアップが作られます。ファイルは元のコピーかリネームしたものです (&rsquo;<samp>backupcopy</samp>&rsquo; を參照してください)。ファイルの書き込みに成功したとき &rsquo;<samp>writebackup</samp>&rsquo; がオンで &rsquo;<samp>backup</samp>&rsquo; がオフだと、バックアップファイルは削除されます。&rsquo;<samp>patchmode</samp>&rsquo; がオンのときはバックアップファイルはリネームされるかも知れません。
</p>
<span id="backup_002dtable"></span><span id="index-backup_002dtable"></span>
<table>
<tr><td width="15%">&rsquo;backup&rsquo;</td><td width="20%">&rsquo;writebackup&rsquo;</td><td width="65%">動作</td></tr>
<tr><td width="15%">off</td><td width="20%">off</td><td width="65%">バックアップは作られない</td></tr>
<tr><td width="15%">off</td><td width="20%">on</td><td width="65%">カレントファイルをバックアップし、後で消去する (既定)</td></tr>
<tr><td width="15%">on</td><td width="20%">off</td><td width="65%">古いバックアップを消去し、カレントファイルをバックアップする</td></tr>
<tr><td width="15%">on</td><td width="20%">on</td><td width="65%">古いバックアップを消去し、カレントファイルをバックアップする</td></tr>
</table>

<p>&rsquo;<samp>backupskip</samp>&rsquo; に指定したパターンが書き込まれるファイルの名前にマッチしたときは、バックアップファイルは作られません。その場合 &rsquo;<samp>backup</samp>&rsquo; と &rsquo;<samp>writebackup</samp>&rsquo; の値は無視されます。
</p>
<p>&rsquo;<samp>backup</samp>&rsquo; がオンのときは、古いバックアップファイル (新しいバックアップファイルと同名) は削除されます。&rsquo;<samp>backup</samp>&rsquo; がオフだが &rsquo;<samp>writebackup</samp>&rsquo; がオンのときは、既存のバックアップファイルは削除されません。ファイルの書き込み中に作られたバックアップファイルは別の名前になります。
</p>
<p>ファイルシステムによつてはクラッシュで新しいファイルとバックアップを兩方失ふこともあり得ます (新しいファイルは存在はしても中身が滅茶苦茶になつてゐたり)。その場合は復歸機能を試してください。スワップファイルがまだディスクに殘つてゐるかもしれないからです。|<a href="recover_002etxt.html#g_t_003arecover">:recover</a>|
</p>
<p>オプション &rsquo;<samp>backupdir</samp>&rsquo; で指定されたディレクトリはバックアップファイルをしまふのに使はれます。(既定値: 書き込まれたファイルと同じディレクトリ)
</p>
<p>バックアップが、元のファイルのコピーである新規のファイルになるか、元のファイルがリネームされたものになるかは、オプション &rsquo;<samp>backupcopy</samp>&rsquo; で決まります。コピーが作られるのがいつでファイルがリネームされるのがいつかについてはその箇所を參照してください。
</p>
<p>バックアップファイルの生成に失敗すると、書き込みは行はれません。それでも書き込みたいときにはコマンドに &rsquo;!&rsquo; を追加してください。
</p>
<span id="write_002dpermissions"></span><span id="index-write_002dpermissions"></span>
<p>新しいファイルを書き込むときは讀み書きの權限が付きます。unix ではマスクの値は 0666 に umask を適用させたものになります。Vim で開いたファイルに書き込むときは權限は維持されますが、s ビットはクリアされます。
</p>
<span id="write_002dreadonly"></span><span id="index-write_002dreadonly"></span>
<p>オプション &rsquo;<samp>cpoptions</samp>&rsquo; の値にフラグ &rsquo;<var>W</var>&rsquo; が含まれるときは、Vim は讀み込み專用ファイルの上書きを拒否します。&rsquo;<var>W</var>&rsquo; が含まれないと、システムが許可すれば (ディレクトリは書き込み可能でなければなりません) &quot;<code>:w!</code>&quot; は讀込專用ファイルを上書きします。
</p>
<span id="write_002dfail"></span><span id="index-write_002dfail"></span>
<p>新ファイルの書き込みに失敗したときは、變更點と元のファイルを同時に失はないよう注意しなければなりません。バックアップファイルがないときに書き込みに失敗すると、その時點で元のファイルはなくなつてゐるのです！<strong>ファイルを書き出すまで Vim を終了してはいけません！</strong> バックアップが作られてゐたら、(可能ならば) それが元のファイルの所に戾されます。Vim を終了して變更點が失はれても、大抵は元のファイルはそこに殘つてゐます。Vim が元のファイルを戾すのに失敗すると、元のファイルが失はれた旨のエラーメッセージが出ます。
</p>
<span id="DOS_002dformat_002dwrite"></span><span id="index-DOS_002dformat_002dwrite"></span>
<p>オプション &rsquo;<samp>fileformat</samp>&rsquo; の値が &quot;<var>dos</var>&quot; のときは、&lt;EOL&gt; には &lt;CR&gt; &lt;NL&gt; が使はれます。これは MS-DOS, Win32 と OS/2 での既定値です。その他のシステムでは &quot;[dos format]&quot; といふメッセージが表示され、普通でない &lt;EOL&gt; が使はれてゐることを知らせてくれます。
<span id="Unix_002dformat_002dwrite"></span><span id="index-Unix_002dformat_002dwrite"></span>
&rsquo;<samp>fileformat</samp>&rsquo; の値が &quot;<var>unix</var>&quot; のときは、&lt;EOL&gt; には &lt;NL&gt; が使はれます。MS-DOS, Win32 と OS/2 では &quot;[unix format]&quot; といふメッセージが表示されます。
<span id="Mac_002dformat_002dwrite"></span><span id="index-Mac_002dformat_002dwrite"></span>
&rsquo;<samp>fileformat</samp>&rsquo; の値が &quot;<var>mac</var>&quot; のときは、&lt;EOL&gt; には &lt;CR&gt; が使はれます。Mac 以外のシステムでは &quot;[mac format]&quot; といふメッセージが表示されます。
</p>
<p>|<a href="#file_002dformats">file-formats</a>| やオプション &rsquo;<samp>fileformat</samp>&rsquo; 及び &rsquo;<samp>fileformats</samp>&rsquo; も參照してください。
</p>
<span id="ACL"></span><span id="index-ACL"></span>
<p>ACL は Access Control List を表します。これはファイルのアクセス權を制禦するための先進的な手段です。新しい MS-Windows と Unix システムで使はれますが、ファイルシステムがそれをサポートするときのみです。
</p>
<p>Vim はファイルを書き込むときに ACL 情報を保たうとします。バックアップファイルは元のファイルの ACL 情報を受け繼ぎます。
</p>
<p>ACL 情報は (ファイルを開くときに) ファイルが讀込專用かどうか調べるのにも使はれます。
</p>
<span id="read_002donly_002dshare"></span><span id="index-read_002donly_002dshare"></span>
<p>MS-Windows がネットワーク上でドライブを共有するとき、そこは讀込專用にすることができます。つまりファイルに讀込專用の屬性がなく、NC ネットワーク共有ドライブ上の ACL 設定が書き込みを許可してゐても、そのファイルには書き込みができません。Win32 プラットフォーム上の Vim は讀込專用のネットワークドライブを判別し、ファイルを讀込專用とマークします。そのファイルは |<a href="#g_t_003awrite">:write</a>| で上書きすることができません。
</p>
<span id="write_002ddevice"></span><span id="index-write_002ddevice"></span>
<p>ファイル名が實際はデバイス名のとき、Vim はバックアップを作らうとはしません (無理な話)。デバイスは既に存在するので、保存にはフラグ &quot;!&quot; が必要です。
</p>
<p>Unixでの例:
</p><pre class="verbatim">:w! /dev/lpt0
</pre><p>MS-DOS や MS-Windows での例:
</p><pre class="verbatim">:w! lpt0
</pre><p>Unix では、ファイル名が通常ファイルやディレクトリを指してゐないときにデバイスと判斷されます。Vim は fifo 及び名前付きパイプもデバイスと判斷します。
</p>
<p>MS-DOS と MS-Windows では、デバイスは名前から判斷されます:
</p><pre class="verbatim">AUX
CON
CLOCK$
NUL
PRN
COMn	n=1,2,3... 等
LPTn	n=1,2,3... 等
</pre><p>ファイル名は大文字でも小文字でもよい。
</p>
<span id="write_002dquit"></span><span id="index-write_002dquit"></span>
<span id="index-Shu-kiIp-mitoZhong-Liao-"></span>
<span id="g_t5_002e-Shu-kiIp-mitoZhong-Liao-"></span><h3 class="section">5. 書き込みと終了</h3>

<span id="g_t_003aq"></span><span id="g_t_003aquit"></span><span id="index-_003aq"></span>
<span id="index-_003aquit"></span>
<dl compact="compact">
<dt>:q[uit]</dt>
<dd><p>カレントウィンドウを閉ぢます。最後のウィンドウで使ふと Vim を終了させます。變更點があつて Vim がカレントバッファを抛棄 |<a href="#abandon">abandon</a>| しようとしないときや、引數リストの最後のファイルが編輯されてゐないときは失敗します。
</p>
<p>他のタブページが存在するとき、カレントタブページ內の最後のウィンドウを閉ぢるとカレントタブページ |<a href="tabpage_002etxt.html#tab_002dpage">tab-page</a>| が閉ぢられます。
</p>
<p>|<a href="autocmd_002etxt.html#QuitPre">QuitPre</a>| 自動コマンドイベントが發行されます。
</p>
<p>他のウィンドウを終了するには |<a href="windows_002etxt.html#CTRL_002dW_005fq">CTRL-W_q</a>| を參照してください。
</p>
</dd>
<dt>:conf[irm] q[uit]</dt>
<dd><p>終了しますが、變更點があるときや、引數リスト內で末尾にないファイルを編輯してゐるときにはプロンプトを表示します。コマンド |<a href="#g_t_003aconfirm">:confirm</a>| やオプション &rsquo;<samp>confirm</samp>&rsquo; を參照してください。
</p>
</dd>
<dt>:q[uit]!</dt>
<dd><p>現在のバッファに變更點があつても、書き込まずに Vim を終了します。バッファは、&rsquo;<samp>hidden</samp>&rsquo; が設定されてゐるときにも讀み込まれません。
</p>
<p>そのウィンドウが最後の 1 つで、變更點のある隱しバッファがある場合には、終了せずにカレントバッファを破毀したあとで、最初の變更點がある隱しバッファを新たな現在のバッファとします。
</p>
<p>必ず終了するにはコマンド &quot;<code>:qall!</code>&quot; を使つてください。
</p>
</dd>
<dt>:cq[uit]</dt>
<dd><p>書き込みをせずに必ず終了し、エラーコードを返します。コマンド |<a href="quickfix_002etxt.html#g_t_003acq">:cq</a>| を參照してください。Manx の QuickFix モードで使はれます (|<a href="quickfix_002etxt.html#quickfix">quickfix</a>| を參照してください)。
</p>
<span id="g_t_003awq"></span><span id="index-_003awq"></span>
</dd>
<dt>:wq [++opt]</dt>
<dd><p>カレントファイルを書き込んで Vim を終了します。ファイルが讀込專用であるときや、バッファに名前が付いてゐないときには書き込みに失敗します。引數リスト內の末尾のファイルがまだ編輯されてゐないときには終了に失敗します。
</p>
</dd>
<dt>:wq! [++opt]</dt>
<dd><p>カレントファイルを書き込んで Vim を終了します。バッファに名前が付いてゐないときには書き込みに失敗します。
</p>
</dd>
<dt>:wq [++opt] {file}</dt>
<dd><p>{file} に書き込んで Vim を終了します。引數リスト內の末尾のファイルがまだ編輯されてゐないときには終了に失敗します。
</p>
</dd>
<dt>:wq! [++opt] {file}</dt>
<dd><p>{file} に書き込んで Vim を終了します。
</p>
</dd>
<dt>:[range]wq[!] [++opt] [file]</dt>
<dd><p>上と同樣ですが、[range] の範圍內の行のみを書き込みます。
</p>
<span id="g_t_003ax"></span><span id="g_t_003axit"></span><span id="index-_003ax"></span>
<span id="index-_003axit"></span>
</dd>
<dt>:[range]x[it][!] [++opt] [file]</dt>
<dd><p>|<a href="#g_t_003awq">:wq</a>| と似てゐますが、變更點があるときのみ書き込みます。オプション &rsquo;<samp>hidden</samp>&rsquo; がオンで複數のウィンドウが存在するとき、ファイルを書き込んだ後はカレントバッファは隱れバッファになります。
</p>
<span id="g_t_003aexi"></span><span id="g_t_003aexit"></span><span id="index-_003aexi"></span>
<span id="index-_003aexit"></span>
</dd>
<dt>:[range]exi[t][!] [++opt] [file]</dt>
<dd><p>|<a href="#g_t_003axit">:xit</a>| と同じです。
</p>
<span id="ZZ"></span><span id="index-ZZ"></span>
</dd>
<dt>ZZ</dt>
<dd><p>變更點があればカレントファイルを書き込んで Vim を終了します (コマンド |<a href="#g_t_003ax">:x</a>| と同じです)。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
カレントファイルを複數のウィンドウで開いてゐるときは、ファイルに變更點があれば書き込まれ、そしてウィンドウが閉ぢられることに注意してください。
</p></blockquote>

<span id="ZQ"></span><span id="index-ZQ"></span>
</dd>
<dt>ZQ</dt>
<dd><p>變更點を確かめずに終了します (コマンド &quot;<code>:q!</code>&quot; と同じです)。
</p></dd>
</dl>


<span id="window_002dexit"></span><span id="index-window_002dexit"></span>
<span id="index-Fu-Shu-nouindoutobatuhua"></span>
<span id="Fu-Shu-nouindoutobatuhua"></span><h4 class="unnumberedsubsec">複數のウィンドウとバッファ</h4>

<span id="g_t_003aqa"></span><span id="g_t_003aqall"></span><span id="index-_003aqa"></span>
<span id="index-_003aqall"></span>
<dl compact="compact">
<dt>:qa[ll]</dt>
<dd><p>變更點のあるバッファがない限り、Vim を終了します (變更點のある次のバッファに移動するにはコマンド &quot;<code>:bmod</code>&quot; を使つてください)。オプション &rsquo;<samp>autowriteall</samp>&rsquo; がオンのときは、|<a href="#g_t_003awqall">:wqall</a>| と同樣に變更點のあるバッファが全て書き込まれます。
</p>
</dd>
<dt>:conf[irm] qa[ll]</dt>
<dd><p>Vim を終了します。變更點のあるバッファがあるときはプロンプトを表示します。コマンド |<a href="#g_t_003aconfirm">:confirm</a>| を參照してください。
</p>
</dd>
<dt>:qa[ll]!</dt>
<dd><p>Vim を終了します。バッファの變更點は全て失はれます。
</p>
<p>終了コードを非ゼロにしたい場合は |<a href="quickfix_002etxt.html#g_t_003acquit">:cquit</a>| を使つてください。
</p>
<span id="g_t_003aquita"></span><span id="g_t_003aquitall"></span><span id="index-_003aquita"></span>
<span id="index-_003aquitall"></span>
</dd>
<dt>:quita[ll][!]</dt>
<dd><p>コマンド |<a href="#g_t_003aqall">:qall</a>| と同じです。
</p>
<span id="g_t_003awqa"></span><span id="g_t_003awqall"></span><span id="g_t_003axa"></span><span id="g_t_003axall"></span><span id="index-_003awqa"></span>
<span id="index-_003awqall"></span>
<span id="index-_003axa"></span>
<span id="index-_003axall"></span>
</dd>
<dt>:wqa[ll] [++opt]</dt>
<dt>:xa[ll]</dt>
<dd><p>變更點のあるバッファを全て書き込んで Vim を終了します。ファイル名のないバッファや讀込專用または何らかの理由で書き込めないバッファ、またはジョブが實行中の端末があるときは、Vim を終了しません。
</p>
</dd>
<dt>:conf[irm] wqa[ll] [++opt]</dt>
<dt>:conf[irm] xa[ll]</dt>
<dd><p>變更點のあるバッファを全て書き込んで Vim を終了します。讀込專用または何らかの理由で書き込めないバッファがあるときは、プロンプトを表示します。コマンド |<a href="#g_t_003aconfirm">:confirm</a>| を參照してください。
</p>
</dd>
<dt>:wqa[ll]! [++opt] or :xa[ll]!</dt>
<dd><p>變更點のあるバッファを、讀込專用であつても全て書き込んで Vim を終了します。ファイル名のないバッファや何らかの理由で書き込めないバッファがあるとき、もしくは、ジョブが動作してゐるターミナルがあるときは、Vim を終了しません。
</p></dd>
</dl>

<span id="edit_002ddialogs"></span><span id="index-edit_002ddialogs"></span>
<span id="index-daiarogu"></span>
<span id="g_t6_002e-daiarogu"></span><h3 class="section">6. ダイアログ</h3>

<span id="g_t_003aconfirm"></span><span id="g_t_003aconf"></span><span id="index-_003aconfirm"></span>
<span id="index-_003aconf"></span>
<dl compact="compact">
<dt>:conf[irm] {command}</dt>
<dd><p>{command} を實行する際、確認が必要ならばダイアログを表示します。コマンド |<a href="#g_t_003aq">:q</a>|, |<a href="#g_t_003aqa">:qa</a>| や |<a href="#g_t_003aw">:w</a>| あるいは、|<a href="windows_002etxt.html#g_t_003aonly">:only</a>|, |<a href="windows_002etxt.html#g_t_003abuffer">:buffer</a>|, |<a href="windows_002etxt.html#g_t_003abdelete">:bdelete</a>| など、同樣に失敗しうるコマンドと共に使へます (|<a href="#g_t_003aw">:w</a>| では讀み取り專用屬性を無視するかどうかを尋ねます)。
</p>
<p>例:
</p><pre class="verbatim">:confirm w foo
</pre><p>ファイル &quot;foo&quot; が既に存在するときに確認を取ります。
</p><pre class="verbatim">:confirm q
</pre><p>バッファに修正個所があるときに確認を取ります。
</p><pre class="verbatim">:confirm qa
</pre><p>修正個所があり、保存されてゐないバッファがあるとき、各バッファについて保存するか破毀するか尋ねます。「全て保存」や「全て破毀」といふ選擇肢もあります。
</p>
<p>常に &quot;<code>:confirm</code>&quot; を使ひたいなら、代はりにオプション &rsquo;<samp>confirm</samp>&rsquo; をオンにしてください。
</p>
<span id="g_t_003abrowse"></span><span id="g_t_003abro"></span><span id="E338"></span><span id="E614"></span><span id="E615"></span><span id="E616"></span><span id="index-_003abrowse"></span>
<span id="index-_003abro"></span>
<span id="index-E338"></span>
<span id="index-E614"></span>
<span id="index-E615"></span>
<span id="index-E616"></span>
</dd>
<dt>:bro[wse] {command}</dt>
<dd><p>{command} の引數のためにファイル選擇ダイアログを開きます。現在の所、これらのコマンドと共に使へます |<a href="#g_t_003ae">:e</a>|, |<a href="#g_t_003aw">:w</a>|, |<a href="#g_t_003awall">:wall</a>|, |<a href="#g_t_003awq">:wq</a>|, |<a href="#g_t_003awqall">:wqall</a>|, |<a href="#g_t_003ax">:x</a>|, |<a href="#g_t_003axall">:xall</a>|, |<a href="#g_t_003aexit">:exit</a>|, |<a href="#g_t_003aview">:view</a>|, |<a href="windows_002etxt.html#g_t_003asview">:sview</a>|, |<a href="insert_002etxt.html#g_t_003ar">:r</a>|, |<a href="#g_t_003asaveas">:saveas</a>|, |<a href="windows_002etxt.html#g_t_003asp">:sp</a>|, |<a href="starting_002etxt.html#g_t_003amkexrc">:mkexrc</a>|, |<a href="starting_002etxt.html#g_t_003amkvimrc">:mkvimrc</a>|, |<a href="starting_002etxt.html#g_t_003amksession">:mksession</a>|, |<a href="starting_002etxt.html#g_t_003amkview">:mkview</a>|, |<a href="windows_002etxt.html#g_t_003asplit">:split</a>|, |<a href="windows_002etxt.html#g_t_003avsplit">:vsplit</a>|, |<a href="tabpage_002etxt.html#g_t_003atabe">:tabe</a>|, |<a href="tabpage_002etxt.html#g_t_003atabnew">:tabnew</a>|, |<a href="quickfix_002etxt.html#g_t_003acfile">:cfile</a>|, |<a href="quickfix_002etxt.html#g_t_003acgetfile">:cgetfile</a>|, |<a href="quickfix_002etxt.html#g_t_003acaddfile">:caddfile</a>|, |<a href="quickfix_002etxt.html#g_t_003alfile">:lfile</a>|, |<a href="quickfix_002etxt.html#g_t_003algetfile">:lgetfile</a>|, |<a href="quickfix_002etxt.html#g_t_003aladdfile">:laddfile</a>|, |<a href="diff_002etxt.html#g_t_003adiffsplit">:diffsplit</a>|, |<a href="diff_002etxt.html#g_t_003adiffpatch">:diffpatch</a>|, |<a href="vi_005fdiff_002etxt.html#g_t_003aopen">:open</a>|, |<a href="windows_002etxt.html#g_t_003apedit">:pedit</a>|, |<a href="various_002etxt.html#g_t_003aredir">:redir</a>|, |<a href="repeat_002etxt.html#g_t_003asource">:source</a>|, |<a href="#g_t_003aupdate">:update</a>|, |<a href="#g_t_003avisual">:visual</a>|, |<a href="windows_002etxt.html#g_t_003avsplit">:vsplit</a>|, &rsquo;<samp>confirm</samp>&rsquo; がオンのときは |<a href="#g_t_003aqall">:qall</a>| も使へます。
</p>
<p>{Vim の Win32 版, Motif, Athena, GTK や Mac の GUI 版でのみ利用可能}
</p>
<p>&quot;<code>:browse</code>&quot; が使へない時はエラーが表示されます。|<a href="various_002etxt.html#g_t_002bbrowse">+browse</a>| の機能がなかつたり、{command} が <code>:browse</code> に對應してゐない場合、{command} はダイアログなしで實行されます。&quot;<code>:browse oldfiles</code>&quot; については |<a href="starting_002etxt.html#g_t_003aoldfiles">:oldfiles</a>| を參照してください。
</p>
<p>使用法については、例をいくつか見るのが一番分かりやすいでせう。
</p><pre class="verbatim">:browse e $vim/foo
</pre><p>ファイル選擇ダイアログをディレクトリ $vim/foo 內で開き、選擇されたファイルを編輯します。
</p><pre class="verbatim">:browse e
</pre><p>ファイル選擇ダイアログを &rsquo;<samp>browsedir</samp>&rsquo; で指定されたディレクトリ內で開き、選擇されたファイルを編輯します。
</p><pre class="verbatim">:browse w
</pre><p>ファイル選擇ダイアログをカレントファイルのディレクトリ內で、カレントファイルの名前を既定値として開き、選擇されたファイル名を使つてバッファを保存します。
</p><pre class="verbatim">:browse w C:/bar
</pre><p>ファイル選擇ダイアログをディレクトリ C:/bar 內で、カレントファイルの名前を既定値として開き、選擇されたファイル名を使つてバッファを保存します。
</p>
<p>オプション &rsquo;<samp>browsedir</samp>&rsquo; も參照してください。
</p>
<p>Vim のファイル選擇ダイアログをサポートしないバージョンでは、コマンドはそのまま實行されます。
</p></dd>
</dl>

<span id="browsefilter"></span><span id="index-browsefilter"></span>
<p>MS-Windows と GTK では、ファイル選擇ダイアログで使はれるフィルタを指定することができます。グローバル變數 <var>g:browsefilter</var> かローカル變數 <var>b:browsefilter</var> を設定すると、フィルタをグローバルにまたはバッファについてローカルに變更することができます。この變數を指定する際の書式は &quot;{filter label}\t{pattern};{pattern}\n&quot; で、{filter label} はコンボボックス「ファイルの種類」に使はれるテキスト、{pattern} はファイル名を選別するフィルタです。&rsquo;;&rsquo; で區切れば複數のパターンを指定することができます。
</p>
<p>Motif 上の Vim では同じ書式が使へますが、實際には 1 番目のパターンだけが使はれます (Motif ではパターンは 1 種類しか使へませんが、それをユーザーが編輯できます)。
</p>
<p>例へばダイアログで Vim 關聯ファイルだけを表示するには、以下のコマンドを使ひます。
</p>
<pre class="verbatim">let g:browsefilter = &quot;Vim Scripts\t*.vim\nVim Startup Files\t*vimrc\n&quot;
</pre>
<p>フィルタは、變數 <var>b:browsefilter</var> を設定することでバッファ每に設定することができます。<var>b:browsefilter</var> はファイルタイププラグインで設定することが一番多いでせう。するとファイルブラウザーダイアログには現在編輯中のファイルのタイプに關聯した候補が表示されます。
</p><blockquote>
<p><strong>弊害:</strong> <br>
別の種類のファイルの編輯が始め辛くなります。對策は、フィルタの最後の項目に &quot;All Files\t*.*\n&quot; を加へ、ユーザーが望みのファイルにアクセスできる道を殘すことです。
</p></blockquote>

<p>Vim が browsefilter をサポートしてゐないときにそれを設定しないやうにするには、has(&quot;browsefilter&quot;) が使へます:
</p>
<pre class="verbatim">if has(&quot;browsefilter&quot;)
let g:browsefilter = &quot;whatever&quot;
endif
</pre>
<span id="current_002ddirectory"></span><span id="index-current_002ddirectory"></span>
<span id="index-karentodeirekutori-1"></span>
<span id="g_t7_002e-karentodeirekutori"></span><h3 class="section">7. カレントディレクトリ</h3>

<p>|<a href="#g_t_003acd">:cd</a>|, |<a href="#g_t_003alcd">:lcd</a>| や |<a href="#g_t_003atcd">:tcd</a>| コマンドを使つて別のディレクトリに移ることができます。すると {譯注: そのディレクトリ內のファイルを編輯するとき} そのディレクトリ名をファイル名の前に付けなくても良くなります。また、違ひは &quot;<code>:!ls</code>&quot; 等の外部コマンドの實行の際にも現れます。
</p>
<p>&rsquo;<samp>cpoptions</samp>&rsquo; にフラグ &rsquo;.&rsquo; が含まれてゐる場合、カレントバッファが變更されてゐると、&quot;!&quot; をつけない限りディレクトリ變更は失敗します。
</p>
<span id="g_t_003acd"></span><span id="E747"></span><span id="E472"></span><span id="index-_003acd"></span>
<span id="index-E747"></span>
<span id="index-E472"></span>
<dl compact="compact">
<dt>:cd[!]</dt>
<dd><p>Unix 以外のシステムでは: カレントディレクトリ名を表示します。Unix システムでは: カレントディレクトリをホームディレクトリに變更します。全てのシステムで、カレントディレクトリの表示にはコマンド |<a href="#g_t_003apwd">:pwd</a>| が使へます。
</p>
<p>Unix システムでは: ウィンドウローカルディレクトリを消去します。
</p>
</dd>
<dt>:cd[!] {path}</dt>
<dd><p>カレントディレクトリを {path} に變更します。{path} が相對的な指定なら、オプション &rsquo;<samp>cdpath</samp>&rsquo; 內に列擧されたディレクトリを基準に判斷されます。
</p>
<p>ウィンドウローカルディレクトリを消去します。
</p>
<p>既に開かれたファイルについては、フルパスが把握されてゐるので變化はありません。しかし引數リスト |<a href="#arglist">arglist</a>| 內のファイルの意味は變はるかもしれません！
</p>
<p>MS-DOS ではアクティブなドライブも變更します。カレントファイルのディレクトリに移るにはこうします。
</p><pre class="verbatim">:cd %:h
</pre><span id="g_t_003acd_002d"></span><span id="E186"></span><span id="index-_003acd_002d"></span>
<span id="index-E186"></span>
</dd>
<dt>:cd[!] -</dt>
<dd><p>前のカレントディレクトリ (前にコマンド &quot;<code>:cd {path}</code>&quot; で移つた所) に移動します。
</p>
<span id="g_t_003achd"></span><span id="g_t_003achdir"></span><span id="index-_003achd"></span>
<span id="index-_003achdir"></span>
</dd>
<dt>:chd[ir][!] [path]</dt>
<dd><p>コマンド |<a href="#g_t_003acd">:cd</a>| と同じです。
</p>
<span id="g_t_003atcd"></span><span id="index-_003atcd"></span>
</dd>
<dt>:tcd[!] {path}</dt>
<dd><p>|<a href="#g_t_003acd">:cd</a>| と似てゐますが、カレントタブページのディレクトリを設定するだけです。カレントウィンドウもこのディレクトリを使用します。カレントディレクトリは、他のタブページ內のウィンドウやカレントタブページ內のウィンドウ固有のウィンドウローカルディレクトリに對しては變更されません。
</p>
<span id="g_t_003atch"></span><span id="g_t_003atchdir"></span><span id="index-_003atch"></span>
<span id="index-_003atchdir"></span>
</dd>
<dt>:tch[dir][!]</dt>
<dd><p>|<a href="#g_t_003atcd">:tcd</a>| と同じです。
</p>
<span id="g_t_003alc"></span><span id="g_t_003alcd"></span><span id="index-_003alc"></span>
<span id="index-_003alcd"></span>
</dd>
<dt>:lc[d][!] {path}</dt>
<dd><p>コマンド |<a href="#g_t_003acd">:cd</a>| と似てゐますが、カーソルがカレントウィンドウにある時にカレントディレクトリのみを變更します。別のウィンドウのカレントディレクトリは變更されず、別のウィンドウへの移動すると {path} の使用を止めます。
</p>
<span id="g_t_003alch"></span><span id="g_t_003alchdir"></span><span id="index-_003alch"></span>
<span id="index-_003alchdir"></span>
</dd>
<dt>:lch[dir][!]</dt>
<dd><p>|<a href="#g_t_003alcd">:lcd</a>| と同じです。
</p>
<span id="g_t_003apw"></span><span id="g_t_003apwd"></span><span id="E187"></span><span id="index-_003apw"></span>
<span id="index-_003apwd"></span>
<span id="index-E187"></span>
</dd>
<dt>:pw[d]</dt>
<dd><p>カレントディレクトリ名を表示します。
</p>
<p>|<a href="eval_002etxt.html#getcwd_0028_0029">getcwd()</a>| も參照してください。
</p></dd>
</dl>

<p>|<a href="#g_t_003alcd">:lcd</a>| か |<a href="#g_t_003atcd">:tcd</a>| コマンドが使はれない限り、全てのウィンドウは同じカレントディレクトリを共有します。別のウィンドウに移るコマンドを使つてもカレントディレクトリについての變化は何もありません。
</p>
<p>|<a href="#g_t_003alcd">:lcd</a>| コマンドがあるウィンドウ內で使はれると、指定されたディレクトリがそのウィンドウに對してのカレントディレクトリになります。|<a href="#g_t_003alcd">:lcd</a>| コマンドが使はれたことのないウィンドウはグローバルまたはタブローカルなカレントディレクトリを使ひ續けます。別のウィンドウに移つたときは、カレントディレクトリは {譯注: 移動先に對して} 最後に指定されたローカルなカレントディレクトリになります。何も指定されてゐなければ、グローバルまたはタブローカルなカレントディレクトリが使はれます。
</p>
<p>タブページに |<a href="#g_t_003atcd">:tcd</a>| コマンドが使はれると、指定されたディレクトリはカレントタブページとカレントウィンドウのカレントディレクトリになります。他のタブページのカレントディレクトリは影響を受けません。別のタブページに移動すると、カレントディレクトリがそのタブページで最後に指定されたローカルディレクトリになります。カレントタブページにローカルのカレントディレクトリがない場合は、グローバルなカレントディレクトリが使用されます。
</p>
<p>|<a href="#g_t_003acd">:cd</a>| コマンドが使はれると、カレントウィンドウとカレントタブページは固有のローカルなカレントディレクトリを失ひ、グローバルなカレントディレクトリを使ふやうになります。
</p>
<p>|<a href="#g_t_003acd">:cd</a>| を使つた後は、ファイルの讀み書きにはフルパス名が使はれます。ネットワーク接續されたファイルシステムではこれが問題を起こすことがあります。フルパス名を使つた結果、現在使用中のファイル名は同じファイルを指し續けることになります。
</p>
<p>例: ファイル <samp>a:test</samp> とディレクトリ a:vim があるとき、&quot;<code>:e test</code>&quot; &quot;<code>:cd vim</code>&quot; &quot;<code>:w</code>&quot; とするとファイル <samp>a:test</samp> を上書きし、a:vim/test には書き込みません。しかし &quot;<code>:w test</code>&quot; とするとファイル <samp>a:vim/test</samp> が書き込まれます。それは新しいファイル名が指定され、&quot;<code>:cd</code>&quot; 以前のファイル名には言及してゐないからです。
</p>
<span id="edit_002dbinary"></span><span id="index-edit_002dbinary"></span>
<span id="index-bainarihuairunoBian-Ji-"></span>
<span id="g_t8_002e-bainarihuairunoBian-Ji-"></span><h3 class="section">8. バイナリファイルの編輯</h3>

<p>Vim はテキストファイルの編輯のために作られましたが、バイナリファイルを編輯することもできます。
</p>
<p>Vim の引數 |<a href="starting_002etxt.html#g_t_002db">-b</a>| (バイナリ &quot;binary&quot; の &rsquo;b&rsquo;) は Vim にファイル入出力をバイナリモードで行はせ、バイナリファイルの編輯のためにいくつかのオプションを設定します (&rsquo;<samp>binary</samp>&rsquo; をオン、&rsquo;<samp>textwidth</samp>&rsquo; を 0、&rsquo;<samp>modeline</samp>&rsquo; をオフ、&rsquo;<samp>expandtab</samp>&rsquo; をオフにします)。
</p>
<p>オプション &rsquo;<samp>binary</samp>&rsquo; をオンにすることも同じ效果を持ちます。これはファイルの讀み込み前にするといふことを忘れてはなりません。
</p>
<p>バイナリファイルを編輯するときに忘れてはならないことがいくつかあります:
</p><ul>
<li> 實行可能ファイルを編輯するときには、文字數が變はつてはなりません。テキストを變更するには &quot;R&quot; か &quot;r&quot; だけを使用してください。&quot;x&quot; やバックスペースで文字を削除してはなりません。
</li><li> オプション &rsquo;<samp>textwidth</samp>&rsquo; の値を 0 に設定します。さうしないと行が不意に 2 つに分割されてしまひます。
</li><li> &lt;EOL&gt; の數があまり多くないときは、1 行は非常に長くなります。スクリーンに收まりきらない行を編輯したいならば、オプション &rsquo;<samp>wrap</samp>&rsquo; をオフにしてください。その時には水平スクロールが使はれます。行が餘りにも長いならば (Amiga では約 32767 文字以上、32bit システムではそれ以上、|<a href="vi_005fdiff_002etxt.html#limits">limits</a>| を參照してください)、その行は編輯できません。ファイルを讀み込むときに、その行は分割されます。ファイルを讀み込むときに &quot;out of memory&quot; エラーが出る可能性もあります。
</li><li> ファイルを讀み込む前にオプション &rsquo;<samp>binary</samp>&rsquo; がオンになつてゐることを確かめてください。さもないと &lt;CR&gt; &lt;NL&gt; と &lt;NL&gt; の兩方が行末とみなされ、ファイルが保存されるときに &lt;NL&gt; が &lt;CR&gt; &lt;NL&gt; で置き換へられてしまひます。
</li><li> &lt;Nul&gt; 文字はスクリーンでは ^@ として表示されます。それは &quot;CTRL-V CTRL-@&quot; か &quot;CTRL-V 000&quot; で入力することができます。
</li><li> &lt;NL&gt; 文字を插入すると行が分割されます。バッファをファイルに保存するときには、&lt;NL&gt; が &lt;EOL&gt; として保存されます。
</li><li> ファイルの終はりに &lt;EOL&gt; が 1 つもないとき、通常 Vim はそれを追加します。これを防ぐにはオプション &rsquo;<samp>binary</samp>&rsquo; をオンにしてください。最後の &lt;EOL&gt; を追加したいならば、オプション &rsquo;<samp>endofline</samp>&rsquo; をオンにします。最後の行に &lt;EOL&gt; があつたかどうかを知るために、このオプションの値を見てもよいでせう (テキストからは判斷できません)。
</li></ul>

<span id="encryption"></span><span id="index-encryption"></span>
<span id="index-An-Hao-Hua--1"></span>
<span id="g_t9_002e-An-Hao-Hua-"></span><h3 class="section">9. 暗號化</h3>

<p>Vim はファイルを暗號化して保存し、再び讀み取ることができます。暗號化されたテキストは正しい鍵がないと讀むことができません。
<span id="E833"></span><span id="index-E833"></span>
{Vim が |<a href="various_002etxt.html#g_t_002bcryptv">+cryptv</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<span id="E843"></span><span id="index-E843"></span>
<p>スワップファイルやアンドゥファイル內のテキストも暗號化されます。
</p>
<p>しかしながら、これはブロック單位で實行されるので、より少ない時閒でパスワードがクラックされる可能性があります。スワップファイルを無效化することもできますが、クラッシュ時には作業內容が失はれることになります。アンドゥファイルは無效化してもそれほどの不利益はありません。
</p><pre class="verbatim">:set noundofile
:noswapfile edit secrets
</pre>
<blockquote>
<p><strong>Note:</strong> <br>
メモリ內のテキストは暗號化されません。ユーザーがテキストを編輯してゐる閒、システム管理者はそれを見ることができます。&quot;<code>:!filter</code>&quot; や &quot;<code>:w !command</code>&quot; によつてフィルタに通してゐるときもテキストは暗號化されてをらず、他人に見られる可能性があります。&rsquo;<samp>viminfo</samp>&rsquo; ファイルは暗號化されません。
</p></blockquote>

<p>機密テキストを編輯するときは次のやうに設定するといふ手もあります:
</p><pre class="verbatim">:set noundofile viminfo=
:noswapfile edit secrets.txt
</pre><p>スワップファイルを無效化するとクラッシュまたは停電の時に編輯內容が失はれてしまふことを心にとめておきませう。。
</p>
<blockquote>
<p><strong>警告:</strong> <br>
鍵の入力時にタイプミスをしてファイルを保存して Vim を終了すると、テキストは失はれてしまひます！
</p></blockquote>

<p>暗號化を利用する通常の方法は、コマンド |<a href="#g_t_003aX">:X</a>| を使ふことです。これは鍵を入力するやう求めます。次の保存コマンドでファイルを暗號化するためにその鍵が使はれます。後で同じファイルを編輯するときは、Vim は鍵の入力を求めます。保存に使はれたものと同じ鍵を打ち込むと、再びテキストを讀み込むことができます。閒違つたキーを使ふと、テキストはめちやめちやになつて表示されます。
</p>
<span id="g_t_003aX"></span><span id="index-_003aX"></span>
<dl compact="compact">
<dt>:X</dt>
<dd><p>暗號化キーを入力するやう求めます。ディスプレイを見てゐる誰かが鍵を見ないやうに、打ち込むときには實際のテキストは表示されません。
</p>
<p>打ち込まれた鍵はオプション &rsquo;<samp>key</samp>&rsquo; に保存されます。これはファイルを書き込むときの暗號化に使はれます。Vim の引數 |<a href="starting_002etxt.html#g_t_002dx">-x</a>| も參照してください。
</p></dd>
</dl>

<p>オプション &rsquo;<samp>key</samp>&rsquo; の値はテキストが書き込まれるときに使はれます。値が空でないとき、書き込まれたファイルは、その値を鍵として暗號化されてゐます。Vim がファイルが暗號化されてゐることを認識できるやう、ファイル先頭に特殊な數が付加されます。
</p>
<p>暗號化を無效にするには、オプション &rsquo;<samp>key</samp>&rsquo; に空の値を入れてリセットします。
</p><pre class="verbatim">:set key=
</pre>
<p>&rsquo;<samp>cryptmethod</samp>&rsquo; オプションを設定することで暗號化メソッドを選擇することができます。次の中から選擇できます:
</p><pre class="verbatim">:setlocal cm=zip        &quot; 弱いメソッド。後方互換
:setlocal cm=blowfish   &quot; 脆弱性ありのメソッド
:setlocal cm=blowfish2  &quot; 中强度のメソッド
</pre>
<p>ファイルを保存する前に設定します。暗號化されたファイルを讀み込んだとき、このオプションは自動的にファイル保存時に使はれたメソッドに設定されます。ファイルを保存する前に &rsquo;<samp>cryptmethod</samp>&rsquo; を變更することで使用するメソッドを變更することができます。
</p>
<p>新しいファイルに使はれるデフォルトのメソッドを設定したい場合は |<a href="starting_002etxt.html#vimrc">vimrc</a>| ファイルで次を設定してください:
</p><pre class="verbatim">set cm=blowfish2
</pre><p>&quot;blowfish2&quot; の使用が强く推奬されます。&quot;blowfish2&quot; をサポートしてゐない古いバージョンの Vim を使はなければならない場合のみ、他のメソッドを使用します。
</p>
<p>ファイルを讀み込んだり書き込んだりしたとき、zip なら &quot;[crypted]&quot;、blowfish なら &quot;[blowfish]&quot; とメッセージが表示されます。
</p>
<p>アンドゥファイルが保存されるとき、同じキーとメソッドがアンドゥファイル內のテキストに適用されます。|<a href="undo_002etxt.html#persistent_002dundo">persistent-undo</a>|。
</p>
<p>&quot;blowfish&quot; をサポートしてゐるかどうかテストするには下記の條件を使ひます:
</p><pre class="verbatim">has('crypt-blowfish')
has('crypt-blowfish2')
</pre><p>上記の條件が利用できるのは Vim 7.4.1099 からですが、&quot;blowfish&quot; のサポート自體はもつと古くからあります。よつて上記の條件が僞になつたとしても &quot;blowfish&quot; をサポートしてゐることがあります。&quot;blowfish&quot; を使へるかどうかは次の條件でテストすることができます:
</p><pre class="verbatim">v:version &gt;= 703
</pre><p>また &quot;blowfish2&quot; については次の條件でテストすることができます:
</p><pre class="verbatim">v:version &gt; 704 || (v:version == 704 &amp;&amp; has('patch401'))
</pre><p>Vim にパッチ 7.4.237 が含まれてゐることが分かつてゐるなら、次の條件で簡單にチェックすることができます:
</p><pre class="verbatim">has('patch-7.4.401')
</pre><span id="E817"></span><span id="E818"></span><span id="E819"></span><span id="E820"></span><span id="index-E817"></span>
<span id="index-E818"></span>
<span id="index-E819"></span>
<span id="index-E820"></span>
<p>暗號化が正しく機能しないと、保存したファイルが後で讀めなくなつてしまひます。そのため、暗號化が期待したとほりに機能してゐるかどうかを確認するための檢査が實行されます。これらのエラーが表示されたときはファイルを暗號化して保存しないでください。これを直すためには Vim を再ビルドする必要があるでせう。
</p>
<span id="E831"></span><span id="index-E831"></span>
<p>內部エラーの *E831* は普通は發生しません。このエラーの再現手順を見つけた方は開發者へ聯絡してください。
</p>
<p>暗號化されたファイルを讀み込んだとき、&rsquo;<samp>key</samp>&rsquo; オプションの値が空でなければその値が復號に使はれます。空のときは入力プロンプトが表示されます。キーを入力しないか閒違つたキーを入力するとファイルは復號されずに開かれます。キーが閒違つてゐても警告は表示されません (總當たり攻擊を難しくするため)。
</p>
<p>異なる鍵で暗號化したファイルの讀み込みを始めたいときは、オプション &rsquo;<samp>key</samp>&rsquo; の値に空文字列を設定してください。すると Vim が新しい値の入力を求めます。値の入力にコマンド &quot;<code>:set</code>&quot; を使つてはなりません。他の人が肩越しにコマンドの入力を讀むことができるからです。
</p>
<p>オプション &rsquo;<samp>key</samp>&rsquo; の値は祕密であることになつてゐるので、その値は決して見られてはなりません。<samp>vimrc</samp> ファイル內でこのオプションを設定してはいけません。
</p>
<p>&quot;/etc/magic&quot;, &quot;/usr/share/misc/magic&quot; 等、システムの持つてゐる &quot;magic&quot; ファイルならどれでもよいですが、下の行を追加すると、暗號化されたファイルが &quot;file&quot; コマンドに認識されるやうになります:
</p><pre class="verbatim">0   string  VimCrypt~       Vim encrypted file
&gt;9  string  01      - &quot;zip&quot; cryptmethod
&gt;9  string  02      - &quot;blowfish&quot; cryptmethod
&gt;9  string  03      - &quot;blowfish2&quot; cryptmethod
</pre>
<blockquote>
<p><strong>Notes:</strong>
</p><ul>
<li> オプション &rsquo;<samp>charconvert</samp>&rsquo; でコード變換をしてゐるときには暗號化はできません。
</li><li> コピーや削除したテキストは番號付きレジスタに格納されます。レジスタの內容は <samp>.viminfo</samp> ファイル內に保存することができますが、ここからは讀み出されるかもしれません。安全のためオプション &rsquo;<samp>viminfo</samp>&rsquo; を變更してください。
</li><li> コンピュータからしばらく離れてゐるときには誰かが Vim にコマンドを入力できますが、鍵を入手できるやうになつてゐてはいけません。
</li><li> キーを入力してゐるときにタイプミスをすると、テキストを復元できなくなつてしまふでせう！
</li><li> コマンド &quot;<code>:set key=value</code>&quot; で鍵を入力すると、それは履歷の中に保存され、viminfo ファイル內に &rsquo;<samp>key</samp>&rsquo; の値を晒すことになります。
</li><li> 100 パーセント安全といふことは決してありません。Vim の暗號化は强度についてはテストされてゐません。
</li><li> &rsquo;<samp>cryptmethod</samp>&rsquo; が &quot;zip&quot; のときに使用されるアルゴリズムは簡單に破れます。4 文字の鍵なら約 1 時閒以內、6 文字の鍵なら 1 日以內で破れます (Pentium 133 PC で)。これにはファイル內に必ず現れるはずのテキストをいくつか知つてゐる必要があります。暗號破りの熟練者はどのやうな鍵であつても破ることができます。テキストが復號化されたといふことは鍵も明らかになつたといふことであり、同じ鍵で暗號化された他のテキストも復號化できてしまひます。
</li><li> Pkzip は &rsquo;<samp>cryptmethod</samp>&rsquo; の &quot;zip&quot; と同じ暗號化を用ゐてをり、合衆國政府はその輸出に對して異議を唱へてゐません。Pkzip の公開ファイル <samp>APPNOTE.TXT</samp> にはこのアルゴリズムが詳細に記述されてゐます。
</li><li> &rsquo;<samp>cryptmethod</samp>&rsquo; の &quot;blowfish&quot; の實裝には脆弱性があります。ファイルの最初の 64 バイト (條件によつてはもつと) はクラック可能です。これの使用は推奬されませんが、Vim 7.3 と 7.4 でサポートされてゐる中ではそれが一番强度のあるメソッドです。&quot;zip&quot; メソッドはさらに弱いです。
</li><li> Vim はオランダに起源を持ちます。そこがソースの出處です。從つて、暗號化コードはアメリカ合衆國から輸出されてはゐません。
</li></ul>
</blockquote>

<span id="timestamp"></span><span id="timestamps"></span><span id="index-timestamp"></span>
<span id="index-timestamps"></span>
<span id="index-taimusutanpu"></span>
<span id="g_t10_002e-taimusutanpu"></span><h3 class="section">10. タイムスタンプ</h3>

<p>Vim は編輯を始めたときのファイルの修正タイムスタンプとモードとサイズを覺えてゐます。これは同じファイルの別のバージョンを (知らずに) 作つてしまふのを防ぐためです。
</p>
<p>シェルコマンド (|<a href="various_002etxt.html#g_t_003a_0021cmd">:!cmd</a>| |<a href="starting_002etxt.html#suspend">suspend</a>| |<a href="insert_002etxt.html#g_t_003aread_0021">:read!</a>| |<a href="various_002etxt.html#K">K</a>|) の實行後、ウィンドウ內の全てのバッファでタイムスタンプとファイルモードとファイルサイズが比較されます。Vim は變更を受けたファイルに關して、イベント |<a href="autocmd_002etxt.html#FileChangedShell">FileChangedShell</a>| に關聯付けられた任意の自動コマンドを實行するか、警告を表示します。GUI を使つてゐるときは、それらは Vim に入力フォーカスが戾つてきたときに行はれます。
</p>
<span id="E321"></span><span id="E462"></span><span id="index-E321"></span>
<span id="index-E462"></span>
<p>ファイルが Vim の外部で變更を受けたときに自動的に讀み直して欲しいなら、オプション &rsquo;<samp>autoread</samp>&rsquo; をオンにしてください。しかしこれはファイルを書き込んだ時點では機能しません。ファイルが Vim 內部で變更されてゐないときだけです。
</p>
<span id="ignore_002dtimestamp"></span><span id="index-ignore_002dtimestamp"></span>
<p>もしも質問されたくなかつたり、ファイルを自動的に再讀み込みをしたいのなら、次の設定を使ふことができます:
</p><pre class="verbatim">set buftype=nofile
</pre><p>もしくは、シェルから gvim を起動する時に
</p><pre class="verbatim">gvim file.log -c &quot;set buftype=nofile&quot;
</pre>
<blockquote>
<p><strong>Note:</strong> <br>
イベント |<a href="autocmd_002etxt.html#FileChangedShell">FileChangedShell</a>| に自動コマンドが定義されてゐると、警告メッセージやプロンプトは表示されません。その自動コマンドが對處するものとされてゐます。
</p></blockquote>

<p>ディレクトリに關する警告はありません (例へば |<a href="pi_005fnetrw_002etxt.html#netrw_002dbrowse">netrw-browse</a>| で)。しかし新しいファイルの編輯を始めた後、同名のディレクトリが作られたときには警告されます。
</p>
<p>ファイルのタイムスタンプが變更されたことに Vim が氣づいたとき、そのファイルがバッファ內で編輯されてゐるけれどもまだ變更されてゐないなら、Vim はファイルの中身が同じかどうかを調べます。このためにはファイルを讀み直し、テキストを比較します (隱れバッファに讀み込みますが、これはすぐに削除されます)。內容が同じならば警告は出ません。
</p>
<p>自動警告では足りないと思つたなら、以下のコマンドが使へます。
</p>
<span id="g_t_003acheckt"></span><span id="g_t_003achecktime"></span><span id="index-_003acheckt"></span>
<span id="index-_003achecktime"></span>
<dl compact="compact">
<dt>:checkt[ime]</dt>
<dd><p>Vim の外部で變更を受けたバッファがないかどうか調べます。これはファイルのバージョンが 2 個になつてしまはないかどうかを調べて警告します。
</p>
<p>これが自動コマンドや &quot;<code>:global</code>&quot; コマンドから呼ばれたときや、直に打ち込まれたのではないときは、實際に調べるのは副作用 (ファイルの再讀み込み) が無害となる時點まで延期されます。
</p>
<p>讀み込まれてゐるバッファそれぞれについて關聯付けられたファイルが變更を受けてゐないか調べます。變更を受けてゐたら、Vim は對處動作を行ひます。すなはちバッファに變更點が無く、かつオプション &rsquo;<samp>autoread</samp>&rsquo; がオンのときは、バッファは讀み直されます。さうでなければ、ファイルを讀み直すかどうかの選擇肢が與へられます。ファイルが削除されてゐたら、エラーメッセージが表示されます。
</p>
<p>以前には存在しなかつたファイルが存在してゐたら、エラーメッセージが表示されます。
</p>
<p>一度ファイルが調べられるとタイムスタンプ情報が更新され、再び警告されることはありません。
</p>
</dd>
<dt>:[N]checkt[ime] {filename}</dt>
<dt>:[N]checkt[ime] [N]</dt>
<dd><p>特定のバッファのタイムスタンプを調べます。バッファの指定は名前、番號またはパターンでもよい。
</p></dd>
</dl>


<span id="E813"></span><span id="E814"></span><span id="index-E813"></span>
<span id="index-E814"></span>
<p>ここでユーザーがバッファを再讀み込みすることを選ぶと、再讀み込みされます。そのバッファを含むウィンドウが表示されてゐる場合、再讀み込みはそのウィンドウの中で行はれます。そのやうなウィンドウがなければ、自動コマンドが正常に動作するやう、特殊なウィンドウが使はれます。このウィンドウを閉ぢることはできません。他にもいくつかの制限が適用されます。カレントバッファの外では何も起こらないやうにするのがベストです。
</p>
<p>例へば、ウィンドウローカルなオプションをセットすると、閒違つたウィンドウの中でセットされてしまひます。ウィンドウを分割し、そこで何かをして、閉ぢることは大丈夫です (他の自動コマンドによる副作用が何もなければ)。無關係なウィンドウやバッファを閉ぢると問題を引き起こすでせう。
</p>
<p>書き込み前にはタイムスタンプが調べられます。もし變更されてゐたら、Vim はそのファイルを本當に上書きするかどうかを尋ねます。
</p>
<div class="display">
<pre class="display">警告: 讀込んだ後にファイルに變更がありました！！！
本當に上書きしますか (y/n)？
</pre></div>

<p>&rsquo;y&rsquo; を打ち込むと、Vim は續けて書き込みを行ひます。&rsquo;n&rsquo; を打ち込むと、書き込みは中止されます。コマンド &quot;<code>:wq</code>&quot; や &quot;<code>ZZ</code>&quot; を使つた場合には Vim は終了せず、書き込む機會が再び得られます。
</p>
<p>普通、メッセージは編輯セッションが始まつた後に誰かがファイルに書き込んだことを示してゐます。それは別の人物かもしれません。この場合、あなたの行つた變更とその人物が行つた變更が合倂されるべきか調べたいことでせう。ファイルを別の名前で書き込み、差分を調べてください (これにはプログラム &quot;diff&quot; が使へる)。
</p>
<p>別の編輯セッションや別のコマンドで (例へばフィルタコマンド) そのファイルに自分自身で變更を加へたといふこともあり得ます。その場合、どちらのバージョンを保管したいかは自分でわかつてゐるでせう。
</p>
<p>何も閒違つたことはしてゐないのにこのメッセージが現れる場合が 1 つあります: Win32 でサマータイムが始まる日です。Win32 ライブラリにより、Vim が時閒の差を混亂してしまふのです。この問題は次の日には直ります。
</p>
<span id="file_002dsearching"></span><span id="index-file_002dsearching"></span>
<span id="index-huairuJian-Suo-"></span>
<span id="g_t11_002e-huairuJian-Suo-"></span><h3 class="section">11. ファイル檢索</h3>

<p>{Vim が |<a href="various_002etxt.html#g_t_002bpath_005fextra">+path_extra</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<p>現在のところ、オプション &rsquo;<samp>path</samp>&rsquo;, &rsquo;<samp>cdpath</samp>&rsquo;, &rsquo;<samp>tags</samp>&rsquo; と |<a href="eval_002etxt.html#finddir_0028_0029">finddir()</a>|, |<a href="eval_002etxt.html#findfile_0028_0029">findfile()</a>| で、本節で說明する「ファイル檢索」にしたがつてワイルドカードの展開が行はれます。それ以外のコマンドでは |<a href="#wildcards">wildcards</a>| といふ少し異なるルールに從ひます。
</p>
<p>ファイル檢索には以下の 3 種類があります:
</p>
<span id="starstar"></span><span id="index-starstar"></span>
<span id="index-_002a_002a"></span>
<dl compact="compact">
<dt>1) 下向き檢索:</dt>
<dd><p>下向き檢索にはワイルドカード &rsquo;*&rsquo; と &rsquo;**&rsquo; 及びユーザーの OS がサポートするその他のものが使へます。&rsquo;*&rsquo; と &rsquo;**&rsquo; は Vim 內部で處理されるので、全ての OS で機能します。
</p><blockquote>
<p><strong>Note:</strong><br>
&quot;**&quot; はパス名の先頭で使はれた場合のみ特別なワイルドカードとなります。
</p></blockquote>

<p>&rsquo;*&rsquo; の使用法はきはめて單純です: 0 個以上の文字にマッチします。正規表現パターンでいふと &quot;.*&quot; と同じです。正規表現と異なり &quot;.&quot; は必要ないことに注意してください。
</p>
<p>&rsquo;**&rsquo; はもつとすばらしい。
</p><ul>
<li> これはディレクトリのみにマッチします。
</li><li> これはデフォルトで 30 段階までの深さのディレクトリにマッチするので、ディレクトリツリー全體の檢索に使へます。
</li><li> マッチする深さの最大値は &rsquo;**&rsquo; の後に數字を付け加へて指定することができます。
</li></ul>
<p>ですから &rsquo;/usr/**2&rsquo; は下のやうにマッチします。
</p><pre class="verbatim">/usr
/usr/include
/usr/include/sys
/usr/include/g++
/usr/lib
/usr/lib/X11
....
</pre><p>&rsquo;/usr/include/g++/std&rsquo; には、深さが 3 なのでマッチしません。
</p>
<p>指定可能な範圍は 0 (&rsquo;**0&rsquo; は無視される) から 100 です。負數を指定すると 30 を、100 より大きい數を指定すると 100 を指定したものとされます。システムにもパスの長さの限界が存在する場合があります。通常は 256 または 1024 バイトです。
</p><ul>
<li> &rsquo;**&rsquo; はパスの末尾にのみ使へます。後ろにパス區切り文字か、數字とパス區切り文字の組み合はせを付けてもよい。
</li></ul>

<p>&rsquo;*&rsquo; と &rsquo;**&rsquo; を組み合はせる順番は自由です。
</p><pre class="verbatim">/usr/**/sys/*
/usr/*tory/sys/**
/usr/**2/sys/*
</pre>
</dd>
<dt>2) 上向き檢索:</dt>
<dd><p>この方法ではディレクトリを指定すると、そのディレクトリから上に遡つてファイルを探します。上向き探索の上限となるディレクトリを指定できます。それはパス (オプション &rsquo;<samp>path</samp>&rsquo;) かファイル名 (オプション &rsquo;<samp>tags</samp>&rsquo;) の末尾に &rsquo;;&rsquo; で區切つて指定します。複數のディレクトリを指定したいときはそれらを &rsquo;;&rsquo; で區切ります。上限ディレクトリを指定したくないときは (ルートディレクトリまで上向き檢索したいとき) &rsquo;;&rsquo; だけを付けます。
</p><pre class="verbatim">/usr/include/sys;/usr
</pre><p>で檢索されるディレクトリは:
</p><pre class="verbatim">/usr/include/sys
/usr/include
/usr
</pre><p>相對パスを使ふと上向き檢索は Vim のカレントディレクトリから始まります。相對パスの指定が &rsquo;./&rsquo; で始まり、&rsquo;<samp>cpoptions</samp>&rsquo; にフラグ &rsquo;<var>d</var>&rsquo; が含まれてゐないときはカレントファイルのディレクトリから始まります。
</p>
<p>Vim のカレントパスが /u/user_x/work/release のときに
</p><pre class="verbatim">:set path=include;/u/user_x
</pre><p>とすると、コマンド |<a href="#gf">gf</a>| でファイルを探す範圍は:
</p><pre class="verbatim">/u/user_x/work/release/include
/u/user_x/work/include
/u/user_x/include
</pre>
</dd>
<dt>3) 複合檢索:</dt>
<dd><p>Vim のカレントパスが /u/user_x/work/release のときに
</p><pre class="verbatim">set path=**;/u/user_x
</pre><p>とすると、コマンド |<a href="#gf">gf</a>| でファイルを探す範圍は:
</p><pre class="verbatim">/u/user_x/work/release/**
/u/user_x/work/**
/u/user_x/**
</pre><blockquote>
<p><strong>注意！</strong> <br>
これはかなりの時閒を食ふかもしれません。&rsquo;/u/user_x/**&rsquo; は &rsquo;/u/user_x/work/**&rsquo; や &rsquo;/u/user_x/work/release/**&rsquo; を含むからです。つまり &rsquo;/u/user_x/work/release/**&rsquo; は 3 回、&rsquo;/u/user_x/work/**&rsquo; は 2 回繰り返して檢索されます。
</p></blockquote>

<p>上の例では次のやうに設定したはうがいいかもしれません:
</p><pre class="verbatim">:set path=**,/u/user_x/**
</pre><p>これに含まれる範圍は
</p><pre class="verbatim">/u/user_x/work/release/**
/u/user_x/**
</pre><p>となり、同じディレクトリですが順番が違ひます。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
現在 &quot;<code>:find</code>&quot;, &quot;<code>:sfind</code>&quot;, &quot;<code>:tabfind</code>&quot; コマンドは、&rsquo;<samp>path</samp>&rsquo; アイテムに URL や深さ制限付きのダブルスター (/usr/**2) や 上方檢索 (;) などが含まれてゐると機能しないことに注意してください。
</p></blockquote>
</dd>
</dl>

<hr>
<div class="header">
<p>
Up: <a href="Mu-Ci-.html" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
