<!DOCTYPE html>
<html lang="ja">
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>

<title>tagsrch.txt (Vim Reference Manual)</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="description" content="tagsrch.txt (Vim Reference Manual)">
<meta name="keywords" content="tagsrch.txt (Vim Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="Mu-Ci-.html#g_t_76ee_6b21" rel="start" title="目次">
<link href="Indexes-CP.html#Indexes-CP" rel="index" title="Indexes CP">
<link href="Mu-Ci-.html#g_t_76ee_6b21" rel="up" title="目次">
<link href="windows_002etxt.html#windows_002etxt" rel="next" title="windows.txt">
<link href="map_002etxt.html#map_002etxt" rel="prev" title="map.txt">
<style>
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="ja">
<a name="tagsrch_002etxt"></a>
<div class="header">
<p>
Up: <a href="Mu-Ci-.html#g_t_76ee_6b21" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html#Indexes-CP" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="tagutoTe-Bie-naJian-Suo-"></a>
<h2 class="unnumbered">タグと特別な檢索</h2>
<pre class="verbatim">*tagsrch.txt*   For Vim バージョン 8.1.  Last change: 2019 Jun 10


		  VIMリファレンスマニュアル    by Bram Moolenaar
</pre>

<a name="tags_002dand_002dsearches"></a><a name="index-tags_002dand_002dsearches"></a>
<p>タグと特別な檢索
</p>
<p>初めにユーザーマニュアルのセクション |<a href="usr_005f29_002etxt.html#g_t29_002e1">29.1</a>| を參照すること。
</p>
<table>
<tr><td width="50%">1. タグへのジャンプ</td><td width="50%">|<a href="#tag_002dcommands">tag-commands</a>|</td></tr>
<tr><td width="50%">2. タグスタック</td><td width="50%">|<a href="#tag_002dstack">tag-stack</a>|</td></tr>
<tr><td width="50%">3. タグマッチリスト</td><td width="50%">|<a href="#tag_002dmatchlist">tag-matchlist</a>|</td></tr>
<tr><td width="50%">4. タグの詳細</td><td width="50%">|<a href="#tag_002ddetails">tag-details</a>|</td></tr>
<tr><td width="50%">5. タグファイルの書式</td><td width="50%">|<a href="#tags_002dfile_002dformat">tags-file-format</a>|</td></tr>
<tr><td width="50%">6. インクルードファイルの檢索</td><td width="50%">|<a href="#include_002dsearch">include-search</a>|</td></tr>
<tr><td width="50%">7. &rsquo;<samp>tagfunc</samp>&rsquo; を使ふ</td><td width="50%">|<a href="#tag_002dfunction">tag-function</a>|</td></tr>
</table>

<a name="tag_002dcommands"></a><a name="index-tag_002dcommands"></a>
<a name="index-taguhenoziyanpu"></a>
<a name="g_t1_002e-taguhenoziyanpu"></a>
<h3 class="section">1. タグへのジャンプ</h3>

<a name="tag"></a><a name="tags"></a><a name="index-tag"></a>
<a name="index-tags"></a>
<p>タグとは &quot;tags&quot; ファイルに現はれる識別子である。タグはラベルのやうなものであり、そこにジャンプすることができる。例へば: C のプログラムではそれぞれの函數名をタグとして使ふことができる。タグ機能を使ふ前には、ctags のやうなプログラムによつて &quot;tags&quot; ファイルを生成しなければならない。
</p>
<p>&quot;:tag&quot; コマンドはカーソルをタグ上に移動する。<code>CTRL-]</code> コマンドはカーソルの下にあるキーワードをタグとして使用する。もしカーソルがキーワード上になければ、カーソル位置から右側で最初に現れるキーワードを使用する。
</p>
<p>&quot;:tag&quot; コマンドはCプログラムでよく機能する。もし函數呼び出しを見つけた時にその函數が何をするのか疑問に思つたら、カーソルを函數名の上に置いて <kbd>CTRL-]</kbd> を叩けばよい。これで函數定義に導いてもらへるだらう。簡單に戾る方法は <code>CTRL-T</code> コマンドを使ふことである。後述するタグスタックについても讀むとよい。
</p>
<dl compact="compact">
<dd><a name="g_t_003ata"></a><a name="g_t_003atag"></a><a name="E426"></a><a name="E429"></a><a name="index-_003ata"></a>
<a name="index-_003atag"></a>
<a name="index-E426"></a>
<a name="index-E429"></a>
</dd>
<dt>:[count]ta[g][!] {name}</dt>
<dd><p>tags ファイル內の情報を用ゐて、{name} の定義へジャンプする。{name} はタグスタックに積まれる。[!] については |<a href="#tag_002d_0021">tag-!</a>| を參照。
</p>
<p>{name} は正規表現を使用できる。|<a href="#tag_002dregexp">tag-regexp</a>| を參照。
</p>
<p>{name} に對してマッチするタグが複數ある場合、[count] 番目のタグへジャンプする。[count] が指定されないときは最初のタグへジャンプする。他のマッチするタグへジャンプするには |<a href="#tag_002dmatchlist">tag-matchlist</a>| を參照。
</p>
<a name="g_003cLeftMouse_003e"></a><a name="g_t_003cC_002dLeftMouse_003e"></a><a name="CTRL_002d_005d"></a><a name="index-g_003cLeftMouse_003e"></a>
<a name="index-_003cC_002dLeftMouse_003e"></a>
<a name="index-CTRL_002d_005d"></a>
</dd>
<dt>g&lt;LeftMouse&gt; または</dt>
<dt>&lt;C-LeftMouse&gt; または</dt>
<dt><kbd>CTRL-]</kbd></dt>
<dd><p>カーソルの下のキーワードを定義してゐる場所にジャンプする。&quot;:tag {name}&quot; と同樣であるが、{name} はカーソルの下、もしくは次に現はれるキーワードである。
</p>
<p>{name} に對してマッチするタグが複數ある場合、[count] 番目のタグへジャンプする。[count] が指定されないときは最初のタグへジャンプする。他のマッチするタグへジャンプするには |<a href="#tag_002dmatchlist">tag-matchlist</a>| を參照。
</p>
<a name="v_005fCTRL_002d_005d"></a><a name="index-v_005fCTRL_002d_005d"></a>
</dd>
<dt>{Visual}<kbd>CTRL-]</kbd></dt>
<dd><p>&quot;:tag {name}&quot; と同樣であるが、{name} はハイライトされてゐるテキストである。
</p></dd>
</dl>

<a name="telnet_002dCTRL_002d_005d"></a><a name="index-telnet_002dCTRL_002d_005d"></a>
<p><kbd>CTRL-]</kbd> は telnet の標準エスケープキーである。タグにジャンプしようと <kbd>CTRL-]</kbd> を打つと、代はりに telnet のプロンプトが立ち上がるだらう。telnet のたいていのバージョンは、標準エスケープキーを變更、もしくは使用不可能にできる。telnet のマニュアルを參照すること。エスケープキーを使用不可能にするには &rsquo;telnet -E {ホスト名}&rsquo;、エスケープ文字を他の文字にするには &rsquo;telnet -e {エスケープ文字} {ホスト名}&rsquo; を使用する。もし可能なら telnet の代はりに ssh を使ふことで、この問題を囘避できる。
</p>
<a name="tag_002dpriority"></a><a name="index-tag_002dpriority"></a>
<p>タグのマッチが複數ある場合、以下の優先度が使はれる:
</p><ol>
<li> &quot;FSC&quot;  カレントファイル內の全一致する static タグ。
</li><li> &quot;F C&quot;  カレントファイル內の全一致する global タグ。
</li><li> &quot;F  &quot;  別のファイル內の全一致する global タグ。
</li><li> &quot;FS &quot;  別のファイル內の全一致する static タグ。
</li><li> &quot; SC&quot;  カレントファイル內の大文字、小文字を無視した一致をする static タグ。
</li><li> &quot;  C&quot;  カレントファイル內の大文字、小文字を無視した一致をする global タグ。
</li><li> &quot;   &quot;  別のファイル內の大文字、小文字を無視した一致をする global タグ。
</li><li> &quot; S &quot;  別のファイル內の大文字、小文字を無視した一致をする static タグ。
</li></ol>

<blockquote>
<p><strong>Note:</strong> <br>
カレントファイルが變はつても、優先度のリストはほとんどの場合變化しないので注意すること。これは &quot;<code>:tnext</code>&quot; を使ふときの混亂を避けるためである。優先度のリストは &quot;:tag {name}&quot; を使つたときに變化する。
</p></blockquote>

<p>以下の場合は &quot;:tag &quot; で大文字小文字を無視した檢索は行はれません:
</p><ul>
<li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>followic</var>&quot; で &rsquo;<samp>ignorecase</samp>&rsquo; オプションがオフの時
</li><li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>followscs</var>&quot; で &rsquo;<samp>ignorecase</samp>&rsquo; オプションがオフで &rsquo;<samp>smartcase</samp>&rsquo; オプションがオフであるか、パターンに大文字が含まれてゐる時
</li><li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>match</var>&quot; である
</li><li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>smart</var>&quot; でパターンに大文字が含まれる時
</li></ul>

<p>以下の場合は大文字小文字を無視した檢索が行はれます:
</p><ul>
<li> パターンが使用される時 (&quot;/&quot; で始まる)
</li><li> &quot;:tselect&quot; の時
</li><li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>followic</var>&quot; で &rsquo;<samp>ignorecase</samp>&rsquo; がオンの時
</li><li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>followscs</var>&quot; で &rsquo;<samp>ignorecase</samp>&rsquo; がオン、または &rsquo;<samp>smartcase</samp>&rsquo; オプションがオンでパターンに大文字が含まれてゐない時
</li><li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>ignore</var>&quot; の時
</li><li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>smart</var>&quot; でパターンに大文字が含まれてゐない時
</li></ul>

<blockquote>
<p><strong>Note:</strong> <br>
大文字小文字を無視したタグ檢索はタグファイル內での二分探索を無效にし速度の低下を引き起こします。これは大文字小文字を保持したままタグファイルを竝び替へる事で囘避できます。&rsquo;<samp>tagbsearch</samp>&rsquo; オプションの說明を參照
</p></blockquote>

<a name="tag_002dstack"></a><a name="tagstack"></a><a name="E425"></a><a name="index-tag_002dstack"></a>
<a name="index-tagstack"></a>
<a name="index-E425"></a>
<a name="index-tagusutatuku"></a>
<a name="g_t2_002e-tagusutatuku"></a>
<h3 class="section">2. タグスタック</h3>

<p>タグスタック上にはジャンプ先のタグと、どこから來たのかといふ情報が記憶される。タグは &rsquo;<samp>tagstack</samp>&rsquo; オプションが設定されてゐるときにだけ積まれる。
</p>
<dl compact="compact">
<dd><a name="g_003cRightMouse_003e"></a><a name="g_t_003cC_002dRightMouse_003e"></a><a name="CTRL_002dT"></a><a name="index-g_003cRightMouse_003e"></a>
<a name="index-_003cC_002dRightMouse_003e"></a>
<a name="index-CTRL_002dT"></a>
</dd>
<dt>g&lt;RightMouse&gt; または</dt>
<dt>&lt;C-RightMouse&gt; または</dt>
<dt><kbd>CTRL-T</kbd></dt>
<dd><p>タグスタック中の [count] 分だけ古いエントリにジャンプする (デフォルトは 1)。
</p>
<a name="g_t_003apo"></a><a name="g_t_003apop"></a><a name="E555"></a><a name="E556"></a><a name="index-_003apo"></a>
<a name="index-_003apop"></a>
<a name="index-E555"></a>
<a name="index-E556"></a>
</dd>
<dt>:[count]po[p][!]</dt>
<dd><p>タグスタック中の [count] 分だけ古いエントリにジャンプする (デフォルトは 1)。
</p>
<p>[!] については |<a href="#tag_002d_0021">tag-!</a>| を參照。
</p>
</dd>
<dt>:[count]ta[g][!]</dt>
<dd><p>タグスタック中の [count] 分だけ新しいエントリにジャンプする (デフォルトは 1)。
</p>
<p>[!] については |<a href="#tag_002d_0021">tag-!</a>| を參照。
</p>
<a name="g_t_003atags"></a><a name="index-_003atags"></a>
</dd>
<dt>:tags</dt>
<dd><p>タグスタックの內容を表示する。現在のエントリは &rsquo;&gt;&rsquo; でマークされる。
</p></dd>
</dl>

<p>&quot;:tags&quot; の出力は以下のやうになる:
</p><pre class="verbatim">   # TO tag      FROM line  in file/text
   1  1 main             1  harddisk2:text/vim/test
 &gt; 2  2 FuncA           58  i = FuncA(10);
   3  1 FuncC          357  harddisk2:text/vim/src/amiga.c
</pre>
<p>このリストはジャンプ先のタグとジャンプ前のカーソル位置を表示する。上から順に古いタグが竝び、一番下が最も新しいタグである。
</p>
<p>&rsquo;&gt;&rsquo; は現在のエントリを指してゐる。これは次の &quot;:tag&quot; コマンドで使はれるタグである。CTRL-T と &quot;:pop&quot; コマンドは 1 つ上のタグを使ふ。
</p>
<p>&quot;TO&quot; の列にはマッチリスト中の現在のマッチ數を表示する。これは &quot;:pop&quot; や &quot;:tag&quot; を使つても變化しないので注意すること。
</p>
<p>行番號とファイル名は、タグコマンドを實行する前にゐた位置に戾ることができるやうに記憶される。行番號は行の削除や插入が行はれた時にも正しく維持される。ただし、別のプログラム(例へば、Vim の別インスタンス)で編輯した場合を除く。
</p>
<p>ジャンプ前の位置がカレントファイル內であれば、&quot;file/text&quot; の列にその行が表示される。インデントは取り除かれ、長い行はウィンドウに收まるやうに切り詰められる。
</p>
<p>前に使つたタグにジャンプするコマンドはいくつかある。例へば:
</p><pre class="verbatim">&quot;:pop&quot; or CTRL-T    ひとつ前に使はれたタグにジャンプする。
{count}CTRL-T       {count}分だけ前のタグにジャンプする。
&quot;:tag&quot;              現在のエントリより新しいタグにジャンプする。
&quot;:0tag&quot;             最後に使はれたタグにジャンプする。
</pre>
<p>これらの最も明白な利用方法は、プログラムの函數呼び出しをあちこち拾ひ讀みするときである。次のやうな呼び出し圖を考へる:
</p><pre class="verbatim">main  ---&gt;  FuncA  ---&gt;  FuncC
      ---&gt;  FuncB
</pre>
<p>(解說: main は FuncA と FuncB を呼び出し、FuncA は FuncC を呼び出す)。
FuncA の呼び出し部分の上で <kbd>CTRL-]</kbd> を使ふことによつて、main から FuncA に行くことができる。同樣に <kbd>CTRL-]</kbd> を使つて FuncC へ行くことができる。mainに 戾るには <kbd>CTRL-T</kbd> を 2 回使ふ。そこで <kbd>CTRL-]</kbd> を使つて FuncB に行くことができる。
</p>
<p>&quot;:ta {name}&quot; や <kbd>CTRL-]</kbd> コマンドは、タグスタック上の現在の位置にタグを追加する。もしスタックが滿たされてゐた場合(スタックは 20 エントリまで保持できる)、最も古いエントリが削除され、古いものから順にひとつづつ上に移動する(インデックス番號は 1 ずつ減る)。もし最後に使はれたエントリが一番下になかつた場合、最後に使はれたエントリより下にあるものは削除される。つまり古いタグ經路は失はれる。上のパラグラフの說明を實行したあとのタグスタックは次のやうな狀態になる:
</p>
<pre class="verbatim"># TO tag     FROM line  in file/text
1  1 main            1  harddisk2:text/vim/test
2  1 FuncB          59  harddisk2:text/vim/src/main.c
</pre>
<p>|<a href="eval_002etxt.html#gettagstack_0028_0029">gettagstack()</a>| 函數は指定されたウィンドウのタグスタックを返す。|<a href="eval_002etxt.html#settagstack_0028_0029">settagstack()</a>| 函數はウィンドウのタグスタックを變更する。
</p>
<a name="E73"></a><a name="index-E73"></a>
<p>タグスタックを使はうとしたとき、タグスタックに何も入つてゐないとエラーが表示される。
</p>
<a name="tag_002dmatchlist"></a><a name="E427"></a><a name="E428"></a><a name="index-tag_002dmatchlist"></a>
<a name="index-E427"></a>
<a name="index-E428"></a>
<a name="index-tagumatutirisuto"></a>
<a name="g_t3_002e-tagumatutirisuto"></a>
<h3 class="section">3. タグマッチリスト</h3>

<p>以下のコマンドは複數のタグがマッチしたときに、タグの閒を移動するために使ふことができる。これらのコマンドはタグスタックを變更せず、同じエントリを保つことに注意すること。
</p>
<dl compact="compact">
<dd><a name="g_t_003ats"></a><a name="g_t_003atselect"></a><a name="index-_003ats"></a>
<a name="index-_003atselect"></a>
</dd>
<dt>:ts[elect][!] [name]</dt>
<dd><p>タグファイルの情報を用ゐて、[name] にマッチするタグをリスト表示する。
</p>
<p>[name] を省略した場合、タグスタック上の最後のタグが使はれる。
</p>
<p>[!] については |<a href="#tag_002d_0021">tag-!</a>| を參照。
</p>
<p>最初の列に &rsquo;&gt;&rsquo; があるものはリスト中の現在の位置を指し示してゐる (それがあるならば)。[name] は正規表現を取り得る。|<a href="#tag_002dregexp">tag-regexp</a>| を參照。リストに使はれてゐるプロパティは |<a href="#tag_002dpriority">tag-priority</a>| を參照。
出力例:
</p><pre class="verbatim"> nr pri kind tag                file
  1 F   f    mch_delay          os_amiga.c
                mch_delay(msec, ignoreinput)
&gt; 2 F   f    mch_delay          os_msdos.c
                mch_delay(msec, ignoreinput)
  3 F   f    mch_delay          os_unix.c
                mch_delay(msec, ignoreinput)
Enter nr of choice (&lt;CR&gt; to abort):
</pre><p>&quot;pri&quot; については |<a href="#tag_002dpriority">tag-priority</a>| を參照。この例は現在のファイルに依存してゐるため、&quot;:tselect xxx&quot; を使つたときには違ふ結果が得られることに注意すること。
</p>
<p>&quot;kind&quot; はタグファイルからタグの種類が得られる場合のみ、その情報を示す。
</p>
<p>&quot;info&quot; はタグファイルから得られる情報が表示される。この情報はタグファイルを生成したプログラムに依存する。
</p>
<p>リストが長い場合には |<a href="message_002etxt.html#more_002dprompt">more-prompt</a>| が表示される。もしすでに使ひたいタグを見つけてゐるのなら、&rsquo;q&rsquo; のあとに &quot;nr&quot; の番號を入力すればよい。
</p>
<a name="g_t_003asts"></a><a name="g_t_003astselect"></a><a name="index-_003asts"></a>
<a name="index-_003astselect"></a>
</dd>
<dt>:sts[elect][!] [name]</dt>
<dd><p>&quot;:tselect[!] [name]&quot; を實行し、ウィンドウを分割して選擇された tag を表示する。
</p>
<a name="g_005d"></a><a name="index-g_005d"></a>
</dd>
<dt>g]</dt>
<dd><p><kbd>CTRL-]</kbd> と動作は似てゐるが、&quot;:tag&quot; の代はりに &quot;:tselect&quot; を用ゐる。
</p>
<a name="v_005fg_005d"></a><a name="index-v_005fg_005d"></a>
</dd>
<dt>{Visual}g]</dt>
<dd><p>&quot;g]&quot; と同じ。ただし、選擇されたテキストが檢索に使はれる。
</p>
<a name="g_t_003atj"></a><a name="g_t_003atjump"></a><a name="index-_003atj"></a>
<a name="index-_003atjump"></a>
</dd>
<dt>:tj[ump][!] [name]</dt>
<dd><p>&quot;<code>:tselect</code>&quot; と動作は似てゐるが、適合する tag が 1 つだけのときには直接移動する。
</p>
<a name="g_t_003astj"></a><a name="g_t_003astjump"></a><a name="index-_003astj"></a>
<a name="index-_003astjump"></a>
</dd>
<dt>:stj[ump][!] [name]</dt>
<dd><p>&quot;:tjump[!] [name]&quot; を實行し、ウィンドウを分割して選擇された tag を表示する。
</p>
<a name="g_005fCTRL_002d_005d"></a><a name="index-g_005fCTRL_002d_005d"></a>
</dd>
<dt>g <kbd>CTRL-]</kbd></dt>
<dd><p>CTRL-]と動作は似てゐるが、&quot;:tag&quot; の代はりに &quot;:tjump&quot; を用ゐる。
</p>
<a name="v_005fg_005fCTRL_002d_005d"></a><a name="index-v_005fg_005fCTRL_002d_005d"></a>
</dd>
<dt>{Visual}g <kbd>CTRL-]</kbd></dt>
<dd><p>&quot;g CTRL-]&quot; と同じ。ただし、選擇されたテキストが檢索に使はれる。
</p>
<a name="g_t_003atn"></a><a name="g_t_003atnext"></a><a name="index-_003atn"></a>
<a name="index-_003atnext"></a>
</dd>
<dt>:[count]tn[ext][!]</dt>
<dd><p>適合する tag のうち、[count] 番目の tag に移動する。(省略時は 1)
</p>
<p>[!] に關しては |<a href="#tag_002d_0021">tag-!</a>| を參照。
</p>
<a name="g_t_003atp"></a><a name="g_t_003atprevious"></a><a name="index-_003atp"></a>
<a name="index-_003atprevious"></a>
</dd>
<dt>:[count]tp[revious][!]</dt>
<dd><p>適合する tag のうち、[count] 分だけ前の tag に移動する。(省略時は 1)
</p>
<p>[!] に關しては |<a href="#tag_002d_0021">tag-!</a>| を參照。
</p>
<a name="g_t_003atN"></a><a name="g_t_003atNext"></a><a name="index-_003atN"></a>
<a name="index-_003atNext"></a>
</dd>
<dt>:[count]tN[ext][!]</dt>
<dd><p>&quot;<code>:tprevious</code>&quot; と同樣。
</p>
<a name="g_t_003atr"></a><a name="g_t_003atrewind"></a><a name="index-_003atr"></a>
<a name="index-_003atrewind"></a>
</dd>
<dt>:[count]tr[ewind][!]</dt>
<dd><p>適合した tag のうち最初の tag に移動する。もし [count] が與へられてゐたら、[count] 番目の tag に移動する。
</p>
<p>[!] については |<a href="#tag_002d_0021">tag-!</a>| を參照。
</p>
<a name="g_t_003atf"></a><a name="g_t_003atfirst"></a><a name="index-_003atf"></a>
<a name="index-_003atfirst"></a>
</dd>
<dt>:[count]tf[irst][!]</dt>
<dd><p>&quot;<code>:trewind</code>&quot; と同じ。
</p>
<a name="g_t_003atl"></a><a name="g_t_003atlast"></a><a name="index-_003atl"></a>
<a name="index-_003atlast"></a>
</dd>
<dt>:tl[ast][!]</dt>
<dd><p>適合した tag のうち最後の tag に移動する。
</p>
<p>[!] に關しては |<a href="#tag_002d_0021">tag-!</a>| を參照。
</p>
<a name="g_t_003alt"></a><a name="g_t_003altag"></a><a name="index-_003alt"></a>
<a name="index-_003altag"></a>
</dd>
<dt>:lt[ag][!] [name]</dt>
<dd><p>タグ [name] にジャンプし、マッチするタグ全てをカレントウィンドウの新しいロケーションリストに追加する。[name] は正規表現でもよい (|<a href="#tag_002dregexp">tag-regexp</a>| を參照)。[name] が指定されないときはタグスタックにある最後のタグ名が使はれる。タグにマッチする行を特定するための檢索パターンには、特別な文字を全てエスケープするために &quot;\V&quot; がつけられる (very nomagic)。マッチするタグを保持するロケーションリストはタグスタックとは獨立してゐる。
</p>
<p>[!] については |<a href="#tag_002d_0021">tag-!</a>| を參照。
</p></dd>
</dl>

<p>他にメッセージがないとき、Vim は今までに移動した tag と tag の數を表示する:
</p><pre class="verbatim">tag 1 of 3 or more
</pre><p>&quot; or more&quot; は、Vim がまだすべての tag ファイルを檢索してゐないことを示すために用ゐられる。&quot;:tnext&quot; を數回用ゐるか、&quot;:tlast&quot; を使用したとき、さらに tag が見つけられるだらう。
</p>
<p>他のメッセージがあつたときや、現在の場所を知りたいときには次のコマンドで再び表示することができる。(最後に行つた移動と同じ tag に移動する。):
</p><div class="example">
<pre class="example">:0tn
</pre></div>
<a name="tag_002dskip_002dfile"></a><a name="index-tag_002dskip_002dfile"></a>
<p>マッチしたタグに對するファイルが見つからなかつた場合、スキップされて次にマッチするタグが使はれる。Vim はファイルがないことを通知する。もしリストの終端に達してゐたならば、エラーメッセージが與へられる。
</p>
<a name="tag_002dpreview"></a><a name="index-tag_002dpreview"></a>
<p>タグマッチリストはプレビューウィンドウ內でも使用できる。そのコマンドは上記のものに似てゐるが、先頭に &quot;p&quot; がつく。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bquickfix">+quickfix</a>| が無效なときは利用できない}
</p>
<dl compact="compact">
<dd><a name="g_t_003apts"></a><a name="g_t_003aptselect"></a><a name="index-_003apts"></a>
<a name="index-_003aptselect"></a>
</dd>
<dt>:pts[elect][!] [name]</dt>
<dd><p>&quot;<code>:tselect[!] [name]</code>&quot; を實行し、&quot;Preview&quot; ウィンドウに新しいタグを表示する。詳細は |<a href="windows_002etxt.html#g_t_003aptag">:ptag</a>| を參照すること。
</p>
<a name="g_t_003aptj"></a><a name="g_t_003aptjump"></a><a name="index-_003aptj"></a>
<a name="index-_003aptjump"></a>
</dd>
<dt>:ptj[ump][!] [name]</dt>
<dd><p>&quot;:tjump[!] [name]&quot; を實行し、&quot;Preview&quot; ウィンドウに新しいタグを表示する。詳細は |<a href="windows_002etxt.html#g_t_003aptag">:ptag</a>| を參照すること。
</p>
<a name="g_t_003aptn"></a><a name="g_t_003aptnext"></a><a name="index-_003aptn"></a>
<a name="index-_003aptnext"></a>
</dd>
<dt>:[count]ptn[ext][!]</dt>
<dd><p>プレビューウィンドウで &quot;<code>:tnext</code>&quot; を實行する。|<a href="windows_002etxt.html#g_t_003aptag">:ptag</a>| を參照すること。
</p>
<a name="g_t_003aptp"></a><a name="g_t_003aptprevious"></a><a name="index-_003aptp"></a>
<a name="index-_003aptprevious"></a>
</dd>
<dt>:[count]ptp[revious][!]</dt>
<dd><p>プレビューウィンドウで &quot;<code>:tprevious</code>&quot; を實行する。|<a href="windows_002etxt.html#g_t_003aptag">:ptag</a>| を參照すること。
</p>
<a name="g_t_003aptN"></a><a name="g_t_003aptNext"></a><a name="index-_003aptN"></a>
<a name="index-_003aptNext"></a>
</dd>
<dt>:[count]ptN[ext][!]</dt>
<dd><p>&quot;<code>:ptprevious</code>&quot; と同じ。
</p>
<a name="g_t_003aptr"></a><a name="g_t_003aptrewind"></a><a name="index-_003aptr"></a>
<a name="index-_003aptrewind"></a>
</dd>
<dt>:[count]ptr[ewind][!]</dt>
<dd><p>プレビューウィンドウで &quot;<code>:trewind</code>&quot; を實行する。|<a href="windows_002etxt.html#g_t_003aptag">:ptag</a>| を參照すること。
</p>
<a name="g_t_003aptf"></a><a name="g_t_003aptfirst"></a><a name="index-_003aptf"></a>
<a name="index-_003aptfirst"></a>
</dd>
<dt>:[count]ptf[irst][!]</dt>
<dd><p>&quot;<code>:ptrewind</code>&quot; と同じ。
</p>
<a name="g_t_003aptl"></a><a name="g_t_003aptlast"></a><a name="index-_003aptl"></a>
<a name="index-_003aptlast"></a>
</dd>
<dt>:ptl[ast][!]</dt>
<dd><p>プレビューウィンドウで &quot;<code>:tlast</code>&quot; を實行する。|<a href="windows_002etxt.html#g_t_003aptag">:ptag</a>| を參照すること。
</p></dd>
</dl>

<a name="tag_002ddetails"></a><a name="index-tag_002ddetails"></a>
<a name="index-tagunoXiang-Xi-"></a>
<a name="g_t4_002e-tagunoXiang-Xi-"></a>
<h3 class="section">4. タグの詳細</h3>

<a name="static_002dtag"></a><a name="index-static_002dtag"></a>
<p>static タグは特別なファイルのために定義されたタグである。C プログラムでは static 函數が當てはまる。
</p>
<p>Vi はタグにジャンプするときに現在の檢索パターンを設定する。これはタグにジャンプしたあとの &quot;n&quot; コマンドは、その前の檢索パターンと同じ檢索を行はないといふことである。Vim ではこのやうなバグとも考へられることはしない。檢索履歷にある檢索パターンで檢索できる。もし古い Vi の振る舞ひを望むならば、&rsquo;<samp>cpoptions</samp>&rsquo; に &rsquo;<var>t</var>&rsquo; を設定する。
</p>
<a name="tag_002dbinary_002dsearch"></a><a name="index-tag_002dbinary_002dsearch"></a>
<p>Vim は希望のタグをすばやく見つけるために、タグファイル內で二分探索を行ふ(|<a href="various_002etxt.html#g_t_002btag_005fbinary">+tag_binary</a>| がコンパイル時に有效になつてゐれば)。しかしこれはタグファイルが ASCII コードでソートされてゐる場合にのみ機能する。したがつて、もし適合しないものが見つかつた場合は、その他の方法として線形探索が行はれる。もし線形探索のみを利用したいならば、&rsquo;<samp>tagbsearch</samp>&rsquo; オプションをリセットすればよい。さうでなければ: タグファイルをソートすること！
</p>
<blockquote>
<p><strong>Note:</strong> <br>
檢索が明確な名前をもつたタグでない場合は二分探索は利用できないことに注意すること。これは大文字小文字を無視した檢索や固定文字列で始まらない正規表現による檢索で發生する。そのときはタグ檢索はかなり遲くなるだらう。先人はタグファイルを大文字と小文字を區別せずにソートすることで囘避できた。詳細は &rsquo;tagbsearch&rsquo; を參照のこと。
</p></blockquote>

<a name="tag_002dregexp"></a><a name="index-tag_002dregexp"></a>
<p>&quot;<code>:tag</code>&quot; と &quot;<code>:tselect</code>&quot; コマンドは引數に正規表現を受け付ける。使用できる特殊文字については |<a href="pattern_002etxt.html#pattern">pattern</a>| を參照すること。引數が &rsquo;/&rsquo; で始まる場合はパターンとして使はれる。もし引數が &rsquo;/&rsquo; で始まらなければ、完全なタグ名の文字列として扱はれる。
例:
</p><dl compact="compact">
<dt>:tag main</dt>
<dd><p>最も優先度の高い &quot;main&quot; といふタグにジャンプする。
</p></dd>
<dt>:tag /^get</dt>
<dd><p>最も優先度の高い &quot;get&quot; で始まるタグにジャンプする。
</p></dd>
<dt>:tag /norm</dt>
<dd><p>&quot;norm&quot; を含むすべてのタグを列擧する。これは &quot;id_norm&quot; といふタグも含まれる。
</p></dd>
</dl>
<p>もし引數と全く同じタグと、正規表現によつてマッチしたタグがあつた場合、引數と同じタグが優先される。例へば、&quot;:tag /open&quot; は &quot;open_file&quot; や &quot;file_open&quot; よりも前に &quot;open&quot; にマッチする。
</p>
<p>正規表現を使ふときは大文字・小文字は區別されない。大文字・小文字を區別したいなら正規表現の中で &quot;\C&quot; を使ふこと。
</p>
<a name="tag_002d_0021"></a><a name="index-tag_002d_0021"></a>
<p>もしタグが現在のファイル上にあるならば、いつも機能するだらう。さうでなければ、實行結果は現在のファイルが變更されてゐるか、コマンドに ! がつけられてゐるか、&rsquo;<samp>autowrite</samp>&rsquo; オプションが設定されてゐるかに依存する:
</p>
<table>
<tr><td width="20%">タグが現在のファイル內</td><td width="15%">變更あり</td><td width="10%">!</td><td width="15%">autowrite オプション</td><td width="40%">動作</td></tr>
<tr><td width="20%">yes</td><td width="15%">x</td><td width="10%">x</td><td width="15%">x</td><td width="40%">タグに行く</td></tr>
<tr><td width="20%">no</td><td width="15%">no</td><td width="10%">x</td><td width="15%">x</td><td width="40%">對象ファイルを讀み込み、タグに行く</td></tr>
<tr><td width="20%">no</td><td width="15%">yes</td><td width="10%">yes</td><td width="15%">x</td><td width="40%">現在のファイルを捨て、對象ファイルを讀み込んでタグに行く</td></tr>
<tr><td width="20%">no</td><td width="15%">yes</td><td width="10%">no</td><td width="15%">on</td><td width="40%">現在のファイルを保存し、對象ファイルを讀み込んでタグに行く</td></tr>
<tr><td width="20%">no</td><td width="15%">yes</td><td width="10%">no</td><td width="15%">off</td><td width="40%">失敗する</td></tr>
</table>

<ul>
<li> タグが現在のファイル上にある場合は、コマンドはいつも機能する。
</li><li> タグが他のファイル上にあり、現在のファイルが變更されてゐないならば、對象となるファイルがバッファに讀み込まれる。
</li><li> タグが他のファイル上にあり、現在のファイルが變更されてゐて、かつ!がコマンドにつけられてゐる場合には、現在のファイルに對する變更は失はれ、對象となるファイルがバッファに讀み込まれる。
</li><li> タグが他のファイル上にあり、現在のファイルが變更されてゐて、かつ &rsquo;<samp>autowrite</samp>&rsquo; オプションが設定されてゐる場合には、現在のファイルは保存され、對象となるファイルがバッファに讀み込まれる。
</li><li> タグが他のファイル上にあり、現在のファイルが變更されてゐて、かつ &rsquo;<samp>autowrite</samp>&rsquo; オプションが設定されてゐない場合には、コマンドは失敗する。變更を保存したいならば &quot;:w&quot; コマンドを使用し、そのあとで &quot;:tag&quot; を引數なしで實行する。これはタグがスタック上に殘つてゐるためにうまく機能する。變更を失つてもよいのならば、&quot;:tag!&quot; コマンドを使用できる。
</li></ul>

<a name="tag_002dsecurity"></a><a name="index-tag_002dsecurity"></a>
<blockquote>
<p><strong>Note:</strong> <br>
Vim はセキュリティの都合上、いくつかのコマンドを禁止してゐることに注意すること。これはちやうど現在のディレクトリにある exrc/<samp>vimrc</samp> ファイルに &rsquo;<samp>secure</samp>&rsquo; オプションが使はれてゐるのと同じやうに機能する。|<a href="starting_002etxt.html#trojan_002dhorse">trojan-horse</a>| と |<a href="eval_002etxt.html#sandbox">sandbox</a>| を參照すること。{tagaddress} がバッファを變更したとき、次のやうなエラーメッセージが表示される:
</p><div class="display">
<pre class="display">&quot;WARNING: tag command changed a buffer!!!&quot;
</pre></div>
<p>將來のバージョンではバッファを變更することは不可能になるだらう。これらはすべてセキュリティの理由である: 誰かが氣づかれないやうに實行される厄介なコマンドをタグファイルに隱してゐるかもしれない。例へば:
</p><div class="example">
<pre class="example">:$d|/tag-function-name/
</pre></div>
</blockquote>

<p>Vi では &quot;:tag&quot; コマンドによつてタグを檢索すると、最新の檢索パターンを上書きする。Vim では &rsquo;<samp>cpoptions</samp>&rsquo; に &rsquo;<var>t</var>&rsquo; フラグが設定されてゐなければ、前の檢索パターンは引き續き記憶される。檢索パターンはいつも檢索履歷にあるので、もし檢索に失敗したらそこを修正するとよい。
</p>
<a name="emacs_002dtags"></a><a name="emacs_005ftags"></a><a name="E430"></a><a name="index-emacs_002dtags"></a>
<a name="index-emacs_005ftags"></a>
<a name="index-E430"></a>
<a name="index-Emacs-sutairunotaguhuairu"></a>
<p>Emacs スタイルのタグファイルは、Vim のコンパイル時に |<a href="various_002etxt.html#g_t_002bemacs_005ftags">+emacs_tags</a>| 機能を有效にした場合にのみ使用できる。すまないが、Emacs タグファイルについての說明はここではしない。それは下位互換のためにのみ提供してゐる :-)。
</p>
<p>Emacs タグファイルの行は非常に長くなることがある。Vim は行の約 510 バイトまでしか扱はない。行が無視されたかどうかは &rsquo;verbose&rsquo; を 5 以上にしてゐればわかる。
</p>
<a name="tags_002doption"></a><a name="index-tags_002doption"></a>
<p>&rsquo;<samp>tags</samp>&rsquo; オプションはファイル名のリストで構成される。これらのファイルからタグが檢索される。デフォルトの &quot;tags&quot; ファイルよりも、異なる <samp>tags</samp> ファイルがよく使はれるだらう。共通の <samp>tags</samp> ファイルにもよくアクセスするだらう。
</p>
<p>以下のやうなときは、リストの次のファイルを使はない:
</p><ul>
<li> 現在のバッファに對する static タグが見つかつた場合。
</li><li> global タグが見つかつた場合。
</li></ul>
<p>これは大文字小文字が無視されるかどうかにも依存します。大文字小文字は以下の場合に無視されます:
</p><ul>
<li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>followic</var>&quot; で &rsquo;<samp>ignorecase</samp>&rsquo; が設定されてゐる
</li><li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>ignore</var>&quot; である
</li><li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>smart</var>&quot; でパターンに小文字だけが含まれてゐる
</li><li> &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>followscs</var>&quot; で &rsquo;<samp>smartcase</samp>&rsquo; が設定されてをりパターンに小文字のみが含まれてゐる
</li></ul>
<p>大文字小文字が無視されず、タグファイルが大文字小文字を除外したマッチのみとなる場合、續くタグファイルは大文字小文字をマッチして檢索されます。大文字小文字をマッチしてタグファイルが見つからない場合、大文字小文字を除外してマッチした最初の結果が使用されます。もし大文字小文字が無視されグローバルのタグでマッチした、もしくは大文字小文字を除外してマッチした場合、タグファイルの檢索は行はれず見附かつたそのファイルが使用されます。
</p>
<p>タグファイル名が &quot;./&quot; で始まるとき、&rsquo;.&rsquo; は現在のファイルのパスで置き換へられる。これにより、現在のファイルがあるディレクトリの <samp>tags</samp> ファイルを使用することができる(たとへ現在のディレクトリがどこであらうと)。&quot;./&quot; を使用する槪念は、どのタグファイルを最初に檢索するかを決定することである: 現在のディレクトリにするか (&quot;tags,./tags&quot;)、現在のファイルがあるディレクトリにするか(&quot;./tags,tags&quot;)である。
</p>
<p>例:
</p><div class="example">
<pre class="example">:set tags=./tags,tags,/home/user/commontags
</pre></div>

<p>この例では、現在のファイルがあるディレクトリの &quot;tags&quot; ファイルがまず檢索される。次に現在のディレクトリにある &quot;tags&quot; ファイルが檢索される。もしまだ見つからなければ、&quot;/home/user/commontags&quot; が檢索される。
</p>
<p>これは &rsquo;<samp>cpoptions</samp>&rsquo; に &rsquo;<var>d</var>&rsquo; フラグを含めることで Vi 互換のやうにすることができる。&quot;./tags&quot; は現在のファイルがあるディレクトリの <samp>tags</samp> ファイルではなく、現在のディレクトリの <samp>tags</samp> ファイルを意味するやうになる。
</p>
<p>コンマの代はりにスペースを使用してもよい。文字列オプションに含めるためにはスペースの前にバックスラッシュが必要となる:
</p><div class="example">
<pre class="example">:set tags=tags\ /home/user/commontags
</pre></div>

<p>ファイル名にスペースを含めるにはバックスラッシュを３つ竝べる。コンマをファイル名に使用する場合にはバックスラッシュを２つ竝べる。例へば:
</p><div class="example">
<pre class="example">:set tags=tag\\\ file,/home/user/common\\,tags
</pre></div>

<p>&quot;tag file&quot; と &quot;/home/user/common,tags&quot; といふファイルが指定できる。&rsquo;<samp>tags</samp>&rsquo; オプションは &quot;tag\ file,/home/user/common\,tags&quot; といふ値を持つだらう。
</p>
<p>&rsquo;<samp>tagrelative</samp>&rsquo; オプションをオンにし(デフォルト)、他のディレクトリでタグファイルを使用すると、タグファイル內に記述されたファイル名はタグファイルがあるディレクトリを基準として相對パスになる。
</p>
<a name="tags_002dfile_002dformat"></a><a name="E431"></a><a name="index-tags_002dfile_002dformat"></a>
<a name="index-E431"></a>
<a name="index-taguhuairunoShu-Shi-"></a>
<a name="g_t5_002e-taguhuairunoShu-Shi-"></a>
<h3 class="section">5. タグファイルの書式</h3>

<a name="ctags"></a><a name="jtags"></a><a name="index-ctags"></a>
<a name="index-jtags"></a>
<p><samp>tags</samp> ファイルは &quot;ctags&quot; のやうな外部コマンドによつて生成される。それはそれぞれの函數へのタグを含んでゐる。&quot;ctags&quot; のあるバージョンでは &quot;#defined&quot; マクロや typedef、enum などに對してもタグを作ることができる。
</p>
<a name="index-tags-huairuwoSheng-Cheng-surupuroguramu"></a>
<a name="tags-huairuwoSheng-Cheng-surupuroguramu_003a"></a>
<h4 class="unnumberedsubsec">tags ファイルを生成するプログラム:</h4>
<dl compact="compact">
<dt>ctags</dt>
<dd><p>ほとんどの Unix システムにある。C 言語のみ對應し、基本的な機能を提供する。
<a name="Exuberant_005fctags"></a><a name="index-Exuberant_005fctags"></a>
</p></dd>
<dt>exuberant ctags</dt>
<dd><p>これはとてもよいものだ。C 言語、C++、Java、Fortran、Eiffel、そしてその他に對應してゐる。多くの項目にタグを生成することができる。
</p>
<p><a href="http://ctags.sourceforge.net">http://ctags.sourceforge.net</a> を參照。
</p></dd>
<dt>etags</dt>
<dd><p>Emacs に連携する。多言語に對應してゐる。
</p></dd>
<dt>JTags</dt>
<dd><p>Java 用、Java で書かれてゐる。
<a href="http://www.fleiner.com/jtags/">http://www.fleiner.com/jtags/</a> で入手できる。
</p></dd>
<dt>ptags.py</dt>
<dd><p>Python 用、Python で書かれてゐる。Python のソースディレクトリ Tools/scripts/ptags.py にある。
</p></dd>
<dt>ptags</dt>
<dd><p>Perl 用、Perl で書かれてゐる。これはここで見つかる。
<a href="http://www.eleves.ens.fr:8080/home/nthiery/Tags/">http://www.eleves.ens.fr:8080/home/nthiery/Tags/</a>
</p></dd>
<dt>gnatxref</dt>
<dd><p>Ada 用。<a href="http://www.gnuada.org/">http://www.gnuada.org/</a> を參照。
gnatxref は gnat パッケージの一部である。
</p></dd>
</dl>


<p>tags ファイルは次の 2 つの形式のどれかで構成されなければならない:
</p><ol>
<li> {tagname}             {TAB} {tagfile} {TAB} {tagaddress}
</li><li> {tagname}             {TAB} {tagfile} {TAB} {tagaddress} {term} {field} ..
</li></ol>

<p>以前には古い形式がサポートされてゐた、|<a href="#tag_002dold_002dstatic">tag-old-static</a>| を參照。
</p>
<p>最初の形式は通常のタグで、Viで完全に互換性がある。傳統的なctagsによつてのみ作られる形式である。これはしばしばグローバルな函數や他のファイルを參照する場合に使用される。
</p>
<p>タグファイルの行は &lt;LF&gt; または &lt;CR&gt;&lt;LF&gt; で終はる。Macintosh では &lt;CR&gt; も機能する。&lt;CR&gt; と &lt;NL&gt; は行內に決して現れない。
</p>
<p>2 番目の形式は新しい。各行の末尾にある任意的なフィールドに追加の情報を含む。これは以前の Vi とも互換性がある。新しいバージョンの ctags にのみサポートされてゐる(Exuberant ctags とか)。
</p>
<dl compact="compact">
<dt>{tagname}</dt>
<dd><p>識別子。普通は函數名であるが、どんな識別子でも構はない。&lt;Tab&gt; を含めることはできない。
</p></dd>
<dt>{TAB}</dt>
<dd><p>1 文字の &lt;Tab&gt;。
</p><blockquote>
<p><strong>Note:</strong> <br>
以前のバージョンではここでどんな空白文字も許可してゐた。これは {tagfile} 內にスペースを使ふことを斷念したためである。
</p></blockquote>
</dd>
<dt>{tagfile}</dt>
<dd><p>{tagname} の定義を含むファイル名。絕對パスでも相對パスでも構はない。環境變數やワイルドカードを含んでもよい(ワイルドカードの使用方法はあゐまいだが)。&lt;Tab&gt; を含むことはできない。
</p></dd>
<dt>{tagaddress}</dt>
<dd><p>カーソルをタグ上に移動する Ex コマンド。制限 (|<a href="#tag_002dsecurity">tag-security</a>| を參照)はあるが、どんな Ex コマンドでも使用可能である。Posix では主に使はれる行番號と檢索コマンドのみ許可する。
</p></dd>
<dt>{term}</dt>
<dd><p>;&quot; セミコロンとダブルクォートの 2 文字。これは Vi によつてコメントとみなされ、續く文字列は無視される。以前の Vi との互換性を保つためにある。これは續くフィールドを無視する。例
</p><div class="example">
<pre class="example">APP     file    /^static int APP;$/;&quot;   v
</pre></div>
<p>{tagaddress} が行番號または檢索パターンではない場合、{term} は |;&quot; でなければならない。ここで、バーはコマンドを終了させる (バーを除く)。そして ;&quot; は Vi に殘りの行を無視させるために使はれる。例:
</p><div class="example">
<pre class="example">APP     file.c  call cursor(3, 4)|;&quot;    v
</pre></div>

</dd>
<dt>{field} ..</dt>
<dd><p>任意のフィールドのリスト。各フィールドは次の書式を持つ:
</p><div class="example">
<pre class="example">&lt;Tab&gt;{fieldname}:{value}
</pre></div>
<p>{fieldname} はフィールドの識別子であり、アルファベットのみ使用可能である[a-zA-Z]。
</p>
<p>{value} は任意の文字列であるが、&lt;Tab&gt; は使用できない。
</p>
<p>以下の特殊文字が使用できる:
</p><table>
<tr><td width="99%">&quot;\t&quot; は &lt;Tab&gt; を表す</td></tr>
<tr><td width="99%">&quot;\r&quot; は &lt;CR&gt; を表す</td></tr>
<tr><td width="99%">&quot;\n&quot; は &lt;NL&gt; を表す</td></tr>
<tr><td width="99%">&quot;\\&quot; は \ を表す</td></tr>
</table>

<p>&rsquo;:&rsquo; を持たないフィールドがある。これはタグの一種である。&quot;kind:&quot; を先頭につけたものとして扱はれる。kinds については、それを提供する ctags のドキュメントを參照。
</p>
<p>現在 Vim が認識できるその他のフィールドは &quot;file:&quot; (値はなし)だけである。これは static タグに使はれる。
</p></dd>
</dl>


<p>tags ファイルの先頭行には、
</p><div class="example">
<pre class="example">!_TAG_
</pre></div>
<p>で始まる行を含めることができる。これらは極稀な &quot;!&quot; で始まるタグを除けば先頭行にソートされる。Vim は 2 つのタグを認識する。1 つはファイルがソートされてゐるかどうかを示す行で、この行が見つかつた場合には、Vim は tags ファイルに對して二分探索を使用する:
</p><div class="example">
<pre class="example">!_TAG_FILE_SORTED&lt;TAB&gt;1&lt;TAB&gt;{anything}
</pre></div>

<p>大文字小文字を無視する設定の時、線形探索を避けるためにタグファイルは大文字小文字を區別せずにソートされることがある。 (&rsquo;<samp>ignorecase</samp>&rsquo; がセットされかつ &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>followic</var>&quot; の時、または &rsquo;<samp>tagcase</samp>&rsquo; が &quot;<var>ignore</var>&quot; の時に大文字小文字は無視される。) 詳細は &rsquo;<samp>tagbsearch</samp>&rsquo; を參照のこと。その時、値として &rsquo;2&rsquo; が使はれる:
</p><div class="example">
<pre class="example">!_TAG_FILE_SORTED&lt;TAB&gt;2&lt;TAB&gt;{anything}
</pre></div>

<p>Vim が認識するもう 1 つのタグはタグファイルのエンコーディングを指定するものである:
</p><div class="example">
<pre class="example">!_TAG_FILE_ENCODING&lt;Tab&gt;utf-8&lt;Tab&gt;{anything}
</pre></div>
<p>ここで &quot;<var>utf-8</var>&quot; はタグのエンコーディングである。Vim はタグを檢索するときに檢索するタグを &rsquo;<samp>encoding</samp>&rsquo; からタグファイルのエンコーディングに變換する。そして、タグをリストするときに元に戾す。變換が失敗したときは元のままのタグが使はれる。
</p>
<a name="tag_002dsearch"></a><a name="index-tag_002dsearch"></a>
<p>コマンドはどんな Ex コマンドでも使用可能であるが、檢索コマンドがよく使はれるであ
ろう。
</p>
<p>例:
</p><pre class="verbatim">tag1    file1   /^main(argc, argv)/ ~
tag2    file2   108 ~
</pre>
<p>コマンドは常に &rsquo;magic&rsquo; がセットされない狀態で實行される。檢索パターンで使用できる特殊文字は &quot;^&quot; (行頭) と &quot;$&quot; (&lt;EOL&gt;) だけである。|<a href="pattern_002etxt.html#pattern">pattern</a>| を參照すること。檢索文字列中のバックスラッシュの前にはバックスラッシュをつけなければならないことに注意すること。これは以前の Vi と互換性がある。
</p>
<a name="E434"></a><a name="E435"></a><a name="index-E434"></a>
<a name="index-E435"></a>
<p>もしコマンドが普通の檢索コマンド (&quot;/&quot; か &quot;?&quot; で始まり、終はる) であるならば、いくつかの特別な扱ひをされる:
</p><ul>
<li> 檢索はファイルの 1 行目から開始する。

<p>檢索方向は &quot;/&quot; で前方、&quot;?&quot; で後方となる。&rsquo;<samp>wrapscan</samp>&rsquo; は問題にならず、いつもファイル全體を檢索することに注意。
</p></li><li> 檢索が失敗した場合は、大文字小文字を無視してもう一度檢索する。それも失敗した場合には次の檢索が行はれる:
<div class="example">
<pre class="example">&quot;^tagname[ \t]*(&quot;
</pre></div>
<p>(タグの先頭に &rsquo;^&rsquo;、末尾に &quot;[ \t]*(&quot; が追加される)。函數名の檢索の場合には、これはカラム0の位置にある函數名を見つけるだらう。函數の引數がtagsファイルを作成したときから變更になつたときなどに役立つだらう。この檢索でも見つからない場合にはさらに次の檢索が行はれる:
</p><div class="example">
<pre class="example">&quot;^[#a-zA-Z_].*\&lt;tagname[ \t]*(&quot;
</pre></div>
<p>この意味は: &rsquo;#&rsquo; もしくは識別子で始まり、空白文字と &rsquo;(&rsquo; が續くタグを含む行である。これは型が先頭にあるマクロ名や函數名を見つけるだらう。
</p></li></ul>


<a name="tag_002dold_002dstatic"></a><a name="index-tag_002dold_002dstatic"></a>
<p>舊式のフォーマットは 2019 年 3 月 (patch 8.1.1092) までサポートされてゐた:
</p><pre class="verbatim">{tagfile}:{tagname} {TAB} {tagfile} {TAB} {tagaddress}
</pre>
<p>この形式は static タグにのみ使用できる。現在では廢れてをり、2 番目の形式に置き換へられてゐる。これは Elvis 1.x と古いバージョンの Vim、それといくつかのバージョンの ctags によつてのみサポートされてゐる。static タグはローカル函數によく用ゐられ、{tagfile} 內のみ參照する。static タグでは 2 つの {tagfile} は正確に一致してゐなければならないことに注意すること。static タグがどのやうに使はれるかについては |<samp>tags-option</samp>| を參照すること。
</p>
<p>新しいバージョンの Vim に更新するときに、2 番目の形式をサポートする ctags に更新できるべきでもあるので、このサポートは削除された。
</p>
<a name="include_002dsearch"></a><a name="definition_002dsearch"></a><a name="E387"></a><a name="E388"></a><a name="E389"></a><a name="index-include_002dsearch"></a>
<a name="index-definition_002dsearch"></a>
<a name="index-E387"></a>
<a name="index-E388"></a>
<a name="index-E389"></a>
<a name="index-inkurudohuairunoJian-Suo-"></a>
<a name="g_t6_002e-inkurudohuairunoJian-Suo-"></a>
<h3 class="section">6. インクルードファイルの檢索</h3>

<p>これらのコマンドは對象となる文字列を現在のファイルと、遭遇するすべてのインクルードファイルを再歸的に探す。これは變數や函數、マクロの定義を探すのに利用できる。現在のバッファに對してだけ檢索をしたいのならば、|<a href="pattern_002etxt.html#pattern_002dsearches">pattern-searches</a>| に列擧されてゐるコマンドを使ふとよい。
</p>
<p>これらのコマンドは、コンパイル時に |<a href="various_002etxt.html#g_t_002bfind_005fin_005fpath">+find_in_path</a>| 機能を使用不可にした場合には利用できない。
</p>
<p>他のファイルをインクルードする行に遭遇すると、現在のバッファを續けて檢索する前にインクルードファイルを檢索する。インクルードファイルによつてインクルードされるファイルも同樣に檢索される。インクルードファイルが見つからなかつた場合は默つて無視する。見つからなかつたファイルを知りたいときは |<a href="#g_t_003acheckpath">:checkpath</a>| コマンドを使ふ。たぶん &rsquo;<samp>path</samp>&rsquo; オプションが正しく設定されてゐないのだらう。
</p><blockquote>
<p><strong>Note:</strong> <br>
インクルードファイルはファイルが檢索され、そのファイルを編輯中のバッファが存在しても對象にならない。バッファにある行は、現在のファイルにのみ適用される。
</p></blockquote>

<p>檢索文字列は任意のキーワードや定義されたマクロが指定できる。キーワードの場合はマッチするものを見つける。定義されたマクロの場合は &rsquo;define&rsquo; オプションにマッチする行だけが見つけられる。デフォルトは C プログラム用の &quot;^#\s*define&quot; である。他の言語の場合はおそらく變更したいだらう。C++ 用の例は &rsquo;define&rsquo; を參照。その文字列に改行を含めることはできない。一行內にマッチするものだけが見つかる。
</p>
<p>定義されたマクロが見つかつた場合、行末がバックスラッシュのときは次の行も表示する。
</p>
<p>&quot;[&quot; で始まるコマンドは現在のファイルの先頭から檢索を開始する。&quot;]&quot; で始まるコマンドは現在のカーソル位置から檢索を開始する。
</p>
<p>&rsquo;<samp>include</samp>&rsquo; オプションは他のファイルをインクルードする行を定義する。デフォルトは C プログラム用の &quot;\^#\s*include&quot; である。
</p><blockquote>
<p><strong>Note:</strong> <br>
Vim は C の構文を認識しない。もし &rsquo;<samp>include</samp>&rsquo; オプションにマッチする行が &quot;#ifdef/#endif&quot; の閒やコメント行であつても、とにかく檢索される。&rsquo;<samp>isfname</samp>&rsquo; オプションはマッチパターンに續くファイル名を認識するために使用される。
</p></blockquote>

<p>&rsquo;<samp>path</samp>&rsquo; オプションは絕對パスを持たないインクルードファイルを探すためのディレクトリを指定する。
</p>
<p>&rsquo;<samp>comments</samp>&rsquo; オプションは單一行を表示するコマンド、もしくは行にジャンプするコマンドで使用される。これはコメントの開始パターンを定義する。それらの行は [!] を使用しない限り檢索において無視される。ひとつの例外: 行が &quot;^# *define&quot; といふパターンにマッチしたとき、コメントであるとはみなされない。
</p>
<p>もしマッチしたリストを表示して、その中からジャンプ先を選擇したいならば、マッピングが利用できる。例:
</p><div class="example">
<pre class="example">:map &lt;F4&gt; [I:let nr = input(&quot;Which one: &quot;)&lt;Bar&gt;exe &quot;normal &quot; . nr .&quot;[\t&quot;&lt;CR&gt;
</pre></div>
<dl compact="compact">
<dd><a name="g_t_005bi"></a><a name="index-_005bi"></a>
</dd>
<dt>[i</dt>
<dd><p>カーソルの下にあるキーワードを含む 1 行を表示する。檢索はファイルの先頭から開始する。コメントとみなせる行は無視される(&rsquo;<samp>comments</samp>&rsquo; オプションを參照すること)。數字が與へられた場合は、先頭から指定した個數目にマッチした行を表示する。この場合はコメント行は無視されない。
</p>
<a name="g_t_005di"></a><a name="index-_005di"></a>
</dd>
<dt>]i</dt>
<dd><p>&quot;[i&quot; と同樣だが、檢索が現在のカーソル位置から開始される。
</p>
<a name="g_t_003ais"></a><a name="g_t_003aisearch"></a><a name="index-_003ais"></a>
<a name="index-_003aisearch"></a>
</dd>
<dt>:[range]is[earch][!] [count] [/]pattern[/]</dt>
<dd><p>&quot;[i&quot; や &quot;]i&quot; と同樣だが、[range] で指定された範圍から檢索する (デフォルト: ファイル全體)。
</p>
<p>[/] と [!] については |<a href="#g_t_003asearch_002dargs">:search-args</a>| を參照。
</p>
<a name="g_t_005bI"></a><a name="index-_005bI"></a>
</dd>
<dt>[I</dt>
<dd><p>カーソルの下にあるキーワードを含む行をすべて表示する。結果にはファイル名と行番號が表示される。檢索はファイルの先頭から開始される。
</p>
<a name="g_t_005dI"></a><a name="index-_005dI"></a>
</dd>
<dt>]I</dt>
<dd><p>&quot;[I&quot; と同樣だが、檢索が現在のカーソル位置から開始される。
</p>
<a name="g_t_003ail"></a><a name="g_t_003ailist"></a><a name="index-_003ail"></a>
<a name="index-_003ailist"></a>
</dd>
<dt>:[range]il[ist][!] [/]pattern[/]</dt>
<dd><p>&quot;[I&quot; や &quot;]I&quot; と同樣だが、[range] で指定された範圍から檢索する (デフォルト: ファイル全體)。
</p>
<p>[/] と [!] については |<a href="#g_t_003asearch_002dargs">:search-args</a>| を參照。
</p>
<a name="g_t_005b_005fCTRL_002dI"></a><a name="index-_005b_005fCTRL_002dI"></a>
</dd>
<dt>[ CTRL-I</dt>
<dd><p>カーソルの下にあるキーワードを含む最初の 1 行にジャンプする。檢索はファイルの先頭から開始する。コメントとみなせる行は無視される (&rsquo;<samp>comments</samp>&rsquo; オプションを參照すること)。數字が與へられた場合は、先頭から指定した個數目にマッチした行にジャンプする。この場合はコメント行は無視されない。
</p>
<a name="g_t_005d_005fCTRL_002dI"></a><a name="index-_005d_005fCTRL_002dI"></a>
</dd>
<dt>] CTRL-I</dt>
<dd><p>&quot;[ CTRL-I&quot; と同樣だが、檢索が現在のカーソル位置から開始される。
</p>
<a name="g_t_003aij"></a><a name="g_t_003aijump"></a><a name="index-_003aij"></a>
<a name="index-_003aijump"></a>
</dd>
<dt>:[range]ij[ump][!] [count] [/]pattern[/]</dt>
<dd><p>&quot;[ CTRL-I&quot; や &quot;] CTRL-I&quot; と同樣だが、[range] で指定された範圍から檢索する(デフォルト: ファイル全體)。
</p>
<p>[/] と [!] については |<a href="#g_t_003asearch_002dargs">:search-args</a>| を參照。
</p>
<a name="CTRL_002dW_005fCTRL_002dI"></a><a name="CTRL_002dW_005fi"></a><a name="index-CTRL_002dW_005fCTRL_002dI"></a>
<a name="index-CTRL_002dW_005fi"></a>
</dd>
<dt><kbd>CTRL-W</kbd> <kbd>CTRL-I</kbd> または</dt>
<dt><kbd>CTRL-W</kbd> i</dt>
<dd><p>新しいウィンドウを開き、カーソルの下にあつたキーワードを含む最初の 1 行に移動する。檢索はファイルの先頭から開始する。コメントとみなせる行は無視される(&rsquo;<samp>comments</samp>&rsquo; オプションを參照すること)。數字が與へられた場合は、先頭から指定した個數目にマッチした行にジャンプする。この場合はコメント行は無視されない。
</p>
<a name="g_t_003aisp"></a><a name="g_t_003aisplit"></a><a name="index-_003aisp"></a>
<a name="index-_003aisplit"></a>
</dd>
<dt>:[range]isp[lit][!] [count] [/]pattern[/]</dt>
<dd><p>&quot;CTRL-W i&quot; や &quot;CTRL-W i&quot; と同樣だが、[range] で指定された範圍から檢索する(デフォルト: ファイル全體)。
</p>
<p>[/] と [!] については |<a href="#g_t_003asearch_002dargs">:search-args</a>| を參照。
</p>
<a name="g_t_005bd"></a><a name="index-_005bd"></a>
</dd>
<dt>[d</dt>
<dd><p>カーソルの下にあるマクロを含む最初のマクロ定義を表示する。檢索はファイルの先頭から開始する。數字が與へられた場合は、先頭から指定した個數目にマッチした行を表示する。
</p>
<a name="g_t_005dd"></a><a name="index-_005dd"></a>
</dd>
<dt>]d</dt>
<dd><p>&quot;[d&quot; と同樣だが、檢索が現在のカーソル位置から開始される。
</p>
<a name="g_t_003ads"></a><a name="g_t_003adsearch"></a><a name="index-_003ads"></a>
<a name="index-_003adsearch"></a>
</dd>
<dt>:[range]ds[earch][!] [count] [/]string[/]</dt>
<dd><p>&quot;[d&quot; や &quot;]d&quot; と同樣だが、[range] で指定された範圍から檢索する(デフォルト: ファイル全體)。
</p>
<p>[/] と [!] については |<a href="#g_t_003asearch_002dargs">:search-args</a>| を參照。
</p>
<a name="g_t_005bD"></a><a name="index-_005bD"></a>
</dd>
<dt>[D</dt>
<dd><p>カーソルの下にあるマクロを含むすべてのマクロ定義を表示する。結果にはファイル名と行番號が表示される。檢索はファイルの先頭から開始される。
</p>
<a name="g_t_005dD"></a><a name="index-_005dD"></a>
</dd>
<dt>]D</dt>
<dd><p>&quot;[D&quot; と同樣だが、檢索が現在のカーソル位置から開始される。
</p>
<a name="g_t_003adli"></a><a name="g_t_003adlist"></a><a name="index-_003adli"></a>
<a name="index-_003adlist"></a>
</dd>
<dt>:[range]dli[st][!] [/]string[/]</dt>
<dd><p>&lsquo;[D&lsquo; や &lsquo;]D&lsquo; と同樣だが、[range] で指定された範圍から檢索する (デフォルト: ファイル全體)。
</p>
<p>[/] と [!] については |<a href="#g_t_003asearch_002dargs">:search-args</a>| を參照。
</p><blockquote>
<p><strong>Note:</strong> <br>
&lsquo;<code>:dl</code>&lsquo; は &lsquo;<code>:dlist</code>&lsquo; ではなく、&lsquo;<code>:delete</code>&lsquo; に &quot;l&quot; レジスタを指定したものとして機能する。
</p></blockquote>

<a name="g_t_005b_005fCTRL_002dD"></a><a name="index-_005b_005fCTRL_002dD"></a>
</dd>
<dt>[ <kbd>CTRL-D</kbd></dt>
<dd><p>カーソルの下にあるキーワードを含む最初のマクロ定義にジャンプする。檢索はファイルの先頭から開始する。數字が與へられた場合は、先頭から指定した個數目にマッチした行にジャンプする。
</p>
<a name="g_t_005d_005fCTRL_002dD"></a><a name="index-_005d_005fCTRL_002dD"></a>
</dd>
<dt>] <kbd>CTRL-D</kbd></dt>
<dd><p>&quot;[ CTRL-D&quot; と同樣だが、檢索が現在のカーソル位置から開始される。
</p>
<a name="g_t_003adj"></a><a name="g_t_003adjump"></a><a name="index-_003adj"></a>
<a name="index-_003adjump"></a>
</dd>
<dt>:[range]dj[ump][!] [count] [/]string[/]</dt>
<dd><p>&quot;[ CTRL-D&quot; や &quot;] CTRL-D&quot; と同樣だが、[range] で指定された範圍から檢索する (デフォルト: ファイル全體)。
</p>
<p>[/] と [!] については |<a href="#g_t_003asearch_002dargs">:search-args</a>| を參照。
</p>
<a name="CTRL_002dW_005fCTRL_002dD"></a><a name="CTRL_002dW_005fd"></a><a name="index-CTRL_002dW_005fCTRL_002dD"></a>
<a name="index-CTRL_002dW_005fd"></a>
</dd>
<dt><kbd>CTRL-W</kbd> <kbd>CTRL-D</kbd> または</dt>
<dt><kbd>CTRL-W</kbd> d</dt>
<dd><p>新しいウィンドウを開き、カーソルの下にあつたキーワードを含む最初のマクロ定義に移動する。檢索はファイルの先頭から開始する。數字が與へられた場合は、先頭から指定した個數目にマッチした行にジャンプする。
</p>
<a name="g_t_003adsp"></a><a name="g_t_003adsplit"></a><a name="index-_003adsp"></a>
<a name="index-_003adsplit"></a>
</dd>
<dt>:[range]dsp[lit][!] [count] [/]string[/]</dt>
<dd><p>&quot;CTRL-W d&quot; と同樣だが、[range] で指定された範圍から檢索する (デフォルト: ファイル全體)。
</p>
<p>[/] と [!] については |<a href="#g_t_003asearch_002dargs">:search-args</a>| を參照。
</p>
<a name="g_t_003ache"></a><a name="g_t_003achec"></a><a name="g_t_003acheck"></a><a name="g_t_003acheckpath"></a><a name="index-_003ache"></a>
<a name="index-_003achec"></a>
<a name="index-_003acheck"></a>
<a name="index-_003acheckpath"></a>
</dd>
<dt>:che[ckpath]</dt>
<dd><p>ファイルが見つからないすべてのインクルードファイル名をリスト表示する。
</p>
</dd>
<dt>:che[ckpath]!</dt>
<dd><p>すべてのインクルードファイル名をリスト表示する。
</p></dd>
</dl>

<a name="g_t_003asearch_002dargs"></a><a name="index-_003asearch_002dargs"></a>
<p>上記コマンドに共通の引數:
</p><dl compact="compact">
<dt>[!]</dt>
<dd><p>使用した場合は、コメントとみなせる行に對しても檢索をする。使用しなかつた場合は &rsquo;<samp>comments</samp>&rsquo; によつてコメントとみなされる行や C コメント(&quot;//&quot; の後ろか /* */ の閒)にあるものは無視される。コメントとみなされた行が、途中からコメントでなくなるやうなときは見逃すかもしれないことに注意。
</p>
<p>また、コメント行であつても、(&rsquo;<samp>comments</samp>&rsquo; によつて) 認識されないでとにかくマッチするかもしれない。例:
</p><pre class="verbatim">/* comment
foobar */
</pre><p>&quot;foobar&quot; に對する檢索はマッチする。これは行がコメントとして認識されないためである(たとへ構文强調表示が認識したとしても)。
</p><blockquote>
<p><strong>Note:</strong> <br>
マクロ定義はたいていコメントと誤認されることはないので、&quot;<code>:dlist</code>&quot; や &quot;<code>:dsearch</code>&quot;、&quot;<code>:djump</code>&quot; に [!] を使用することは大差がない。
</p></blockquote>
</dd>
<dt>[/]</dt>
<dd><p>パターンは &rsquo;/&rsquo; で圍むことができる。&rsquo;/&rsquo; なしの場合、&quot;\&lt;pattern\&gt;&quot; といふパターンを使ふことによつて、完全な語だけがマッチする。2 つ目の &rsquo;/&rsquo; の後にだけ、&rsquo;|&rsquo; を使ふことによつて次のコマンドを追加できる。例:
</p><div class="example">
<pre class="example">:isearch /string/ | echo &quot;the last one&quot;
</pre></div>
<p>&quot;<code>:djump</code>&quot;, &quot;<code>:dsplit</code>&quot;, &quot;<code>:dlist</code>&quot;, &quot;<code>:dsearch</code>&quot; コマンドではパターンは檢索パターンとしてではなく文字通りに使はれる。
</p></dd>
</dl>

<a name="tag_002dfunction"></a><a name="index-tag_002dfunction"></a>
<a name="g_t7_002e-_0027tagfunc_0027-woShi-u"></a>
<h3 class="section">7. &rsquo;<samp>tagfunc</samp>&rsquo; を使ふ</h3>

<p>|<a href="#g_t_003atag">:tag</a>|、|<a href="#g_t_003atselect">:tselect</a>| のやうなコマンド、および |<a href="#CTRL_002d_005d">CTRL-]</a>| のやうなノーマルモードタグコマンドに使はれるタグのリストを生成する函數を Vim に提供することが可能である。
</p>
<p>タグリストの生成に使用される函數は、&rsquo;<samp>tagfunc</samp>&rsquo; オプションを設定することによつて指定される。函數は 3 つの引數で呼び出される:
</p><ul>
<li> a:pattern タグ檢索中に使用されたタグ識別子。
</li><li> a:flags   函數の擧動を制禦するためのフラグのリスト。
</li><li> a:info   以下のエントリを含む辭書:
<table>
<tr><td width="30%">buf_ffname</td><td width="70%">優先順位のために使用できる完全ファイル名。</td></tr>
<tr><td width="30%">user_data</td><td width="70%">カスタムデータ文字列。以前の tagfunc によつてタグスタックに格納されてゐる場合。</td></tr>
</table>
</li></ul>

<p>現在、タグ函數には 2 つのフラグを渡すことができる:
</p><table>
<tr><td width="10%">&rsquo;c&rsquo;</td><td width="90%">この函數は、處理中の通常のコマンドによつて呼び出された。(ニーモニック: タグ函數は、カーソルの周りのコンテキストを使用して、タグリストを生成するためのより良い作業を實行できる。)</td></tr>
<tr><td width="10%">&rsquo;i&rsquo;</td><td width="90%">插入モードで、ユーザーはタグを補完していた (|<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002d_005d">i_CTRL-X_CTRL-]</a>| で)</td></tr>
</table>

<blockquote>
<p><strong>Note:</strong> <br>
&rsquo;<samp>tagfunc</samp>&rsquo; が設定されてゐる場合、|<a href="#tag_002dpriority">tag-priority</a>| に記述されてゐるタグの優先順位は適用されない。代はりに、優先順位は、函數によつて返されるリスト內の要素の順序とまつたく同じである。
</p></blockquote>
<a name="E987"></a><a name="index-E987"></a>
<p>函數は辭書エントリのリストを返すべきである。各辭書は少なくとも次のエントリを含み、各値は文字列でなければならない:
</p><table>
<tr><td width="20%">name</td><td width="80%">タグ名。</td></tr>
<tr><td width="20%">filename</td><td width="80%">タグが定義されてゐるファイルの名前。カレントディレクトリからの相對パスか、フルパスのどちらかである。</td></tr>
<tr><td width="20%">cmd</td><td width="80%">ファイル內のタグを見つけるために使用される Ex コマンド。これはEx檢索パターンまたは行番號のどちらかである。</td></tr>
</table>
<blockquote>
<p><strong>Note:</strong> <br>
フォーマットは |<a href="eval_002etxt.html#taglist_0028_0029">taglist()</a>| のものと似てをり、これにより、結果を生成するためにその出力を使用することが可能になる。
以下のフィールドはオプションである:
</p><table>
<tr><td width="20%">kind</td><td width="80%">タグの種類。</td></tr>
<tr><td width="20%">user_data</td><td width="80%">オペレーション閒でタグの曖昧さを解消するために使用できる、タグスタックに格納されたカスタムデータの文字列。</td></tr>
</table>
</blockquote>

<p>函數がリストの代はりに、|<a href="eval_002etxt.html#v_003anull">v:null</a>| を返した場合、標準のタグ檢索が代はりに實行される。
</p>
<a name="E986"></a><a name="index-E986"></a>
<p>タグスタックを &rsquo;<samp>tagfunc</samp>&rsquo; の內部から變更することはできない。
</p>
<p>以下は、&rsquo;<samp>tagfunc</samp>&rsquo; に使用される函數の假定の例である。結果 (ファイル名の逆順のタグのリスト) を生成するために |<a href="eval_002etxt.html#taglist_0028_0029">taglist()</a>| の出力を使用してゐる。
</p><pre class="verbatim">function! TagFunc(pattern, flags, info)
  function! CompareFilenames(item1, item2)
    let f1 = a:item1['filename']
    let f2 = a:item2['filename']
    return f1 &gt;=# f2 ?
                \ -1 : f1 &lt;=# f2 ? 1 : 0
  endfunction

  let result = taglist(a:pattern)
  call sort(result, &quot;CompareFilenames&quot;)

  return result
endfunc
set tagfunc=TagFunc
</pre>
<hr>
<div class="header">
<p>
Up: <a href="Mu-Ci-.html#g_t_76ee_6b21" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html#Indexes-CP" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
