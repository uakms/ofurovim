<!DOCTYPE html>
<html lang="ja">
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>

<title>cmdline.txt (Vim Reference Manual)</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="description" content="cmdline.txt (Vim Reference Manual)">
<meta name="keywords" content="cmdline.txt (Vim Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="Mu-Ci-.html" rel="start" title="目次">
<link href="Indexes-CP.html" rel="index" title="Indexes CP">
<link href="Mu-Ci-.html" rel="up" title="目次">
<link href="options_002etxt.html" rel="next" title="options.txt">
<link href="recover_002etxt.html" rel="prev" title="recover.txt">
<style>
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="ja">
<span id="cmdline_002etxt"></span><div class="header">
<p>
Up: <a href="Mu-Ci-.html" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="komandorainnoBian-Ji-"></span><h2 class="unnumbered">コマンドラインの編輯</h2>
<pre class="verbatim">*cmdline.txt*   For Vim バージョン 8.1.  Last change: 2019 Sep 27


		  VIMリファレンスマニュアル    by Bram Moolenaar
</pre>

<span id="Cmdline_002dmode"></span><span id="Command_002dline_002dmode"></span><span id="Cmdline"></span><span id="Command_002dline"></span><span id="mode_002dcmdline"></span><span id="g_t_003a"></span><span id="index-Cmdline_002dmode"></span>
<span id="index-Command_002dline_002dmode"></span>
<span id="index-Cmdline"></span>
<span id="index-Command_002dline"></span>
<span id="index-mode_002dcmdline"></span>
<span id="index-_003a"></span>
<p>コマンドラインモード
</p>
<p>コマンドラインモードは Ex コマンド (&quot;:&quot;)、檢索パターン (&quot;/&quot; と &quot;?&quot;)、フィルタコマンド (&quot;!&quot;) の入力に使はれる。
</p>
<p>コマンドライン編輯の基本は、ユーザーマニュアルの第 20 章で說明されてゐる |<a href="usr_005f20_002etxt.html">usr_20.txt</a>|。
</p>
<table>
<tr><td width="55%">1. コマンドラインの編輯</td><td width="45%">|<a href="#cmdline_002dediting">cmdline-editing</a>|</td></tr>
<tr><td width="55%">2. コマンドラインの補完</td><td width="45%">|<a href="#cmdline_002dcompletion">cmdline-completion</a>|</td></tr>
<tr><td width="55%">3. Ex コマンドライン</td><td width="45%">|<a href="#cmdline_002dlines">cmdline-lines</a>|</td></tr>
<tr><td width="55%">4. Ex コマンドラインの範圍</td><td width="45%">|<a href="#cmdline_002dranges">cmdline-ranges</a>|</td></tr>
<tr><td width="55%">5. Ex コマンドラインのフラグ</td><td width="45%">|<a href="#ex_002dflags">ex-flags</a>|</td></tr>
<tr><td width="55%">6. Ex コマンド用の特別な文字</td><td width="45%">|<a href="#cmdline_002dspecial">cmdline-special</a>|</td></tr>
<tr><td width="55%">7. コマンドラインウィンドウ</td><td width="45%">|<a href="#cmdline_002dwindow">cmdline-window</a>|</td></tr>
</table>

<span id="cmdline_002dediting"></span><span id="index-cmdline_002dediting"></span>
<span id="index-komandorainnoBian-Ji-"></span>
<span id="g_t1_002e-komandorainnoBian-Ji-"></span><h3 class="section">1. コマンドラインの編輯</h3>

<p>通常、文字はカーソル位置の前に插入される。コマンドラインでは左右のカーソルキーで移動ができる。<code class="tt-key">&lt;Insert&gt;</code> キーで插入と上書を切り替へることができる。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
キーボードに有效なカーソルキーまたは他の特殊なキーが一切ないときでも、コマンド &quot;:cnoremap&quot; を使つて他のキーをそれらに割り當てられることに注意。例へば、tcsh 風の編輯キーを定義する方法は以下の通り。
<span id="tcsh_002dstyle"></span><span id="index-tcsh_002dstyle"></span>
</p><pre class="verbatim">:cnoremap &lt;C-A&gt; &lt;Home&gt;
:cnoremap &lt;C-F&gt; &lt;Right&gt;
:cnoremap &lt;C-B&gt; &lt;Left&gt;
:cnoremap &lt;Esc&gt;b &lt;S-Left&gt;
:cnoremap &lt;Esc&gt;f &lt;S-Right&gt;
</pre><p>(&lt;&gt; 記法を使つてゐる |<a href="intro_002etxt.html#g_t_003c_003e">&lt;&gt;</a>|．これらを全て文字通り打ち込むこと)
</p></blockquote>

<span id="cmdline_002dtoo_002dlong"></span><span id="index-cmdline_002dtoo_002dlong"></span>
<p>コマンドラインが長くなりすぎて畫面に收まらなくなつたときは、畫面に入るだけの部分が表示される。カーソルはこの見える部分しか動けない。そのため、これ以上は編輯できない。
</p>
<span id="cmdline_002dhistory"></span><span id="history"></span><span id="index-cmdline_002dhistory"></span>
<span id="index-history"></span>
<span id="index-komandorainLu-Li--1"></span>
<p>ユーザーの打ち込んだコマンドは、履歷表に記錄される。これらの履歷は上下矢印キーで呼び出せる。實際には 4 つの履歷表がある。
</p>
<p>履歷表:
</p><ul>
<li> &rsquo;:&rsquo; コマンド用
</li><li> 檢索文字列用
</li><li> 式 (expression) 用
</li><li> インプット行 (函數 |<a href="eval_002etxt.html#input_0028_0029">input()</a>| に對して入力されたテキスト) 用
</li><li> デバッグモードコマンド用
</li></ul>
<p>これらは全く別のものである。それぞれの履歷は同種の入力をしたときだけ使用できる。オプション &rsquo;<samp>history</samp>&rsquo; で保存されるコマンド數を設定できる (既定値: 50)。
</p><blockquote>
<p><strong>Note:</strong>
</p><ul>
<li> 以前と全く同じコマンドを打ち込んだときは、古い方の記錄が消される (繰り返されたコマンドが古いコマンドの履歷を追ひ出して消すのを避けるため)。
</li><li> 打ち込んだコマンドだけが記錄される。完全にマッピングから實行されたコマンドは履歷に殘らない。
</li><li> 全ての檢索パターンは、コマンド &quot;*&quot; や &quot;#&quot; 等によるものも含め、檢索用の履歷に記錄される。しかしマッピングからの檢索に對しては、最後の檢索のみが記錄される (長いマッピングが履歷の內容を捨ててしまふのを避けるため)。
</li></ul>
</blockquote>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bcmdline_005fhist">+cmdline_hist</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<p>コマンドラインには名前の自動補完機能がある。|<a href="#cmdline_002dcompletion">cmdline-completion</a>| を參照。
</p>
<span id="c_005fCTRL_002dV"></span><span id="index-c_005fCTRL_002dV"></span>
<dl compact="compact">
<dt>CTRL-V</dt>
<dd><p>次に打ち込まれた非數字文字を、その通りに插入する。また最大 3 個の數字により、1 バイト文字をコードの 10 進表現に基づいて入力できる。打ち込んだ非數字文字と 3 個の數字にはマッピングは適用されない。これは插入モードと同じ働きをする (|<a href="insert_002etxt.html#i_005fCTRL_002dV">i_CTRL-V</a>| を參照)。
</p><blockquote>
<p><strong>Note:</strong> <br>
Windows では CTRL-V はテキストの貼り付けにマッピングされてゐることが多い。そのときは代はりに CTRL-Q を使ふこと。
</p></blockquote>
<span id="c_005fCTRL_002dQ"></span><span id="index-c_005fCTRL_002dQ"></span>
</dd>
<dt>CTRL-Q</dt>
<dd><p><kbd>CTRL-V</kbd> と同樣だが、ターミナルによつては表示制禦に使はれてゐる。その場合は使へない。
</p>
<span id="c_005f_003cLeft_003e"></span><span id="c_005fLeft"></span><span id="index-c_005f_003cLeft_003e"></span>
<span id="index-c_005fLeft"></span>
</dd>
<dt>&lt;Left&gt;</dt>
<dd><p>カーソルを左へ
<span id="c_005f_003cRight_003e"></span><span id="c_005fRight"></span><span id="index-c_005f_003cRight_003e"></span>
<span id="index-c_005fRight"></span>
</p></dd>
<dt>&lt;Right&gt;</dt>
<dd><p>カーソルを右へ
<span id="c_005f_003cS_002dLeft_003e"></span><span id="c_005f_003cC_002dLeft_003e"></span><span id="index-c_005f_003cS_002dLeft_003e"></span>
<span id="index-c_005f_003cC_002dLeft_003e"></span>
</p></dd>
<dt>&lt;S-Left&gt; または</dt>
<dt>&lt;C-Left&gt;</dt>
<dd><p>カーソルを 1 WORD 分左へ
<span id="c_005f_003cS_002dRight_003e"></span><span id="c_005f_003cC_002dRight_003e"></span><span id="index-c_005f_003cS_002dRight_003e"></span>
<span id="index-c_005f_003cC_002dRight_003e"></span>
</p></dd>
<dt>&lt;S-Right&gt; または</dt>
<dt>&lt;C-Right&gt;</dt>
<dd><p>カーソルを 1 WORD 分右へ
<span id="c_005fCTRL_002dB"></span><span id="c_005f_003cHome_003e"></span><span id="c_005fHome"></span><span id="index-c_005fCTRL_002dB"></span>
<span id="index-c_005f_003cHome_003e"></span>
<span id="index-c_005fHome"></span>
</p></dd>
<dt>CTRL-B または</dt>
<dt>&lt;Home&gt;</dt>
<dd><p>カーソルをコマンドライン先頭へ
<span id="c_005fCTRL_002dE"></span><span id="c_005f_003cEnd_003e"></span><span id="c_005fEnd"></span><span id="index-c_005fCTRL_002dE"></span>
<span id="index-c_005f_003cEnd_003e"></span>
<span id="index-c_005fEnd"></span>
</p></dd>
<dt>CTRL-E または</dt>
<dt>&lt;End&gt;</dt>
<dd><p>カーソルをコマンドライン末尾へ
</p>
<span id="c_005f_003cLeftMouse_003e"></span><span id="index-c_005f_003cLeftMouse_003e"></span>
</dd>
<dt>&lt;LeftMouse&gt;</dt>
<dd><p>カーソルをマウスでクリックした所へ移動する
</p>
<span id="c_005f_003cMiddleMouse_003e"></span><span id="index-c_005f_003cMiddleMouse_003e"></span>
</dd>
<dt>&lt;MiddleMouse&gt;</dt>
<dd><p>クリップボード (X11 ではプライマリ選擇)の內容を貼り付ける。これは CTRL-R * を使つた動作に似てゐるが、行閒に CR は插入されない。
</p>
<span id="c_005f_003cBS_003e"></span><span id="c_005fCTRL_002dH"></span><span id="c_005fBS"></span><span id="index-c_005f_003cBS_003e"></span>
<span id="index-c_005fCTRL_002dH"></span>
<span id="index-c_005fBS"></span>
</dd>
<dt>CTRL-H または</dt>
<dt>&lt;BS&gt;</dt>
<dd><p>カーソル前の文字を削除する (<code class="tt-key">&lt;BS&gt;</code> キーが思ひ通り働かないときは |<a href="options_002etxt.html#g_t_003afixdel">:fixdel</a>| を參照)。
<span id="c_005f_003cDel_003e"></span><span id="c_005fDel"></span><span id="index-c_005f_003cDel_003e"></span>
<span id="index-c_005fDel"></span>
</p></dd>
<dt>&lt;Del&gt;</dt>
<dd><p>カーソル下の文字を削除する (行の最後では: カーソル前の文字) (<code class="tt-key">&lt;Del&gt;</code> キーが思ひ通り働かないときは |<a href="options_002etxt.html#g_t_003afixdel">:fixdel</a>| を參照。)
<span id="c_005fCTRL_002dW"></span><span id="index-c_005fCTRL_002dW"></span>
</p></dd>
<dt>CTRL-W</dt>
<dd><p>カーソルの前の |<a href="motion_002etxt.html#word">word</a>| を削除。これは &rsquo;<samp>iskeyword</samp>&rsquo; オプションに依存する。
<span id="c_005fCTRL_002dU"></span><span id="index-c_005fCTRL_002dU"></span>
</p></dd>
<dt>CTRL-U</dt>
<dd><p>行頭とカーソル位置の閒の全ての文字を削除する。Vim の以前のバージョンでは行內の文字を全て削除してゐた。その動作の方がよいなら、次の行をファイル .vimrc に加へること。
</p><pre class="verbatim">:cnoremap &lt;C-U&gt; &lt;C-E&gt;&lt;C-U&gt;
</pre><span id="c_005f_003cInsert_003e"></span><span id="c_005fInsert"></span><span id="index-c_005f_003cInsert_003e"></span>
<span id="index-c_005fInsert"></span>
</dd>
<dt>&lt;Insert&gt;</dt>
<dd><p>插入／上書の切り替へ
</p>
<span id="c_005fdigraph"></span><span id="c_005fCTRL_002dK"></span><span id="index-c_005fdigraph"></span>
<span id="index-c_005fCTRL_002dK"></span>
</dd>
<dt>{char1} &lt;BS&gt; {char2} または</dt>
<dt>CTRL-K {char1} {char2}</dt>
<dd><p>ダイグラフの入力 (|<a href="digraph_002etxt.html#digraphs">digraphs</a>| を參照)。{char1} が特殊キーのときは、そのキーコードは &lt;&gt; 形式で插入される。
</p>
<span id="c_005fCTRL_002dR"></span><span id="c_005f_003cC_002dR_003e"></span><span id="index-c_005fCTRL_002dR"></span>
<span id="index-c_005f_003cC_002dR_003e"></span>
</dd>
<dt>CTRL-R {0-9a-z&quot;%#:-=.}</dt>
<dd><p>番號/名前付きレジスタの內容を插入する。<kbd>CTRL-R</kbd> を打ち込んで次の文字を打ち込むまでの閒、レジスタ名の入力待ちであることを示すため &rsquo;&quot;&rsquo; が表示される。
</p>
<p>テキストは打ち込まれた通りに插入され、マッピングや短縮入力は無效である。&rsquo;<samp>wildchar</samp>&rsquo; によるコマンドライン補完も行はれない。またコマンドラインを終了する文字 (&lt;Esc&gt;, &lt;CR&gt;, &lt;NL&gt;, &lt;C-C&gt;) も文字通り插入される。
</p>
<p><code class="tt-key">&lt;BS&gt;</code> や <kbd>CTRL-W</kbd> はコマンドラインを終了できるが、コマンドラインに殘つてゐる文字が違ふモードで解釋されることなるので、意圖とは異なる動作になるかもしれない。
特殊なレジスタ:
</p><table>
<tr><td width="10%">&rsquo;&quot;&rsquo;</td><td width="90%">無名レジスタ、最後の削除やコピーによるテキストを格納する。</td></tr>
<tr><td width="10%">&rsquo;%&rsquo;</td><td width="90%">カレントファイル名</td></tr>
<tr><td width="10%">&rsquo;#&rsquo;</td><td width="90%">代替ファイル名</td></tr>
<tr><td width="10%">&rsquo;*&rsquo;</td><td width="90%">クリップボードの內容 (X11: プライマリ選擇)</td></tr>
<tr><td width="10%">&rsquo;+&rsquo;</td><td width="90%">クリップボードの內容</td></tr>
<tr><td width="10%">&rsquo;/&rsquo;</td><td width="90%">最後の檢索パターン</td></tr>
<tr><td width="10%">&rsquo;:&rsquo;</td><td width="90%">最後のコマンドラインの內容</td></tr>
<tr><td width="10%">&rsquo;-&rsquo;</td><td width="90%">最後の小規模な (1 行未滿の) 削除の內容</td></tr>
<tr><td width="10%">&rsquo;.&rsquo;</td><td width="90%">最後に插入されたテキスト
<span id="c_005fCTRL_002dR_005f_003d"></span><span id="index-c_005fCTRL_002dR_005f_003d"></span></td></tr>
<tr><td width="10%">&rsquo;=&rsquo;</td><td width="90%">Expression レジスタ: 式を入力するやう要求される (|<a href="eval_002etxt.html#expression">expression</a>| を參照) (Expression プロンプトでは機能しない。バッファ變更やカレントウィンドウ變更などは副作用を避けるため許可されてゐない)

<p>結果がリスト |<a href="eval_002etxt.html#List">List</a>| である場合、各要素が 1 行として插入される。行の中に改行文字が含まれてゐてもよい。結果が浮動小數點數である場合、自動的に文字列に變換される。
</p></td></tr>
</table>
<p>レジスタに關しては |<a href="change_002etxt.html#registers">registers</a>| を參照。
</p>
<p>實裝上の詳細: |<a href="eval_002etxt.html#expression">expression</a>| レジスタを使つてゐるときに setcmdpos() を呼ぶと結果文字列を插入する前の位置をセットする。插入後の位置をセットするには <kbd>CTRL-R</kbd> <kbd>CTRL-R</kbd> を使ふこと。
</p>
<span id="c_005fCTRL_002dR_005fCTRL_002dF"></span><span id="c_005f_003cC_002dR_003e_005f_003cC_002dF_003e"></span><span id="c_005fCTRL_002dR_005fCTRL_002dP"></span><span id="c_005f_003cC_002dR_003e_005f_003cC_002dP_003e"></span><span id="c_005fCTRL_002dR_005fCTRL_002dW"></span><span id="c_005f_003cC_002dR_003e_005f_003cC_002dW_003e"></span><span id="c_005fCTRL_002dR_005fCTRL_002dA"></span><span id="c_005f_003cC_002dR_003e_005f_003cC_002dA_003e"></span><span id="c_005fCTRL_002dR_005fCTRL_002dL"></span><span id="c_005f_003cC_002dR_003e_005f_003cC_002dL_003e"></span><span id="index-c_005fCTRL_002dR_005fCTRL_002dF"></span>
<span id="index-c_005f_003cC_002dR_003e_005f_003cC_002dF_003e"></span>
<span id="index-c_005fCTRL_002dR_005fCTRL_002dP"></span>
<span id="index-c_005f_003cC_002dR_003e_005f_003cC_002dP_003e"></span>
<span id="index-c_005fCTRL_002dR_005fCTRL_002dW"></span>
<span id="index-c_005f_003cC_002dR_003e_005f_003cC_002dW_003e"></span>
<span id="index-c_005fCTRL_002dR_005fCTRL_002dA"></span>
<span id="index-c_005f_003cC_002dR_003e_005f_003cC_002dA_003e"></span>
<span id="index-c_005fCTRL_002dR_005fCTRL_002dL"></span>
<span id="index-c_005f_003cC_002dR_003e_005f_003cC_002dL_003e"></span>
</dd>
<dt>CTRL-R CTRL-F または</dt>
<dt>CTRL-R CTRL-P または</dt>
<dt>CTRL-R CTRL-W または</dt>
<dt>CTRL-R CTRL-A または</dt>
<dt>CTRL-R CTRL-L</dt>
<dd><p>カーソル下にオブジェクトを插入する。
</p><table>
<tr><td width="20%"><kbd>CTRL-F</kbd></td><td width="80%">カーソル下のファイル名</td></tr>
<tr><td width="20%"><kbd>CTRL-P</kbd></td><td width="80%">|<a href="editing_002etxt.html#gf">gf</a>| と同樣に &rsquo;<samp>path</samp>&rsquo; を使つて展開された、カーソル下のファイル名</td></tr>
<tr><td width="20%"><kbd>CTRL-W</kbd></td><td width="80%">カーソル下の word</td></tr>
<tr><td width="20%"><kbd>CTRL-A</kbd></td><td width="80%">カーソル下の WORD; |<a href="motion_002etxt.html#WORD">WORD</a>| を參照</td></tr>
<tr><td width="20%"><kbd>CTRL-L</kbd></td><td width="80%">カーソル下の line</td></tr>
</table>

<p>&rsquo;<samp>incsearch</samp>&rsquo; がセットされてるとき、現在表示されてゐるマッチの末尾のカーソル位置が使はれる。<kbd>CTRL-W</kbd> では word の一部がすでに入力されてゐるとき、その部分がもう一度入力されることはない。
</p>
<p>{譯注: word といふ單語のrの上にカーソルを置き、<code>:wo&lt;C-r&gt;&lt;C-w&gt;</code> としてみると、&rsquo;<samp>incsearch</samp>&rsquo; の値によつて結果が違ふことがわかる}
</p>
<p><kbd>CTRL-F</kbd> と <kbd>CTRL-P</kbd>: {Vim が |<a href="various_002etxt.html#g_t_002bfile_005fin_005fpath">+file_in_path</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<span id="c_005fCTRL_002dR_005fCTRL_002dR"></span><span id="c_005f_003cC_002dR_003e_005f_003cC_002dR_003e"></span><span id="c_005fCTRL_002dR_005fCTRL_002dO"></span><span id="c_005f_003cC_002dR_003e_005f_003cC_002dO_003e"></span><span id="index-c_005fCTRL_002dR_005fCTRL_002dR"></span>
<span id="index-c_005f_003cC_002dR_003e_005f_003cC_002dR_003e"></span>
<span id="index-c_005fCTRL_002dR_005fCTRL_002dO"></span>
<span id="index-c_005f_003cC_002dR_003e_005f_003cC_002dO_003e"></span>
</dd>
<dt>CTRL-R CTRL-R {0-9a-z&quot;%#:-=. CTRL-F CTRL-P CTRL-W CTRL-A} または</dt>
<dt>CTRL-R CTRL-O {0-9a-z&quot;%#:-=. CTRL-F CTRL-P CTRL-W CTRL-A}</dt>
<dd><p>カーソル下にレジスタの內容またはオブジェクトを插入。|<a href="#c_005fCTRL_002dR">c_CTRL-R</a>| と同樣の動作だが、テキストを文字通り插入する。例へば、レジスタ &quot;a の內容が &quot;xy^Hz&quot; (ここで ^H はバックスペース) のとき、&quot;<kbd>CTRL-R</kbd> a&quot; は &quot;xz&quot; を插入するのに對し、&quot;<kbd>CTRL-R</kbd> <kbd>CTRL-R</kbd> a&quot; は&quot;xy^Hz&quot; を插入する。
</p>
<span id="c_005fCTRL_002d_005c_005fe"></span><span id="index-c_005fCTRL_002d_005c_005fe"></span>
</dd>
<dt>CTRL-\ e {expr}</dt>
<dd><p>コマンドラインを {expr} を評價した結果で置き換へる。式を入力し <code class="tt-key">&lt;Enter&gt;</code> を押せば完了する。マッピングする時に使ふと便利である。|<a href="eval_002etxt.html#expression">expression</a>| も參照のこと。
</p>
<p>式の評價を插入するには |<a href="#c_005fCTRL_002dR_005f_003d">c_CTRL-R_=</a>| を使ふ。便利な函數に |<a href="eval_002etxt.html#getcmdtype_0028_0029">getcmdtype()</a>| と |<a href="eval_002etxt.html#getcmdline_0028_0029">getcmdline()</a>| と |<a href="eval_002etxt.html#getcmdpos_0028_0029">getcmdpos()</a>| がある。
カーソルが行末になければカーソル位置は變更されない。カーソルが行末にあるときのコマンドライン變更後のカーソル位置は行末である。|<a href="eval_002etxt.html#setcmdpos_0028_0029">setcmdpos()</a>| を使ふとカーソル位置を變更できる。|<a href="eval_002etxt.html#sandbox">sandbox</a>| を使ふと不要な副作用を避けて式を評價することができる。
</p>
<p>例:
</p><pre class="verbatim">:cmap &lt;F7&gt; &lt;C-\&gt;eAppendSome()&lt;CR&gt;
:func AppendSome()
   :let cmd = getcmdline() . &quot; Some()&quot;
   :&quot; place the cursor on the )
   :call setcmdpos(strlen(cmd))
   :return cmd
:endfunc
</pre><p>これは再歸的には機能しない。つまり、すでに式を編輯してゐるときは動作しない。ただしマップの中では再歸的に使へる。
</p>
<span id="c_005fCTRL_002dY"></span><span id="index-c_005fCTRL_002dY"></span>
</dd>
<dt>CTRL-Y</dt>
<dd><p>モードレスセレクションでテキストを選擇中のとき、テキストをクリップボードにコピーする。|<a href="gui_002etxt.html#modeless_002dselection">modeless-selection</a>| 選擇中でないときは、<kbd>CTRL-Y</kbd> は文字として插入される。
</p>
<span id="c_005fCTRL_002dM"></span><span id="c_005fCTRL_002dJ"></span><span id="c_005f_003cNL_003e"></span><span id="c_005f_003cCR_003e"></span><span id="c_005fCR"></span><span id="index-c_005fCTRL_002dM"></span>
<span id="index-c_005fCTRL_002dJ"></span>
<span id="index-c_005f_003cNL_003e"></span>
<span id="index-c_005f_003cCR_003e"></span>
<span id="index-c_005fCR"></span>
</dd>
<dt>CTRL-M または</dt>
<dt>CTRL-J または</dt>
<dt>&lt;CR&gt; または</dt>
<dt>&lt;NL&gt;</dt>
<dd><p>入力されたコマンドの實行
</p>
<span id="c_005fCTRL_002d_005b"></span><span id="c_005f_003cEsc_003e"></span><span id="c_005fEsc"></span><span id="index-c_005fCTRL_002d_005b"></span>
<span id="index-c_005f_003cEsc_003e"></span>
<span id="index-c_005fEsc"></span>
</dd>
<dt>CTRL-[ または</dt>
<dt>&lt;Esc&gt;</dt>
<dd><p>打ち込まれたときにオプション &rsquo;<samp>cpoptions</samp>&rsquo; にフラグ &rsquo;<var>x</var>&rsquo; が含まれてゐなければ、コマンドを實行せずにコマンドラインモードを終了する。マクロ內で使はれたとき、または &rsquo;<samp>cpoptions</samp>&rsquo; に &rsquo;<var>x</var>&rsquo; が含まれてゐるときは、コマンドラインを實行する。
</p><blockquote>
<p><strong>Note:</strong> <br>
お使ひのキーボードで <code class="tt-key">&lt;Esc&gt;</code> が押しづらい場合は、<kbd>CTRL-[</kbd> を使ふよう練習してください。
</p></blockquote>
<span id="c_005fCTRL_002dC"></span><span id="index-c_005fCTRL_002dC"></span>
</dd>
<dt>CTRL-C</dt>
<dd><p>コマンドを實行せずにコマンドラインモードを終了する。
</p>
<span id="c_005f_003cUp_003e"></span><span id="c_005fUp"></span><span id="index-c_005f_003cUp_003e"></span>
<span id="index-c_005fUp"></span>
</dd>
<dt>&lt;Up&gt;</dt>
<dd><p>古いコマンドラインの內容のうち、先頭部分が現在のコマンドラインとマッチするものを履歷から呼び出す (下を參照)。
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bcmdline_005fhist">+cmdline_hist</a>| 機能付きでコンパイルされたときのみ有效}
<span id="c_005f_003cDown_003e"></span><span id="c_005fDown"></span><span id="index-c_005f_003cDown_003e"></span>
<span id="index-c_005fDown"></span>
</p></dd>
<dt>&lt;Down&gt;</dt>
<dd><p>さらに最近のコマンドラインの內容のうち、先頭部分が現在のコマンドラインとマッチするものを履歷から呼び出す (下を參照)。{譯注: 變な譯ですが、<code class="tt-key">&lt;Up&gt;</code> で行き過ぎたら <code class="tt-key">&lt;Down&gt;</code> で戾るといふことです}
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bcmdline_005fhist">+cmdline_hist</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<span id="c_005f_003cS_002dUp_003e"></span><span id="c_005f_003cPageUp_003e"></span><span id="index-c_005f_003cS_002dUp_003e"></span>
<span id="index-c_005f_003cPageUp_003e"></span>
</dd>
<dt>&lt;S-Up&gt; または</dt>
<dt>&lt;PageUp&gt;</dt>
<dd><p>履歷から古いコマンドラインの內容を呼び出す。
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bcmdline_005fhist">+cmdline_hist</a>| 機能付きでコンパイルされたときのみ有效}
<span id="c_005f_003cS_002dDown_003e"></span><span id="c_005f_003cPageDown_003e"></span><span id="index-c_005f_003cS_002dDown_003e"></span>
<span id="index-c_005f_003cPageDown_003e"></span>
</p></dd>
<dt>&lt;S-Down&gt; または</dt>
<dt>&lt;PageDown&gt;</dt>
<dd><p>履歷からさらに最近のコマンドラインの內容を呼び出す。
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bcmdline_005fhist">+cmdline_hist</a>| 機能付きでコンパイルされたときのみ有效}
</p>
</dd>
<dt>CTRL-D</dt>
<dd><p>コマンドライン補完 (|<a href="#cmdline_002dcompletion">cmdline-completion</a>|を參照)
</p>
<p>オプション &rsquo;<samp>wildchar</samp>&rsquo; で指定したキーコマンドライン補完 (|<a href="#cmdline_002dcompletion">cmdline-completion</a>| を參照)
</p></dd>
<dt>CTRL-N</dt>
<dd><p>コマンドライン補完 (|<a href="#cmdline_002dcompletion">cmdline-completion</a>| を參照)
</p></dd>
<dt>CTRL-P</dt>
<dd><p>コマンドライン補完 (|<a href="#cmdline_002dcompletion">cmdline-completion</a>| を參照)
</p></dd>
<dt>CTRL-A</dt>
<dd><p>コマンドライン補完 (|<a href="#cmdline_002dcompletion">cmdline-completion</a>| を參照)
</p></dd>
<dt>CTRL-L</dt>
<dd><p>コマンドライン補完 (|<a href="#cmdline_002dcompletion">cmdline-completion</a>| を參照)
</p>
<span id="c_005fCTRL_002d_005f"></span><span id="index-c_005fCTRL_002d_005f"></span>
</dd>
<dt>CTRL-_</dt>
<dd><ol>
<li> キーボードのヘブライ語モードと英語モードを切り替へる。これはコマンドラインのみに適用され、&rsquo;<samp>hkmap</samp>&rsquo; とは關係ない。

<p>コマンドライン、檢索や短縮入力等にヘブライ語テキストの項目が必要とされるときに便利である。Vim が |<a href="various_002etxt.html#g_t_002brightleft">+rightleft</a>| 機能付きでコンパイルされ、&rsquo;<samp>allowrevins</samp>&rsquo; がオンのときのみ有效。
</p>
<p>|<a href="rileft_002etxt.html">rileft.txt</a>| を參照。
</p>
</li><li> キーボードのペルシア語モードと英語モードを切り替へる。これはコマンドラインのみに適用され、オプション &rsquo;<samp>fkmap</samp>&rsquo; には關係しない。

<p>ペルシア語モードでは、文字は普段とは反對の方向に插入される。コマンドライン、檢索や短縮入力等にペルシア語テキストの項目が必要とされるときに便利である。Vim が |<a href="various_002etxt.html#g_t_002bfarsi">+farsi</a>| 機能付きでコンパイルされたときのみ有效。
</p>
<p>|<a href="farsi_002etxt.html">farsi.txt</a>| を參照。
</p></li></ol>

<span id="c_005fCTRL_002d_005e"></span><span id="index-c_005fCTRL_002d_005e"></span>
</dd>
<dt>CTRL-^</dt>
<dd><p>言語マッピング |<a href="map_002etxt.html#g_t_003almap">:lmap</a>| を切り替へたり、Input Method (IM) を切り替へる。
</p>
<p>檢索コマンドのためにパターンを入力するとき、オプション &rsquo;<samp>imsearch</samp>&rsquo; が -1 でなければ VAL は &rsquo;<samp>imsearch</samp>&rsquo; の値に、さうでなければ VAL は &rsquo;<samp>iminsert</samp>&rsquo; の値になる。
</p>
<p>言語マッピングが定義されてゐるとき:
</p><ul>
<li> VAL が 1 のとき (言語マッピングが使はれてゐるとき) 0 に變はる (言語マッピングは使はれなくなる)。
</li><li> VAL が 1 でなければ 1 に變はり、言語マッピングが有效になる。
</li></ul>
<p>言語マッピングが全く定義されてゐないとき:
</p><ul>
<li> VAL が 2 のとき (IM が使はれてゐるとき) 0 に變はる (IM は使はれなくなる)
</li><li> VAL が 2 以外のときは 2 に變はり、IM が有效になる。
</li></ul>
<p>普通、言語マッピングは、キーボードが生成するのと違ふ文字を打ち込むのに使はれる。オプション &rsquo;<samp>keymap</samp>&rsquo; を使へばまとめて設定できる。
</p>
<p>コマンドラインに入つたときは、コマンドを打ち込むはずなので、言語マッピングはオフに切り替へられる。<kbd>CTRL-^</kbd> でオンにした後も、次にコマンドや檢索パターンを打ち込むときにはその狀態は使はれない。
</p>
<span id="c_005fCTRL_002d_005d"></span><span id="index-c_005fCTRL_002d_005d"></span>
</dd>
<dt>CTRL-]</dt>
<dd><p>文字を插入することなく短縮入力を展開する。
</p></dd>
</dl>

<p>コマンドラインを Emacs スタイルで編輯する方法については |<a href="tips_002etxt.html#emacs_002dkeys">emacs-keys</a>| を參照。
</p>
<p>キー <code class="tt-key">&lt;Up&gt;</code> と <code class="tt-key">&lt;Down&gt;</code> は現在のコマンドラインを檢索文字列として扱ふ。次／以前のコマンドラインの先頭部分が、この文字列と比較される。マッチした最初の行が新しいコマンドラインとなる。
</p>
<p>これら 2 つのキーを繰り返し入力すると、同じ文字列が檢索に使はれる。例へば、以前の置換コマンドを見つけるためにはかうする: &quot;:s&quot; の後 <code class="tt-key">&lt;Up&gt;</code> を打ち込むこと。同じことは、<kbd>&lt;S-Up&gt;</kbd> を望んだ行が出るまで數回打ち込むことでもできる。
</p><blockquote>
<p><strong>Note:</strong> <br>
シフトキーと矢印キーとの同時押しは、全ての端末で機能するわけではないことに注意
</p></blockquote>

<span id="g_t_003ahis"></span><span id="g_t_003ahistory"></span><span id="index-_003ahis"></span>
<span id="index-_003ahistory"></span>
<dl compact="compact">
<dt>:his[tory]</dt>
<dd><p>最近入力されたコマンドの履歷を表示する。
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bcmdline_005fhist">+cmdline_hist</a>| 機能付きでコンパイルされたときのみ有效}
</p>
</dd>
<dt>:his[tory] [{name}] [{first}][, [{last}]]</dt>
<dd><p>{name} の種類の履歷內容を一覽表示する。{name} に入るものは:
</p><table>
<tr><td width="50%">c[md] または :</td><td width="50%">コマンドラインの履歷</td></tr>
<tr><td width="50%">s[earch] または / または ?</td><td width="50%">檢索文字列の履歷</td></tr>
<tr><td width="50%">[xpr] または =</td><td width="50%">Expression レジスタの履歷</td></tr>
<tr><td width="50%">i[nput] または &nbsp;</td><td width="50%">入力行の履歷</td></tr>
<tr><td width="50%">d[ebug] または &gt;</td><td width="50%">デバッグコマンドの履歷</td></tr>
<tr><td width="50%">a[ll]</td><td width="50%">上記のもの全て</td></tr>
</table>

<p>{first} や {last} が指定されたときは、履歷中の指定された範圍の項目が表示される。これらの數字は次の形式で指定する。
<span id="g_t_003ahistory_002dindexing"></span><span id="index-_003ahistory_002dindexing"></span>
正數は、&quot;<code>:history</code>&quot; の一覽表示で最初の列に表示される、項目の絕對的な番號を表す。この數字は、他の項目が削除されても固定されたままである。
</p>
<p>負數は項目の相對的な位置を示す。これは最も新しい項目 (番號 -1 を持つ) から後ろ向きに數へたものである。
</p>
<p>例:
</p>
<p>檢索履歷の項目 6 から 12 までを一覽表示する。
</p><pre class="verbatim">:history / 6,12
</pre><p>全履歷の最後から 2 番目を一覽表示する。
</p><pre class="verbatim">:history all -2
</pre><p>全履歷の最近の 2 項目を一覽表示する。
</p><pre class="verbatim">:history all -2,
</pre>
<span id="g_t_003akeepp"></span><span id="g_t_003akeeppatterns"></span><span id="index-_003akeepp"></span>
<span id="index-_003akeeppatterns"></span>
</dd>
<dt>:keepp[atterns] {command}</dt>
<dd><p>檢索履歷に何も加へずに、{command} を實行する。
</p></dd>
</dl>

<span id="cmdline_002dcompletion"></span><span id="index-cmdline_002dcompletion"></span>
<span id="index-komandorainnoBu-Wan-"></span>
<span id="g_t2_002e-komandorainnoBu-Wan-"></span><h3 class="section">2. コマンドラインの補完</h3>

<p>コマンドラインの編輯をしてゐるとき、いくつかのコマンドを使つてカーソル前の單語を補完できる。補完は以下のものに對して有效である。
</p>
<ul>
<li> コマンド名: コマンドラインの先頭で使はれる。
</li><li> タグ: コマンド &quot;<code>:tag</code>&quot; の後でのみ使はれる。
</li><li> ファイル名: ファイル名を取るコマンドの後、またはファイル名に對して設定されるオプションの設定時のみ使はれる。これはファイル名補完と呼ばれる。
</li><li> シェルコマンド名: &quot;<code>:!cmd</code>&quot;, &quot;<code>:r !cmd</code>&quot;, &quot;<code>:w !cmd</code>&quot; の後で使はれる。<code>$PATH</code> が考慮される。
</li><li> オプション: コマンド &quot;<code>:set</code>&quot; の後でのみ使はれる。
</li><li> マッピング: &quot;<code>:map</code>&quot; や類似コマンドの後でのみ使はれる。
</li><li> 變數／函數名: &quot;<code>:if</code>&quot;, &quot;<code>:call</code>&quot; や類似コマンドの後でのみ使はれる。
</li></ul>

<p>マッチするヘルプ項目の個數には上限があります (現在のところは 300)。非常に多くのマッチがあつたとき、遲くなるのを避けるためです。
</p>
<p>補完に使へるコマンドは以下の通りです:
</p>
<span id="c_005fCTRL_002dD"></span><span id="index-c_005fCTRL_002dD"></span>
<dl compact="compact">
<dt>CTRL-D</dt>
<dd><p>カーソルより前のパターンに一致する名前を一覽表示する。ファイル名を表示してゐるときには、ディレクトリは强調表示される (オプション &rsquo;<samp>highlight</samp>&rsquo; を參照)。オプション &rsquo;<samp>suffixes</samp>&rsquo; の値がマッチした名前は、末尾の方に移動される。
</p>
<p>&rsquo;<samp>wildoptions</samp>&rsquo; を &quot;<var>tagfile</var>&quot; にセットすると、マッチするタグを含むファイル名をリストすることができる。
<span id="c_005fCTRL_002dI"></span><span id="c_005fwildchar"></span><span id="c_005f_003cTab_003e"></span><span id="index-c_005fCTRL_002dI"></span>
<span id="index-c_005fwildchar"></span>
<span id="index-c_005f_003cTab_003e"></span>
</p></dd>
<dt>オプション &rsquo;<samp>wildchar</samp>&rsquo; で指定したキー</dt>
<dd><p>カーソルより前のパターンに對してマッチの檢索が行はれる。マッチ (いくつかあるなら、最初のもの) が、そのパターンの位置に插入される。
</p><blockquote>
<p><strong>Note:</strong> <br>
これはマクロの中では機能しない。なぜなら &lt;Tab&gt; と &lt;Esc&gt; は大抵 &rsquo;<samp>wildchar</samp>&rsquo; として使はれ、またいくつかのマクロの中ではこれらが特別な意味を持つからである
</p></blockquote>
<p>このキーを再び入力すると、複數のマッチがあるときは、次のマッチが插入される。最後のマッチの後には、最初のマッチが再び使はれる (繰り返し)。この動作は、オプション &rsquo;<samp>wildmode</samp>&rsquo; で變更できる。
<span id="c_005f_003cS_002dTab_003e"></span><span id="index-c_005f_003cS_002dTab_003e"></span>
</p></dd>
<dt>&lt;S-Tab&gt;</dt>
<dd><p>&rsquo;<samp>wildchar</samp>&rsquo; や <code class="tt-key">&lt;Tab&gt;</code> と同樣だが、最後のマッチで初めて前のマッチに進んでいく。&lt;S-Tab&gt; はあらゆるところで使へない。
<span id="c_005fCTRL_002dN"></span><span id="index-c_005fCTRL_002dN"></span>
</p></dd>
<dt>CTRL-N</dt>
<dd><p>&rsquo;<samp>wildchar</samp>&rsquo; を使つたら複數のマッチがあつたとき、その後に使ふと次のマッチが插入される。それ以外のときには、より最近使つたコマンドラインを履歷から呼び出す。
<span id="c_005fCTRL_002dP"></span><span id="index-c_005fCTRL_002dP"></span>
</p></dd>
<dt>CTRL-P</dt>
<dd><p>&rsquo;<samp>wildchar</samp>&rsquo; を使つたら複數のマッチがあつたとき、その後に使ふと前のマッチが插入される。それ以外のときには、より昔に使つたコマンドラインを履歷から呼び出す。
<span id="c_005fCTRL_002dA"></span><span id="index-c_005fCTRL_002dA"></span>
</p></dd>
<dt>CTRL-A</dt>
<dd><p>カーソルより前のパターンに一致する、全ての名前が插入される。
<span id="c_005fCTRL_002dL"></span><span id="index-c_005fCTRL_002dL"></span>
</p></dd>
<dt>CTRL-L</dt>
<dd><p>カーソルより前のパターンに對してマッチの檢索が行はれる。マッチが 1 個のときは、それがパターンの位置に插入される。複數個のマッチがあつたときは、最も長い共通部分がパターンの位置に插入される。その結果がパターンより短い場合には、補完は行はれない。
<span id="g_t_002f_005fCTRL_002dL"></span><span id="index-_002f_005fCTRL_002dL"></span>
&rsquo;<samp>incsearch</samp>&rsquo; がセットされてゐると、&quot;/&quot; や &quot;?&quot; で檢索パターンを入力するとき現在のマッチが表示され、<kbd>CTRL-L</kbd> を押すと現在のマッチの末尾から1文字追加する。&rsquo;<samp>ignorecase</samp>&rsquo; と &rsquo;<samp>smartcase</samp>&rsquo; がセットされてゐてコマンドラインに大文字が含まれてゐないときは、追加された文字は小文字に變換される。
<span id="c_005fCTRL_002dG"></span><span id="g_t_002f_005fCTRL_002dG"></span><span id="index-c_005fCTRL_002dG"></span>
<span id="index-_002f_005fCTRL_002dG"></span>
</p></dd>
<dt>CTRL-G</dt>
<dd><p>&rsquo;<samp>incsearch</samp>&rsquo; が設定され &quot;/&quot; や &quot;?&quot; にパターンを入力して現在のマッチが表示されてゐる時に、<kbd>CTRL-G</kbd> を押すと次のマッチに移動する (|<a href="pattern_002etxt.html#search_002doffset">search-offset</a>| は考慮しない)。<kbd>CTRL-T</kbd> を押すと前のマッチに移動する。<strong>Hint:</strong> 通常のキーボードでは、<code class="tt-key">T</code> は <code class="tt-key">G</code> より上にある。
<span id="c_005fCTRL_002dT"></span><span id="g_t_002f_005fCTRL_002dT"></span><span id="index-c_005fCTRL_002dT"></span>
<span id="index-_002f_005fCTRL_002dT"></span>
</p></dd>
<dt>CTRL-T</dt>
<dd><p>&rsquo;<samp>incsearch</samp>&rsquo; が設定され &quot;/&quot; や &quot;?&quot; にパターンを入力して現在のマッチが表示されてゐる時に、<kbd>CTRL-T</kbd> は前のマッチに移動する (|<a href="pattern_002etxt.html#search_002doffset">search-offset</a>| は考慮しない)。<kbd>CTRL-G</kbd> を使ふと次のマッチに移動する。<strong>Hint:</strong> 通常のキーボードは、<code class="tt-key">T</code> は <code class="tt-key">G</code> より上にある。
</p></dd>
</dl>

<p>オプション &rsquo;<samp>wildchar</samp>&rsquo; の既定値は &lt;Tab&gt; である (Vi 互換モードの場合は CTRL-E である。以前のバージョンでは &lt;Esc&gt; が使はれてゐた)。パターンがファイル名に對して適用されるときは標準のワイルドカード &rsquo;*&rsquo; と &rsquo;?&rsquo; が使用できる。&rsquo;*&rsquo; はあらゆる文字列に一致し、&rsquo;?&rsquo; はちやうど 1文字に一致する。
</p>
<p>&rsquo;<samp>wildchar</samp>&rsquo; や <kbd>CTRL-N</kbd>を繰り返すと、マッチしたものを循環し、やがて入力したものに戾つてくる。もしも最初のマッチが望んでゐるものでなければ、入力したものに直ぐに戾るために <kbd>&lt;S-Tab&gt;</kbd> や <kbd>CTRL-P</kbd> を使ふことができる。
</p>
<p>オプション &rsquo;<samp>wildignorecase</samp>&rsquo; を設定するとファイル名の大文字と小文字を區別しないやうにできる。
</p>
<p>オプション &rsquo;<samp>wildmenu</samp>&rsquo; を設定するとコマンドラインのすぐ上にマッチしたものを表示する。
</p>
<p>tcsh の autolist 補完が好みなら、このマッピングが使へる。
</p><pre class="verbatim">:cnoremap X &lt;C-L&gt;&lt;C-D&gt;
</pre><p>(ここで X は使ひたいコマンドキー。&lt;C-L&gt; は <kbd>CTRL-L</kbd>, &lt;C-D&gt; は <kbd>CTRL-D</kbd> のこと)
</p>
<p>これは最長のマッチを見つけ、マッチしたファイルを全て一覽表示する。
</p>
<p>tcsh の autolist 補完が好みなら、オプション &rsquo;wildmode&rsquo; を使つてその動作をエミュレートできる。例へば、次の設定は autolist=ambiguous といふ設定を眞似る。
</p><pre class="verbatim">:set wildmode=longest,list
</pre><p>これは、最初の &rsquo;<samp>wildchar</samp>&rsquo; で最長のマッチを見つけ、次はマッチするファイルを全て一覽表示する。
</p>
<span id="suffixes"></span><span id="index-suffixes"></span>
<p>ファイル名補完では、オプション &rsquo;<samp>suffixes</samp>&rsquo; を使ひ、ほぼ同じ名前のファイル名に優先度を設定できる。複數のマッチがあつたとき、あるファイルの擴張子が &rsquo;<samp>suffixes</samp>&rsquo; の値に含まれてゐると、そのファイルは無視される。既定値は &quot;<var>.bak,~,.o,.h,.info,.swp</var>&quot; であり、これは &quot;.bak&quot;, &quot;~&quot;, &quot;.o&quot;, &quot;.h&quot;, &quot;.info&quot;, &quot;.swp&quot; で終はるファイルが無視されることがあるといふことである。
</p>
<p>空の項目(つまり2つの連續するコンマ)は &quot;.&quot; を含まないファイル名(つまり擴張子を持たない)にマッチする。これは &quot;prog&quot; を無視させ、かつ &quot;prog.c&quot; にマッチさせたいときに便利である。
</p>
<p>例:
</p>
<table>
<tr><td width="20%">パターン:</td><td width="45%">存在するファイル:</td><td width="35%">マッチ:</td></tr>
<tr><td width="20%">test*</td><td width="45%">test.c test.h test.o</td><td width="35%">test.c</td></tr>
<tr><td width="20%">test*</td><td width="45%">test.h test.o</td><td width="35%">test.h and test.o</td></tr>
<tr><td width="20%">test*</td><td width="45%">test.i test.h test.c</td><td width="35%">test.i and test.c</td></tr>
</table>

<p>2 つのドットを持つ擴張子を無視することはできない。
</p>
<p>(オプション &rsquo;<samp>suffixes</samp>&rsquo; による除外が行はれた後で) マッチするファイルが複數個あるときは、最初のファイル名が插入される。&rsquo;<samp>wildchar</samp>&rsquo; のキーを 2 度打ち込んでも補完されたマッチが同じだつたら、マッチが 1 つしかないことが分かる。他のマッチは、&rsquo;<samp>wildchar</samp>&rsquo; のキーまたは <kbd>CTRL-N</kbd>, <kbd>CTRL-P</kbd> を入力することで得られる。それには &rsquo;<samp>suffixes</samp>&rsquo; に設定された擴張子にマッチするものも含め、全てのファイルが含まれる。
</p>
<p>ある擴張子のファイルを完全に無視するにはオプション &rsquo;<samp>wildignore</samp>&rsquo; を使ふこと。
</p>
<p>入力されたテキストで終はるファイルにのみマッチさせるには、&quot;$&quot; をつけること。例として、&quot;.c&quot; で終はるファイルにのみマッチさせるには:
</p><pre class="verbatim">:e *.c$
</pre><p>これは &quot;.cpp&quot; で終はるファイルにはマッチしない。&quot;$&quot; をつけないとマッチする。
</p>
<p>オプションの、以前に設定された値は、&rsquo;=&rsquo; の後で &rsquo;<samp>wildchar</samp>&rsquo; のキーを打ち込むことで得られる。例へば、&quot;<code>:set dir=</code>&quot; の後で &rsquo;<samp>wildchar</samp>&rsquo; のキーを打ち込むと、&rsquo;<var>dir</var>&rsquo; の現在の値が插入される。この動作は、ファイル名を取るオプションに對するファイル名補完より優先する。
</p>
<p>xterm で <kbd>&lt;S-Tab&gt;</kbd> を <kbd>CTRL-P</kbd> として使ひたいときは、このコマンドをユーザーの <samp>.cshrc</samp> に加へること。
</p><pre class="verbatim">xmodmap -e &quot;keysym Tab = Tab Find&quot;
</pre><p>そして次を <samp>.vimrc</samp> に加へること。
</p><pre class="verbatim">cmap &lt;Esc&gt;[1~ &lt;C-P&gt;
</pre>
<span id="cmdline_002dlines"></span><span id="index-cmdline_002dlines"></span>
<span id="index-Ex-komandorain"></span>
<span id="g_t3_002e-Ex-komandorain"></span><h3 class="section">3. Ex コマンドライン</h3>

<p>Ex コマンドはいくつかの特徵を持つてゐる。
</p>
<span id="g_t_003aquote"></span><span id="g_t_003acomment"></span><span id="index-_003aquote"></span>
<span id="index-_003acomment"></span>
<p>行の最初に &rsquo;&quot;&rsquo; があると、その行全てが無視される。&rsquo;&quot;&rsquo; がコマンドの後にあると、その行の殘りの部分が無視される。これはコメントを加へるために使はれる。例:
</p><pre class="verbatim">:set ai		&quot;set 'autoindent' option
</pre><p>シェルコマンド &quot;<code>:!cmd</code>&quot; や &quot;<code>:map</code>&quot; コマンド、そして &rsquo;&quot;&rsquo; をその引數の一部として認識するやうな、他のいくつかのコマンド (式を豫想するやうな大部分のコマンド) にはコメントを付けることができない:
</p>
<table>
<tr><td>:argdo</td><td></td></tr>
<tr><td>:autocmd</td><td></td></tr>
<tr><td>:bufdo</td><td></td></tr>
<tr><td>:cexpr (and the like)</td><td></td></tr>
<tr><td>:cdo (and the like)</td><td></td></tr>
<tr><td>:command</td><td></td></tr>
<tr><td>:cscope (and the like)</td><td></td></tr>
<tr><td>:debug</td><td></td></tr>
<tr><td>:display</td><td></td></tr>
<tr><td>:echo (and the like)</td><td></td></tr>
<tr><td>:elseif</td><td></td></tr>
<tr><td>:execute</td><td></td></tr>
<tr><td>:folddoopen</td><td></td></tr>
<tr><td>:folddoclosed</td><td></td></tr>
<tr><td>:for</td><td></td></tr>
<tr><td>:grep (and the like)</td><td></td></tr>
<tr><td>:help (and the like)</td><td></td></tr>
<tr><td>:if</td><td></td></tr>
<tr><td>:let</td><td></td></tr>
<tr><td>:make</td><td></td></tr>
<tr><td>:map (and the like including :abbrev commands)</td><td></td></tr>
<tr><td>:menu (and the like)</td><td></td></tr>
<tr><td>:mkspell</td><td></td></tr>
<tr><td>:normal</td><td></td></tr>
<tr><td>:ownsyntax</td><td></td></tr>
<tr><td>:popup</td><td></td></tr>
<tr><td>:promptfind (and the like)</td><td></td></tr>
<tr><td>:registers</td><td></td></tr>
<tr><td>:return</td><td></td></tr>
<tr><td>:sort</td><td></td></tr>
<tr><td>:syntax</td><td></td></tr>
<tr><td>:tabdo</td><td></td></tr>
<tr><td>:tearoff</td><td></td></tr>
<tr><td>:vimgrep (and the like)</td><td></td></tr>
<tr><td>:while</td><td></td></tr>
<tr><td>:windo</td><td></td></tr>
</table>

<span id="g_t_003abar"></span><span id="g_t_003a_005cbar"></span><span id="index-_003abar"></span>
<span id="index-_003a_005cbar"></span>
<p>&rsquo;|&rsquo; を使つてコマンドを區切ることができる。これにより一行に複數のコマンドを書き込める。引數に &rsquo;|&rsquo; を使ひたいときは、&rsquo;\&rsquo; を前に置くこと。
</p>
<p>以下のコマンドは &rsquo;|&rsquo; を引數として認識するため、後に他のコマンドを續けることはできない。
</p><table>
<tr><td width="90%">:argdo</td><td width="10%"></td></tr>
<tr><td width="90%">:autocmd</td><td width="10%"></td></tr>
<tr><td width="90%">:bufdo</td><td width="10%"></td></tr>
<tr><td width="90%">:cdo</td><td width="10%"></td></tr>
<tr><td width="90%">:cfdo</td><td width="10%"></td></tr>
<tr><td width="90%">:command</td><td width="10%"></td></tr>
<tr><td width="90%">:cscope</td><td width="10%"></td></tr>
<tr><td width="90%">:debug</td><td width="10%"></td></tr>
<tr><td width="90%">:folddoopen</td><td width="10%"></td></tr>
<tr><td width="90%">:folddoclosed</td><td width="10%"></td></tr>
<tr><td width="90%">:function</td><td width="10%"></td></tr>
<tr><td width="90%">:global</td><td width="10%"></td></tr>
<tr><td width="90%">:help</td><td width="10%"></td></tr>
<tr><td width="90%">:helpfind</td><td width="10%"></td></tr>
<tr><td width="90%">:lcscope</td><td width="10%"></td></tr>
<tr><td width="90%">:ldo</td><td width="10%"></td></tr>
<tr><td width="90%">:lfdo</td><td width="10%"></td></tr>
<tr><td width="90%">:make</td><td width="10%"></td></tr>
<tr><td width="90%">:normal</td><td width="10%"></td></tr>
<tr><td width="90%">:perl</td><td width="10%"></td></tr>
<tr><td width="90%">:perldo</td><td width="10%"></td></tr>
<tr><td width="90%">:promptfind</td><td width="10%"></td></tr>
<tr><td width="90%">:promptrepl</td><td width="10%"></td></tr>
<tr><td width="90%">:pyfile</td><td width="10%"></td></tr>
<tr><td width="90%">:python</td><td width="10%"></td></tr>
<tr><td width="90%">:registers</td><td width="10%"></td></tr>
<tr><td width="90%">:read !</td><td width="10%"></td></tr>
<tr><td width="90%">:scscope</td><td width="10%"></td></tr>
<tr><td width="90%">:sign</td><td width="10%"></td></tr>
<tr><td width="90%">:tcl</td><td width="10%"></td></tr>
<tr><td width="90%">:tcldo</td><td width="10%"></td></tr>
<tr><td width="90%">:tclfile</td><td width="10%"></td></tr>
<tr><td width="90%">:vglobal</td><td width="10%"></td></tr>
<tr><td width="90%">:windo</td><td width="10%"></td></tr>
<tr><td width="90%">:write !</td><td width="10%"></td></tr>
<tr><td width="90%">:[range]!</td><td width="10%"></td></tr>
</table>
<p>引數 &quot;-bar&quot; なしで定義されたユーザーコマンド |<a href="map_002etxt.html#g_t_003acommand">:command</a>|
</p>
<blockquote>
<p><strong>Note:</strong> <br>
(Vi から繼承されたのだが) 次の點は混亂を招きやすいので注意: &rsquo;|&rsquo; は &quot;:g&quot; と共に使ふとコマンドの引數に含まれるが、&quot;:s&quot; ではコマンドの區切りになる。
</p></blockquote>

<p>どうしても他のコマンドを使ひたいときは、コマンド &quot;<code>:execute</code>&quot; を使ふこと。例 (バッファに外部コマンド &quot;ls&quot; の出力を追加し、最初の行にジャンプする):
</p><pre class="verbatim">:execute 'r !ls' | '[
</pre>
<p>例外が 1 點ある: オプション &rsquo;<samp>cpoptions</samp>&rsquo; にフラグ &rsquo;<var>b</var>&rsquo; が含まれるときは、&quot;<code>:map</code>&quot;, &quot;<code>:abbr</code>&quot; またはその類似コマンドの引數に &rsquo;|&rsquo; を使ふとき、&rsquo;\&rsquo; の代はりに <kbd>CTRL-V</kbd> を使ふ必要がある。代はりに &quot;&lt;Bar&gt;&quot; を使ふこともできる。|<a href="map_002etxt.html#map_005fbar">map_bar</a>| も參照。
</p>
<p>例:
</p><table>
<tr><td width="40%">:!ls | wc</td><td width="60%">2 つのコマンドの出力を見る</td></tr>
<tr><td width="40%">:r !ls | wc</td><td width="60%">その出力をテキストに插入する</td></tr>
<tr><td width="40%">:%g/foo/p|&gt;</td><td width="60%">一致した全ての行を shiftwidth 1 個分ずらす</td></tr>
<tr><td width="40%">:%s/foo/bar/|&gt;</td><td width="60%">1 つの行を shiftwidth 1 個分ずらす</td></tr>
<tr><td width="40%">:map q 10^V|</td><td width="60%">&quot;q&quot; に &quot;10|&quot; をマッピングする</td></tr>
<tr><td width="40%">:map q 10\| map \ l</td><td width="60%">&quot;q&quot; に &quot;10\&quot; を、&quot;\&quot; に &quot;l&quot; をマッピングする <br> (&rsquo;<var>b</var>&rsquo; が &rsquo;<samp>cpoptions</samp>&rsquo; に含まれるとき)</td></tr>
</table>

<p>&lt;NL&gt; を使つて、&rsquo;|&rsquo; と同樣にコマンドを區切ることができる。&lt;NL&gt; を插入するには <kbd>CTRL-V</kbd> <kbd>CTRL-J</kbd> を使ふこと。すると &quot;^@&quot; が表示される。&rsquo;|&rsquo; を使ふ方が好ましいが、外部コマンドに對しては、&rsquo;|&rsquo; が外部コマンドに含まれてしまふため、&lt;NL&gt; を使はなければならない。&lt;NL&gt; の特別な作用を避けるためには、前に &rsquo;\&rsquo; を置く必要がある。例:
</p><pre class="verbatim">:r !date&lt;NL&gt;-join
</pre><p>これは現在の日時をファイルに讀み込み、それを前の行につなげる。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
&rsquo;|&rsquo; の前のコマンドがエラーを起こしたときは、以降のコマンドは實行されないことに注意。
</p></blockquote>


<p>Vi との互換性のために、以下の奇妙なコマンドがサポートされてゐる。
</p><table>
<tr><td width="20%">:|</td><td width="80%">現在行を表示する (&quot;:p&quot; と同樣)</td></tr>
<tr><td width="20%">:3|</td><td width="80%">3 行目を表示する (&quot;:3p&quot; と同樣)</td></tr>
<tr><td width="20%">:3</td><td width="80%">3 行目に移動する</td></tr>
</table>

<p>範圍とコマンド名の閒にコロンを入れることができる。このコロンは無視される (これは Vi 互換の動作である)。例:
</p><pre class="verbatim">:1,$:s/パターン/文字列
</pre>
<p>ファイル名が入るべき場所に、文字 &rsquo;%&rsquo; または &rsquo;#&rsquo; が使はれてゐるときは、それらはカレントファイル名、代替ファイル名に展開される (&quot;ファイルの編輯&quot; の章を參照 |<a href="#g_t_003a_005f_0025">:_%</a>| |<a href="#g_t_003a_005f_0023">:_#</a>|)。
</p>
<p>Amiga では、引數がファイル名1個になるはずのとき、空白を含むファイル名が使用できる。ファイル名末尾の空白は、&rsquo;\&rsquo; や <kbd>CTRL-V</kbd> でエスケープされてゐない限り無視される。
</p><blockquote>
<p><strong>Note:</strong> <br>
コマンド &quot;<code>:next</code>&quot; では、ファイル名の區切りに空白を使ふことに注意。ファイル名に空白を含むには、エスケープすること。例:
</p><pre class="verbatim">:next foo\ bar goes\ to school\
</pre><p>かうすると3個のファイル &quot;foo bar&quot;, &quot;goes to&quot;, &quot;school &quot; の編輯を開始する。
</p></blockquote>

<p>コマンドで特別な文字 &rsquo;&quot;&rsquo;, &rsquo;|&rsquo; を使ひたいとき、あるいはファイル名に &rsquo;%&rsquo;, &rsquo;#&rsquo; を使ひたいときは、&rsquo;\&rsquo; を前に置く。範圍指定やコマンド &quot;<code>:substitute</code>&quot; では &rsquo;\&rsquo; は必要ない。|<a href="editing_002etxt.html#g_t_0060_003d">`=</a>| も參照のこと。
</p>
<span id="g_t_003a_005f_0021"></span><span id="index-_003a_005f_0021"></span>
<p>Ex コマンドの後に文字 &rsquo;!&rsquo; (bang) を置くと、コマンドの動作方法が變はる。&rsquo;!&rsquo; はコマンドの直後に置かなければならず、閒に空白を入れてはならない。空白を插入すると、&rsquo;!&rsquo; はコマンドの引數と見なされ、違つた意味を持つことになる。例:
</p><table>
<tr><td width="20%">:w! name</td><td width="80%">現在のバッファをファイル &quot;name&quot; に保存し、ファイルがすでに存在してゐると上書きする</td></tr>
<tr><td width="20%">:w !name</td><td width="80%">現在のバッファを、標準入力からの入力としてコマンド &quot;name&quot; に送る</td></tr>
</table>

<span id="cmdline_002dranges"></span><span id="g_t_005brange_005d"></span><span id="E16"></span><span id="index-cmdline_002dranges"></span>
<span id="index-_005brange_005d"></span>
<span id="index-E16"></span>
<span id="index-Ex-komandorainnoFan-Wei-"></span>
<span id="g_t4_002e-Ex-komandorainnoFan-Wei-"></span><h3 class="section">4. Ex コマンドラインの範圍</h3>

<p>Ex コマンドには、その前に行單位の範圍を指定できるものがある。これは [range] と表記される。それは &rsquo;,&rsquo; か &rsquo;;&rsquo; で區切られた、1個以上の行指定子から成る。
</p>
<p>基本事項はユーザーマニュアルの |<a href="usr_005f10_002etxt.html#g_t10_002e3">10.3</a>| 章で說明されてゐる。
</p>
<span id="g_t_003a_002c"></span><span id="g_t_003a_003b"></span><span id="index-_003a_002c"></span>
<span id="index-_003a_003b"></span>
<p>區切りに &rsquo;;&rsquo; を使ふと、次の行指定子を解釋する前にカーソル位置がその行に移動する。&rsquo;,&rsquo; ではかうならない。例:
</p><pre class="verbatim">4,/この行/
</pre><p>4 行目から、カーソルより後の、&quot;この行&quot; がマッチする行まで。
</p><pre class="verbatim">5;/あの行/
</pre><p>5 行目から、5 行目より後の、&quot;あの行&quot; がマッチする行まで。
</p>
<p>ほとんどのコマンドでは、範圍の既定値はカーソルのある行である。しかしコマンド &quot;<samp>:write</samp>&quot;, &quot;<samp>:global</samp>&quot; での既定値はファイル全體 (1,$) である。
</p>
<p>コマンドに必要以上の行指定子が指定されたときは、先頭の方に指定されたものから順に除外される。
</p>
<span id="g_t_003arange"></span><span id="g_t_007baddress_007d"></span><span id="index-_003arange"></span>
<span id="index-_007baddress_007d"></span>
<p>行番號は以下の方法で指定できる:
</p><table>
<tr><td width="25%">{number}</td><td width="75%">絕對的な行番號
<span id="g_t_003a_002e"></span><span id="index-_003a_002e"></span></td></tr>
<tr><td width="25%">.</td><td width="75%">現在の行
<span id="g_t_003a_0024"></span><span id="index-_003a_0024"></span></td></tr>
<tr><td width="25%">$</td><td width="75%">ファイルの最終行
<span id="g_t_003a_0025"></span><span id="index-_003a_0025"></span></td></tr>
<tr><td width="25%">%</td><td width="75%">1,$と同じ (ファイル全體)
<span id="g_t_003a_0027"></span><span id="index-_003a_0027"></span></td></tr>
<tr><td width="25%">&rsquo;t</td><td width="75%">マーク tの位置 (小文字)</td></tr>
<tr><td width="25%">&rsquo;T</td><td width="75%">マーク Tの位置 (大文字); マーク位置が別ファイルにあるときには範圍指定には使へない
<span id="g_t_003a_002f"></span><span id="index-_003a_002f"></span></td></tr>
<tr><td width="25%">/{pattern}[/]</td><td width="75%">次に {pattern} のマッチする行 (下向き)
<span id="g_t_003a_003f"></span><span id="index-_003a_003f"></span></td></tr>
<tr><td width="25%">?{pattern}[?]</td><td width="75%">次に {pattern} のマッチする行 (上向き)</td></tr>
<tr><td width="25%">\/</td><td width="75%">次に直前の檢索パターンのマッチする行 (下向き)</td></tr>
<tr><td width="25%">\?</td><td width="75%">次に直前の檢索パターンのマッチする行 (上向き)</td></tr>
<tr><td width="25%">\&amp;</td><td width="75%">次に直前の置換元パターンのマッチする行 (下向き)</td></tr>
</table>

<p>これらの後に &rsquo;+&rsquo; または &rsquo;-&rsquo; と數値を付けてもよい (複數も可)。この數は直前の行番號に加算または減算される。數が省略された場合は 1 が指定されたと見なされる。
</p>
<p>{pattern} の後の &quot;/&quot; と &quot;?&quot; は、パターンとその後の項目とを區別するために必要となる。
</p>
<p>&quot;/&quot; と &quot;?&quot; は別の場所指定の後に付くことがある。すると檢索はそこから始まる。&rsquo;;&rsquo; との違ひは、カーソルが移動しない點である。例:
</p><table>
<tr><td width="25%">/pat1//pat2/</td><td width="77%">&quot;pat1&quot; を含む行より後の、&quot;pat2&quot; を含む行を見つける。このときカーソルは移動しない。</td></tr>
<tr><td width="25%">7;/pat2/</td><td width="77%">7行目より後の、&quot;pat2&quot; を含む行を見つける。このときカーソルは 7 行目に留まる。</td></tr>
</table>

<p>{number} は 0 からファイルの行數までの數でなければならない。0 (零) を使ふと、コマンドの大半では 1 と解釋される。その數をカウントとして使ふコマンド (|<a href="tagsrch_002etxt.html#g_t_003atag">:tag</a>|, |<a href="tagsrch_002etxt.html#g_t_003apop">:pop</a>| 等) では確かに 0 として使はれる。0 を「先頭行の前」として解釋するコマンドもある (|<a href="insert_002etxt.html#g_t_003aread">:read</a>|, 檢索パターン等)。
</p>
<p>例:
</p><table>
<tr><td width="25%">.+3</td><td width="77%">カーソルの 3 行下</td></tr>
<tr><td width="25%">/that/+1</td><td width="77%">次行より下の、&quot;that&quot; を含む行</td></tr>
<tr><td width="25%">.,$</td><td width="77%">現在行からファイル末尾まで</td></tr>
<tr><td width="25%">0;/that</td><td width="77%">&quot;that&quot; を含む最初の行 (第 1 行にもマッチ可能)</td></tr>
<tr><td width="25%">1;/that</td><td width="77%">第 1 行より下の、&quot;that&quot; を含む行</td></tr>
</table>

<p>いくつかのコマンドには、後にカウントを指定できる。そのコマンドは、最後の行指定子で指定された行 (既定値はカーソルの行) から始まる、そのカウントの行數の範圍に使はれる。カウントを取ることができるのは、範圍指定は取るがファイル名の引數を取らないコマンドである (ファイル名は數字でもよいから)。
</p>
<p>例:
</p><table>
<tr><td width="25%">:s/x/X/g 5</td><td width="75%">現在行から始まる5行で &rsquo;x&rsquo; を &rsquo;X&rsquo; に置換</td></tr>
<tr><td width="25%">:23d 4</td><td width="75%">第23, 24, 25, 26行を削除</td></tr>
</table>


<span id="index-Zhe-riDie-mitoFan-Wei-Zhi-Ding-"></span>
<span id="Zhe-riDie-mitoFan-Wei-Zhi-Ding-"></span><h4 class="unnumberedsubsec">折り疊みと範圍指定</h4>

<p>折り疊みがアクティブなときは、閉ぢられた折り疊み全體を含むやうに範圍が切り上げ／切り下げられる。|<a href="fold_002etxt.html#fold_002dbehavior">fold-behavior</a>| を參照。
</p>

<span id="E493"></span><span id="index-E493"></span>
<span id="index-Ni-Xiang-kinoFan-Wei-Zhi-Ding-"></span>
<span id="Ni-Xiang-kinoFan-Wei-Zhi-Ding-"></span><h4 class="unnumberedsubsec">逆向きの範圍指定</h4>

<p>範圍には小さい行番號を先に指定しなければならない。さうでないときは、Vim はその行番號を入れ替へてよいかを尋ねる。
</p><div class="display">
<pre class="display">Backwards range given, OK to swap
</pre></div>
<p>ただしグローバルコマンド &quot;:g&quot; では尋ねない。
</p>
<p>コマンドの前に &quot;<code>:silent</code>&quot; をつけるとこの質問が出ないやうになる。そのときは常に範圍が入れ替へられる。
</p>

<span id="N_003a"></span><span id="index-N_003a"></span>
<span id="index-kauntotoFan-Wei-Zhi-Ding-"></span>
<span id="kauntotoFan-Wei-Zhi-Ding-"></span><h4 class="unnumberedsubsec">カウントと範圍指定</h4>

<p>&quot;:&quot; を入力する前にカウントを指定すると、次のやうに變換される。
</p><pre class="verbatim">:.,.+(count - 1)
</pre><p>つまりカーソルの行から始まる [count] 行のことである。例: 3 行を削除するにはかうする。
</p><pre class="verbatim">3:d&lt;CR&gt;	    は    .,.+2d&lt;CR&gt;    に變換される
</pre>
<span id="v_005f_003a"></span><span id="index-v_005f_003a"></span>
<span id="index-biziyuarumodotoFan-Wei-Zhi-Ding-"></span>
<span id="biziyuarumodotoFan-Wei-Zhi-Ding--1"></span><h4 class="unnumberedsubsec">ビジュアルモードと範圍指定</h4>

<dl compact="compact">
<dt>{Visual}:</dt>
<dd><p>ビジュアルに選擇された行を範圍として、コマンドライン入力を始める。この範圍指定にはコード &lsquo;:&rsquo;&lt;,&rsquo;&gt;&lsquo; が使はれるので、コマンドライン履歷から同樣のコマンド行を呼び出して、別のビジュアル選擇行にコマンドを繰り返すことができる。
</p>
<p>ビジュアルモードがすでに終了してゐるときは、&lsquo;:*&lsquo; を使ふことで簡單にビジュアル選擇を範圍指定できる。ただし &quot;*&quot; が &rsquo;cpo&rsquo; オプションに含まれてゐるときは使へない (|<a href="options_002etxt.html#cpo_002dstar">cpo-star</a>| 參照)。そのときは &lsquo;:&rsquo;&lt;,&rsquo;&gt;&lsquo; を使ふ必要がある。
</p></dd>
</dl>


<span id="ex_002dflags"></span><span id="index-ex_002dflags"></span>
<span id="index-Ex-komandorainnohuragu"></span>
<span id="g_t5_002e-Ex-komandorainnohuragu"></span><h3 class="section">5. Ex コマンドラインのフラグ</h3>

<p>以下のフラグがExコマンドの選擇においてサポートされてゐる。これらはコマンドを實行した後にカーソルが移動する位置の行を表示する:
</p>
<table>
<tr><td width="10%">l</td><td width="90%">|<a href="various_002etxt.html#g_t_003alist">:list</a>| のやうに表示する</td></tr>
<tr><td width="10%">#</td><td width="90%">行番號をつける</td></tr>
<tr><td width="10%">p</td><td width="90%">|<a href="various_002etxt.html#g_t_003aprint">:print</a>| のやうに表示する</td></tr>
</table>

<p>これらのフラグは組み合はせることができる。つまり &quot;l#&quot; とすると行番號をつけて |<a href="various_002etxt.html#g_t_003alist">:list</a>| のスタイルで表示する。
</p>
<span id="cmdline_002dspecial"></span><span id="index-cmdline_002dspecial"></span>
<span id="index-Ex-komandoYong-noTe-Bie-naWenZi-"></span>
<span id="g_t6_002e-Ex-komandoYong-noTe-Bie-naWenZi-"></span><h3 class="section">6. Ex コマンド用の特別な文字</h3>

<blockquote>
<p><strong>Note:</strong> <br>
以下はコマンドラインの實行における特別な文字である。<kbd>CTRL-R</kbd> コマンドを使ふとこれらの特別な文字列を插入することができる。例へば &quot;%&quot; は現在のファイル名を表す。<kbd>CTRL-R %</kbd>とするとその場に現在のファイル名を插入する。|<a href="#c_005fCTRL_002dR">c_CTRL-R</a>| を參照。
</p></blockquote>

<blockquote>
<p><strong>Note:</strong> <br>
Vim script 內で特別な文字をエスケープするには |<a href="eval_002etxt.html#fnameescape_0028_0029">fnameescape()</a>| を使ふとよいかもしれない。|<a href="editing_002etxt.html#g_t_0060_003d">`=</a>| も參照のこと。
</p></blockquote>


<p>Ex コマンドの、ファイル名が使へるところでは、以下の文字は特別な意味を持つ。これらは式や函數 |<a href="eval_002etxt.html#expand_0028_0029">expand()</a>| 內でも使ふことができる。
</p><table>
<tr><td width="20%"><span id="g_t_003a_005f_0025"></span><span id="c_005f_0025"></span><span id="index-_003a_005f_0025"></span>
<span id="index-c_005f_0025"></span>
%</td><td width="80%">カレントファイル名に置き換へられる。</td></tr>
<tr><td width="20%"><span id="g_t_003a_005f_0023"></span><span id="c_005f_0023"></span><span id="index-_003a_005f_0023"></span>
<span id="index-c_005f_0023"></span>
#</td><td width="80%">代替ファイル名に置き換へられる。これはウィンドウごとに記憶される。</td></tr>
<tr><td width="20%"><span id="g_t_003a_005f_00230"></span><span id="g_t_003a_005f_0023n"></span><span id="c_005f_0023n"></span><span id="index-_003a_005f_00230"></span>
<span id="index-_003a_005f_0023n"></span>
<span id="index-c_005f_0023n"></span>
#n</td><td width="80%">(ここで n は數) バッファ n のファイル名に置き換へられる。&quot;#0&quot; は &quot;#&quot; と同じ。</td></tr>
<tr><td width="20%"><span id="g_t_003a_005f_0023_0023"></span><span id="c_005f_0023_0023"></span><span id="index-_003a_005f_0023_0023"></span>
<span id="index-c_005f_0023_0023"></span>
##</td><td width="80%">引數リスト內の全てのファイル名を、空白で區切つて列擧したものに置き換へられる。ファイル名の中の空白には、全て前に &rsquo;\&rsquo; が付けられる。</td></tr>
<tr><td width="20%"><span id="g_t_003a_005f_0023_003c"></span><span id="c_005f_0023_003c"></span><span id="index-_003a_005f_0023_003c"></span>
<span id="index-c_005f_0023_003c"></span>
#&lt;n</td><td width="80%">(n は &gt; 0 の數値)。n 番目の old file 名に置き換へられる。この番號については |<a href="starting_002etxt.html#g_t_003aoldfiles">:oldfiles</a>| や |<a href="eval_002etxt.html#v_003aoldfiles">v:oldfiles</a>| を參照。

<span id="E809"></span><span id="index-E809"></span>
<p>{|<a href="various_002etxt.html#g_t_002beval">+eval</a>| と |<a href="various_002etxt.html#g_t_002bviminfo">+viminfo</a>| 機能つきでコンパイルされたときのみ有效}
</p></td></tr>
</table>

<blockquote>
<p><strong>Note:</strong> <br>
&quot;#&lt;n&quot; 以外は、ユーザーに打ち込まれた通りのファイル名を與へることに注意 {譯注: 普通、カレントディレクトリのファイルは、パスを付けずにファイル名のみを打ち込んで編輯を始めるはずだが、その形でファイル名が呼び出される}。絕對パスが必要なとき (違ふディレクトリのファイル名を使ふとき) は、&quot;:p&quot; を付け加へる必要がある。|<a href="#filename_002dmodifiers">filename-modifiers</a>| を參照。
</p></blockquote>

<p>&quot;#&lt;n&quot; は絕對パスを返す。ただしホームディレクトリ以下のファイルに對しては &quot;~/&quot; で始まる。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
コマンドが適切に解釋できるやうに、スペースの前にはバックスラッシュがつく。しかしシェルコマンドに對してはこれは行はれない。シェルコマンドに對しては、引用符を使ふとよいかもしれない(しかしこれは引用符とワイルドカードを含む文字列に對しては失敗する):
</p><pre class="verbatim">:!ls &quot;%&quot;
:r !spell &quot;%&quot;
</pre></blockquote>

<p>&rsquo;%&rsquo; と &rsquo;#&rsquo; の特別な意味を避けるためには、その前に &rsquo;\&rsquo; を插入する。詳細: これらの文字の特別な意味は、&rsquo;\&rsquo; がその前に置かれれば、それがいくつあるかにかかはらず、常にエスケープ (無效化) される。
</p><table>
<thead><tr><th width="50%">打ち込むキー:</th><th width="50%">結果</th></tr></thead>
<tr><td width="50%">#</td><td width="50%">代替ファイル名</td></tr>
<tr><td width="50%">\#</td><td width="50%">#</td></tr>
<tr><td width="50%">\\#</td><td width="50%">\#</td></tr>
</table>
<p>|<a href="editing_002etxt.html#g_t_0060_003d">`=</a>| も參照のこと。
</p>
<span id="g_t_003a_003ccword_003e"></span><span id="g_t_003ccword_003e"></span><span id="g_t_003a_003ccWORD_003e"></span><span id="g_t_003ccWORD_003e"></span><span id="g_t_003a_003ccexpr_003e"></span><span id="g_t_003ccexpr_003e"></span><span id="g_t_003a_003ccfile_003e"></span><span id="g_t_003a_003cafile_003e"></span><span id="g_t_003cafile_003e"></span><span id="g_t_003a_003cabuf_003e"></span><span id="g_t_003cabuf_003e"></span><span id="g_t_003a_003camatch_003e"></span><span id="g_t_003camatch_003e"></span><span id="g_t_003ccfile_003e"></span><span id="g_t_003a_003csfile_003e"></span><span id="g_t_003csfile_003e"></span><span id="g_t_003a_003cslnum_003e"></span><span id="g_t_003cslnum_003e"></span><span id="g_t_003a_003csflnum_003e"></span><span id="g_t_003csflnum_003e"></span><span id="E499"></span><span id="E500"></span><span id="index-_003a_003ccword_003e"></span>
<span id="index-_003ccword_003e"></span>
<span id="index-_003a_003ccWORD_003e"></span>
<span id="index-_003ccWORD_003e"></span>
<span id="index-_003a_003ccexpr_003e"></span>
<span id="index-_003ccexpr_003e"></span>
<span id="index-_003a_003ccfile_003e"></span>
<span id="index-_003ccfile_003e"></span>
<span id="index-_003a_003cafile_003e"></span>
<span id="index-_003cafile_003e"></span>
<span id="index-_003a_003cabuf_003e"></span>
<span id="index-_003cabuf_003e"></span>
<span id="index-_003a_003camatch_003e"></span>
<span id="index-_003camatch_003e"></span>
<span id="index-_003a_003csfile_003e"></span>
<span id="index-_003csfile_003e"></span>
<span id="index-_003a_003cslnum_003e"></span>
<span id="index-_003cslnum_003e"></span>
<span id="index-_003a_003csflnum_003e"></span>
<span id="index-_003csflnum_003e"></span>
<span id="index-E499"></span>
<span id="index-E500"></span>
<blockquote>
<p><strong>Note:</strong> <br>
これらは文字通りに打ち込まれる、これらは特別なキーではない！
</p></blockquote>
<dl compact="compact">
<dt>&lt;cword&gt;</dt>
<dd><p>カーソル下の word に置き換へられる (|<a href="pattern_002etxt.html#star">star</a>| と同樣)
</p></dd>
<dt>&lt;cWORD&gt;</dt>
<dd><p>カーソル下の WORD に置き換へられる (|<a href="motion_002etxt.html#WORD">WORD</a>| を參照)
</p></dd>
<dt>&lt;cexpr&gt;</dt>
<dd><p>カーソル下の word に置き換へられるが、C 言語の式を構成するためにより多くを含む。例へばカーソルが &quot;ptr-&gt;arg&quot; の &quot;arg&quot; 上にある時、結果は &quot;ptr-&gt;arg&quot; となる。カーソルが &quot;list[idx]&quot; の &quot;]&quot; 上にある時、結果は &quot;list[idx]&quot; となる。これは |<a href="eval_002etxt.html#v_003abeval_005ftext">v:beval_text</a>| のために使はれる。
</p></dd>
<dt>&lt;cfile&gt;</dt>
<dd><p>カーソル下のパス名に置き換へられる (|<a href="editing_002etxt.html#gf">gf</a>| が使ふものと同樣)
</p></dd>
<dt>&lt;afile&gt;</dt>
<dd><p>自動コマンドの實行時、操作されてゐるバッファの名前か、ファイルの讀み書き用のファイル名に置き換へられる
<span id="E495"></span><span id="index-E495"></span>
</p></dd>
<dt>&lt;abuf&gt;</dt>
<dd><p>自動コマンドの實行時、カレントバッファの番號に置き換へられる (&quot;:r file&quot; と &quot;:so file&quot; のときにもカレントバッファの番號に置き換へられる。讀み込まれてゐるファイルはバッファ內にない)
<span id="E496"></span><span id="index-E496"></span>
<span id="E497"></span><span id="index-E497"></span>
</p></dd>
<dt>&lt;amatch&gt;</dt>
<dd><p>自動コマンドの實行時、この自動コマンドが實行されたときのマッチに置き換へられる。そのファイル名がマッチの檢索に使はれてゐないときのみ、&lt;afile&gt; と違ふ値になる (イベント FileType, Syntax, SpellFileMissing 用)。
</p></dd>
<dt>&lt;sfile&gt;</dt>
<dd><p>コマンド &quot;<code>:source</code>&quot; の實行時、取り込まれたファイルのファイル名に置き換へられる。
<span id="E498"></span><span id="index-E498"></span>
</p>
<p>函數の實行時はこのやうに置き換へられる:
</p><pre class="verbatim">&quot;function {函數名}[{行番號}]&quot;
</pre><p>函數呼び出しのネスト (入れ子狀態) はこのやうに表される:
</p><pre class="verbatim">&quot;function {函數名1}[{行番號}]..{函數名2}[{行番號}]&quot;
</pre><blockquote>
<p><strong>Note:</strong> <br>
函數內で &lt;sfile&gt; が使はれてゐる場合、ファイル名修飾子は無效になることに注意。
</p></blockquote>
</dd>
<dt>&lt;slnum&gt;</dt>
<dd><p>コマンド &quot;<code>:source</code>&quot; の實行時、行番號に置き換へられる。函數の中では、函數の先頭からの相對的な行番號になる。
<span id="E842"></span><span id="index-E842"></span>
</p></dd>
<dt>&lt;sflnum&gt;</dt>
<dd><p>スクリプトを實行してゐる時に行番號と置き換へられる。
これはどのやうな狀況にあつても、スクリプトの行番號で置き換へられた &lt;sflnum&gt; 內の &lt;slnum&gt; からのものとは異る。
<span id="E961"></span><span id="index-E961"></span>
</p></dd>
</dl>

<span id="filename_002dmodifiers"></span><span id="g_t_003a_005f_0025_003a"></span><span id="g_t_003a_003a8"></span><span id="g_t_003a_003ap"></span><span id="g_t_003a_003a_002e"></span><span id="g_t_003a_003a_007e"></span><span id="g_t_003a_003ah"></span><span id="g_t_003a_003at"></span><span id="g_t_003a_003ar"></span><span id="g_t_003a_003ae"></span><span id="g_t_003a_003as"></span><span id="g_t_003a_003ags"></span><span id="g_t_003a_003aS"></span><span id="g_t_0025_003a8"></span><span id="g_t_0025_003ap"></span><span id="g_t_0025_003a_002e"></span><span id="g_t_0025_003a_007e"></span><span id="g_t_0025_003ah"></span><span id="g_t_0025_003at"></span><span id="g_t_0025_003ar"></span><span id="g_t_0025_003ae"></span><span id="g_t_0025_003as"></span><span id="g_t_0025_003ags"></span><span id="g_t_0025_003aS"></span><span id="index-filename_002dmodifiers"></span>
<span id="index-_003a_005f_0025_003a"></span>
<span id="index-_003a_003a8"></span>
<span id="index-_003a_003ap"></span>
<span id="index-_003a_003a_002e"></span>
<span id="index-_003a_003a_007e"></span>
<span id="index-_003a_003ah"></span>
<span id="index-_003a_003at"></span>
<span id="index-_003a_003ar"></span>
<span id="index-_003a_003ae"></span>
<span id="index-_003a_003as"></span>
<span id="index-_003a_003ags"></span>
<span id="index-_003a_003aS"></span>
<span id="index-_0025_003a8"></span>
<span id="index-_0025_003ap"></span>
<span id="index-_0025_003a_002e"></span>
<span id="index-_0025_003a_007e"></span>
<span id="index-_0025_003ah"></span>
<span id="index-_0025_003at"></span>
<span id="index-_0025_003ar"></span>
<span id="index-_0025_003ae"></span>
<span id="index-_0025_003as"></span>
<span id="index-_0025_003ags"></span>
<span id="index-_0025_003aS"></span>
<p>ファイル名修飾子は &quot;%&quot;, &quot;#&quot;, &quot;#n&quot;, &quot;&lt;cfile&gt;&quot;, &quot;&lt;sfile&gt;&quot;, &quot;&lt;afile&gt;&quot;, &quot;&lt;abuf&gt;&quot; の後で使ふことができる。これらは函數 |<a href="eval_002etxt.html#fnamemodify_0028_0029">fnamemodify()</a>| と使ふこともできる。Vim が |<a href="various_002etxt.html#g_t_002bmodify_005ffname">+modify_fname</a>| 機能付きでコンパイルされてゐなければ、これらの修飾子を使ふことはできない。
</p>
<p>これらの修飾子は次の順で指定できる。
</p><dl compact="compact">
<dt>:p</dt>
<dd><p>ファイル名を完全パスにする。最初の修飾子でなければならない。また &quot;~/&quot; (およびUnixやVMSで使はれる &quot;~user/&quot; の形式のもの) もホームディレクトリのパスに變換する。
</p>
<p>これが付けられたものがディレクトリ名に展開されるならば、パスの區切り文字が末尾に追加される。
</p>
<p>これが付けられたものが、ディスク上に存在せず絕對パスを持たないファイルに展開されるときは、結果は豫期できない。MS-Windows では 8.3 形式のファイル名はロングファイル名に展開される。
</p></dd>
<dt>:8</dt>
<dd><p>パスを短い 8.3 形式に變換する (現在のところ MS-Windows 版でのみ)。パスの內、實際に存在する部分に對して機能する。
</p></dd>
<dt>:~</dt>
<dd><p>ファイル名をホームディレクトリについて相對的な名前に (可能ならば) 切り詰める。ファイルがホームディレクトリの下になければ、ファイル名は修正されない。
</p></dd>
<dt>:.</dt>
<dd><p>ファイル名をカレントディレクトリについて相對的な名前に (可能ならば) 切り詰める。ファイル名がカレントディレクトリの下になければファイル名は修正されないが、もしもカレントドライブであるなら、MS-Windows 上ではドライブが削除される。最も短く切り詰めるには &quot;:~:.&quot; を使ふ。
</p></dd>
<dt>:h</dt>
<dd><p>ファイル名のヘッド (末尾の部分と全ての區切りが除かれたもの)。:e, :r, :t には使へない。繰り返すと、末尾から順に複數の部分を取り除くことができる。
</p>
<p>ファイル名がパス區切りで終はるときは、パス區切りのみが取り除かれる。そのためディレクトリ名に &quot;:p:h&quot; を使ふと、(末尾にパス區切りなしの) ディレクトリ名そのものが得られる。
</p>
<p>ファイル名が絕對パス (Unix では &quot;/&quot;; MS-DOS, WIN32, OS/2 では &quot;x:\&quot;; Amiga では &quot;drive:&quot; で始まるもの) のときは、この部分は取り除かれない。
</p>
<p>ヘッドがないときは (パスがカレントディレクトリに對して相對的なとき)、結果は空となる。
</p></dd>
<dt>:t</dt>
<dd><p>ファイル名のテイル (名前の末尾の部分)。:r または :e よりも前に指定しなければならない。
</p></dd>
<dt>:r</dt>
<dd><p>ファイル名のルート (最後の擴張子が取り除かれたもの)。擴張子だけしかないときは (&rsquo;.&rsquo; で始まるファイル名、例へば &quot;.vimrc&quot; 等)、それは取り除かれない。繰り返し使ふと、複數の擴張子を (最後のものから順に) 取り除くことができる。
</p></dd>
<dt>:e</dt>
<dd><p>ファイル名の擴張子。單獨で使はれたときのみ意味を持つ。擴張子がないときは、結果は空となる。
</p>
<p>擴張子だけしかないときは (&rsquo;.&rsquo; で始まるファイル名)、結果は空となる。繰り返すと、複數の擴張子が得られる。繰り返した回數より擴張子の數の方が少ないときは、可能なだけ取り込まれる (しかし最低でも 1 個はないと取り込まれない)。
</p></dd>
<dt>:s?pat?sub?</dt>
<dd><p>最初に &quot;pat&quot; に一致したものを &quot;sub&quot; に置き換へる。これはコマンド |<a href="change_002etxt.html#g_t_003as">:s</a>| と同樣に機能する。&quot;pat&quot; は正規表現である。&rsquo;?&rsquo; には任意の文字を使へるが、&quot;pat&quot; や &quot;sub&quot; 內に現れてはならない。
</p>
<p>この後、上述の修飾子を再び使ふことができる。例へば、&quot;:p&quot; では置換した後でフルパスに變へる。
</p></dd>
<dt>:gs?pat?sub?</dt>
<dd><p>&quot;pat&quot; に一致したものを全て &quot;sub&quot; に置き換へる。その他の點では &quot;:s&quot; と同樣に機能する。
</p></dd>
<dt>:S</dt>
<dd><p>シェルコマンドで利用できるやうに特別な文字をエスケープする。(|<a href="eval_002etxt.html#shellescape_0028_0029">shellescape()</a>| を參照)。最後でなければならない。例:
</p><pre class="verbatim">:!dir &lt;cfile&gt;:S
:call system('chmod +w -- ' . expand('%:S'))
</pre></dd>
</dl>

<p>ファイル名が &quot;src/version.c&quot;、カレントディレクトリが &quot;/home/mool/vim&quot; のときの例:
</p><pre class="verbatim">:p                    /home/mool/vim/src/version.c
:p:.                                 src/version.c
:p:~                           ~/vim/src/version.c
:h                                   src
:p:h                  /home/mool/vim/src
:p:h:h                /home/mool/vim
:t                                       version.c
:p:t                                     version.c
:r                                   src/version
:p:r                  /home/mool/vim/src/version
:t:r                                     version
:e                                               c
:s?version?main?                     src/main.c
:s?version?main?:p    /home/mool/vim/src/main.c
:p:gs?/?\\?           \home\mool\vim\src\version.c
</pre>
<p>ファイル名が &quot;src/version.c.gz&quot; のときの例:
</p><pre class="verbatim">:p            /home/mool/vim/src/version.c.gz
:e                                         gz
:e:e                                     c.gz
:e:e:e                                   c.gz
:e:e:r                                   c
:r                           src/version.c
:r:e                                     c
:r:r                         src/version
:r:r:r                       src/version
</pre><span id="extension_002dremoval"></span><span id="g_t_003a_005f_0025_003c"></span><span id="index-extension_002dremoval"></span>
<span id="index-_003a_005f_0025_003c"></span>
<p>&quot;%&quot;, &quot;#&quot;, &quot;#n&quot; または &quot;CTRL-V p&quot; に &quot;&lt;&quot; を付け加へたとき、ファイル名の擴張子 (ファイル名の最後の &rsquo;.&rsquo; とそれ以降の全て) は取り除かれる。これは Vim version 3.0 との下位互換性のために殘されてをり、&quot;:r&quot; 形式を使ふ方がよい。例:
</p>
<table>
<tr><td width="30%">%</td><td width="70%">カレントファイル名</td></tr>
<tr><td width="30%">%&lt;</td><td width="70%">擴張子なしのカレントファイル名</td></tr>
<tr><td width="30%">#</td><td width="70%">カレントウィンドウでの代替ファイル名</td></tr>
<tr><td width="30%">#&lt;</td><td width="70%">同上、ただし擴張子なし</td></tr>
<tr><td width="30%">#31</td><td width="70%">代替ファイル番號 31</td></tr>
<tr><td width="30%">#31&lt;</td><td width="70%">同上、ただし擴張子なし</td></tr>
<tr><td width="30%">&lt;cword&gt;</td><td width="70%">カーソル下の word</td></tr>
<tr><td width="30%">&lt;cWORD&gt;</td><td width="70%">カーソル下の WORD (|<a href="motion_002etxt.html#WORD">WORD</a>| を參照)</td></tr>
<tr><td width="30%">&lt;cfile&gt;</td><td width="70%">カーソル下のパス名</td></tr>
<tr><td width="30%">&lt;cfile&gt;&lt;</td><td width="70%">同上、ただし擴張子なし</td></tr>
</table>

<blockquote>
<p><strong>Note:</strong> <br>
ファイル名が來る筈の所では、ワイルドカードの展開が行はれる。Unix では展開にはシェルが使はれる。ただし Vim 內部でできない展開だけである (スピードのため)。|<a href="starting_002etxt.html#restricted_002dmode">restricted-mode</a>| でなければ、バッククォート &rsquo;&lsquo;&rsquo; も次のやうに使へる。
</p><pre class="verbatim">:n `echo *.c`
</pre><p>しかし展開は、&rsquo;%&rsquo; や &rsquo;#&rsquo; 等が展開される前にワイルドカードが存在したときにのみ行はれる。これはファイル名に含まれるワイルドカードを展開しないためである。&lt;cfile&gt; の結果を展開したいときは、ワイルドカードの文字を追加すればよい。例: (代替ファイル名は &quot;?readme?&quot; とする)
</p><table>
<thead><tr><th width="30%">コマンド</th><th width="70%">展開結果</th></tr></thead>
<tr><td width="30%">:e #</td><td width="70%">:e ?readme?</td></tr>
<tr><td width="30%">:e &lsquo;ls #&lsquo;</td><td width="70%">:e {&quot;?readme?&quot; にマッチしたファイル全て}</td></tr>
<tr><td width="30%">:e #.*</td><td width="70%">:e {&quot;?readme?.*&quot; にマッチしたファイル全て}</td></tr>
<tr><td width="30%">:cd &lt;cfile&gt;</td><td width="70%">:cd {カーソル下のファイル名}</td></tr>
<tr><td width="30%">:cd &lt;cfile&gt;*</td><td width="70%">:cd {カーソル下のファイル名に &quot;*&quot; を加へ展開したもの}</td></tr>
</table>
<p>|<a href="editing_002etxt.html#g_t_0060_003d">`=</a>| も參照のこと。
</p></blockquote>

<p>展開された後のコマンド引數に &quot;!&quot; に含まれてゐて、それがシェルコマンドに使はれる (&quot;:!cmd&quot;, &quot;:r !cmd&quot; や &quot;:w !cmd&quot;) とき、&quot;!&quot; は &rsquo;\&rsquo; でエスケープされ、前囘のコマンドに展開されるのを防ぐ。オプション &rsquo;shell&rsquo; の値が &quot;sh&quot; を含むときは、エスケープは 2 回行はれ、シェルが &quot;!&quot; を展開するのを防ぐ。
</p>
<span id="filename_002dbackslash"></span><span id="index-filename_002dbackslash"></span>
<p>&rsquo;\&rsquo; をディレクトリの區切りに使ふファイルシステム (MS-DOS, Windows, OS/2) では、次のキャラクタの特別な意味をエスケープする目的の &rsquo;\&rsquo; を認識するのが少し困難である。一般的な規則は次の通り。&rsquo;\&rsquo; が普通のファイル名の文字の後にある場合は、特別な意味を持たない。したがつて、&quot;\file\foo&quot; は有效なファイル名であり、&rsquo;\&rsquo; を 2 度打つ必要はない。
</p>
<p>例外は &rsquo;$&rsquo; 記號である。これはファイル名で有效な文字である。しかし &quot;$home&quot; のやうなファイル名が環境變數として解釋されるのを避けるため、&rsquo;\&rsquo; をこの前に付ける必要がある。從つてルートディレクトリのファイル &quot;$home&quot; の指定には、&quot;/\$home&quot; を使ふ必要がある。いくつかの例:
</p>
<table>
<thead><tr><th width="20%">ファイル名</th><th width="80%">その解釋</th></tr></thead>
<tr><td width="20%">$home</td><td width="80%">環境變數 $home の値に展開される</td></tr>
<tr><td width="20%">\$home</td><td width="80%">カレントディレクトリのファイル &quot;$home&quot;</td></tr>
<tr><td width="20%">/\$home</td><td width="80%">ルートディレクトリのファイル &quot;$home&quot;</td></tr>
<tr><td width="20%">\\$home</td><td width="80%">&quot;\\&quot; の後に $home の値を付け加へた名前のファイル</td></tr>
</table>

<p>|<a href="editing_002etxt.html#g_t_0060_003d">`=</a>| も參照のこと。
</p>
<span id="cmdline_002dwindow"></span><span id="cmdwin"></span><span id="index-cmdline_002dwindow"></span>
<span id="index-cmdwin"></span>
<span id="index-komandorainuindou-1"></span>
<span id="g_t7_002e-komandorainuindou"></span><h3 class="section">7. コマンドラインウィンドウ</h3>
<span id="command_002dline_002dwindow"></span><span id="index-command_002dline_002dwindow"></span>
<p>コマンドラインウィンドウでは、普通のウィンドウでテキストを編輯するのと同じやうにコマンドラインを編輯できる。コマンドラインウィンドウは特殊なウィンドウで、普通の方法でそこから出ることはできない。
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bcmdline_005fhist">+cmdline_hist</a>| 機能付きでコンパイルされたときのみ有效}
</p>

<span id="c_005fCTRL_002dF"></span><span id="q_003a"></span><span id="q_002f"></span><span id="q_003f"></span><span id="index-c_005fCTRL_002dF"></span>
<span id="index-q_003a"></span>
<span id="index-q_002f"></span>
<span id="index-q_003f"></span>
<span id="Kai-Shi-"></span><h4 class="unnumberedsubsec">開始</h4>

<p>コマンドラインウィンドウを開くには 2 通りの方法がある。
</p><ol>
<li> コマンドラインモードで、オプション &rsquo;<samp>cedit</samp>&rsquo; で指定されたキーを使ふ。&rsquo;<samp>compatible</samp>&rsquo; がオフのときの既定値は <kbd>CTRL-F</kbd> である。
</li><li> ノーマルモードで、コマンド &quot;q:&quot;, &quot;q/&quot; または &quot;q?&quot; を使ふ。&quot;q:&quot; でExコマンドラインの編輯を始め、&quot;q/&quot; または &quot;q?&quot; で文字列を檢索する。
<blockquote>
<p><strong>Note:</strong> <br>
打ち込んだキーの記錄中にはこの方法は使へないことに注意 (そのときは &quot;q&quot; では記錄が終了する)。
</p></blockquote>
</li></ol>

<p>コマンドラインウィンドウが開かれたとき、中にはコマンドラインの履歷が竝んでゐる。末尾の行には、その時點までに打ち込まれたコマンドが含まれる。左の列には、編輯されてゐるコマンドラインの種類を表す1文字が表示される。|<a href="#cmdwin_002dchar">cmdwin-char</a>| を參照。
</p>
<p>コマンドラインウィンドウが開かれたとき、Vim はノーマルモードに移るが、オプション &rsquo;<samp>insertmode</samp>&rsquo; がオンのときは插入モードに移る。
</p>
<p>コマンドラインウィンドウの高さはオプション &rsquo;<samp>cmdwinheight</samp>&rsquo; で指定できる (ただし餘裕がないとこれより低くなる)。常に幅は最大になり、場所はコマンドラインの直上である。
</p>

<span id="Bian-Ji-"></span><h4 class="unnumberedsubsec">編輯</h4>

<p>コマンドラインウィンドウ內では、コマンドを使つてあちこちへ移動したり、ウィンドウ內のテキストを編輯できる。ノーマルモードと插入モードが使へる。
</p>
<p>&quot;:&quot; や &quot;/&quot; を始めとする、コマンドラインを使ふコマンドも使へるが、そこから別のコマンドラインウィンドウを開くことはできない。コマンドラインウィンドウはネスト(入れ子狀になること) できない。
<span id="E11"></span><span id="index-E11"></span>
コマンドラインウィンドウは普通のウィンドウではないので、別のウィンドウに移動したり、別のバッファを編輯したりはできない。コマンドラインウィンドウでは、それらを行ふコマンドは無效化されてゐる。もちろんコマンドラインウィンドウで入力したコマンドならどんなものでも <strong>實 行 可 能</strong> である。他のテキスト編輯はコマンドラインウィンドウを閉ぢるときに破毀される。
</p>

<span id="E199"></span><span id="index-E199"></span>
<span id="Zhong-Liao-"></span><h4 class="unnumberedsubsec">終了</h4>

<p>コマンドラインウィンドウを終了するには、以下の通りの方法がある。
</p>
<table>
<tr><td width="15%">&lt;CR&gt;</td><td width="85%">カーソル下のコマンドラインを實行する。插入モードと Normal モードの兩方で有效である。</td></tr>
<tr><td width="15%"><kbd>CTRL-C</kbd></td><td width="85%">コマンドラインモードとして繼續する。カーソル下のコマンドラインが引き繼がれる。插入モードとノーマルモードの兩方で有效である。再描畫は行はれないので、ウィンドウは可視狀態のままになる。</td></tr>
<tr><td width="15%">:quit</td><td width="85%">コマンドラインを破毀してノーマルモードに戾る。&quot;:close&quot;, &quot;:exit&quot;, &quot;:xit&quot; や CTRL-\ CTRL-N も有效である。</td></tr>
<tr><td width="15%">:qall</td><td width="85%">Vim を終了する (他のバッファに變更がない限り)。</td></tr>
<tr><td width="15%">:qall!</td><td width="85%">Vim を終了し、どのバッファの變更も破毀する。</td></tr>
</table>

<p>コマンドラインウィンドウが閉ぢられると、他のウィンドウのサイズは復元される。實行されたコマンドはコマンドラインウィンドウの開始元のウィンドウやバッファに適用される。これはコマンドラインウィンドウがなかつたかのやうに動作するが、畫面の再描畫だけは餘計に行はれる。
</p>
<p>コマンドラインウィンドウに使はれたバッファは削除される。&lt;CR&gt; で實行された行以外に對する變更は、全て失はれる。
</p>
<p>カーソル下のコマンドを實行した後、もう一度コマンドラインウィンドウを開きたければ、このマップを使ふとよいかもしれない:
</p>
<pre class="verbatim">:autocmd CmdwinEnter * map &lt;buffer&gt; &lt;F5&gt; &lt;CR&gt;q:
</pre>

<span id="sonoTa--3"></span><h4 class="unnumberedsubsec">その他</h4>

<span id="komandorainuindouha_002c-Yi-Xia-notokinihaShi-enai_003a"></span><h4 class="unnumberedsubsubsec">コマンドラインウィンドウは、以下のときには使へない:</h4>
<ul>
<li> 既にコマンドラインウィンドウを開いてゐるとき (ネストすなはち入れ子は不可)
</li><li> 暗號化キーの入力時や函數 |<a href="eval_002etxt.html#inputsecret_0028_0029">inputsecret()</a>| の使用時
</li></ul>

<span id="komandorainuindougaKai-kareruto_002c-Yi-Xia-noopusiyonnoShe-Ding-gaBian-waru_003a"></span><h4 class="unnumberedsubsubsec">コマンドラインウィンドウが開かれると、以下のオプションの設定が變はる:</h4>
<table>
<tr><td width="20%">&rsquo;filetype&rsquo;</td><td width="80%">&quot;vim&quot; (Ex コマンドラインの編輯時に) これは、可能なら Vim script に對する構文强調表示を開始する</td></tr>
<tr><td width="20%">&rsquo;rightleft&rsquo;</td><td width="80%">オフ</td></tr>
<tr><td width="20%">&rsquo;modifiable&rsquo;</td><td width="80%">オン</td></tr>
<tr><td width="20%">&rsquo;buftype&rsquo;</td><td width="80%">&quot;nofile&quot;</td></tr>
<tr><td width="20%">&rsquo;swapfile&rsquo;</td><td width="80%">オフ</td></tr>
</table>

<p>コマンドラインウィンドウの內容をファイルに書き出すことができる。かうすれば、簡單にコマンドライン履歷を保存し、後で讀み込むことができる。
</p>
<p>オプション &rsquo;<samp>wildchar</samp>&rsquo; が <var>&lt;Tab&gt;</var> であり、コマンドラインウィンドウが Ex コマンドに對して使はれてゐるときは、以下の 2 個のマッピングが追加され、コマンドラインウィンドウ內でも <code class="tt-key">&lt;Tab&gt;</code> で補完ができるやうになる。
</p><pre class="verbatim">:imap &lt;buffer&gt; &lt;Tab&gt; &lt;C-X&gt;&lt;C-V&gt;
:nmap &lt;buffer&gt; &lt;Tab&gt; a&lt;C-X&gt;&lt;C-V&gt;
</pre><blockquote>
<p><strong>Note:</strong> <br>
ノーマルモードで <code class="tt-key">&lt;Tab&gt;</code> を打ち込むと、カーソルの次の文字の位置で補完を行ふことに注意。この方法なら行末でも補完が行はれる。それらのマッピングを望まないなら、次のやうにして無效化すること。
</p><pre class="verbatim">au CmdwinEnter [:&gt;] iunmap &lt;Tab&gt;
au CmdwinEnter [:&gt;] nunmap &lt;Tab&gt;
</pre><p>ユーザーの <samp>.vimrc</samp> ファイルに上の行を書き込んでおけばよい。
</p></blockquote>

<p>コマンドラインウィンドウ內では、マウスでカーソルを別のウィンドウに移したり、別のウィンドウのステータスラインをドラッグしたりはできない。コマンドラインウィンドウ自身のステータスラインはドラッグできる。上向きにずつとドラッグすると、直上のウィンドウのステータスラインも動き、コマンドラインウィンドウがさらに廣くなる。
</p>
<p>|<a href="eval_002etxt.html#getcmdwintype_0028_0029">getcmdwintype()</a>| 函數は開いてゐるコマンドラインの種類を返す。値の說明は |<a href="#cmdwin_002dchar">cmdwin-char</a>| 參照。
</p>

<span id="index-Zi-Dong-komandonoShi-Yong-"></span>
<span id="Zi-Dong-komandonoShi-Yong-"></span><h4 class="unnumberedsubsubsec">自動コマンドの適用</h4>

<p>2 種類の 自動コマンドのイベントが使はれる: |<a href="autocmd_002etxt.html#CmdwinEnter">CmdwinEnter</a>| と |<a href="autocmd_002etxt.html#CmdwinLeave">CmdwinLeave</a>|。コマンドラインウィンドウに對して特別に設定をするには、イベント Cmdwin を使ふ。副作用を引き起こさないよう注意！
</p>
<p>例:
</p><pre class="verbatim">:au CmdwinEnter :  let b:cpt_save = &amp;cpt | set cpt=.
:au CmdwinLeave :  let &amp;cpt = b:cpt_save
</pre><p>これはカレントウィンドウで |<a href="insert_002etxt.html#i_005fCTRL_002dN">i_CTRL-N</a>| によつて補完を行ふよう &rsquo;<samp>complete</samp>&rsquo; を設定する。
</p>
<p>別の例:
</p><pre class="verbatim">:au CmdwinEnter [/?]  startinsert
</pre><p>かうすれば、コマンドラインウィンドウでは Vim は插入モードに移る。
</p>
<span id="cmdwin_002dchar"></span><span id="index-cmdwin_002dchar"></span>
<p>パターンに使はれる文字は、コマンドラインの種類を表す。
</p><table>
<tr><td width="10%">:</td><td width="90%">普通の Ex コマンド</td></tr>
<tr><td width="10%">&gt;</td><td width="90%">デバッグモードのコマンド |<a href="repeat_002etxt.html#debug_002dmode">debug-mode</a>|</td></tr>
<tr><td width="10%">/</td><td width="90%">前方檢索に使はれる文字列</td></tr>
<tr><td width="10%">?</td><td width="90%">後方檢索に使はれる文字列</td></tr>
<tr><td width="10%">=</td><td width="90%">Expression レジスタ &quot;= 用の expression |<a href="eval_002etxt.html#expr_002dregister">expr-register</a>|</td></tr>
<tr><td width="10%">&nbsp;</td><td width="90%">函數 |<a href="eval_002etxt.html#input_0028_0029">input()</a>| に對して入力する文字列</td></tr>
<tr><td width="10%">-</td><td width="90%">コマンド |<a href="insert_002etxt.html#g_t_003ainsert">:insert</a>| や |<a href="insert_002etxt.html#g_t_003aappend">:append</a>| に對して入力する文字列</td></tr>
</table>

<hr>
<div class="header">
<p>
Up: <a href="Mu-Ci-.html" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
