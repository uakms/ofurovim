<!DOCTYPE html>
<html lang="ja">
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>

<title>usr_28.txt (Vim Reference Manual)</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="description" content="usr_28.txt (Vim Reference Manual)">
<meta name="keywords" content="usr_28.txt (Vim Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="Mu-Ci-.html" rel="start" title="目次">
<link href="Indexes-CP.html" rel="index" title="Indexes CP">
<link href="Mu-Ci-.html" rel="up" title="目次">
<link href="usr_005f29_002etxt.html" rel="next" title="usr_29.txt">
<link href="usr_005f27_002etxt.html" rel="prev" title="usr_27.txt">
<style>
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="ja">
<span id="usr_005f28_002etxt"></span><div class="header">
<p>
Next: <a href="usr_005f29_002etxt.html" accesskey="n" rel="next">usr_29.txt</a>, Previous: <a href="usr_005f27_002etxt.html" accesskey="p" rel="prev">usr_27.txt</a>, Up: <a href="Mu-Ci-.html" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Zhe-riDie-mi"></span><h2 class="unnumbered">折り疊み</h2>
<pre class="verbatim">*usr_28.txt*	For Vim バージョン 8.1.  Last change: 2008 Jun 14

		     VIM USER MANUAL - by Bram Moolenaar

				   折り疊み
</pre>

<p>構造化されたテキストはいくつかのセクションから構成され、セクションはさらにサブセクションに分かれてゐます。折り疊みを使ふとセクションを 1 行で表示できます。折り疊まれた行にはセクションの槪要が表示されます。この章では折り疊みの使ひ方を說明します。
</p>
<table>
<tr><td width="30%">|<a href="#g_t28_002e1">28.1</a>|</td><td width="70%">折り疊みとは</td></tr>
<tr><td width="30%">|<a href="#g_t28_002e2">28.2</a>|</td><td width="70%">手動で折り疊む</td></tr>
<tr><td width="30%">|<a href="#g_t28_002e3">28.3</a>|</td><td width="70%">折り疊みを使つて作業する</td></tr>
<tr><td width="30%">|<a href="#g_t28_002e4">28.4</a>|</td><td width="70%">折り疊みの保存と復元</td></tr>
<tr><td width="30%">|<a href="#g_t28_002e5">28.5</a>|</td><td width="70%">インデントで折り疊む</td></tr>
<tr><td width="30%">|<a href="#g_t28_002e6">28.6</a>|</td><td width="70%">マーカーで折り疊む</td></tr>
<tr><td width="30%">|<a href="#g_t28_002e7">28.7</a>|</td><td width="70%">構文で折り疊む</td></tr>
<tr><td width="30%">|<a href="#g_t28_002e8">28.8</a>|</td><td width="70%">スクリプトで折り疊む</td></tr>
<tr><td width="30%">|<a href="#g_t28_002e9">28.9</a>|</td><td width="70%">變更のない行を折り疊む</td></tr>
<tr><td width="30%">|<a href="#g_t28_002e10">28.10</a>|</td><td width="70%">どれを使へばいいの？</td></tr>
</table>

<span id="g_t28_002e1"></span><span id="index-Zhe-riDie-mitoha"></span>
<span id="Zhe-riDie-mitoha"></span><h3 class="section">折り疊みとは</h3>

<p>折り疊みとは、バッファ中の複數の行を畫面上で 1 行に表示するための機能です。紙を折り疊んで短くするやうな感じです。
</p>
<pre class="verbatim">+------------------------+
| line 1                 |
| line 2                 |
| line 3                 |
|_______________________ |
\                        \
 \________________________\
 / folded lines           /
/________________________/
| line 12                |
| line 13                |
| line 14                |
+------------------------+
</pre>
<p>バッファ內のテキストが消えるわけではありません。折り疊みが影響するのは畫面の表示だけです。
</p>
<p>折り疊みを使ふと文章構成を把握するのが簡單になります。折り疊まれたセクションは 1 行で表示され、その行にはセクションの槪要が表示されます。
</p>
<span id="g_t28_002e2"></span><span id="index-Shou-Dong-deZhe-riDie-mu"></span>
<span id="Shou-Dong-deZhe-riDie-mu"></span><h3 class="section">手動で折り疊む</h3>

<p>實際に試してみませう。どこかの段落にカーソルを動かして次のやうに入力します:
</p>
<pre class="verbatim">zfap
</pre>
<p>段落が、ハイライトされた一行に置き換はります。それが折り疊みです。|<a href="fold_002etxt.html#zf">zf</a>| はオペレータです。|<a href="motion_002etxt.html#ap">ap</a>| はテキストオブジェクトによる範圍指定です。|<a href="fold_002etxt.html#zf">zf</a>| はどのカーソル移動コマンドとも組み合はせることができます。カーソルが移動した範圍が折り疊みの對象になります。|<a href="fold_002etxt.html#zf">zf</a>| はビジュアルモードでも使へます。
</p>
<p>再びテキストを表示するには、次のコマンドで折り疊みを開きます:
</p>
<pre class="verbatim">zo
</pre>
<p>次のコマンドで折り疊みを閉ぢることができます:
</p>
<pre class="verbatim">zc
</pre>
<p>折り疊み關聯のコマンドはすべて &quot;z&quot; で始まります。この文字は、紙を折り疊んで橫から見た圖に見えますよね。&quot;z&quot; の後ろにはコマンドが聯想しやすいやうな文字が割り當てられてゐます。
</p>
<table>
<tr><td width="20%">zf</td><td width="80%">折り疊む (Fold)</td></tr>
<tr><td width="20%">zo</td><td width="80%">折り疊みを開く (Open)</td></tr>
<tr><td width="20%">zc</td><td width="80%">折り疊みを閉ぢる (Close)</td></tr>
</table>

<p>折り疊みは入れ子にできます。折り疊まれた行を含んだ範圍をさらに折り疊むことができます。例へば、このセクションの段落をそれぞれ折り疊み、そして、この章のセクション全體を折り疊むといふことができます。實際に試してください。折り疊みを開いたとき、その中にある折り疊みは、閉ぢたときと同じ開閉狀態のままになつてゐます。
</p>
<p>いくつかの折り疊みを作つたときに、すべての折り疊みを開きたくなつた場合、それぞれの折り疊みを &quot;zo&quot; で開いていくこともできますが、次のコマンドでもつと簡單にできます:
</p>
<pre class="verbatim">zr
</pre>
<p>折り疊みが減少 (Reduce) します。その逆は &quot;zm&quot; です:
</p>
<pre class="verbatim">zm
</pre>
<p>折り疊みが增加 (More) します。&quot;zr&quot; と &quot;zm&quot; は入れ子になつた折り疊みを一階層ずつ開閉できます。
</p>
<p>入れ子になつた折り疊みをいっぺんに開きたい場合は次のコマンドを使ひます:
</p>
<pre class="verbatim">zR
</pre>
<p>すべての折り疊みが開くまで、折り疊みが減少 (Reduce) します。すべての折り疊みを閉ぢるには:
</p>
<pre class="verbatim">zM
</pre>
<p>折り疊みが次々と (More and More) 閉ぢます。
</p>
<p>|<a href="fold_002etxt.html#zn">zn</a>| コマンドで折り疊みを無效にできます。無效になつた折り疊みは |<a href="fold_002etxt.html#zN">zN</a>| で元に戾ります。|<a href="fold_002etxt.html#zi">zi</a>| で無效と有效を交互に切り替へられます。次のやうに使ふと便利です:
</p><ul>
<li> ファイルの構造を確認するために折り疊みを作成する
</li><li> 作業したい場所に移動する
</li><li> |<a href="fold_002etxt.html#zi">zi</a>| で折り疊みを無效にして編輯作業をする
</li><li> |<a href="fold_002etxt.html#zi">zi</a>| で折り疊みを有效にして別の場所に移動する
</li></ul>

<p>手作業で折り疊みを作成するための詳しい說明はリファレンスマニュアルを參照してください: |<a href="fold_002etxt.html#fold_002dmanual">fold-manual</a>|
</p>
<span id="g_t28_002e3"></span><span id="index-Zhe-riDie-miwoShi-tuteZuo-Ye-suru"></span>
<span id="Zhe-riDie-miwoShi-tuteZuo-Ye-suru"></span><h3 class="section">折り疊みを使つて作業する</h3>

<p>折り疊みが閉ぢてゐるとき、&quot;j&quot; や &quot;k&quot; などのコマンドでその上を移動できます。閉ぢた折り疊みは 1 行の空行のやうに扱はれます。つまり折り疊まれたテキストの上を素早く移動できます。
</p>
<p>折り疊まれたテキストは、それが 1 つの行であるかのやうに、ヤンクしたり削除したりできます。これは例へばプログラムの函數を竝べ替へたりするときに便利です。まづ &rsquo;<samp>foldmethod</samp>&rsquo; を正しく設定し、それぞれの函數が適切に折り疊まれるやうにします。そして、&quot;dd&quot; で函數を削除し、カーソルを移動して、&quot;p&quot; でプットします。函數の一部が折り疊みからはみ出してゐる場合はビジュアルモードを使ひます:
</p><ul>
<li> 移動させたい範圍の最初の行に移動
</li><li> &quot;V&quot; でビジュアルモードを開始
</li><li> 移動させたい範圍の最後の行に移動
</li><li> &quot;d&quot; で選擇範圍を削除
</li><li> カーソルを移動して、&quot;p&quot; でテキストをプットする
</li></ul>

<p>折り疊みを設定した場所 (つまり |<a href="fold_002etxt.html#zo">zo</a>| コマンドが機能する場所) を覺えておくのは大變です。次のコマンドで折り疊みの場所を確認できます:
</p>
<pre class="verbatim">:set foldcolumn=4
</pre>
<p>ウィンドウの左側に折り疊みの場所が表示されます。閉ぢた折り疊みは &quot;+&quot; で表示されます。開いた折り疊みは、1 行目が &quot;-&quot; で表示され、それ以降は &quot;|&quot; で表示されます。
</p>
<p>マウスで &quot;+&quot; の部分をクリックすると折り疊みが開きます。&quot;-&quot; や &quot;|&quot; の部分をクリックすると折り疊みが閉ぢます。
</p>
<ul>
<li> 現在行の折り疊みをすべて開くには |<a href="fold_002etxt.html#zO">zO</a>| を使ひます。
</li><li> 現在行の折り疊みをすべて閉ぢるには |<a href="fold_002etxt.html#zC">zC</a>| を使ひます。
</li><li> 現在行の折り疊みを削除するには |<a href="fold_002etxt.html#zd">zd</a>| を使ひます。
</li><li> 現在行の折り疊みをすべて削除するには |<a href="fold_002etxt.html#zD">zD</a>| を使ひます。
</li></ul>

<p>插入モードでは現在行の折り疊みは絕對に閉ぢません。入力した文字は必ず表示されます。
</p>
<p>カーソルをジャンプさせたり左右に動かしたりしたとき、折り疊みは自動的に開きます。例へば &quot;0&quot; コマンドを使ふと現在行の折り疊みが開きます (&rsquo;<samp>foldopen</samp>&rsquo; に &quot;hor&quot; が含まれてゐる場合のみ。初期設定では含まれてゐます)。どのコマンドを使ふと折り疊みが開くかは &rsquo;<samp>foldopen</samp>&rsquo; オプションで設定できます。カーソルが乘つてゐる行の折り疊みを常に開いておきたい場合は次のやうに設定します:
</p>
<pre class="verbatim">:set foldopen=all
</pre>
<blockquote>
<p><strong>警告:</strong> <br>
閉ぢた折り疊みの上に移動することはできなくなります。この設定を一時的に使ひ、元に戾したくなつたら次のやうにします:
</p></blockquote>

<pre class="verbatim">:set foldopen&amp;
</pre>
<p>折り疊みを自動的に閉ぢたい場合は次のやうにします:
</p>
<pre class="verbatim">:set foldclose=all
</pre>
<p>カーソルが乘つてゐないすべての折り疊みに &rsquo;<samp>foldlevel</samp>&rsquo; が適用されます。このやうな動作は好き嫌ひがあるので實際に試してみてください。折り疊みを增加させたい場合は |<a href="fold_002etxt.html#zm">zm</a>| を、減少させたい場合は |<a href="fold_002etxt.html#zr">zr</a>| を使つてください。
</p>
<p>折り疊みはウィンドウローカルな設定です。同じファイルを 2 つのウィンドウで表示して、片方では折り疊みを使ひ、もう片方では普通に表示するといふことができます。あるいは、片方ですべての折り疊みを閉ぢ、もう片方ですべての折り疊みを開くこともできます。
</p>
<span id="g_t28_002e4"></span><span id="index-Zhe-riDie-minoBao-Cun-toFu-Yuan-"></span>
<span id="Zhe-riDie-minoBao-Cun-toFu-Yuan-"></span><h3 class="section">折り疊みの保存と復元</h3>

<p>ファイルを破毀すると折り疊みの情報は失はれてしまひます。後で同じファイルを開いたとき、折り疊みの開閉狀態は初期狀態に戾つてゐます。手動で作成した折り疊みは失はれます。折り疊みを保存するには |<a href="starting_002etxt.html#g_t_003amkview">:mkview</a>| コマンドを使ひます:
</p>
<pre class="verbatim">:mkview
</pre>
<p>ファイルの表示に關する設定が保存されます。保存される情報の種類は &rsquo;<samp>viewoptions</samp>&rsquo; オプションで設定できます。後で同じファイルを開いたときに保存したビューを復元できます:
</p>
<pre class="verbatim">:loadview
</pre>
<p>1 つのファイルにつき 10 個までのビューを保存できます。例へば、現在の設定を 3 番に保存して 2 番の設定をロードするには次のやうにします:
</p>
<pre class="verbatim">:mkview 3
:loadview 2
</pre>
<blockquote>
<p><strong>Note:</strong> <br>
行を插入したり削除したりすると保存していたビューが使へなくなるかもしれません。ビューの保存場所は &rsquo;<samp>viewdir</samp>&rsquo; オプションで決まります。必要な場合は自分でビューを削除してください。
</p></blockquote>

<span id="g_t28_002e5"></span><span id="index-indentodeZhe-riDie-mu"></span>
<span id="indentodeZhe-riDie-mu"></span><h3 class="section">インデントで折り疊む</h3>

<p>|<a href="fold_002etxt.html#zf">zf</a>| を使つて折り疊みを定義するのは大變です。テキストが階層的にインデントされてゐる場合は、それを使つて折り疊むことができます。インデントの深さにしたがつて折り疊みが作成され、大きくインデントされた部分は折り疊みが入れ子になります。この方法は多くのプログラミング言語で使ふことができます。
</p>
<p>&rsquo;<samp>foldmethod</samp>&rsquo; オプションを次のやうに設定してください:
</p>
<pre class="verbatim">:set foldmethod=indent
</pre>
<p>|<a href="fold_002etxt.html#zm">zm</a>| や |<a href="fold_002etxt.html#zr">zr</a>| を使つて折り疊みを增減できるやうになりました。以下の例文を使ふと簡單に確認できます:
</p>
<pre class="verbatim">この行はインデントされてゐない
        この行は一段インデントされてゐる
                この行は二段インデントされてゐる
                この行は二段インデントされてゐる
        この行は一段インデントされてゐる
この行はインデントされてゐない
        この行は一段インデントされてゐる
        この行は一段インデントされてゐる
</pre>
<blockquote>
<p><strong>Note:</strong> <br>
インデントの量と折り疊みの深さの對應は &rsquo;<samp>shiftwidth</samp>&rsquo; オプションで決まります。&rsquo;<samp>shiftwidth</samp>&rsquo; の幅を單位としてインデントが深くなると折り疊みが深くなります。これを折り疊みレベルと呼びます。
</p></blockquote>

<p>|<a href="fold_002etxt.html#zr">zr</a>| や |<a href="fold_002etxt.html#zm">zm</a>| コマンドを使つたとき、實際には &rsquo;<samp>foldlevel</samp>&rsquo; の値を增減させてゐるのです。自分で設定することもできます:
</p>
<pre class="verbatim">:set foldlevel=3
</pre>
<p>&rsquo;<samp>shiftwidth</samp>&rsquo; の幅を單位として、インデントが三段より深い階層の折り疊みが閉ぢます。設定した値より深い階層の折り疊みが閉ぢる仕組みです。&rsquo;<samp>foldlevel</samp>&rsquo; を 0 に設定するとすべての折り疊みが閉ぢます。|<a href="fold_002etxt.html#zM">zM</a>| を使ふと &rsquo;<samp>foldlevel</samp>&rsquo; が 0 に設定されます。|<a href="fold_002etxt.html#zR">zR</a>| を使ふと &rsquo;<samp>foldlevel</samp>&rsquo; がファイル內の最も深い折り疊みレベルに設定されます。
</p>
<p>つまり、折り疊みを開閉する方法は 2 つあります
</p><dl compact="compact">
<dt>(A) 折り疊みレベルを設定する方法。</dt>
<dd><p>この方法は、テキストを &quot;ズームアウト&quot; して文章の構成を眺め、カーソルを動かし、テキストに &quot;ズームイン&quot; するやうな使ひ方ができます。
</p>
</dd>
<dt>(B) |<a href="fold_002etxt.html#zo">zo</a>| や |<a href="fold_002etxt.html#zc">zc</a>| を使つて個々の折り疊みを開閉する方法。</dt>
<dd><p>他の折り疊みは閉ぢたままで、必要な折り疊みだけを開くことができます。
</p></dd>
</dl>

<p>2 つの方法を組み合はせることもできます。|<a href="fold_002etxt.html#zm">zm</a>| で全體的に折り疊みを閉ぢてから |<a href="fold_002etxt.html#zo">zo</a>| で特定の折り疊みだけを開く。あるいは、|<a href="fold_002etxt.html#zR">zR</a>| ですべての折り疊みを開いてから |<a href="fold_002etxt.html#zc">zc</a>| で特定の折り疊みを閉ぢるなど。
</p>
<p>&rsquo;<samp>foldmethod</samp>&rsquo; が &quot;<var>indent</var>&quot; に設定されてゐる場合は手動で折り疊みを定義できません。インデントと折り疊みレベルの關係を保つためです。
</p>
<p>インデントによる折り疊みの詳しい說明はリファレンスマニュアルを參照してください: |<a href="fold_002etxt.html#fold_002dindent">fold-indent</a>|
</p>
<span id="g_t28_002e6"></span><span id="index-makadeZhe-riDie-mu"></span>
<span id="makadeZhe-riDie-mu"></span><h3 class="section">マーカーで折り疊む</h3>

<p>テキストにマーカーを書いて、折り疊みの始點と終點を指定できます。この方法を使ふと折り疊みの範圍を明示的に指定できます。ただし、テキストに變更を加へる必要があります。
</p>
<p>次のやうに設定してください:
</p>
<pre class="verbatim">:set foldmethod=marker
</pre>
<p>C 言語を使つた例文:
</p>
<pre class="verbatim">/* foobar () {{{ */
int foobar()
{
        /* return a value {{{ */
        return 42;
        /* }}} */
}
/* }}} */
</pre>
<p>マーカーの直前に書かれたテキストが折り疊まれた行に表示されるので、折り疊まれたテキストがどのやうな內容なのかを知ることができます。
</p>
<p>テキストを移動したときなどにマーカーの對應がずれてしまふと面倒です。番號付きマーカーを使ふと手閒が省けます。例:
</p>
<pre class="verbatim">/* global variables {{{1 */
int varA, varB;

/* functions {{{1 */
/* funcA() {{{2 */
void funcA() {}

/* funcB() {{{2 */
void funcB() {}
/* }}}1 */
</pre>
<p>番號付きマーカーを書いた場所から指定レベルの折り疊みが開始します。指定レベルより高いレベルの折り疊みをその場所で區切るといふ效果もあります。番號付きマーカーは開始マーカーを指定するだけで折り疊みを定義できます。折り疊みを明示的に止めたい場合は終了マーカーを設定する必要があります。
</p>
<p>マーカーによる折り疊みの詳しい說明はリファレンスマニュアルを參照してください: |<a href="fold_002etxt.html#fold_002dmarker">fold-marker</a>|
</p>
<span id="g_t28_002e7"></span><span id="index-Gou-WendeZhe-riDie-mu"></span>
<span id="Gou-WendeZhe-riDie-mu"></span><h3 class="section">構文で折り疊む</h3>

<p>ファイルを表示するとき、ファイルの種類に應じた構文ファイルが使はれます。構文ファイルにはファイルをカラー表示するための定義が書かれてゐます。例へばこのヘルプファイルは &quot;help&quot; 構文ファイルを使つてカラー表示されてゐます (カラー端末を使つてゐるなら)。
</p>
<p>構文ファイルで構文を定義するときに &quot;fold&quot; 屬性を指定して折り疊み領域を定義することができます。構文ファイルを書くのは大變ですが、一度作つてしまへば、後は自動的に折り疊みが作成されるやうになります。
</p>
<p>自分で構文ファイルを作成することはほとんどないと思ふので、詳しい說明は省きます。折り疊みを開いたり閉ぢたりする方法は他と變はりません。ファイルを開くと自動的に折り疊みが作成されます。
</p>
<p>構文による折り疊みの詳しい說明はリファレンスマニュアルを參照してください: |<a href="fold_002etxt.html#fold_002dsyntax">fold-syntax</a>|
</p>
<span id="g_t28_002e8"></span><span id="index-sukuriputodeZhe-riDie-mu"></span>
<span id="sukuriputodeZhe-riDie-mu"></span><h3 class="section">スクリプトで折り疊む</h3>

<p>これはインデントによる折り疊みと似てゐますが、インデントではなくユーザーが定義した函數を使つて折り疊みレベルを計算します。テキストの內容から折り疊みレベルを判斷するやうなことができます。例へば、メールでは引用したテキストの前に &quot;&gt;&quot; を付けます。それを折り疊むには次のやうにします:
</p>
<pre class="verbatim">:set foldmethod=expr
:set foldexpr=strlen(substitute(substitute(getline(v:lnum),'\\s','',\&quot;g\&quot;),'[^&gt;].*','',''))
</pre>
<p>次のやうなテキストが折り疊まれます。試してみてください:
</p>
<pre class="verbatim">&gt; 相手が書いた文章
&gt; 相手が書いた文章
&gt; &gt; 相手が引用した私の文章
&gt; &gt; 相手が引用した私の文章
</pre>
<p>上記の &rsquo;foldexpr&rsquo; の設定を說明します (呼び出しの深い順番):
</p><table>
<tr><td width="50%">getline(v:lnum)</td><td width="50%">現在行を取得</td></tr>
<tr><td width="50%">substitute(...,&rsquo;\\s&rsquo;,&rdquo;,&rsquo;g&rsquo;)</td><td width="50%">行から空白を削除</td></tr>
<tr><td width="50%">substitute(...,&rsquo;[^&gt;].*&rsquo;,&rdquo;,&rdquo;)</td><td width="50%">先頭の &rsquo;&gt;&rsquo; 以降を全て削除</td></tr>
<tr><td width="50%">strlen(...)</td><td width="50%">文字の長さ(&rsquo;&gt;&rsquo; の數)を數へる</td></tr>
</table>

<blockquote>
<p><strong>Note:</strong> <br>
&quot;:set&quot; コマンドでは、空白とダブルクォートとバックスラッシュのすべてに對してバックスラッシュを前置する必要があります。よくわからないときは:
</p>
<pre class="verbatim">:set foldexpr
</pre>
<p>このコマンドで實際に設定された値を確認してください。複雜な式を書いてゐてそれを修正したい場合は、コマンドライン補完を使つてください:
</p>
<pre class="verbatim">:set foldexpr=&lt;Tab&gt;
</pre>
<p>&lt;Tab&gt; は實際の Tab キーです。現在の設定値が入力されるので、それを編輯できます。
</p>
<p>複雜な式を使ひたい場合はその處理を函數にして、&rsquo;<samp>foldexpr</samp>&rsquo; からはその函數を呼ぶように設定してください。
</p></blockquote>

<p>スクリプトにより折り疊みの詳しい說明はリファレンスマニュアルを參照してください: |<a href="fold_002etxt.html#fold_002dexpr">fold-expr</a>|
</p>
<span id="g_t28_002e9"></span><span id="index-Bian-Geng-nonaiXing-woZhe-riDie-mu"></span>
<span id="Bian-Geng-nonaiXing-woZhe-riDie-mu"></span><h3 class="section">變更のない行を折り疊む</h3>

<p>&rsquo;<samp>diff</samp>&rsquo; オプションと合はせて使ふと便利です。|<a href="diff_002etxt.html#vimdiff">vimdiff</a>| コマンドを使つたときもこの設定が適用されます。例:
</p>
<pre class="verbatim">:setlocal diff foldmethod=diff scrollbind nowrap foldlevel=1
</pre>
<p>同じファイルの別バージョンを表示してゐるすべてのウィンドウでこの設定を實行してください。同じ部分は折り疊まれ、違ひのある行だけが表示されるやうになります。
</p>
<p>詳細は |<a href="fold_002etxt.html#fold_002ddiff">fold-diff</a>| 參照。
</p>
<span id="g_t28_002e10"></span><span id="index-dorewoShi-ebaiino_003f"></span>
<span id="dorewoShi-ebaiino_003f"></span><h3 class="section">どれを使へばいいの？</h3>

<p>いろんな方法があるのでどれを使へばいいか惱んでしまひますね。殘念ながら完璧な答へはありません。いくつかヒントを示します。
</p>
<p>編輯したい言語の構文ファイルが折り疊みに對應してゐる場合は、それを使ふのがおそらくベストです。あるいは自分で書いてみるのもいいかもしれません。構文ファイルの作成には檢索パターンの詳しい智識が必要です。簡單な仕事ではありませんが、それが動作するやうになれば、手動で折り疊みを定義する必要がなくなります。
</p>
<p>テキストのフォーマットが不定な場合は手動で折り疊みを定義してください。|<a href="starting_002etxt.html#g_t_003amkview">:mkview</a>| を使へば折り疊みを保存したり復元したりできます。
</p>
<p>マーカーを使ふ方法はファイルにマーカーを書き込む必要があります。他の人とファイルを共有したり、社內のコーディング規約に從ふ必要がある場合は使へないかもしれません。
</p>
<p>マーカーの利點は折り疊みを明示的に設置できることです。折り疊みをカット＆ペーストしたときに前後の不要な行が變更されたりしません。折り疊まれた行に表示されるコメントを指定することもできます。
</p>
<p>インデントによる折り疊みはたいていのファイルで機能しますが、うまく機能しない場合もあります。他の方法が使へない場合に使つてください。しかしアウトラインを表示する方法としては非常に便利です。&rsquo;<samp>shiftwidth</samp>&rsquo; の幅ずつインデントを付けて折り疊みレベルを指定します。
</p>
<p>スクリプトを使つた方法はほとんどの構造化されたテキストを折り疊むことができます。設定方法もシンプルです。折り疊みの開始と終了を認識するのが容易な場合は特に簡單です。
</p>
<p>この方法で折り疊みを定義したときに思つたとほりの折り疊みが作成されなかつた場合は &quot;manual&quot; に切り替へてみてください。設定を變更しても折り疊みは削除されないので、そのまま手動で折り疊みを削除したり追加したりできます。
</p>
<hr>
<div class="header">
<p>
Next: <a href="usr_005f29_002etxt.html" accesskey="n" rel="next">usr_29.txt</a>, Previous: <a href="usr_005f27_002etxt.html" accesskey="p" rel="prev">usr_27.txt</a>, Up: <a href="Mu-Ci-.html" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
