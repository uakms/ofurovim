<!DOCTYPE html>
<html lang="ja">
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>

<title>eval.txt (Vim Reference Manual)</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="description" content="eval.txt (Vim Reference Manual)">
<meta name="keywords" content="eval.txt (Vim Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="Mu-Ci-.html#g_t_76ee_6b21" rel="start" title="目次">
<link href="Indexes-CP.html#Indexes-CP" rel="index" title="Indexes CP">
<link href="Mu-Ci-.html#g_t_76ee_6b21" rel="up" title="目次">
<link href="channel_002etxt.html#channel_002etxt" rel="next" title="channel.txt">
<link href="autocmd_002etxt.html#autocmd_002etxt" rel="prev" title="autocmd.txt">
<style>
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="ja">
<a name="eval_002etxt"></a>
<div class="header">
<p>
Up: <a href="Mu-Ci-.html#g_t_76ee_6b21" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html#Indexes-CP" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Shi-noPing-Jia-_002c-Tiao-Jian-Shi--_0028Vim-script-rihuarensu_0029"></a>
<h2 class="unnumbered">式の評價、條件式 (Vim script リファレンス)</h2>
<pre class="verbatim">*eval.txt*	For Vim バージョン 8.1.  Last change: 2019 Jul 19


		  VIMリファレンスマニュアル    by Bram Moolenaar
</pre>

<a name="expression"></a><a name="expr"></a><a name="E15"></a><a name="eval"></a><a name="index-expression"></a>
<a name="index-expr"></a>
<a name="index-E15"></a>
<a name="index-eval"></a>
<p>Vim script
</p>
<p>Vim script の利用についてはユーザーマニュアルの 41 章 |<a href="usr_005f41_002etxt.html#usr_005f41_002etxt">usr_41.txt</a>| でも解說されてゐる。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
Vim script はコンパイル時に無效化できる。もしさうなつてゐるとこのドキュメントに書かれてゐる事は有效ではない。|<a href="various_002etxt.html#g_t_002beval">+eval</a>| と |<a href="#no_002deval_002dfeature">no-eval-feature</a>| を參照。
</p></blockquote>

<table>
<tr><td width="50%">1. 變數</td><td width="50%">|<a href="#variables">variables</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.1 變數の型</td><td width="50%"></td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.2 函數への參照</td><td width="50%">|<a href="#Funcref">Funcref</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.3 リスト</td><td width="50%">|<a href="#Lists">Lists</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.4 辭書</td><td width="50%">|<a href="#Dictionaries">Dictionaries</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.5 Blobs</td><td width="50%">|<a href="#Blobs">Blobs</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.6 變數について補足</td><td width="50%">|<a href="#more_002dvariables">more-variables</a>|</td></tr>
<tr><td width="50%">2. 式の文法</td><td width="50%">|<a href="#expression_002dsyntax">expression-syntax</a>|</td></tr>
<tr><td width="50%">3. 內部變數</td><td width="50%">|<a href="#internal_002dvariables">internal-variables</a>|</td></tr>
<tr><td width="50%">4. 組み込み函數</td><td width="50%">|<a href="#functions">functions</a>|</td></tr>
<tr><td width="50%">5. 函數定義</td><td width="50%">|<a href="#user_002dfunctions">user-functions</a>|</td></tr>
<tr><td width="50%">6. 波括弧 {} 變數</td><td width="50%">|<a href="#curly_002dbraces_002dnames">curly-braces-names</a>|</td></tr>
<tr><td width="50%">7. コマンド</td><td width="50%">|<a href="#expression_002dcommands">expression-commands</a>|</td></tr>
<tr><td width="50%">8. 例外處理</td><td width="50%">|<a href="#exception_002dhandling">exception-handling</a>|</td></tr>
<tr><td width="50%">9. 例</td><td width="50%">|<a href="#eval_002dexamples">eval-examples</a>|</td></tr>
<tr><td width="50%">10. Vim script バージョン</td><td width="50%">|<a href="#vimscript_002dversion">vimscript-version</a>|</td></tr>
<tr><td width="50%">11. +eval 機能が無效</td><td width="50%">|<a href="#no_002deval_002dfeature">no-eval-feature</a>|</td></tr>
<tr><td width="50%">12. サンドボックス</td><td width="50%">|<a href="#eval_002dsandbox">eval-sandbox</a>|</td></tr>
<tr><td width="50%">13. テキストロック</td><td width="50%">|<a href="#textlock">textlock</a>|</td></tr>
<tr><td width="50%">14. テスト</td><td width="50%">|<a href="#testing">testing</a>|</td></tr>
</table>

<a name="variables"></a><a name="index-variables"></a>
<a name="index-Bian-Shu-"></a>
<a name="g_t1_002e-Bian-Shu-"></a>
<h3 class="section">1. 變數</h3>

<a name="index-Bian-Shu-noXing-"></a>
<a name="g_t1_002e1-Bian-Shu-noXing-"></a>
<h4 class="unnumberedsubsec">1.1 變數の型</h4>
<a name="E712"></a><a name="E896"></a><a name="E897"></a><a name="E899"></a><a name="index-E712"></a>
<a name="index-E896"></a>
<a name="index-E897"></a>
<a name="index-E899"></a>
<p>變數には 9 種類の型がある:
</p>
<dl compact="compact">
<dd><a name="Number"></a><a name="index-Number"></a>
</dd>
<dt>數値</dt>
<dd><p>32 ビットまたは 64 ビットの符號有整數。|<a href="#expr_002dnumber">expr-number</a>|
</p>
<p>64 ビット數値は |<a href="various_002etxt.html#g_t_002bnum64">+num64</a>| 機能つきでコンパイルされたときのみ有效。
</p>
<p>例:
</p><div class="example">
<pre class="example">-123  0x10  0177  0b1011
</pre></div>

<a name="Float"></a><a name="index-Float"></a>
</dd>
<dt>浮動小數點數</dt>
<dd><p>浮動小數點數。|<a href="#floating_002dpoint_002dformat">floating-point-format</a>|
</p>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ}
</p>
<p>例:
</p><div class="example">
<pre class="example">123.456  1.15e-6  -1.1e3
</pre></div>

<a name="E928"></a><a name="index-E928"></a>
</dd>
<dt>文字列</dt>
<dd><p>終端が NUL 文字である 8 ビットの符號無し文字 (バイト)。|<a href="#expr_002dstring">expr-string</a>|
</p>
<p>例:
</p><div class="example">
<pre class="example">&quot;ab\txx\&quot;--&quot;  'x-z''a,c'
</pre></div>

</dd>
<dt>リスト</dt>
<dd><p>要素の順序つきの列。詳細は |<a href="#List">List</a>| を參照。
</p>
<p>例:
</p><div class="example">
<pre class="example">[1, 2, ['a', 'b']]
</pre></div>

</dd>
<dt>辭書</dt>
<dd><p>順序を持たない聯想排列: 各要素はキーと値を持つ。|<a href="#Dictionary">Dictionary</a>|
</p>
<p>例:
</p><pre class="verbatim">{'blue': &quot;#0000ff&quot;, 'red': &quot;#ff0000&quot;}
#{blue: &quot;#0000ff&quot;, red: &quot;#ff0000&quot;}
</pre>
</dd>
<dt>Funcref</dt>
<dd><p>函數への參照 |<a href="#Funcref">Funcref</a>|。
</p>
<p>例:
</p><div class="example">
<pre class="example">function(&quot;strlen&quot;)
</pre></div>
<p>辭書や引數とバインドすることができ、そのときは部分適用 (Partial) のやうに働く。
</p>
<p>例:
</p><div class="example">
<pre class="example">function(&quot;Callback&quot;, [arg], myDict)
</pre></div>

<a name="Special"></a><a name="index-Special"></a>
</dd>
<dt>特殊値</dt>
<dd><p>|<a href="#v_003afalse">v:false</a>|, |<a href="#v_003atrue">v:true</a>|, |<a href="#v_003anone">v:none</a>| と |<a href="#v_003anull">v:null</a>|。
</p>
<a name="Job"></a><a name="Jobs"></a><a name="index-Job"></a>
<a name="index-Jobs"></a>
</dd>
<dt>ジョブ</dt>
<dd><p>ジョブに使はれる。|<a href="#job_005fstart_0028_0029">job_start()</a>| を參照。
</p>
<a name="Channel"></a><a name="Channels"></a><a name="index-Channel"></a>
<a name="index-Channels"></a>
</dd>
<dt>チャネル</dt>
<dd><p>チャネルに使はれる。|<a href="#ch_005fopen_0028_0029">ch_open()</a>| を參照。
</p>
</dd>
<dt>Blob</dt>
<dd><p>バイナリラージオブジェクト。任意のバイトシーケンスを格納する。詳細は |<a href="#Blob">Blob</a>| を參照。
</p>
<p>例: 0zFF00ED015DAF
0z は空の Blob である。
</p></dd>
</dl>

<p>數値と文字列は文脈に應じて相互に變換される。
</p>
<p>數値から文字列への變換は數字のASCII表現によつて行はれる。例:
</p><pre class="verbatim">數値 123        --&gt;     文字列 &quot;123&quot;
數値 0          --&gt;     文字列 &quot;0&quot;
數値 -1         --&gt;     文字列 &quot;-1&quot;
</pre><a name="octal"></a><a name="index-octal"></a>
<p>文字列から數値への變換は最初の數字を用ゐて數値に變換する。16 進表記 &quot;0xf9&quot; や 8 進表記 &quot;017&quot;、2 進數表記の &quot;0b10&quot; も認識される。文字列が數字で始まらない場合結果は 0 となる。
例:
</p><pre class="verbatim">文字列 &quot;456&quot;    --&gt;     數値 456
文字列 &quot;6bar&quot;   --&gt;     數値 6
文字列 &quot;foo&quot;    --&gt;     數値 0
文字列 &quot;0xf1&quot;   --&gt;     數値 241
文字列 &quot;0100&quot;   --&gt;     數値 64
文字列 &quot;0b101&quot;  --&gt;     數値 5
文字列 &quot;-8&quot;     --&gt;     數値 -8
文字列 &quot;+8&quot;     --&gt;     數値 0
</pre>
<p>文字列を强制的に數値に變換するには 0 を足す:
</p><div class="example">
<pre class="example">:echo &quot;0100&quot; + 0
64
</pre></div>

<p>先頭の 0 によつて 8 進數とみなされるのを防いだり、異なる基數を使ふには |<a href="#str2nr_0028_0029">str2nr()</a>| を使ふ。
</p>
<a name="TRUE"></a><a name="FALSE"></a><a name="Boolean"></a><a name="index-TRUE"></a>
<a name="index-FALSE"></a>
<a name="index-Boolean"></a>
<p>ブール (眞理値) 演算には數値が使はれる。0 は僞を意味し、非 0 は眞を表す。また、|<a href="#v_003afalse">v:false</a>| と |<a href="#v_003atrue">v:true</a>| を使ふこともできる。函數から眞が返されたときは數値の 1 であり、僞が返されたときは數値の 0 である。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
次のコマンドをみると
</p><div class="example">
<pre class="example">:if &quot;foo&quot;
:&quot; 實行されない
</pre></div>
<p>&quot;foo&quot; は 0 に變換され、それは僞を意味する。もし文字列がゼロでない數値から始まる場合は眞を意味する:
</p><div class="example">
<pre class="example">:if &quot;8foo&quot;
:&quot; 實行される
</pre></div>
<p>文字列が空ではないか調べるためには empty() を使用して次のやうにする。
</p><div class="example">
<pre class="example">:if !empty(&quot;foo&quot;)
</pre></div>
</blockquote>
<a name="non_002dzero_002darg"></a><a name="index-non_002dzero_002darg"></a>
<p>函數の引數は、|<a href="#TRUE">TRUE</a>| とは少し異なる場合がある: 引數が存在し、それが非ゼロの Number, |<a href="#v_003atrue">v:true</a>| または空でない String に評價される場合、値は TRUE と見なされる。
</p><blockquote>
<p><b><strong>Note:</strong> <br>:</b> &quot; &quot; と &quot;0&quot; も空文字列ではないので、TRUE と見なされることに注意すること。List, Dictionary または Float は數値または文字列ではないため、FALSE と評價される。
</p></blockquote>

<a name="E745"></a><a name="E728"></a><a name="E703"></a><a name="E729"></a><a name="E730"></a><a name="E731"></a><a name="E908"></a><a name="E910"></a><a name="E913"></a><a name="E974"></a><a name="E975"></a><a name="E976"></a><a name="index-E745"></a>
<a name="index-E728"></a>
<a name="index-E703"></a>
<a name="index-E729"></a>
<a name="index-E730"></a>
<a name="index-E731"></a>
<a name="index-E908"></a>
<a name="index-E910"></a>
<a name="index-E913"></a>
<a name="index-E974"></a>
<a name="index-E975"></a>
<a name="index-E976"></a>
<p>リスト |<a href="#List">List</a>|, 辭書 |<a href="#Dictionary">Dictionary</a>|, |<a href="#Funcref">Funcref</a>|, ジョブ |<a href="#Job">Job</a>|, チャネル |<a href="#Channel">Channel</a>| および |<a href="#Blob">Blob</a>| は自動的に變換されない。
</p>
<a name="E805"></a><a name="E806"></a><a name="E808"></a><a name="index-E805"></a>
<a name="index-E806"></a>
<a name="index-E808"></a>
<p>數値と浮動小數點數をまぜると浮動小數點數になる。それ以外には浮動小數點數への自動的な變換は存在しない。文字列から浮動小數點數へは str2float() を使ひ、浮動小數點數から文字列へは printf() を、浮動小數點數から數値へは float2nr() を使ふ。
</p>
<a name="E891"></a><a name="E892"></a><a name="E893"></a><a name="E894"></a><a name="E907"></a><a name="E911"></a><a name="E914"></a><a name="index-E891"></a>
<a name="index-E892"></a>
<a name="index-E893"></a>
<a name="index-E894"></a>
<a name="index-E907"></a>
<a name="index-E911"></a>
<a name="index-E914"></a>
<p>浮動小數點數が豫期されてゐるところでは數値も使用可能だが、それ以外は使用できない。
</p>
<a name="no_002dtype_002dchecking"></a><a name="index-no_002dtype_002dchecking"></a>
<p>變數の型を變更しようとしてもエラーは發生しない。
</p>

<a name="index-Guan-Shu-henoCan-Zhao-"></a>
<a name="g_t1_002e2-Guan-Shu-henoCan-Zhao-"></a>
<h4 class="unnumberedsubsec">1.2 函數への參照</h4>
<a name="Funcref"></a><a name="E695"></a><a name="E718"></a><a name="index-Funcref"></a>
<a name="index-E695"></a>
<a name="index-E718"></a>
<p>函數への參照は、函數 |<a href="#function_0028_0029">function()</a>|、函數 |<a href="#funcref_0028_0029">funcref()</a>| またはラムダ式 |<a href="#expr_002dlambda">expr-lambda</a>| を使ふことで得られる。函數への參照は、式の中で函數名が要求される場所で使ふと參照先の函數を呼び出す。例:
</p>
<div class="example">
<pre class="example">:let Fn = function(&quot;MyFunc&quot;)
:echo Fn()
</pre></div>
<a name="E704"></a><a name="E705"></a><a name="E707"></a><a name="index-E704"></a>
<a name="index-E705"></a>
<a name="index-E707"></a>
<p>函數參照の變數名は、大文字、&quot;s:&quot;, &quot;w:&quot;, &quot;t:&quot;, &quot;b:&quot; のいづれかで始めなければならない。&quot;g:&quot; も使へるが、あとに續く名前は大文字で始めなければならない。函數參照と參照先の函數の名前を同じにすることはできない。
</p>
<p>函數を定義して、それへの參照を直接辭書に入れるための特別な形式がある。例:
</p><pre class="verbatim">:function dict.init() dict
:   let self.val = 0
:endfunction
</pre>
<p>この辭書のキーは小文字で始めなければならない。實際の函數名はここでは使はれない。|<a href="#numbered_002dfunction">numbered-function</a>| も參照。
</p>
<p>|<a href="#g_t_003acall">:call</a>| コマンドでも函數參照を使ふことができる:
</p><div class="example">
<pre class="example">:call Fn()
:call dict.init()
</pre></div>

<p>參照先の函數名は |<a href="#string_0028_0029">string()</a>| で得られる。
</p><div class="example">
<pre class="example">:let func = string(Fn)
</pre></div>

<p>|<a href="#call_0028_0029">call()</a>| を使ふと、リスト型の變數を引數として函數參照を呼び出すことができる:
</p><div class="example">
<pre class="example">:let r = call(Fn, mylist)
</pre></div>
<a name="Partial"></a><a name="index-Partial"></a>
<p>函數參照は、辭書および/もしくは引數とバインドすることができる。これは部分適用 (Partial) とも呼ばれる。これは、辭書および/もしくは引數を function() または funcref() に渡すことで作成される。その函數を呼び出すと、その辭書および/もしくは引數がその函數に渡される。例:
</p><div class="example">
<pre class="example">let Cb = function('Callback', ['foo'], myDict)
call Cb('bar')
</pre></div>

<p>これは、函數を以下のやうにして呼び出す:
</p><div class="example">
<pre class="example">call myDict.Callback('foo', 'bar')
</pre></div>

<p>これは函數を何かに渡す場合、例へば |<a href="#ch_005fopen_0028_0029">ch_open()</a>| の引數とする場合などに非常に有用である。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
函數の辭書へのバインドは、その函數が辭書のメンバーであるときにも發生することに注意:
</p><div class="example">
<pre class="example">let myDict.myFunction = MyFunction
call myDict.myFunction()
</pre></div>

<p>ここで、MyFunction() は myDict を &quot;self&quot; として受け取る。これは、&quot;myFunction&quot; メンバーがアクセスされたときに起こる。&quot;myFunction&quot; を別の辭書 otherDict に代入して呼び出すと、それは otherDict にバインドされる:
</p><div class="example">
<pre class="example">let otherDict.myFunction = myDict.myFunction
call otherDict.myFunction()
</pre></div>

<p>今度は、&quot;self&quot; は &quot;otherDict&quot; になる。しかし、辭書を明示的にバインドしたときにはこれは起こらない:
</p><div class="example">
<pre class="example">let myDict.myFunction = function(MyFunction, myDict)
let otherDict.myFunction = myDict.myFunction
call otherDict.myFunction()
</pre></div>

<p>ここでは、&quot;self&quot; は &quot;myDict&quot; である。なぜなら明示的にバインドされてゐるからである。
</p></blockquote>


<a name="list"></a><a name="List"></a><a name="Lists"></a><a name="E686"></a><a name="index-list"></a>
<a name="index-List"></a>
<a name="index-Lists"></a>
<a name="index-E686"></a>
<a name="index-risuto"></a>
<a name="g_t1_002e3-risuto"></a>
<h4 class="unnumberedsubsec">1.3 リスト</h4>
<p>リストとは順序を保つ要素の列である。要素はどんな型でもよい。要素へはインデックス番號を使つてアクセスする。列の任意の位置に要素を追加したり削除することができる。
</p>

<a name="E696"></a><a name="E697"></a><a name="index-E696"></a>
<a name="index-E697"></a>
<a name="index-risutonoZuo-Cheng-"></a>
<a name="risutonoZuo-Cheng-"></a>
<h4 class="unnumberedsubsubsec">リストの作成</h4>
<p>リストを作るには、[]の中にコンマで區切つて要素を書く。例:
</p><div class="example">
<pre class="example">:let mylist = [1, two, 3, &quot;four&quot;]
:let emptylist = []
</pre></div>

<p>要素はどんな式でもよい。要素としてリストを指定すると、リストのリストができる:
</p><div class="example">
<pre class="example">:let nestlist = [[11, 12], [21, 22], [31, 32]]
</pre></div>

<p>最後の要素の後に餘分なコンマがあると無視される。
</p>

<a name="list_002dindex"></a><a name="E684"></a><a name="index-list_002dindex"></a>
<a name="index-E684"></a>
<a name="index-risutonoindetukusu"></a>
<a name="risutonoindetukusu"></a>
<h4 class="unnumberedsubsubsec">リストのインデックス</h4>
<p>リストの要素にアクセスするには、リスト名の後に[]を書き、その中にインデックスを書く。インデックスは 0 基點 (つまり最初の要素のインデックスは 0) である。
</p><div class="example">
<pre class="example">:let item = mylist[0]           &quot; 最初の要素 (1) を取得
:let item = mylist[2]           &quot; 3 番目の要素 (3) を取得
</pre></div>

<p>取得した要素がリストならば、さらに續けてインデックスを書くことができる:
</p><div class="example">
<pre class="example">:let item = nestlist[0][1]      &quot; 最初のリストの 2 番目の要素 (12) を取得
</pre></div>
<p>負のインデックスを指定すると、リストの末尾から數へられる。インデックス -1 は最後の要素を示し、-2 は最後から 2 番目を指す
</p><div class="example">
<pre class="example">:let last = mylist[-1]          &quot; 最後の要素 (&quot;four&quot;) を取得
</pre></div>

<p>無效なインデックスによるエラーを囘避するには函數 |<a href="#get_0028_0029">get()</a>| を使ふ。するとインデックスが無效な場合は、0 かまたは自分で指定した既定値が返る:
</p><div class="example">
<pre class="example">:echo get(mylist, idx)
:echo get(mylist, idx, &quot;NONE&quot;)
</pre></div>


<a name="index-risutonoLian-Jie-"></a>
<a name="risutonoLian-Jie-"></a>
<h4 class="unnumberedsubsubsec">リストの連結</h4>

<p>2 つのリストを連結するには演算子 &quot;+&quot; を使ふ:
</p><div class="example">
<pre class="example">:let longlist = mylist + [5, 6]
:let mylist += [7, 8]
</pre></div>

<p>1 個の要素を先頭または末尾に付け加へるには、[] で圍んでリストにして連結する。リストの特定の要素を變更するには後述の |<a href="#list_002dmodification">list-modification</a>| を參照。
</p>

<a name="sublist"></a><a name="index-sublist"></a>
<a name="index-Bu-Fen-risuto"></a>
<a name="Bu-Fen-risuto"></a>
<h4 class="unnumberedsubsubsec">部分リスト</h4>
<p>リストの一部分を取り出すには、[] の中に始點と終點のインデックスを書き、コロンで區切る:
</p><div class="example">
<pre class="example">:let shortlist = mylist[2:-1]   &quot; リスト [3, &quot;four&quot;] を得る
</pre></div>

<p>始點のインデックスを省略すると 0 となる。終點のインデックスを省略すると -1 となる。
</p><div class="example">
<pre class="example">:let endlist = mylist[2:]       &quot; 2 番目から最後まで: [3, &quot;four&quot;]
:let shortlist = mylist[2:2]    &quot; 1 個の要素からなるリスト: [3]
:let otherlist = mylist[:]      &quot; リストのコピーを作る
</pre></div>

<p>終點のインデックスが始點のインデックスよりも前になつてしまつた場合は空リストとなる。エラーメッセージは表示されない。
</p>
<p>終點のインデックスがリストの長さより大きい場合は、長さ -1 を指定したときと同じになる:
</p><div class="example">
<pre class="example">:let mylist = [0, 1, 2, 3]
:echo mylist[2:8]               &quot; 結果: [2, 3]
</pre></div>

<blockquote>
<p><strong>Note:</strong> <br>
mylist[s:e] と書くと變數 &quot;s:e&quot; をインデックスとして使つたと解釋される。&quot;:&quot; の前に 1 文字の變數を使ふときは十分注意すること。必要ならこのやうにスペースを入れるとよい: mylist[s : e].
</p></blockquote>


<a name="list_002didentity"></a><a name="index-list_002didentity"></a>
<a name="index-risutonoTong-YiXing-"></a>
<a name="risutonoTong-YiXing-"></a>
<h4 class="unnumberedsubsubsec">リストの同一性</h4>
<p>變數 &quot;aa&quot; がリストであり、それを別の變數 &quot;bb&quot; に代入したとすると、兩方とも同じ變數を參照するやうになる。よつてリスト &quot;aa&quot; を變更すると &quot;bb&quot; も變更される:
</p><div class="example">
<pre class="example">:let aa = [1, 2, 3]
:let bb = aa
:call add(aa, 4)
:echo bb
[1, 2, 3, 4]
</pre></div>

<p>リストのコピーを作るには函數 |<a href="#copy_0028_0029">copy()</a>| を使ふ。前述の通り [:] を使つてもできる。これは淺いコピーである。つまりリストの要素であるリストに變更を加へると、コピーされたリスト內の同じ要素も變更される:
</p><div class="example">
<pre class="example">:let aa = [[1, 'a'], 2, 3]
:let bb = copy(aa)
:call add(aa, 4)
:let aa[0][1] = 'aaa'
:echo aa
[[1, aaa], 2, 3, 4]
:echo bb
[[1, aaa], 2, 3]
</pre></div>

<p>完全に獨立したコピーを作るには |<a href="#deepcopy_0028_0029">deepcopy()</a>| を使ふ。これは再歸的にリストの要素のコピーを作る。ただし深さは 100 レベルまでである。
</p>
<p>2 つの變數が同じリストを指してゐるかは演算子 &quot;is&quot; で判定できる。&quot;isnot&quot; はその逆である。一方、&quot;==&quot; は 2 つのリストが同じ値を持つてゐるかを判定する。
</p><div class="example">
<pre class="example">:let alist = [1, 2, 3]
:let blist = [1, 2, 3]
:echo alist is blist
0
:echo alist == blist
1
</pre></div>

<blockquote>
<p><strong>Note:</strong> <br>
リストの比較について注意: 2 つのリストは、同じ長さを持ち、全要素が &quot;==&quot; の意味で等しいとき、等しいとみなされる。ただ、1 つ例外がある: 數値と文字列を比較するとそれらは異なるとみなされる。變數に對して &quot;==&quot; で比較したときに行はれるやうな自動的な型變換は行はれない。例:
</p><div class="example">
<pre class="example">echo 4 == &quot;4&quot;
1
echo [4] == [&quot;4&quot;]
0
</pre></div>

<p>つまり、リストの比較は數値や文字列の比較よりも嚴格である。單純な値もリストに入れることによりこの方法で比較することができる:
</p><div class="example">
<pre class="example">:let a = 5
:let b = &quot;5&quot;
:echo a == b
1
:echo [a] == [b]
0
</pre></div>
</blockquote>


<a name="index-risutonoanpatuku"></a>
<a name="risutonoanpatuku"></a>
<h4 class="unnumberedsubsubsec">リストのアンパック</h4>

<p>リストの要素を個々の變數としてアンパックするには、[] の中に變數を書く:
</p><div class="example">
<pre class="example">:let [var1, var2] = mylist
</pre></div>

<p>變數の個數とリストの要素數が一致しないときはエラーになる。リストにある餘分な要素をまとめて受け取るには、&quot;;&quot; と受け取る變數名を書いておく:
</p><div class="example">
<pre class="example">:let [var1, var2; rest] = mylist
</pre></div>

<p>上の例は次とほぼ同じである:
</p><div class="example">
<pre class="example">:let var1 = mylist[0]
:let var2 = mylist[1]
:let rest = mylist[2:]
</pre></div>

<p>要素が 2 つしかないときでもエラーにはならない。&quot;rest&quot; は空リストになる。
</p>

<a name="list_002dmodification"></a><a name="index-list_002dmodification"></a>
<a name="index-risutonoBian-Geng-"></a>
<a name="risutonoBian-Geng-"></a>
<h4 class="unnumberedsubsubsec">リストの變更</h4>
<p>リストの中の特定の要素を變更するには次のやうに |<a href="#g_t_003alet">:let</a>| を使ふ:
</p><div class="example">
<pre class="example">:let list[4] = &quot;four&quot;
:let listlist[0][3] = item
</pre></div>

<p>始點と終點を指定してリストの一部分を變更することができる。代入する値は、少なくとも削除する範圍の要素數と同じ數だけ必要である:
</p><div class="example">
<pre class="example">:let list[3:5] = [3, 4, 5]
</pre></div>

<p>リストに要素を追加したり削除するには函數を使ふ。いくつか例を示す:
</p><div class="example">
<pre class="example">:call insert(list, 'a')         &quot; 先頭に要素 'a' を插入する
:call insert(list, 'a', 3)      &quot; 要素 'a' を list[3] の前に插入する
:call add(list, &quot;new&quot;)          &quot; 文字列の要素を最後に追加する
:call add(list, [1, 2])         &quot; 1 個の要素としてリストを追加する
:call extend(list, [1, 2])      &quot; 2 個の要素からなるリストを連結する
:let i = remove(list, 3)        &quot; 要素 3 を削除する
:unlet list[3]                  &quot; 同上
:let l = remove(list, 3, -1)    &quot; 要素 3 から最後までを削除する
:unlet list[3 : ]               &quot; 同上
:call filter(list, 'v:val !~ &quot;x&quot;')  &quot; 要素 'x' を削除
</pre></div>

<p>要素の順番を變更する:
</p><div class="example">
<pre class="example">:call sort(list)                &quot; リストをアルファベット順にソート
:call reverse(list)             &quot; 要素の順序を反轉させる
:call uniq(sort(list))          &quot; ソートして重複を削除する
</pre></div>


<a name="index-for-rupu"></a>
<a name="for-rupu"></a>
<h4 class="unnumberedsubsubsec">for ループ</h4>

<p>|<a href="#g_t_003afor">:for</a>| ループは、1 つの變數に對してリストの各要素を順番に代入し、コマンドを實行していく。例:
</p><pre class="verbatim">:for item in mylist
:   call Doit(item)
:endfor
</pre>
<p>上の例は次と同じ:
</p><pre class="verbatim">:let index = 0
:while index &lt; len(mylist)
:   let item = mylist[index]
:   :call Doit(item)
:   let index = index + 1
:endwhile
</pre>
<p>やりたいことがリストの各要素を變更するだけなら、for ループを使ふより函數 |<a href="#map_0028_0029">map()</a>| を使つた方がよりシンプルになる。
</p>
<p>|<a href="#g_t_003alet">:let</a>| コマンドと同じやうに、|<a href="#g_t_003afor">:for</a>| は變數のリストをループ變數にすることができる。この場合、引數はリストのリストでなければならない。
</p><pre class="verbatim">:for [lnum, col] in [[1, 3], [2, 8], [3, 0]]
:   call Doit(lnum, col)
:endfor
</pre>
<p>これはリストの各要素に對して |<a href="#g_t_003alet">:let</a>| コマンドを實行するかのやうに實行される。またこの場合も引數の型は全て同じでないとエラーになる。
</p>
<p>引數の殘りを 1 個のリスト變數に代入することもできる:
</p><pre class="verbatim">:for [i, j; rest] in listlist
:   call Doit(i, j)
:   if !empty(rest)
:      echo &quot;remainder: &quot; . string(rest)
:   endif
:endfor
</pre>

<a name="E714"></a><a name="index-E714"></a>
<a name="index-risutoCao-Zuo-Guan-Shu-"></a>
<a name="risutoCao-Zuo-Guan-Shu-"></a>
<h4 class="unnumberedsubsubsec">リスト操作函數</h4>
<p>以下はリスト操作に使へる函數である:
</p><div class="example">
<pre class="example">:let r = call(funcname, list)   &quot; 引數リストをつけて函數を呼び出す
:if empty(list)                 &quot; リストが空かどうか判定する
:let l = len(list)              &quot; リストの要素數
:let big = max(list)            &quot; リスト中の最大値
:let small = min(list)          &quot; リスト中の最小値
:let xs = count(list, 'x')      &quot; 'x' の出現回數を數へる
:let i = index(list, 'x')       &quot; 最初に 'x' が現れる位置のインデックス
:let lines = getline(1, 10)     &quot; バッファから10行を取得
:call append('$', lines)        &quot; バッファに行を追加する
:let list = split(&quot;a b c&quot;)      &quot; 文字列を分割してリストにする
:let string = join(list, ', ')  &quot; リストの要素を連結して文字列にする
:let s = string(list)           &quot; リストの文字列表現
:call map(list, '&quot;&gt;&gt; &quot; . v:val')  &quot; 各要素の前に &quot;&gt;&gt; &quot; をつける
</pre></div>

<p>機能を組み合はせると、處理を單純に記述できることを覺えておくとよい。例へば、リスト中の全ての數値の和を求める例:
</p><div class="example">
<pre class="example">:exe 'let sum = ' . join(nrlist, '+')
</pre></div>


<a name="dict"></a><a name="Dict"></a><a name="Dictionaries"></a><a name="Dictionary"></a><a name="index-dict"></a>
<a name="index-Dict"></a>
<a name="index-Dictionaries"></a>
<a name="index-Dictionary"></a>
<a name="index-Ci-Shu-"></a>
<a name="g_t1_002e4-Ci-Shu-"></a>
<h4 class="unnumberedsubsec">1.4 辭書</h4>
<p>辭書とは聯想排列である。各要素はキーと値を持つ。要素はキーによつて特定できる。要素は特に順序を持たずに保持される。
</p>

<a name="E720"></a><a name="E721"></a><a name="E722"></a><a name="E723"></a><a name="index-E720"></a>
<a name="index-E721"></a>
<a name="index-E722"></a>
<a name="index-E723"></a>
<a name="index-Ci-Shu-noZuo-Cheng-"></a>
<a name="Ci-Shu-noZuo-Cheng-"></a>
<h4 class="unnumberedsubsubsec">辭書の作成</h4>
<p>辭書を作るには、{} の中にコンマで區切つて要素を書く。各要素のキーと値はコロンで區切る。それぞれのキーは1度しか現れてはならない。例:
</p><div class="example">
<pre class="example">:let mydict = {1: 'one', 2: 'two', 3: 'three'}
:let emptydict = {}
</pre></div>
<a name="E713"></a><a name="E716"></a><a name="E717"></a><a name="index-E713"></a>
<a name="index-E716"></a>
<a name="index-E717"></a>
<p>キーは必ず文字列である。數値を使ふこともできるが、自動的に文字列に變換される。よつて文字列 &rsquo;4&rsquo; のキーと數値4のキーは同一の要素を參照する。
</p><blockquote>
<p><strong>Note:</strong> <br>
文字列 &rsquo;04&rsquo; と數値 04 は異なることに注意。なぜなら數値 04 は文字列 &rsquo;4&rsquo; に變換されるからである。空文字列もキーとして使用できる。
</p></blockquote>
<a name="literal_002dDict"></a><a name="index-literal_002dDict"></a>
<p>すべてのキーについてクォートを付けなければいけないことを囘避するためには #{} を使ふことができます。これは ASCII 文字、digit、&rsquo;-&rsquo; と &rsquo;_&rsquo; のみからなるキーについては {譯注: キーにクォートを付けなければならないルールを} 要求されません。
</p>
<p>例:
</p><pre class="verbatim">let mydict = #{zero: 0, one_key: 1, two-key: 2, 333: 3}
</pre><blockquote>
<p><strong>Note:</strong> <br>
ここでの 333 は文字列の &quot;333&quot; であることに注意してください。空のキーは #{} で使用できません。
</p></blockquote>

<p>値はどんな式でもよい。辭書を値にすると、ネストした辭書ができる:
</p><div class="example">
<pre class="example">:let nestdict = {1: {11: 'a', 12: 'b'}, 2: {21: 'c'}}
</pre></div>

<p>最後の要素の後に餘分なコンマがあると無視される。
</p>

<a name="index-Yao-Su-niakusesusuru"></a>
<a name="Yao-Su-niakusesusuru"></a>
<h4 class="unnumberedsubsubsec">要素にアクセスする</h4>

<p>通常、要素にアクセスするには [] の中にキーを書く:
</p><div class="example">
<pre class="example">:let val = mydict[&quot;one&quot;]
:let mydict[&quot;four&quot;] = 4
</pre></div>

<p>また、この書き方で既存の辭書に要素を追加できる。この點はリストと異なる。
</p>
<p>キー名がアルファベット、數字、アンダースコアだけからなる場合は、以下の形式が使へる |<a href="#expr_002dentry">expr-entry</a>|:
</p><div class="example">
<pre class="example">:let val = mydict.one
:let mydict.four = 4
</pre></div>

<p>要素はリストや辭書を含むどんな型でもよいため、インデックス參照とキー參照を續けて書くことができる:
</p><div class="example">
<pre class="example">:echo dict.key[idx].key
</pre></div>


<a name="index-Ci-Shu-kararisutohenoBian-Huan-"></a>
<a name="Ci-Shu-kararisutohenoBian-Huan-"></a>
<h4 class="unnumberedsubsubsec">辭書からリストへの變換</h4>

<p>辭書の全要素に對してループを行ひたい場合がある。そのためには辭書をリストに變換し、そのリストに對して |<a href="#g_t_003afor">:for</a>| ループを行ふ。
</p>
<p>多くの場合はキーに對してループを行ふ。これには函數 |<a href="#keys_0028_0029">keys()</a>| を使ふ:
</p><pre class="verbatim">:for key in keys(mydict)
:   echo key . ': ' . mydict[key]
:endfor
</pre>
<p>このキーのリストはソートされてゐない。ソートさせるには函數 |<a href="#sort_0028_0029">sort()</a>| を使ふ:
</p><div class="example">
<pre class="example">:for key in sort(keys(mydict))
</pre></div>

<p>値に對してループを行ふには函數 |<a href="#values_0028_0029">values()</a>| を使ふ:
</p><pre class="verbatim">:for v in values(mydict)
:   echo &quot;value: &quot; . v
:endfor
</pre>
<p>キーと値兩方を得るには函數 |<a href="#items_0028_0029">items()</a>| を使ふ。この函數は、キーと値の 2 個の要素からなるリストのリストを返す:
</p><pre class="verbatim">:for [key, value] in items(mydict)
:   echo key . ': ' . value
:endfor
</pre>

<a name="dict_002didentity"></a><a name="index-dict_002didentity"></a>
<a name="index-Ci-Shu-noTong-YiXing-"></a>
<a name="Ci-Shu-noTong-YiXing-"></a>
<h4 class="unnumberedsubsubsec">辭書の同一性</h4>
<p>辭書のコピーを作るにはリストと同樣に |<a href="#copy_0028_0029">copy()</a>| と |<a href="#deepcopy_0028_0029">deepcopy()</a>| を使ふ必要がある。さうでなく代入を行ふと同一の辭書を參照するやうになる:
</p><div class="example">
<pre class="example">:let onedict = {'a': 1, 'b': 2}
:let adict = onedict
:let adict['a'] = 11
:echo onedict['a']
11
</pre></div>

<p>2 つの辭書は、全てのキー・値のペアが等しいとき等しいとみなされる。より詳しくは |<a href="#list_002didentity">list-identity</a>| を參照。
</p>

<a name="dict_002dmodification"></a><a name="index-dict_002dmodification"></a>
<a name="index-Ci-Shu-noBian-Geng-"></a>
<a name="Ci-Shu-noBian-Geng-"></a>
<h4 class="unnumberedsubsubsec">辭書の變更</h4>
<p>辭書の要素を變更したり、新しい要素を追加するには |<a href="#g_t_003alet">:let</a>| を使ふ:
</p><div class="example">
<pre class="example">:let dict[4] = &quot;four&quot;
:let dict['one'] = item
</pre></div>

<p>辭書から要素を取り除くには |<a href="#remove_0028_0029">remove()</a>| か |<a href="#g_t_003aunlet">:unlet</a>| を使ふ。以下のやうに辭書からキー &quot;aaa&quot; を取り除くには 3 つの方法がある:
</p><div class="example">
<pre class="example">:let i = remove(dict, 'aaa')
:unlet dict.aaa
:unlet dict['aaa']
</pre></div>

<p>2 つの辭書を倂合させるには |<a href="#extend_0028_0029">extend()</a>| を使ふ:
</p><div class="example">
<pre class="example">:call extend(adict, bdict)
</pre></div>
<p>上のコマンドは bdict の全ての要素を adict に追加する。キーが重複した要素は bdict の要素により上書きされる。この動作は3番目の引數により變更できる。
</p><blockquote>
<p><strong>Note:</strong> <br>
辭書の要素閒に順序は定まつてゐない。そのため &quot;<code>:echo adict</code>&quot; としたとき、もともと adict にあつた要素が先に、bdict から追加された要素が後に表示されると考へてはならない。
</p></blockquote>

<p>辭書から條件を指定して要素を取り除くには |<a href="#filter_0028_0029">filter()</a>| が使へる:
</p><div class="example">
<pre class="example">:call filter(dict, 'v:val =~ &quot;x&quot;')
</pre></div>
<p>このコマンドは &quot;dict&quot; から &rsquo;x&rsquo; にマッチしない要素を全て取り除く。
</p>

<a name="Dictionary_002dfunction"></a><a name="self"></a><a name="E725"></a><a name="E862"></a><a name="index-Dictionary_002dfunction"></a>
<a name="index-self"></a>
<a name="index-E725"></a>
<a name="index-E862"></a>
<a name="index-Guan-Shu-woCi-Shu-niRu-reru"></a>
<a name="Guan-Shu-woCi-Shu-niRu-reru"></a>
<h4 class="unnumberedsubsubsec">函數を辭書に入れる</h4>
<p>函數が &quot;dict&quot; 屬性つきで定義されると、特殊な方法で呼び出すことができる。例:
</p><pre class="verbatim">:function Mylen() dict
:   return len(self.data)
:endfunction
:let mydict = {'data': [0, 1, 2, 3], 'len': function(&quot;Mylen&quot;)}
:echo mydict.len()
</pre>
<p>これはオブジェクト指向プログラミングのメソッドに似てゐる。この辭書の要素は |<a href="#Funcref">Funcref</a>| である。暗默に定義されるローカル變數 &quot;self&quot; は、この函數を呼び出した辭書を參照してゐる。
</p>
<p>&quot;dict&quot; 屬性をつけないで Funcref を辭書に入れることもできる。しかしその場合、變數 &quot;self&quot; は定義されない。
</p>
<a name="numbered_002dfunction"></a><a name="anonymous_002dfunction"></a><a name="index-numbered_002dfunction"></a>
<a name="index-anonymous_002dfunction"></a>
<p>函數に名前をつける必要をなくすために、函數を定義して直接辭書に代入することができる:
</p><pre class="verbatim">:let mydict = {'data': [0, 1, 2, 3]}
:function mydict.len()
:   return len(self.data)
:endfunction
:echo mydict.len()
</pre>
<p>かうすると函數に番號がふられ、dict.len がこの函數を參照する |<a href="#Funcref">Funcref</a>| となる。この函數は |<a href="#Funcref">Funcref</a>| を通してのみ呼び出せる。參照してゐる |<a href="#Funcref">Funcref</a>| がなくなると、この函數は自動的に削除される。
</p>
<p>番號付き函數には &quot;dict&quot; 屬性を付ける必要はない。
</p>
<p>番號付き函數でエラーが發生したときは、あるトリックを使ふことで發生源を確認できる。例へば 42 といふ函數なら次のやうにする:
</p><div class="example">
<pre class="example">:function {42}
</pre></div>


<a name="E715"></a><a name="index-E715"></a>
<a name="index-Ci-Shu-Cao-Zuo-Guan-Shu-"></a>
<a name="Ci-Shu-Cao-Zuo-Guan-Shu-"></a>
<h4 class="unnumberedsubsubsec">辭書操作函數</h4>
<p>以下は辭書操作に使へる函數である:
</p><div class="example">
<pre class="example">:if has_key(dict, 'foo')        &quot; 辭書がキー &quot;foo&quot; の要素を持つなら眞
:if empty(dict)                 &quot; 辭書が空なら眞
:let l = len(dict)              &quot; 辭書の要素數
:let big = max(dict)            &quot; 辭書中の最大値
:let small = min(dict)          &quot; 辭書中の最小値
:let xs = count(dict, 'x')      &quot; 'x' の出現回數を數へる
:let s = string(dict)           &quot; 辭書の文字列表現
:call map(dict, '&quot;&gt;&gt; &quot; . v:val')  &quot; 各要素の前に &quot;&gt;&gt; &quot; をつける
</pre></div>


<a name="blob"></a><a name="Blob"></a><a name="Blobs"></a><a name="E978"></a><a name="index-blob"></a>
<a name="index-Blob"></a>
<a name="index-Blobs"></a>
<a name="index-E978"></a>
<a name="g_t1_002e5-Blobs"></a>
<h4 class="unnumberedsubsec">1.5 Blobs</h4>
<p>Blob は、バイナリオブジェクトである。例へば、ファイルから畫像を讀んでチャネルを通し送信することなどに使へる。
</p>
<p>Blob は、ほとんどの場合、數値の |<a href="#List">List</a>| のやうに振る舞ふ。數値は、0 から 255 の 8ビットの値を持つ。
</p>

<a name="Blob-noZuo-Cheng-"></a>
<h4 class="unnumberedsubsubsec">Blob の作成</h4>

<p>Blob は Blob リテラル |<a href="#blob_002dliteral">blob-literal</a>| を使つて作成できる:
</p><pre class="verbatim">:let b = 0zFF00ED015DAF
</pre><p>讀みやすくするために、ドットをバイト閒 (16 進文字のペア) に插入することができる。ドットは値を變更しない:
</p><pre class="verbatim">:let b = 0zFF00.ED01.5DAF
</pre>
<p>Blobは |<a href="#readfile_0028_0029">readfile()</a>| で引數 {type} を &quot;B&quot; に設定してファイルから讀み込むことができる。例:
</p><pre class="verbatim">:let b = readfile('image.png', 'B')
</pre>
<p>Blobは、|<a href="#ch_005freadblob_0028_0029">ch_readblob()</a>| 函數を使用してチャネルから讀み取ることができる。
</p>

<a name="blob_002dindex"></a><a name="E979"></a><a name="index-blob_002dindex"></a>
<a name="index-E979"></a>
<a name="Blob-noindetukusu"></a>
<h4 class="unnumberedsubsubsec">Blob のインデックス</h4>
<p>Blob 內のバイトは、Blob の後ろに角括弧でインデックスを入れることによつてアクセスすることができる。インデックスは 0 から始まるため、最初のバイトのインデックスは 0 になる。
</p><pre class="verbatim">:let myblob = 0z00112233
:let byte = myblob[0]           &quot; 1 番目のバイトを取得: 0x00
:let byte = myblob[2]           &quot; 3 番目のバイトを取得: 0x22
</pre>
<p>負のインデックスは終端から數へられる。インデックス -1 は Blob の最後のバイト、-2 は最後の 1 つ前のバイトを表す。
</p><pre class="verbatim">:let last = myblob[-1]          &quot; 最後のバイトを取得: 0x33
</pre>
<p>無效なインデックスに對するエラーを囘避するには、|<a href="#get_0028_0029">get()</a>| 函數を使用すること。項目が利用できない場合、-1 または指定したデフォルト値が返される:
</p><pre class="verbatim">:echo get(myblob, idx)
:echo get(myblob, idx, 999)
</pre>

<a name="Blob-noZao-riFan-si"></a>
<h4 class="unnumberedsubsubsec">Blob の繰り返し</h4>

<p>|<a href="#g_t_003afor">:for</a>| ループは、Blob の各バイトに對してコマンドを實行する。ループ變數は Blob の各バイトに設定される。例:
</p><pre class="verbatim">:for byte in 0z112233
:   call Doit(byte)
:endfor
</pre><p>これは、0x11, 0x22 および 0x33 で Doit() を呼び出す。
</p>

<a name="Blob-noLian-Jie-"></a>
<h4 class="unnumberedsubsubsec">Blob の連結</h4>

<p>2 つの Blob は &quot;+&quot; 演算子で連結できる:
</p><pre class="verbatim">:let longblob = myblob + 0z4455
:let myblob += 0z6677
</pre>
<p>Blob の決まつた場所を變更するには、下記の |<a href="#blob_002dmodification">blob-modification</a>| を參照。
</p>

<a name="Blob-noYiBu-"></a>
<h4 class="unnumberedsubsubsec">Blob の一部</h4>

<p>Blob の一部は、角括弧內のコロンで區切られた最初と最後のインデックスを指定することによつて取得できる:
</p><pre class="verbatim">:let myblob = 0z00112233
:let shortblob = myblob[1:2]    &quot; 0z1122 を取得
:let shortblob = myblob[2:-1]   &quot; 0z2233 を取得
</pre>
<p>最初のインデックスを省略することはゼロと同じである。最後のインデックスを省略することは -1 と同じである。
</p><pre class="verbatim">:let endblob = myblob[2:]       &quot; 項目 2 から終端まで: 0z2233
:let shortblob = myblob[2:2]    &quot; 1 バイトの Blob: 0z22
:let otherblob = myblob[:]      &quot; Blob のコピーを作成
</pre>
<p>最初のインデックスが Blob の最後のバイトを超えてゐる場合、または 2 番目のインデックスが最初のインデックスより前にある場合、結果は空の Blob になる。エラーメッセージはない。
</p>
<p>2 番目のインデックスがリストの長さ以上の場合、長さから 1 を引いたものが使用される:
</p><pre class="verbatim">:echo myblob[2:8]               &quot; 結果: 0z2233
</pre>

<a name="blob_002dmodification"></a><a name="index-blob_002dmodification"></a>
<a name="Blob-noBian-Geng-"></a>
<h4 class="unnumberedsubsubsec">Blob の變更</h4>
<p>Blob の特定のバイトを變更するには |:let| を使用する:
</p><pre class="verbatim">:let blob[4] = 0x44
</pre>
<p>インデックスが Blob の終端を 1 つ超える場合は、それが追加される。それより上のインデックスはエラーである。
</p>
<p>バイトシーケンスを變更するには、[:] 表記が使用できる:
</p><pre class="verbatim">let blob[1:3] = 0z445566
</pre><a name="E972"></a><a name="index-E972"></a>
<p>置き換へられたバイトの長さは、提供された値と丁度同じでなければならない。
</p>
<p>Blob の一部を變更するには、變更する最初と最後のバイトを指定する。値の範圍內のバイト數は同じでなければならない:
</p><pre class="verbatim">:let blob[3:5] = 0z334455
</pre>
<p>函數 |<a href="#add_0028_0029">add()</a>|, |<a href="#remove_0028_0029">remove()</a>| および |<a href="#insert_0028_0029">insert()</a>| も使用できる。
</p>

<a name="Blob-noTong-YiXing-"></a>
<h4 class="unnumberedsubsubsec">Blob の同一性</h4>

<p>Blob は等しいかどうか比較することができる:
</p><pre class="verbatim">if blob == 0z001122
</pre><p>または、同一性の等しさのために:
</p><pre class="verbatim">if blob is otherblob
</pre><a name="blob_002didentity"></a><a name="E977"></a><a name="index-blob_002didentity"></a>
<a name="index-E977"></a>
<p>變數 &quot;aa&quot; が Blob で、別の變數 &quot;bb&quot; に代入すると、兩方の變數は同じ Blob を參照する。そして、&quot;is&quot; 演算子は true を返す。
</p>
<p>[:] または |<a href="#copy_0028_0029">copy()</a>| を使用してコピーを作成する場合、値は同じだが、同一性は異なる:
</p><pre class="verbatim">:let blob = 0z112233
:let blob2 = blob
:echo blob == blob2
1
:echo blob is blob2
1
:let blob3 = blob[:]
:echo blob == blob3
1
:echo blob is blob3
0
</pre>
<p>Blob のコピーを作成するには、|<a href="#copy_0028_0029">copy()</a>| 函數を使用する。[:] を使つても上で說明したやうに動作する。
</p>

<a name="more_002dvariables"></a><a name="index-more_002dvariables"></a>
<a name="index-Bian-Shu-nituiteBu-Zu-"></a>
<a name="g_t1_002e5-Bian-Shu-nituiteBu-Zu-"></a>
<h4 class="unnumberedsubsec">1.5 變數について補足</h4>
<p>變數や式の結果の型を知りたいのならば、函數 |<a href="#type_0028_0029">type()</a>| を使ふ。
</p>
<p>オプション &rsquo;<samp>viminfo</samp>&rsquo; にフラグ &rsquo;!&rsquo; が含まれるならば、大文字で始まり小文字を含まない名前のグローバル變數は、<samp>viminfo</samp> ファイル |<a href="starting_002etxt.html#viminfo_002dfile">viminfo-file</a>| に格納される。
</p>
<p>オプション &rsquo;<samp>sessionoptions</samp>&rsquo; が &quot;<var>global</var>&quot; を含むなら、大文字で始まり少なくとも一文字以上の小文字を含む名前のグローバル變數は、<samp>session</samp> ファイル |<a href="starting_002etxt.html#session_002dfile">session-file</a>| に格納される。
</p>
<table>
<thead><tr><th width="40%">變數名</th><th width="60%">何處に保存されるか</th></tr></thead>
<tr><td width="40%">my_var_6</td><td width="60%">されない</td></tr>
<tr><td width="40%">My_Var_6</td><td width="60%">sessionファイル</td></tr>
<tr><td width="40%">MY_VAR_6</td><td width="60%">viminfoファイル</td></tr>
</table>


<p>波括弧を使つて變數名を構成できる。詳細は |<a href="#curly_002dbraces_002dnames">curly-braces-names</a>| を參照。
</p>
<a name="expression_002dsyntax"></a><a name="index-expression_002dsyntax"></a>
<a name="index-Shi-noWenFa-"></a>
<a name="g_t2_002e-Shi-noWenFa-"></a>
<h3 class="section">2. 式の文法</h3>

<p>式文法一覽、優先順位の低いものから高い順に:
</p>
<table>
<tr><td width="10%">|<a href="#expr1">expr1</a>|</td><td width="30%">expr2</td></tr>
<tr><td width="10%"></td><td width="30%">expr2 ? expr1 : expr1</td><td width="60%">if-then-else 條件式</td></tr>
<tr><td width="10%">&nbsp;</td><td width="30%"></td></tr>
<tr><td width="10%">|<a href="#expr2">expr2</a>|</td><td width="30%">expr3</td></tr>
<tr><td width="10%"></td><td width="30%">expr3 || expr3 ...</td><td width="60%">論理和</td></tr>
<tr><td width="10%">&nbsp;</td><td width="30%"></td></tr>
<tr><td width="10%">|<a href="#expr3">expr3</a>|</td><td width="30%">expr4</td></tr>
<tr><td width="10%"></td><td width="30%">expr4 &amp;&amp; expr4 ...</td><td width="60%">論理積</td></tr>
<tr><td width="10%">&nbsp;</td><td width="30%"></td></tr>
<tr><td width="10%">|<a href="#expr4">expr4</a>|</td><td width="30%">expr5</td></tr>
<tr><td width="10%"></td><td width="30%">expr5 == expr5</td><td width="60%">等しい</td></tr>
<tr><td width="10%"></td><td width="30%">expr5 != expr5</td><td width="60%">等しくない</td></tr>
<tr><td width="10%"></td><td width="30%">expr5 &gt; expr5</td><td width="60%">より大きい</td></tr>
<tr><td width="10%"></td><td width="30%">expr5 &gt;= expr5</td><td width="60%">大きいか等しい</td></tr>
<tr><td width="10%"></td><td width="30%">expr5 &lt; expr5</td><td width="60%">より小さい</td></tr>
<tr><td width="10%"></td><td width="30%">expr5 &lt;= expr5</td><td width="60%">小さいか等しい</td></tr>
<tr><td width="10%"></td><td width="30%">expr5 =~ expr5</td><td width="60%">正規表現にマッチする</td></tr>
<tr><td width="10%"></td><td width="30%">expr5 !~ expr5</td><td width="60%">正規表現にマッチしない</td></tr>
<tr><td width="10%">&nbsp;</td><td width="30%"></td></tr>
<tr><td width="10%"></td><td width="30%">expr5 ==? expr5</td><td width="60%">文字列として等しい(大文字/小文字區別無し)</td></tr>
<tr><td width="10%"></td><td width="30%">expr5 ==# expr5</td><td width="60%">文字列として等しい(大文字/小文字區別有り)</td></tr>
<tr><td width="10%"></td><td width="30%">etc.</td><td width="60%">上記の各式は大小文字の區別を、?を付加すると行はず、#を付加すると行ふ</td></tr>
<tr><td width="10%">&nbsp;</td><td width="30%"></td></tr>
<tr><td width="10%"></td><td width="30%">expr5 is expr5</td><td width="60%">同一の |<a href="#List">List</a>|, |<a href="#Dictionary">Dictionary</a>| もしくは |<a href="#Blob">Blob</a>| のインスタンス</td></tr>
<tr><td width="10%"></td><td width="30%">expr5 isnot expr5</td><td width="60%">異なる |<a href="#List">List</a>|, |<a href="#Dictionary">Dictionary</a>| もしくは |<a href="#Blob">Blob</a>| のインスタンス</td></tr>
<tr><td width="10%">&nbsp;</td><td width="30%"></td></tr>
<tr><td width="10%">|<a href="#expr5">expr5</a>|</td><td width="30%">expr6</td></tr>
<tr><td width="10%"></td><td width="30%">expr6 + expr6 ...</td><td width="60%">足し算、リストまたは blob の連結</td></tr>
<tr><td width="10%"></td><td width="30%">expr6 - expr6 ...</td><td width="60%">引き算</td></tr>
<tr><td width="10%"></td><td width="30%">expr6 . expr6 ...</td><td width="60%">文字列の連結</td></tr>
<tr><td width="10%"></td><td width="30%">expr6 .. expr6 ...</td><td width="60%">文字列の連結</td></tr>
<tr><td width="10%">&nbsp;</td><td width="30%"></td></tr>
<tr><td width="10%">|<a href="#expr6">expr6</a>|</td><td width="30%">expr7</td></tr>
<tr><td width="10%"></td><td width="30%">expr7 * expr7 ...</td><td width="60%">掛け算</td></tr>
<tr><td width="10%"></td><td width="30%">expr7 / expr7 ...</td><td width="60%">割り算</td></tr>
<tr><td width="10%"></td><td width="30%">expr7 % expr7 ...</td><td width="60%">剩餘(割つた餘り)</td></tr>
<tr><td width="10%">&nbsp;</td><td width="30%"></td></tr>
<tr><td width="10%">|<a href="#expr7">expr7</a>|</td><td width="30%">expr8</td></tr>
<tr><td width="10%"></td><td width="30%">! expr7</td><td width="60%">論理否定</td></tr>
<tr><td width="10%"></td><td width="30%">- expr7</td><td width="60%">單項のマイナス {譯注: -1 等}</td></tr>
<tr><td width="10%"></td><td width="30%">+ expr7</td><td width="60%">單項のプラス</td></tr>
<tr><td width="10%">&nbsp;</td><td width="30%"></td></tr>
<tr><td width="10%">|<a href="#expr8">expr8</a>|</td><td width="30%">expr9</td></tr>
<tr><td width="10%"></td><td width="30%">expr8[expr1]</td><td width="60%">文字列のバイト、またはリスト |<a href="#List">List</a>| の要素</td></tr>
<tr><td width="10%"></td><td width="30%">expr8[expr1 : expr1]</td><td width="60%">文字列の部分文字列、またはリスト |<a href="#List">List</a>| の部分リスト</td></tr>
<tr><td width="10%"></td><td width="30%">expr8.name</td><td width="60%">辭書 |<a href="#Dictionary">Dictionary</a>| の要素</td></tr>
<tr><td width="10%"></td><td width="30%">expr8(expr1, ...)</td><td width="60%">|<a href="#Funcref">Funcref</a>| 變數による函數呼び出し</td></tr>
<tr><td width="10%">&nbsp;</td><td width="30%"></td></tr>
<tr><td width="10%">|<a href="#expr9">expr9</a>|</td><td width="30%">number</td><td width="60%">數定數</td></tr>
<tr><td width="10%"></td><td width="30%">&quot;string&quot;</td><td width="60%">文字列定數。バックスラッシュは特別な意味を持つ</td></tr>
<tr><td width="10%"></td><td width="30%">&rsquo;string&rsquo;</td><td width="60%">リテラル文字列定數。&rsquo;を含めるには 2 重にする</td></tr>
<tr><td width="10%"></td><td width="30%">[expr1, ...]</td><td width="60%">リスト |<a href="#List">List</a>|</td></tr>
<tr><td width="10%"></td><td width="30%">{expr1: expr1, ...}</td><td width="60%">辭書 |<a href="#Dictionary">Dictionary</a>|</td></tr>
<tr><td width="10%"></td><td width="30%">&amp;option</td><td width="60%">オプション變數</td></tr>
<tr><td width="10%"></td><td width="30%">(expr1)</td><td width="60%">式の入れ子</td></tr>
<tr><td width="10%"></td><td width="30%">variable</td><td width="60%">內部變數</td></tr>
<tr><td width="10%"></td><td width="30%">va{ria}ble</td><td width="60%">波括弧付きの內部變數</td></tr>
<tr><td width="10%"></td><td width="30%">$VAR</td><td width="60%">環境變數</td></tr>
<tr><td width="10%"></td><td width="30%">@r</td><td width="60%">レジスタ &rsquo;r&rsquo; の値</td></tr>
<tr><td width="10%"></td><td width="30%">function(expr1, ...)</td><td width="60%">函數呼出し</td></tr>
<tr><td width="10%"></td><td width="30%">func{ti}on(expr1, ...)</td><td width="60%">波括弧付きの函數呼出し</td></tr>
<tr><td width="10%"></td><td width="30%">{args -&gt; expr1}</td><td width="60%">ラムダ式</td></tr>
</table>


<p>&quot;...&quot; はその演算が、その後に他の演算を續ける事ができることを示してゐる。例:
</p><div class="example">
<pre class="example">&amp;nu || &amp;list &amp;&amp; &amp;shell == &quot;csh&quot;
</pre></div>

<p>1 つのレベルにある全ての式は左から右に解釋される。
</p>

<a name="expr1"></a><a name="E109"></a><a name="index-expr1"></a>
<a name="index-E109"></a>
<a name="expr1-1"></a>
<h4 class="unnumberedsubsec">expr1</h4>

<table>
<tr><td width="90%">expr2 ? expr1 : expr1</td></tr>
</table>

<p>&rsquo;?&rsquo; より前の式は數値として評價される。その結果が |<a href="#TRUE">TRUE</a>| であつた場合、&rsquo;?&rsquo; と &rsquo;:&rsquo; に挾まれた式の値がこの式全體の値となり、さうでなかつた場合は &rsquo;:&rsquo; 以降の式の値が全體の値となる。
例:
</p><div class="example">
<pre class="example">:echo lnum == 1 ? &quot;先頭&quot; : lnum
</pre></div>

<p>始めの式が &quot;expr2&quot; であるから、そこに別の ?: を含むことはできない。殘り 2 つの式については以下のやうに再歸的な ?: の利用が許される。
例:
</p><div class="example">
<pre class="example">:echo lnum == 1 ? &quot;top&quot; : lnum == 1000 ? &quot;last&quot; : lnum
</pre></div>

<p>讀み易くするために、行繼續 |<a href="repeat_002etxt.html#line_002dcontinuation">line-continuation</a>| を利用することが推奬される:
</p><pre class="verbatim">:echo lnum == 1
:\      ? &quot;top&quot;
:\      : lnum == 1000
:\              ? &quot;last&quot;
:\              : lnum
</pre>
<p>&rsquo;:&rsquo; の前には必ずスペースを入れること。さうでないと &quot;a:1&quot; のやうな變數の使用と閒違へてしまふ可能性がある。
</p>

<a name="expr2"></a><a name="expr3"></a><a name="index-expr2"></a>
<a name="index-expr3"></a>
<a name="expr2-and-expr3"></a>
<h4 class="unnumberedsubsec">expr2 and expr3</h4>

<table>
<tr><td><a name="expr_002dbarbar"></a><a name="index-expr_002dbarbar"></a></td></tr>
<tr><td width="50%">expr3 || expr3 ..</td><td width="50%">論理和
<a name="expr_002d_0026_0026"></a><a name="index-expr_002d_0026_0026"></a></td></tr>
<tr><td width="50%">expr4 &amp;&amp; expr4 ..</td><td width="50%">論理積</td></tr>
</table>

<p>演算子 &quot;||&quot; と &quot;&amp;&amp;&quot; は左右に 1 つずつ引數を取る。引數は數値に變換される。結果は:
</p>
<table>
<tr><td width="25%">入力</td><td width="25%"></td><td width="25%">出力</td></tr>
<tr><td width="25%">n1</td><td width="25%">n2</td><td width="25%">n1 || n2</td><td width="25%">n1 &amp;&amp; n2</td></tr>
<tr><td width="25%">|<a href="#FALSE">FALSE</a>|</td><td width="25%">|<a href="#FALSE">FALSE</a>|</td><td width="25%">|<a href="#FALSE">FALSE</a>|</td><td width="25%">|<a href="#FALSE">FALSE</a>|</td></tr>
<tr><td width="25%">|<a href="#FALSE">FALSE</a>|</td><td width="25%">|<a href="#TRUE">TRUE</a>|</td><td width="25%">|<a href="#TRUE">TRUE</a>|</td><td width="25%">|<a href="#FALSE">FALSE</a>|</td></tr>
<tr><td width="25%">|<a href="#TRUE">TRUE</a>|</td><td width="25%">|<a href="#FALSE">FALSE</a>|</td><td width="25%">|<a href="#TRUE">TRUE</a>|</td><td width="25%">|<a href="#FALSE">FALSE</a>|</td></tr>
<tr><td width="25%">|<a href="#TRUE">TRUE</a>|</td><td width="25%">|<a href="#TRUE">TRUE</a>|</td><td width="25%">|<a href="#TRUE">TRUE</a>|</td><td width="25%">|<a href="#TRUE">TRUE</a>|</td></tr>
</table>

<p>演算子は續けて書く事ができる。例:
</p><div class="example">
<pre class="example">&amp;nu || &amp;list &amp;&amp; &amp;shell == &quot;csh&quot;
</pre></div>

<blockquote>
<p><strong>Note:</strong> <br>
&quot;&amp;&amp;&quot; は &quot;||&quot; よりも高い優先順位を持つてゐる。これは次の事を意味する:
</p><div class="example">
<pre class="example">&amp;nu || (&amp;list &amp;&amp; &amp;shell == &quot;csh&quot;)
</pre></div>
</blockquote>

<p>結果が確定した時點で殘りの式は省略され、解釋されない。これはC言語で行はれることに似てゐる。例:
</p><div class="example">
<pre class="example">let a = 1
echo a || b
</pre></div>

<p>これは a が |<a href="#TRUE">TRUE</a>| であるため、變數bが宣言されてゐなくても有效であり、結果は絕對に |<a href="#TRUE">TRUE</a>| である。次のも同樣に:
</p><div class="example">
<pre class="example">echo exists(&quot;b&quot;) &amp;&amp; b == &quot;yes&quot;
</pre></div>

<p>これも b が宣言されてゐるゐないにかかはらず有效である。後半の項は b が定義されてゐる時にだけ評價される。
</p>

<a name="expr4"></a><a name="index-expr4"></a>
<a name="expr4-1"></a>
<h4 class="unnumberedsubsec">expr4</h4>

<table>
<tr><td width="99%">expr5 {cmp} expr5</td></tr>
</table>

<p>2 つの式 expr5 を比較し、結果が僞なら 0 を、眞なら 1 を返す。
</p>
<a name="expr_002d_003d_003d"></a><a name="expr_002d_0021_003d"></a><a name="expr_002d_003e"></a><a name="expr_002d_003e_003d"></a><a name="expr_002d_003c"></a><a name="expr_002d_003c_003d"></a><a name="expr_002d_003d_007e"></a><a name="expr_002d_0021_007e"></a><a name="expr_002d_003d_003d_0023"></a><a name="expr_002d_0021_003d_0023"></a><a name="expr_002d_003e_0023"></a><a name="expr_002d_003e_003d_0023"></a><a name="expr_002d_003c_0023"></a><a name="expr_002d_003c_003d_0023"></a><a name="expr_002d_003d_007e_0023"></a><a name="expr_002d_0021_007e_0023"></a><a name="expr_002d_003d_003d_003f"></a><a name="expr_002d_0021_003d_003f"></a><a name="expr_002d_003e_003f"></a><a name="expr_002d_003e_003d_003f"></a><a name="expr_002d_003c_003f"></a><a name="expr_002d_003c_003d_003f"></a><a name="expr_002d_003d_007e_003f"></a><a name="expr_002d_0021_007e_003f"></a><a name="expr_002dis"></a><a name="expr_002disnot"></a><a name="expr_002dis_0023"></a><a name="expr_002disnot_0023"></a><a name="expr_002dis_003f"></a><a name="expr_002disnot_003f"></a><a name="index-expr_002d_003d_003d"></a>
<a name="index-expr_002d_0021_003d"></a>
<a name="index-expr_002d_003e"></a>
<a name="index-expr_002d_003e_003d"></a>
<a name="index-expr_002d_003c"></a>
<a name="index-expr_002d_003c_003d"></a>
<a name="index-expr_002d_003d_007e"></a>
<a name="index-expr_002d_0021_007e"></a>
<a name="index-expr_002d_003d_003d_0023"></a>
<a name="index-expr_002d_0021_003d_0023"></a>
<a name="index-expr_002d_003e_0023"></a>
<a name="index-expr_002d_003e_003d_0023"></a>
<a name="index-expr_002d_003c_0023"></a>
<a name="index-expr_002d_003c_003d_0023"></a>
<a name="index-expr_002d_003d_007e_0023"></a>
<a name="index-expr_002d_0021_007e_0023"></a>
<a name="index-expr_002d_003d_003d_003f"></a>
<a name="index-expr_002d_0021_003d_003f"></a>
<a name="index-expr_002d_003e_003f"></a>
<a name="index-expr_002d_003e_003d_003f"></a>
<a name="index-expr_002d_003c_003f"></a>
<a name="index-expr_002d_003c_003d_003f"></a>
<a name="index-expr_002d_003d_007e_003f"></a>
<a name="index-expr_002d_0021_007e_003f"></a>
<a name="index-expr_002dis"></a>
<a name="index-expr_002disnot"></a>
<a name="index-expr_002dis_0023"></a>
<a name="index-expr_002disnot_0023"></a>
<a name="index-expr_002dis_003f"></a>
<a name="index-expr_002disnot_003f"></a>
<table>
<thead><tr><th width="25%"></th><th width="25%">&rsquo;<samp>ignorecase</samp>&rsquo; 次第</th><th width="25%">大小文字考慮</th><th width="25%">大小文字無視</th></tr></thead>
<tr><td width="25%">等しい</td><td width="25%">==</td><td width="25%">==#</td><td width="25%">==?</td></tr>
<tr><td width="25%">等しくない</td><td width="25%">!=</td><td width="25%">!=#</td><td width="25%">!=?</td></tr>
<tr><td width="25%">より大きい</td><td width="25%">&gt;</td><td width="25%">&gt;#</td><td width="25%">&gt;?</td></tr>
<tr><td width="25%">より大きいか等しい</td><td width="25%">&gt;=</td><td width="25%">&gt;=#</td><td width="25%">&gt;=?</td></tr>
<tr><td width="25%">より小さい</td><td width="25%">&lt;</td><td width="25%">&lt;#</td><td width="25%">&lt;?</td></tr>
<tr><td width="25%">より小さいか等しい</td><td width="25%">&lt;=</td><td width="25%">&lt;=#</td><td width="25%">&lt;=?</td></tr>
<tr><td width="25%">正規表現マッチ</td><td width="25%">=~</td><td width="25%">=~#</td><td width="25%">=~?</td></tr>
<tr><td width="25%">正規表現非マッチ</td><td width="25%">!~</td><td width="25%">!~#</td><td width="25%">!~?</td></tr>
<tr><td width="25%">同一のインスタンス</td><td width="25%">is</td><td width="25%">is#</td><td width="25%">is?</td></tr>
<tr><td width="25%">異なるインスタンス</td><td width="25%">isnot</td><td width="25%">isnot#</td><td width="25%">isnot?</td></tr>
</table>

<p>例:
</p><table>
<tr><td width="30%">&quot;abc&quot; ==# &quot;Abc&quot;</td><td width="70%">0 と評價される</td></tr>
<tr><td width="30%">&quot;abc&quot; ==? &quot;Abc&quot;</td><td width="70%">1 と評價される</td></tr>
<tr><td width="30%">&quot;abc&quot; == &quot;Abc&quot;</td><td width="70%">&rsquo;<samp>ignorecase</samp>&rsquo; が設定されてゐれば 1 と、でなければ 0 と評價</td></tr>
</table>

<a name="E691"></a><a name="E692"></a><a name="index-E691"></a>
<a name="index-E692"></a>
<p>リスト |<a href="#List">List</a>| はリストとだけ比較可能で、== 系, != 系, is 系, isnot 系のみ利用できる。これらはそれぞれのリストの値を再歸的に比較する。大文字小文字無視にすると要素を比較するときに大文字小文字を無視する。
</p>
<a name="E735"></a><a name="E736"></a><a name="index-E735"></a>
<a name="index-E736"></a>
<p>辭書 |<a href="#Dictionary">Dictionary</a>| は辭書とだけ比較可能で、== 系, != 系, is 系, isnot 系のみ利用できる。これらは辭書のキー/値を再歸的に比較する。大文字小文字無視にすると要素を比較するときに大文字小文字を無視する。
</p>
<a name="E694"></a><a name="index-E694"></a>
<p>|<a href="#Funcref">Funcref</a>| は Funcref とだけ比較可能で、== 系, != 系, is 系, isnot 系のみ利用できる。大文字小文字は常に區別される。引數や辭書が (部分適用に) バインドされてゐるかどうかも重要である。辭書も同値 (あるいは &quot;is&quot; の場合は同一) でなければならず、引數も同値 (あるいは同一) でなければならない。
</p>
<p>函數參照が同じ函數を指してゐるのかを、バインドされた辭書や引數を無視して比較したい場合は、|<a href="#get_0028_0029">get()</a>| を使用して函數名を取得すればよい:
</p><pre class="verbatim">if get(Part1, 'name') == get(Part2, 'name')
&quot; Part1 と Part2 は同じ函數を指してゐる
</pre>
<p>リスト |<a href="#List">List</a>| 、辭書 |<a href="#Dictionary">Dictionary</a>| または |<a href="#Blob">Blob</a>| に對して &quot;is&quot; や &quot;isnot&quot; を使ふと、それらの式が同じリスト、辭書 または |<a href="#Blob">Blob</a>| のインスタンスを參照してゐるか判定される。リストのコピーと元のリストは異なると判定される。リスト、辭書または |<a href="#Blob">Blob</a>| 以外に對して &quot;is&quot; は &quot;equal&quot; と同じで、&quot;isnot&quot; は &quot;not equal&quot; と同じである。ただし &quot;is&quot;、&quot;isnot&quot; は型が異なると値が等しくない點が &quot;==&quot; とは異なる。
</p><div class="example">
<pre class="example">echo 4 == '4'
1
echo 4 is '4'
0
echo 0 is []
0
</pre></div>
<p>&quot;is#&quot;/&quot;isnot#&quot; と &quot;is?&quot;/&quot;isnot?&quot; は大文字小文字を區別するかどうかが違ふ。
</p>
<p>文字列と數値を比較した場合、文字列が數値に變換され、數値として比較される。これは以下のやうになることを意味する:
</p><div class="example">
<pre class="example">echo 0 == 'x'
1
</pre></div>
<p>なぜなら、&rsquo;x&rsquo; は數値のゼロに變換されるからである。しかし、
</p><div class="example">
<pre class="example">echo [0] == ['x']
0
</pre></div>
<p>リストや辭書の中ではこの變換は行はれない。
</p>
<p>文字列同士を比較した場合、strcmp() や stricmp() によつて比較される。これは數値的に (バイトの値で) 比較されるのであつて、必ずしも言語に基づく文字種の違ひではない。
</p>
<p>&rsquo;#&rsquo; を付けた演算子を使ふか、省略形かつ &rsquo;<samp>ignorecase</samp>&rsquo; が設定されてゐない場合、比較は strcmp() で行はれる。大文字・小文字は區別される。
</p>
<p>&rsquo;?&rsquo; を付けた演算子を使ふか、省略形かつ &rsquo;<samp>ignorecase</samp>&rsquo; が設定されてゐる場合、比較はstricmp()で行はれる。大文字・小文字は區別されない。
</p>
<p>&rsquo;smartcase&rsquo; は適用されない。
</p>
<p>&quot;=~&quot; と &quot;!~&quot; 演算子は右側の引數を正規表現のパターンとして、左側の引數に對してマッチを試みる。正規表現のパターンに關しては |<a href="pattern_002etxt.html#pattern">pattern</a>| を參照。このマッチは &rsquo;<samp>magic</samp>&rsquo; が設定され &rsquo;<samp>cpoptions</samp>&rsquo; が空であるやうに振舞ひ、實際の &rsquo;<samp>magic</samp>&rsquo; や &rsquo;<samp>cpoptions</samp>&rsquo; に何が設定されてゐるには依存しない。これがスクリプトをポータブルにしてくれる。正規表現中のバックスラッシュが重複してしまふのを避けるには、シングルクォーテーションの文字列を使用する。詳細は |<a href="#literal_002dstring">literal-string</a>| を參照。
文字列は單一行として扱はれるので、複數行のパターン (\n を含むもの) はマッチしない。しかしながらリテラルなヌル文字 (NL) を、普通の文字として代用することはできる。例:
</p><table>
<tr><td width="50%">&quot;foo\nbar&quot; =~ &quot;\n&quot;</td><td width="50%">1 として評價される</td></tr>
<tr><td width="50%">&quot;foo\nbar&quot; =~ &quot;\\n&quot;</td><td width="50%">0 として評價される</td></tr>
</table>


<a name="expr5"></a><a name="expr6"></a><a name="index-expr5"></a>
<a name="index-expr6"></a>
<a name="expr5-and-expr6"></a>
<h4 class="unnumberedsubsec">expr5 and expr6</h4>
<table>
<tr><td><a name="expr_002d_002b"></a><a name="index-expr_002d_002b"></a></td></tr>
<tr><td width="40%">expr6 + expr6</td><td width="60%">足し算、リスト |<a href="#List">List</a>| もしくは |<a href="#Blob">Blob</a>| の連結
<a name="expr_002d_002d"></a><a name="index-expr_2212_2212"></a></td></tr>
<tr><td width="40%">expr6 - expr6</td><td width="60%">引き算
<a name="expr_002d_002e"></a><a name="index-expr_002d_002e"></a></td></tr>
<tr><td width="40%">expr6 . expr6</td><td width="60%">文字列の連結
<a name="expr_002d_002e_002e"></a><a name="index-expr_002d_002e_002e"></a></td></tr>
<tr><td width="40%">expr6 .. expr6</td><td width="60%">文字列の連結</td></tr>
</table>

<p>リスト |<a href="#List">List</a>| に對しては &quot;+&quot; のみ可能で、expr6 は兩方ともリストでなければならない。結果は 2 つのリストを連結した新しいリスト。
</p>
<p>文字列の連結には &quot;..&quot; が推奬される。&quot;.&quot; はあゐまいで、|<a href="#Dict">Dict</a>| メンバーアクセスと浮動小數點數にも使用される。
</p>
<p>|<a href="#vimscript_002dversion">vimscript-version</a>| が 2 以上の場合は &quot;.&quot; を使用することはできない。
</p>
<table>
<tr><td><a name="expr_002dstar"></a><a name="index-expr_002d_002a"></a></td></tr>
<tr><td width="40%">expr7 * expr7</td><td width="60%">掛け算
<a name="expr_002d_002f"></a><a name="index-expr_002d_002f"></a></td></tr>
<tr><td width="40%">expr7 / expr7</td><td width="60%">割り算
<a name="expr_002d_0025"></a><a name="index-expr_002d_0025"></a></td></tr>
<tr><td width="40%">expr7 % expr7</td><td width="60%">剩餘(割つた餘り)</td></tr>
</table>

<p>&quot;.&quot; と &quot;..&quot; を除く全ての演算子は自動的に文字列を數値に變換する。ビット演算については |<a href="#and_0028_0029">and()</a>|, |<a href="#or_0028_0029">or()</a>|, |<a href="#xor_0028_0029">xor()</a>| を參照。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
&quot;+&quot; と &quot;.&quot; の違ひに注意:
</p><div class="example">
<pre class="example">&quot;123&quot; + &quot;456&quot; = 579
&quot;123&quot; . &quot;456&quot; = &quot;123456&quot;
</pre></div>
</blockquote>

<p>&rsquo;.&rsquo; は &rsquo;+&rsquo; と &rsquo;-&rsquo; と等しい優先順位を持つので、次の式は:
</p><div class="example">
<pre class="example">1 . 90 + 90.0
</pre></div>
<p>次のやうに解釋される:
</p><div class="example">
<pre class="example">(1 . 90) + 90.0
</pre></div>
<p>これはエラーにならない。といふのは、&quot;190&quot; は自動的に數値 190 に變換され、それと浮動小數點數 90.0 との和になる。しかし次の式は:
</p><div class="example">
<pre class="example">1 . 90 * 90.0
</pre></div>
<p>次のやうに解釋される:
</p><div class="example">
<pre class="example">1 . (90 * 90.0)
</pre></div>
<p>&rsquo;.&rsquo; は &rsquo;*&rsquo; より優先順位が低いためである。これはエラーになる。といふのは、浮動小數點數と文字列を結合することになるからである。
</p>
<p>數値をゼロで割つた結果は、被除數によつて次のやうになる:
</p><table>
<tr><td width="50%">&nbsp;0 / 0 &nbsp;= -0x80000000</td><td width="50%">(浮動小數點數の NaN のやうなもの)</td></tr>
<tr><td width="50%">&gt;0 / 0  = &nbsp;0x7fffffff</td><td width="50%">(正の無限大のやうなもの)</td></tr>
<tr><td width="50%">&lt;0 / 0  = -0x7fffffff</td><td width="50%">(負の無限大のやうなもの)</td></tr>
</table>
<p>{譯注: &gt;0 は正の數、&lt;0 は負の數の意味}
</p>
<p>(Vim 7.2 以前では常に 0x7fffffff だつた)
</p>
<p>64ビット數値が有效化されてゐる場合は:
</p><table>
<tr><td width="50%">&nbsp;0 / 0 &nbsp;= -0x8000000000000000</td><td width="50%">(浮動小數點數の NaN のやうなもの)</td></tr>
<tr><td width="50%">&gt;0 / 0  = &nbsp;0x7fffffffffffffff</td><td width="50%">(正の無限大のやうなもの)</td></tr>
<tr><td width="50%">&lt;0 / 0  = -0x7fffffffffffffff</td><td width="50%">(負の無限大のやうなもの)</td></tr>
</table>

<p>&rsquo;%&rsquo; の右邊(法)が 0 の場合、結果は 0 になる。
</p>
<p>これらは全て |<a href="#Funcref">Funcref</a>| には適用できない。
</p>
<a name="E804"></a><a name="index-E804"></a>
<p>. と % は浮動小數點數には適用できない。
</p>

<a name="expr7"></a><a name="index-expr7"></a>
<a name="expr7-1"></a>
<h4 class="unnumberedsubsec">expr7</h4>
<table>
<tr><td><a name="expr_002d_0021"></a><a name="index-expr_002d_0021"></a></td></tr>
<tr><td width="50%">! expr7</td><td width="50%">論理否定
<a name="expr_002dunary_002d_002d"></a><a name="index-expr_002dunary_2212_2212"></a></td></tr>
<tr><td width="50%">- expr7</td><td width="50%">單項マイナス
<a name="expr_002dunary_002d_002b"></a><a name="index-expr_002dunary_002d_002b"></a></td></tr>
<tr><td width="50%">+ expr7</td><td width="50%">單項プラス</td></tr>
</table>

<p>&rsquo;!&rsquo; 演算子では |<a href="#TRUE">TRUE</a>| は |<a href="#FALSE">FALSE</a>| に、|<a href="#FALSE">FALSE</a>| は |<a href="#TRUE">TRUE</a>| になる。&rsquo;-&rsquo; では數値の符號が反轉される。&rsquo;+&quot; では變化はない。
</p>
<p>文字列はまず數値に變換される。
</p>
<p>これら 2 つは繰り返したり混ぜたりできる。例:
</p><div class="example">
<pre class="example">!-1         == 0
!!8         == 1
--9         == 9
</pre></div>


<a name="expr8"></a><a name="index-expr8"></a>
<a name="expr8-1"></a>
<h4 class="unnumberedsubsec">expr8</h4>
<p>この式は |<a href="#expr9">expr9</a>| もしくは連續する以下の選擇方式であり、どんな順番でもよい。例として、これらはすべて可能である:
</p><div class="example">
<pre class="example">expr9[expr1].name
expr9.name[expr1]
expr9(expr1, ...)[expr1].name
</pre></div>


<a name="expr_002d_005b_005d"></a><a name="E111"></a><a name="E909"></a><a name="subscript"></a><a name="index-expr_002d_005b_005d"></a>
<a name="index-E111"></a>
<a name="index-E909"></a>
<a name="index-subscript"></a>
<a name="expr8_005bexpr1_005d-----WenZi-Lie-mataharisutonoYao-Su-"></a>
<h4 class="unnumberedsubsubsec">expr8[expr1] &nbsp;&nbsp;&nbsp;&nbsp;文字列またはリストの要素</h4>
<p>expr8 が數値か文字列ならば、この値は文字列 expr8 の第 expr1 番目のバイトからなる 1 バイトの文字列となる。expr8 は文字列、expr1 は數として扱はれる。ただし expr8 がマルチバイト文字列である場合、この値は單なるバイトコードであり、1 文字とはならないかもしれないことに注意。マルチバイト文字列に對する代はりの方法は &lsquo;byteidx()&lsquo; を參照するか、&lsquo;split()&lsquo;を使つて文字列を文字のリストに變換すれば良い。
</p>
<p>インデックスが0の場合、先頭のバイトが得られることに注意。これはC言語のやうに働く。注意:カラム番號は1から始まる。例へばカーソルの下のバイトを得るためには、次のやうにする必要がある:
</p><div class="example">
<pre class="example">:let c = getline(&quot;.&quot;)[col(&quot;.&quot;) - 1]
</pre></div>

<p>文字列の長さよりも大きなインデックスが指定された場合、結果は空文字列になる。負數のインデックスを指定すると、結果は常に空文字列になる (後方互換性のため)。最後のバイトを得るには [-1:] を使ふこと。
</p>
<p>expr8 がリスト |<a href="#List">List</a>| ならばインデックス expr1 の要素が返る。取りうるインデックスの値については |<a href="#list_002dindex">list-index</a>| を參照。インデックスが範圍を超えてゐる場合はエラーとなる。例:
</p><div class="example">
<pre class="example">:let item = mylist[-1]          &quot; 最後の要素を取得
</pre></div>

<p>一般的には、インデックスが正でリスト |<a href="#List">List</a>| の長さ以上または、負でリストの長さ ×-1 より小さいときエラーとなる。
</p>

<a name="expr_002d_005b_003a_005d"></a><a name="index-expr_002d_005b_003a_005d"></a>
<a name="expr8_005bexpr1a-_003a-expr1b_005d-----Bu-Fen-WenZi-Lie-matahaBu-Fen-risuto"></a>
<h4 class="unnumberedsubsubsec">expr8[expr1a : expr1b] &nbsp;&nbsp;&nbsp;&nbsp;部分文字列または部分リスト</h4>

<p>expr8 が數値か文字列ならば、expr1a バイトから expr1b バイトまでの部分文字列となる (兩端を含む)。expr8 は文字列として扱はれ、expr1a と expr1b は數値として扱はれる。Note マルチバイトのエンコーディングは認識しない。マルチバイト文字列のインデックスを計算する方法については |<a href="#byteidx_0028_0029">byteidx()</a>| を參照。
</p>
<p>expr1a が省略されたときは 0 となる。expr1b が省略されたときは文字列の長さ -1 となる。
</p>
<p>負數のインデックスを使ふことによつて文字列の末尾から取り出すことができる。-1 は最後の文字、-2 は最後から 2 文字目…を表す。
</p>
<p>インデックスがその文字の範圍外に出てしまつたときは、その文字は省かれる。expr1b が expr1a より小さいときは空文字列となる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let c = name[-1:]              &quot; 文字列の最後のバイト
:let c = name[-2:-2]            &quot; 文字列の最後から 2 バイト目
:let s = line(&quot;.&quot;)[4:]          &quot; 5 バイト目から末尾まで
:let s = s[:-3]                 &quot; 最後の 2 文字を削除する
</pre></div>
<a name="slice"></a><a name="index-slice"></a>
<p>expr8 がリスト |<a href="#List">List</a>| ならば、インデックス expr1a と expr1b の閒の要素からなる新しいリストとなる。すぐ上で說明した文字列の場合と同樣である。部分リスト |<a href="#sublist">sublist</a>| も參照のこと。例:
</p><div class="example">
<pre class="example">:let l = mylist[:3]             &quot; 最初の 4 個の要素
:let l = mylist[4:4]            &quot; 1 個の要素からなるリスト
:let l = mylist[:]              &quot; リストの淺いコピー
</pre></div>

<p>expr8が |<a href="#Blob">Blob</a>| ならば、インデックス expr1a と expr1b のバイト數を含む新しい |<a href="#Blob">Blob</a>| となる。例:
</p><pre class="verbatim">:let b = 0zDEADBEEF
:let bs = b[1:2]                &quot; 0zADBE
:let bs = b[:]                  &quot; 0zDEADBEEF のコピー
</pre>
<p>|<a href="#Funcref">Funcref</a>| に對して expr8[expr1] や expr8[expr1a : expr1b] を使ふとエラーになる。
</p>
<p>部分リストでスコープと變數に續くコロンとの混亂に注意してください:
</p><div class="example">
<pre class="example">mylist[n:]     &quot; 變數 n は使へる
mylist[s:]     &quot; スコープ s: を使ふとエラー！
</pre></div>


<a name="expr_002dentry"></a><a name="index-expr_002dentry"></a>
<a name="expr8_002ename-----Ci-Shu--Dictionary-noYao-Su-"></a>
<h4 class="unnumberedsubsubsec">expr8.name &nbsp;&nbsp;&nbsp;&nbsp;辭書 Dictionary の要素</h4>

<p>expr8 が辭書 |<a href="#Dictionary">Dictionary</a>| のとき、ドットをつけるとその後に書かれた名前が辭書のキーと見なされる。例: expr8[name]。
</p>
<p>名前は變數名と同じやうにアルファベットと數字だけから構成されなければならないが、數字で始まつてもよい。波括弧は使へない。
</p>
<p>ドットの前後に空白があつてはならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let dict = {&quot;one&quot;: 1, 2: &quot;two&quot;}
:echo dict.one          &quot; &quot;1&quot; を表示
:echo dict.2            &quot; &quot;two&quot; を表示
:echo dict .2           &quot; ドットの前のスペースによるエラー
</pre></div>

<blockquote>
<p><strong>Note:</strong> <br>
ドットは文字列連結にも使はれる。混亂を避けるために、文字列連結のドットの周りには必ずスペースを入れること。
</p></blockquote>


<a name="expr8_0028expr1_002c-_002e_002e_002e_0029-----Funcref-Guan-Shu-Hu-biChu-si"></a>
<h4 class="unnumberedsubsubsec">expr8(expr1, ...) &nbsp;&nbsp;&nbsp;&nbsp;Funcref 函數呼び出し</h4>

<p>expr8 が |<a href="#Funcref">Funcref</a>| 型の變數のとき、その參照する函數を呼び出す。
</p>


<a name="expr9"></a><a name="index-expr9"></a>
<a name="Shu-"></a>
<h4 class="unnumberedsubsec">數</h4>
<a name="expr_002dnumber"></a><a name="hex_002dnumber"></a><a name="octal_002dnumber"></a><a name="binary_002dnumber"></a><a name="index-expr_002dnumber"></a>
<a name="index-hex_002dnumber"></a>
<a name="index-octal_002dnumber"></a>
<a name="index-binary_002dnumber"></a>
<a name="number-----Shu-Ding-Shu-"></a>
<h4 class="unnumberedsubsubsec">number &nbsp;&nbsp;&nbsp;&nbsp;數定數</h4>

<p>10 進數、16 進數 (0x か 0X で始まる)、2 進數 (0b か 0B で始まる)、もしくは 8 進數 (0 で始まる) の數定數。
</p>
<a name="floating_002dpoint_002dformat"></a><a name="index-floating_002dpoint_002dformat"></a>
<p>浮動小數點數は次の 2 つの形式で書ける:
</p><div class="example">
<pre class="example">[-+]{N}.{M}
[-+]{N}.{M}[eE][-+]{exp}
</pre></div>

<p>ここで {N} と {M} は數値である。{N} と {M} の兩方とも省略してはならず、數値のみを含めることができる。[-+] は、省略可能なプラスまたはマイナス記號である。{exp} は指數で、10 のベキ。現在のロケールが何であれ、小數點にはドットのみを使へる。コンマは使へない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<p>例:
</p><div class="example">
<pre class="example">123.456
+0.0001
55.0
-0.123
1.234e03
1.0E-6
-3.1416e+88
</pre></div>

<p>次のものは無效である:
</p><div class="example">
<pre class="example">3.              {M} が空
1e40            .{M} がない
</pre></div>

<p>論理的根據:
</p>
<p>浮動小數點數が導入される前は、123.456 と書くと 123 と 456 の2つの數値と解釋され、それらが文字列に變換されて結合されて &quot;123456&quot; といふ文字列になつた。これは無意味であり、Vim script 內で意圖的に使はれてゐるものが見つからなかつたので、浮動小數點數の普通の表記法を用ゐるため、この後方非互換性は許容された。
</p>
<a name="float_002dpi"></a><a name="float_002de"></a><a name="index-float_002dpi"></a>
<a name="index-float_002de"></a>
<p>コピー＆ペーストしておくのに便利な値:
</p><pre class="verbatim">:let pi = 3.14159265359
:let e  = 2.71828182846
</pre><p>または、浮動小數點リテラルとして書き込むことを望まない場合は、次のやうな函數を使用することもできる:
</p><pre class="verbatim">:let pi = acos(-1.0)
:let e  = exp(1.0)
</pre><a name="floating_002dpoint_002dprecision"></a><a name="index-floating_002dpoint_002dprecision"></a>
<p>浮動小數點數の精度と範圍は、Vim とリンクしたライブラリの &quot;double&quot; の意味による。實行時にこれを變更することはできない。
</p>
<p>浮動小數點數 |<a href="#Float">Float</a>| は printf(&quot;%g&quot;, f) とするのと同樣に、小數點以下 6 桁まで表示される。表示する桁數は |<a href="#printf_0028_0029">printf()</a>| を使へば變へられる。例:
</p><div class="example">
<pre class="example">:echo printf('%.15e', atan(1))
7.853981633974483e-01
</pre></div>



<a name="string"></a><a name="String"></a><a name="expr_002dstring"></a><a name="E114"></a><a name="index-string"></a>
<a name="index-String"></a>
<a name="index-expr_002dstring"></a>
<a name="index-E114"></a>
<a name="index-WenZi-Lie-"></a>
<a name="WenZi-Lie-"></a>
<h4 class="unnumberedsubsec">文字列</h4>
<a name="expr_002dquote"></a><a name="index-expr_002dquote"></a>
<a name="g_t_0022string_0022-----WenZi-Lie-Ding-Shu-"></a>
<h4 class="unnumberedsubsubsec">&quot;string&quot; &nbsp;&nbsp;&nbsp;&nbsp;文字列定數</h4>

<blockquote>
<p><strong>Note:</strong> <br>
ダブルクォートが使はれてゐることに注意。
</p></blockquote>

<p>文字列定數には以下の特殊文字が使用できる:
</p><table>
<tr><td width="15%">\...</td><td width="85%">3 桁の 8 進數字 (例 &quot;\316&quot;)</td></tr>
<tr><td width="15%">\..</td><td width="85%">2 桁の 8 進數字 (非數字が續かなければならない)</td></tr>
<tr><td width="15%">\.</td><td width="85%">1 桁の 8 進數字 (非數字が續かなければならない)</td></tr>
<tr><td width="15%">\x..</td><td width="85%">2 桁の 16 進數字 (例 &quot;\x1f&quot;)</td></tr>
<tr><td width="15%">\x.</td><td width="85%">1 桁の 16 進數字 (16 進數字でないものが續かなければならない)</td></tr>
<tr><td width="15%">\X..</td><td width="85%">\x..に同じ</td></tr>
<tr><td width="15%">\X.</td><td width="85%">\x.に同じ</td></tr>
<tr><td width="15%">\u....</td><td width="85%">文字を 4 桁の 16 進數で表現したもので、實際の値は現在の &rsquo;<samp>encoding</samp>&rsquo; の値に依存する (例へば &quot;\u02a4&quot;)</td></tr>
<tr><td width="15%">\U....</td><td width="85%">\u と同じだが 8 桁までの 16 進數が使へる</td></tr>
<tr><td width="15%">\b</td><td width="85%">バックスペース &lt;BS&gt;</td></tr>
<tr><td width="15%">\e</td><td width="85%">エスケープ &lt;Esc&gt;</td></tr>
<tr><td width="15%">\f</td><td width="85%">フォームフィード &lt;FF&gt;</td></tr>
<tr><td width="15%">\n</td><td width="85%">改行 &lt;NL&gt;</td></tr>
<tr><td width="15%">\r</td><td width="85%">改行(キャリッジリターン) &lt;CR&gt;</td></tr>
<tr><td width="15%">\t</td><td width="85%">タブ &lt;Tab&gt;</td></tr>
<tr><td width="15%">\\</td><td width="85%">圓記號(バックスラッシュ)</td></tr>
<tr><td width="15%">\&quot;</td><td width="85%">ダブルクォート</td></tr>
<tr><td width="15%">\&lt;xxx&gt;</td><td width="85%">&quot;xxx&quot; といふ名の特殊キー。 例 &quot;\&lt;C-W&gt;&quot; は CTRL-W。これはマップで使ふためのものであり、0x80 バイトはエスケープされる。ダブルクォート文字を使ふ場合はエスケープしなければならない: &quot;&lt;M-\&quot;&gt;&quot; utf-8 文字を得るためには &lt;Char-xxxx&gt; を使はずに、上述の \uxxxx を使ふこと。</td></tr>
</table>

<blockquote>
<p><strong>Note:</strong> <br>
&quot;\xff&quot; は値 255 の 1 バイトとなる。これはエンコーディングによつては無效な値かもしれない。現在の &rsquo;<samp>encoding</samp>&rsquo; の値に應じた文字 255 を得るには &quot;\u00ff&quot; を使ふ。
</p></blockquote>

<blockquote>
<p><strong>Note:</strong> <br>
&quot;\000&quot; と &quot;\x00&quot; は强制的に文字列の終端として扱はれる。
</p></blockquote>


<a name="blob-riteraru"></a>
<h4 class="unnumberedsubsec">blob リテラル</h4>
<a name="blob_002dliteral"></a><a name="E973"></a><a name="index-blob_002dliteral"></a>
<a name="index-E973"></a>

<p>0z または 0Z で始まる任意のバイト數の 16 進數。シーケンスは偶數個の 16 進數文字でなければならない。例:
</p><pre class="verbatim">:let b = 0zFF00ED015DAF
</pre>

<a name="literal_002dstring"></a><a name="E115"></a><a name="index-literal_002dstring"></a>
<a name="index-E115"></a>
<a name="index-riteraruWenZi-Lie-"></a>
<a name="riteraruWenZi-Lie-"></a>
<h4 class="unnumberedsubsec">リテラル文字列</h4>
<a name="expr_002d_0027"></a><a name="index-expr_002d_0027"></a>
<a name="g_t_0027string_0027-----WenZi-Lie-Ding-Shu-"></a>
<h4 class="unnumberedsubsubsec">&rsquo;string&rsquo; &nbsp;&nbsp;&nbsp;&nbsp;文字列定數</h4>

<blockquote>
<p><strong>Note:</strong> <br>
シングルクォートが使はれてゐることに注意。
</p></blockquote>

<p>この文字列は文字通りに扱はれる。バックスラッシュは取り除かれないし、また特別な意味を持つたりもしない。唯一の例外は、2 つのシングルクォートで 1 つのシングルクォートになることである。
</p>
<p>シングルクォートの文字列は、バックスラッシュを2重にしなくてよいため、正規表現パターンを表すのに便利である。以下の 2 つのコマンドは同値である:
</p><div class="example">
<pre class="example">if a =~ &quot;\\s*&quot;
if a =~ '\s*'
</pre></div>


<a name="expr_002doption"></a><a name="E112"></a><a name="E113"></a><a name="index-expr_002doption"></a>
<a name="index-E112"></a>
<a name="index-E113"></a>
<a name="index-opusiyon"></a>
<a name="opusiyon-3"></a>
<h4 class="unnumberedsubsec">オプション</h4>
<table>
<tr><td width="30%">&amp;option</td><td width="70%">オプション變數、ローカルなものが優先</td></tr>
<tr><td width="30%">&amp;g:option</td><td width="70%">グローバルオプション變數</td></tr>
<tr><td width="30%">&amp;l:option</td><td width="70%">ローカルオプション變數</td></tr>
</table>

<p>例:
</p><div class="example">
<pre class="example">echo &quot;タブストップは &quot; . &amp;tabstop . &quot; です&quot;
if &amp;insertmode
</pre></div>

<p>ここにはあらゆるオプション名を使ふことができる。|<a href="options_002etxt.html#options">options</a>| を參照。ローカル變數を使はうとして、實際にはバッファローカルもウィンドウローカルも存在しない場合には、グローバル變數が利用される。
</p>

<a name="expr_002dregister"></a><a name="g_t_0040r"></a><a name="index-expr_002dregister"></a>
<a name="index-_0040r"></a>
<a name="index-rezisuta"></a>
<a name="rezisuta"></a>
<h4 class="unnumberedsubsec">レジスタ</h4>
<a name="g_t_0040r-----rezisuta-_0027r_0027-noZhi-"></a>
<h4 class="unnumberedsubsubsec">@r &nbsp;&nbsp;&nbsp;&nbsp;レジスタ &rsquo;r&rsquo; の値</h4>

<p>名前付きレジスタの中身を1つの文字列として得る。必要なところには改行文字が插入されてゐる。無名レジスタの中身を取得するには @&quot; か @@ を使ふ。利用可能なレジスタの說明については |<a href="change_002etxt.html#registers">registers</a>| を參照。
</p>
<p>レジスタ &rsquo;=&rsquo; を使ふと、式の値でなく式そのものを得る。それを評價するには |<a href="#eval_0028_0029">eval()</a>| を使ふ。
</p>

<a name="expr_002dnesting"></a><a name="E110"></a><a name="index-expr_002dnesting"></a>
<a name="index-E110"></a>
<a name="index-Ru-reZi-"></a>
<a name="Ru-reZi-"></a>
<h4 class="unnumberedsubsec">入れ子</h4>
<a name="g_t_0028expr1_0029-----Shi-noRu-reZi-"></a>
<h4 class="unnumberedsubsubsec">(expr1) &nbsp;&nbsp;&nbsp;&nbsp;式の入れ子</h4>


<a name="expr_002denv"></a><a name="index-expr_002denv"></a>
<a name="index-Huan-Jing-Bian-Shu-"></a>
<a name="Huan-Jing-Bian-Shu-"></a>
<h4 class="unnumberedsubsec">環境變數</h4>
<a name="g_t_0024VAR-----Huan-Jing-Bian-Shu-"></a>
<h4 class="unnumberedsubsubsec">$VAR &nbsp;&nbsp;&nbsp;&nbsp;環境變數</h4>

<p>環境變數の文字列。定義されてゐない環境變數を指定した場合、結果は空文字列。
</p>
<p>&lsquo;<code>getenv()</code>&lsquo; と &lsquo;<code>setenv()</code>&lsquo; 函數も使用でき、英數字以外の名前を持つ環境變數に對して機能する。&lsquo;<code>environ()</code>&lsquo; 函數は、すべての環境變數を含む辭書を取得するために使用できる。
</p>

<a name="expr_002denv_002dexpand"></a><a name="index-expr_002denv_002dexpand"></a>
<blockquote>
<p><strong>Note:</strong> <br>
$VAR を直接使用した場合と expand(&quot;$VAR&quot;) を使用した場合では、動作に違ひがあることに注意。直接使用した場合には、現在の Vim のセッション中で既知の値に展開されるだけである。expand() を使用した場合、まづ最初に Vim のセッション中で既知の値に展開される。それが失敗した場合、變數の展開にシェルが使用されることになる。これは遲くはなるが、シェルの知りうる全ての變數を展開することができる。例:
</p><div class="example">
<pre class="example">:echo $shell
:echo expand(&quot;$shell&quot;)
</pre></div>
<p>最初の 1 つは恐らく何も返つてこず、2 つ目は $shell の値が返つてくるだらう (貴方のシェルがそれをサポートしてゐるなら)
</p></blockquote>


<a name="expr_002dvariable"></a><a name="index-expr_002dvariable"></a>
<a name="index-Nei-Bu-Bian-Shu-"></a>
<a name="Nei-Bu-Bian-Shu-"></a>
<h4 class="unnumberedsubsec">內部變數</h4>
<a name="variable-----Nei-Bu-Bian-Shu-"></a>
<h4 class="unnumberedsubsubsec">variable &nbsp;&nbsp;&nbsp;&nbsp;內部變數</h4>
<p>以下の |<a href="#internal_002dvariables">internal-variables</a>| を參照。
</p>

<a name="expr_002dfunction"></a><a name="E116"></a><a name="E118"></a><a name="E119"></a><a name="E120"></a><a name="index-expr_002dfunction"></a>
<a name="index-E116"></a>
<a name="index-E118"></a>
<a name="index-E119"></a>
<a name="index-E120"></a>
<a name="index-Guan-Shu-Hu-Chu-"></a>
<a name="Guan-Shu-Hu-Chu-"></a>
<h4 class="unnumberedsubsec">函數呼出</h4>
<a name="function_0028expr1_002c-_002e_002e_002e_0029-----Guan-Shu-Hu-Chu-"></a>
<h4 class="unnumberedsubsubsec">function(expr1, ...) &nbsp;&nbsp;&nbsp;&nbsp;函數呼出</h4>
<p>以下の |<a href="#functions">functions</a>| を參照。
</p>

<a name="expr_002dlambda"></a><a name="lambda"></a><a name="index-expr_002dlambda"></a>
<a name="index-lambda"></a>
<a name="index-ramudaShi-"></a>
<a name="ramudaShi-"></a>
<h4 class="unnumberedsubsec">ラムダ式</h4>
<a name="g_t_007bargs-_002d_003e-expr1_007d-----ramudaShi-"></a>
<h4 class="unnumberedsubsubsec">{args -&gt; expr1} &nbsp;&nbsp;&nbsp;&nbsp;ラムダ式</h4>

<p>ラムダ式は、|<a href="#expr1">expr1</a>| を評價した結果を返す新しい無名函數を作成する。ラムダ式は以下の點がユーザー定義函數 |<a href="#user_002dfunctions">user-functions</a>| と異なる:
</p>
<ol>
<li> ラムダ式の本體は單一の式 |<a href="#expr1">expr1</a>| であり、|<a href="intro_002etxt.html#Ex">Ex</a>| コマンド列ではない。
</li><li> 引數に前置詞 &quot;a:&quot; を使用しない。例:
<div class="example">
<pre class="example">:let F = {arg1, arg2 -&gt; arg1 - arg2}
:echo F(5, 2)
3
</pre></div>
</li></ol>

<p>引數は任意である。例:
</p><div class="example">
<pre class="example">:let F = {-&gt; 'error function'}
:echo F()
error function
</pre></div>
<a name="closure"></a><a name="index-closure"></a>
<p>ラムダ式は外側のスコープの變數と引數にアクセスできる。これはよくクロージャと呼ばれる。以下の例ではラムダの中で &quot;i&quot; と &quot;a:arg&quot; が使はれてゐるが、これらは函數のスコープにすでに存在する。これらは函數から拔けても有效であり續ける:
</p><div class="example">
<pre class="example">:function Foo(arg)
:  let i = 3
:  return {x -&gt; x + i - a:arg}
:endfunction
:let Bar = Foo(4)
:echo Bar(6)
5
</pre></div>

<blockquote>
<p><strong>Note:</strong> <br>
これが正しく機能するためには、ラムダが定義される前の外側のスコープ內にそれらの變數が存在してゐなければならないことに注意。|<a href="#g_t_003afunc_002dclosure">:func-closure</a>| も參照。
</p></blockquote>

<p>ラムダとクロージャのサポートは以下のやうに判定できる:
</p><div class="example">
<pre class="example">if has('lambda')
</pre></div>

<p>|<a href="#sort_0028_0029">sort()</a>|, |<a href="#map_0028_0029">map()</a>|, |<a href="#filter_0028_0029">filter()</a>| とともにラムダ式を使ふ例:
</p><div class="example">
<pre class="example">:echo map([1, 2, 3], {idx, val -&gt; val + 1})
[2, 3, 4]
:echo sort([3,7,2,1,4], {a, b -&gt; a - b})
[1, 2, 3, 4, 7]
</pre></div>

<p>ラムダ式は、チャネル、ジョブ、タイマーを使ふ際にも有用である:
</p><div class="example">
<pre class="example">:let timer = timer_start(500,
                \ {-&gt; execute(&quot;echo 'Handler called'&quot;, &quot;&quot;)},
                \ {'repeat': 3})
</pre></div>
<div class="example">
<pre class="example">Handler called
Handler called
Handler called
</pre></div>

<blockquote>
<p><strong>Note:</strong> <br>
Ex コマンドを實行するためにどのやうに execute() を使つてゐるかに注意。醜いが。
</p></blockquote>


<p>ラムダ式は &rsquo;&lt;lambda&gt;42&rsquo; のやうな內部名を持つてゐる。もしラムダ式でエラーが發生した場合には、以下のコマンドでどのラムダ式でエラーが起きたかを調べることができる:
</p><div class="example">
<pre class="example">:function {'&lt;lambda&gt;42'}
</pre></div>
<p>|<a href="#numbered_002dfunction">numbered-function</a>| も參照。
</p>
<a name="internal_002dvariables"></a><a name="E461"></a><a name="index-internal_002dvariables"></a>
<a name="index-E461"></a>
<a name="index-Nei-Bu-Bian-Shu--1"></a>
<a name="g_t3_002e-Nei-Bu-Bian-Shu-"></a>
<h3 class="section">3. 內部變數</h3>

<p>內部變數の名前には文字と、數字とアンダーバー (&rsquo;_&rsquo;) を使ふことができる。しかし數字で始めることはできない。波括弧を使ふこともできる。詳細は |<a href="#curly_002dbraces_002dnames">curly-braces-names</a>| を參照。
</p>
<p>內部變數は &quot;:let&quot; コマンドで作成される |<a href="#g_t_003alet">:let</a>|。&quot;<code>:unlet</code>&quot; コマンドで明示的に內部變數を破毀することができる |<a href="#g_t_003aunlet">:unlet</a>|。內部變數に使はれてない名前か、既に破毀された內部變數を使ふとエラーとなる。
</p>
<p>變數には幾つもの名前空閒が存在する。實際にどれが利用されるかは、どのやうな前置子が使はれたかで決まる:
</p>
<table>
<tr><td width="30%"></td><td width="10%">(無し)</td><td width="60%">函數の中では函數ローカル、それ以外ではグローバル</td></tr>
<tr><td width="30%">|<a href="#buffer_002dvariable">buffer-variable</a>|</td><td width="10%">b:</td><td width="60%">現在のバッファにローカル</td></tr>
<tr><td width="30%">|<a href="#window_002dvariable">window-variable</a>|</td><td width="10%">w:</td><td width="60%">現在のウィンドウにローカル</td></tr>
<tr><td width="30%">|<a href="#tabpage_002dvariable">tabpage-variable</a>|</td><td width="10%">t:</td><td width="60%">現在のタブページにローカル</td></tr>
<tr><td width="30%">|<a href="#global_002dvariable">global-variable</a>|</td><td width="10%">g:</td><td width="60%">グローバル</td></tr>
<tr><td width="30%">|<a href="#local_002dvariable">local-variable</a>|</td><td width="10%">l:</td><td width="60%">函數にローカル</td></tr>
<tr><td width="30%">|<a href="#script_002dvariable">script-variable</a>|</td><td width="10%">s:</td><td width="60%">|<a href="repeat_002etxt.html#g_t_003asource">:source</a>| された Vim script にローカル</td></tr>
<tr><td width="30%">|<a href="#function_002dargument">function-argument</a>|</td><td width="10%">a:</td><td width="60%">函數の引數(函數內のみ)</td></tr>
<tr><td width="30%">|<a href="#vim_002dvariable">vim-variable</a>|</td><td width="10%">v:</td><td width="60%">グローバル、Vim があらかじめ定義</td></tr>
</table>

<p>これらのスコープそのものに辭書 |<a href="#Dictionary">Dictionary</a>| を通じてアクセスできる。例へば、全てのスクリプトローカル變數を削除するには次のやうにする:
</p><div class="example">
<pre class="example">:for k in keys(s:)
:    unlet s:[k]
:endfor
</pre></div>
<a name="buffer_002dvariable"></a><a name="b_003avar"></a><a name="b_003a"></a><a name="index-buffer_002dvariable"></a>
<a name="index-b_003avar"></a>
<a name="index-b_003a"></a>
<p>&quot;b:&quot; で始まる變數名は、カレントバッファに局所的な變數を意味する。このやうに 1 つ 1 つのバッファ每に、變數 &quot;b:foo&quot; を別々に使用することができる。この種の變數はバッファが掃除 (wipe out) された時や、|<a href="windows_002etxt.html#g_t_003abdelete">:bdelete</a>| で削除された時に一緖に削除される。
</p>
<p>1 つのバッファローカル變數が定義濟:
</p><dl compact="compact">
<dd><a name="b_003achangedtick"></a><a name="changetick"></a><a name="index-b_003achangedtick"></a>
<a name="index-changetick"></a>
</dd>
<dt>b:changedtick</dt>
<dd><p>現在のバッファに對する變更の總回數。變更を行ふたびに增加する。これには 1 回のアンドゥ操作もカウントされる。バッファ書き込み時に &rsquo;<samp>modified</samp>&rsquo; をリセットすることもカウントされる。
</p>
<p>この變數はバッファに變更が行はれた際にだけアクションを起こしたい時に利用できる。例:
</p><div class="example">
<pre class="example">:if my_changedtick != b:changedtick
:   let my_changedtick = b:changedtick
:   call My_Update()
:endif
</pre></div>
<p>b:changedtick 變數を變更したり削除することはできない。
</p></dd>
</dl>

<a name="window_002dvariable"></a><a name="w_003avar"></a><a name="w_003a"></a><a name="index-window_002dvariable"></a>
<a name="index-w_003avar"></a>
<a name="index-w_003a"></a>
<p>&quot;w:&quot; で始まる變數名は、カレントウィンドウにローカルな變數を意味する。これはウィンドウを閉ぢるときに破毀される。
</p>
<a name="tabpage_002dvariable"></a><a name="t_003avar"></a><a name="t_003a"></a><a name="index-tabpage_002dvariable"></a>
<a name="index-t_003avar"></a>
<a name="index-t_003a"></a>
<p>&quot;t:&quot; で始まる變數名は、カレントタブページにローカルな變數を意味する。これはタブページを閉ぢるときに破毀される。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bwindows">+windows</a>| 機能つきでコンパイルしたときのみ利用可能}
</p>
<a name="global_002dvariable"></a><a name="g_003avar"></a><a name="g_003a"></a><a name="index-global_002dvariable"></a>
<a name="index-g_003avar"></a>
<a name="index-g_003a"></a>
<p>函數の中からグローバル變數へアクセスするには、&quot;g:&quot; を付けた名前を使用する。これが省略された場合は函數ローカルな變數にアクセスする。ただし &quot;g:&quot; 自體は、函數の外でも使ふことができる。
</p>
<a name="local_002dvariable"></a><a name="l_003avar"></a><a name="l_003a"></a><a name="index-local_002dvariable"></a>
<a name="index-l_003avar"></a>
<a name="index-l_003a"></a>
<p>函數の中からそのローカル變數にアクセスするには何も前置しなければ良い。明示的に &quot;l:&quot; を付けることも可能である。ただし &quot;l:&quot; をつけないと豫約されてゐる變數名と衝突してしまふことがある。例: &quot;count&quot; とすると &quot;v:count&quot; を參照してしまふ。&quot;l:count&quot; とすればローカル變數 count を參照できる。
</p>
<a name="script_002dvariable"></a><a name="s_003avar"></a><a name="index-script_002dvariable"></a>
<a name="index-s_003avar"></a>
<p>Vim script 內では &quot;s:&quot; で始まる變數名を使ふことができる。これはスクリプトについてローカルであり、スクリプトの外部からはアクセスできない。
</p>
<p>スクリプト變數は次の場所で使へる:
</p><ul>
<li> そのスクリプトを source してゐる閒に實行されるコマンド
</li><li> そのスクリプト內で定義される函數
</li><li> そのスクリプト內で定義されるオートコマンド
</li><li> そのスクリプト內で定義される函數やオートコマンドで定義される函數やオートコマンド(再歸的)
</li><li> そのスクリプト內で定義されるユーザー定義コマンド
</li></ul>
<p>次の場面では使へない:
</p><ul>
<li> そのスクリプトから source される他のスクリプト
</li><li> マッピング
</li><li> メニュー
</li><li> など。
</li></ul>

<p>グローバル變數との衝突を避けるにはスクリプト變數を使ふ。次の例を參照:
</p>
<pre class="verbatim">let s:counter = 0
function MyCounter()
  let s:counter = s:counter + 1
  echo s:counter
endfunction
command Tick call MyCounter()
</pre>
<p>ここで他のスクリプトから &quot;Tick&quot; を實行してみると、そのスクリプト內の變數 &quot;s:counter&quot; は變化せず、&quot;Tick&quot; が定義されたスクリプト內の &quot;s:counter&quot; だけが變化する。
</p>
<p>これと同じことをするもう 1 つの例:
</p><div class="example">
<pre class="example">let s:counter = 0
command Tick let s:counter = s:counter + 1 | echo s:counter
</pre></div>

<p>函數呼び出しやユーザー定義コマンドを實行するとき、スクリプト變數のコンテキストはその函數、コマンドが定義されたスクリプトとなる。
</p>
<p>函數の中で函數を定義した場合、スクリプト變數も共有される。例:
</p>
<pre class="verbatim">let s:counter = 0
function StartCounting(incr)
  if a:incr
    function MyCounter()
      let s:counter = s:counter + 1
    endfunction
  else
    function MyCounter()
      let s:counter = s:counter - 1
    endfunction
  endif
endfunction
</pre>
<p>この StartCounting() を呼ぶと、カウントアップかカウントダウンのどちらかを行ふ函數 MyCounter() を定義する。StartCounting() がどこで呼ばれたかに關係なく、MyCounter() の中では變數 s:counter にアクセスできる。
</p>
<p>同じスクリプトが再度讀み込まれた場合、同一のスクリプト變數が使はれる。スクリプト變數は Vim が終了するまで存續する。以下の例はカウンタを保持する:
</p>
<pre class="verbatim">if !exists(&quot;s:counter&quot;)
  let s:counter = 1
  echo &quot;script executed for the first time&quot;
else
  let s:counter = s:counter + 1
  echo &quot;script executed &quot; . s:counter . &quot; times now&quot;
endif
</pre>
<blockquote>
<p><strong>Note:</strong> <br>
これはつまり、ファイルタイププラグインはバッファごとにスクリプト變數を 1 セット持つのではないといふことを意味する。そのやうな目的にはバッファローカル變數 |<a href="#b_003avar">b:var</a>| を使ふこと。
</p></blockquote>


<a name="vim_002dvariable"></a><a name="v_003avar"></a><a name="v_003a"></a><a name="E963"></a><a name="index-vim_002dvariable"></a>
<a name="index-v_003avar"></a>
<a name="index-v_003a"></a>
<a name="index-E963"></a>
<a name="index-Vim-noDing-Yi-Ji-Bian-Shu-"></a>
<a name="Vim-noDing-Yi-Ji-Bian-Shu-_003a"></a>
<h4 class="unnumberedsubsec">Vim の定義濟變數:</h4>

<p>一部の變數はユーザーが設定できるが、型を變更することはできない。
</p>
<dl compact="compact">
<dd><a name="v_003abeval_005fcol"></a><a name="beval_005fcol_002dvariable"></a><a name="index-v_003abeval_005fcol"></a>
<a name="index-beval_005fcol_002dvariable"></a>
</dd>
<dt>v:beval_col</dt>
<dd><p>マウスポインタがある桁の桁番號。|<a href="#v_003abeval_005flnum">v:beval_lnum</a>| 行目のバイトインデックスである。オプション &rsquo;<samp>balloonexpr</samp>&rsquo; を評價してゐる最中のみ有效。
</p>
<a name="v_003abeval_005fbufnr"></a><a name="beval_005fbufnr_002dvariable"></a><a name="index-v_003abeval_005fbufnr"></a>
<a name="index-beval_005fbufnr_002dvariable"></a>
</dd>
<dt>v:beval_bufnr</dt>
<dd><p>マウスポインタがあるバッファの番號。オプション &rsquo;<samp>balloonexpr</samp>&rsquo; を評價してゐる最中のみ有效。
</p>
<a name="v_003abeval_005flnum"></a><a name="beval_005flnum_002dvariable"></a><a name="index-v_003abeval_005flnum"></a>
<a name="index-beval_005flnum_002dvariable"></a>
</dd>
<dt>v:beval_lnum</dt>
<dd><p>マウスポインタがある行の行番號。オプション &rsquo;<samp>balloonexpr</samp>&rsquo; を評價してゐる最中のみ有效。
</p>
<a name="v_003abeval_005ftext"></a><a name="beval_005ftext_002dvariable"></a><a name="index-v_003abeval_005ftext"></a>
<a name="index-beval_005ftext_002dvariable"></a>
</dd>
<dt>v:beval_text</dt>
<dd><p>マウスポインタの下もしくは後ろにあるテキスト。C プログラムのデバッグのために有用。&rsquo;<samp>iskeyword</samp>&rsquo; が適用されるが、マウスポインタの下より前にあるドットと &quot;-&gt;&quot; は含まれる。マウスポインタが &rsquo;]&rsquo; の上にあるときは、そこから對應する &rsquo;[&rsquo; とその前にあるテキストまでが含まれる。マウスポインタが 1 行に收まるビジュアル領域の上にあるときはその選擇領域となる。|<a href="cmdline_002etxt.html#g_t_003ccexpr_003e">&lt;cexpr&gt;</a>| も參照。
</p>
<p>オプション &rsquo;<samp>balloonexpr</samp>&rsquo; を評價してゐる最中のみ有效。
</p>
<a name="v_003abeval_005fwinnr"></a><a name="beval_005fwinnr_002dvariable"></a><a name="index-v_003abeval_005fwinnr"></a>
<a name="index-beval_005fwinnr_002dvariable"></a>
</dd>
<dt>v:beval_winnr</dt>
<dd><p>マウスポインタがあるウィンドウの番號。オプション &rsquo;<samp>balloonexpr</samp>&rsquo; を評價してゐる最中のみ有效。1 番目のウィンドウの番號はゼロである (他の場所でのウィンドウ番號と異なつてゐる)。
</p>
<a name="v_003abeval_005fwinid"></a><a name="beval_005fwinid_002dvariable"></a><a name="index-v_003abeval_005fwinid"></a>
<a name="index-beval_005fwinid_002dvariable"></a>
</dd>
<dt>v:beval_winid</dt>
<dd><p>マウスポインタがあるウィンドウのウィンドウ ID |<a href="windows_002etxt.html#window_002dID">window-ID</a>|。それ以外は v:beval_winnr と同樣。
</p>
<a name="v_003achar"></a><a name="char_002dvariable"></a><a name="index-v_003achar"></a>
<a name="index-char_002dvariable"></a>
</dd>
<dt>v:char</dt>
<dd><p>&rsquo;<samp>formatexpr</samp>&rsquo; を評價してゐるときの引數。また、短縮入力 |<a href="map_002etxt.html#g_t_003amap_002d_003cexpr_003e">:map-&lt;expr&gt;</a>| で &lt;expr&gt; を指定してゐるとき、タイプされた文字を保持する。これは |<a href="autocmd_002etxt.html#InsertCharPre">InsertCharPre</a>| と |<a href="autocmd_002etxt.html#InsertEnter">InsertEnter</a>| イベントでも使はれる。
</p>
<a name="v_003acharconvert_005ffrom"></a><a name="charconvert_005ffrom_002dvariable"></a><a name="index-v_003acharconvert_005ffrom"></a>
<a name="index-charconvert_005ffrom_002dvariable"></a>
</dd>
<dt>v:charconvert_from</dt>
<dd><p>變換しようとしてゐるファイルの文字エンコーディング名。オプション &rsquo;<samp>charconvert</samp>&rsquo; を評價してゐる最中のみ有效。
</p>
<a name="v_003acharconvert_005fto"></a><a name="charconvert_005fto_002dvariable"></a><a name="index-v_003acharconvert_005fto"></a>
<a name="index-charconvert_005fto_002dvariable"></a>
</dd>
<dt>v:charconvert_to</dt>
<dd><p>變換後のファイルの文字エンコーディング名。オプション &rsquo;<samp>charconvert</samp>&rsquo; を評價してゐる最中のみ有效。
</p>
<a name="v_003acmdarg"></a><a name="cmdarg_002dvariable"></a><a name="index-v_003acmdarg"></a>
<a name="index-cmdarg_002dvariable"></a>
</dd>
<dt>v:cmdarg</dt>
<dd><p>2 つの目的のために使はれる:
</p><ol>
<li> ファイルの讀み書きコマンドに與へられる餘分な引數。現在のところ &quot;++enc=&quot; と &quot;++ff=&quot; がそれである。讀み書きコマンドに對するオートコマンドイベントが發生する前にこの變數が代入される。その讀み書きコマンドの後に直接この變數を連結できるやうに、先頭にスペースがついてゐる。
<blockquote>
<p><strong>Note:</strong> <br>
ここには &quot;+cmd&quot; 引數は含まれてゐない。どちらにしろそれは實行されるからである。
</p></blockquote>
</li><li> &quot;<code>:hardcopy</code>&quot; で PostScript ファイルを印刷するとき、これが &quot;<code>:hardcopy</code>&quot; への引數になる。&rsquo;<samp>printexpr</samp>&rsquo; の中で使ふことができる。
</li></ol>

<a name="v_003acmdbang"></a><a name="cmdbang_002dvariable"></a><a name="index-v_003acmdbang"></a>
<a name="index-cmdbang_002dvariable"></a>
</dd>
<dt>v:cmdbang</dt>
<dd><p>v:cmdarg と同じく讀み書きコマンドを實行したとき設定される。讀み書きコマンドに &quot;!&quot; が使はれたときは 1 となり、使はれてゐなければ 0 となる。
</p><blockquote>
<p><strong>Note:</strong> <br>
オートコマンドの中でのみ利用可能なことに注意。ユーザー定義コマンドでは |<a href="map_002etxt.html#g_t_003cbang_003e">&lt;bang&gt;</a>| を使へば同じことができる。
</p></blockquote>

<a name="v_003acompleted_005fitem"></a><a name="completed_005fitem_002dvariable"></a><a name="index-v_003acompleted_005fitem"></a>
<a name="index-completed_005fitem_002dvariable"></a>
</dd>
<dt>v:completed_item</dt>
<dd><p>最も最近補完された單語が含まれた |<a href="insert_002etxt.html#complete_002ditems">complete-items</a>| の |<a href="#Dictionary">Dictionary</a>| が |<a href="autocmd_002etxt.html#CompleteDone">CompleteDone</a>| イベント後に設定される。補完に失敗した時、その |<a href="#Dictionary">Dictionary</a>| は空である。
</p>
<a name="v_003acount"></a><a name="count_002dvariable"></a><a name="index-v_003acount"></a>
<a name="index-count_002dvariable"></a>
</dd>
<dt>v:count</dt>
<dd><p>最後に實行されたノーマルモードコマンドに渡されたカウント數。マッピングの前のカウントを取得するのに使用できる。讀出し專用。使用例:
</p><div class="example">
<pre class="example">:map _x :&lt;C-U&gt;echo &quot;the count is &quot; . v:count&lt;CR&gt;
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
&lt;C-U&gt;は、カウントの後に &rsquo;:&rsquo; をタイプした時に示される行範圍指定を削除するために必要となる。&quot;3d2w&quot; のやうにカウントが 2 個指定された場合、その數が掛けられる。よつて &quot;d6w&quot; となる。オプション &rsquo;<samp>formatexpr</samp>&rsquo; を評價するためにも使はれる。|<a href="#scriptversion">scriptversion</a>| が 3 以降でなければ、&quot;count&quot; も、以前の版の Vim との互換性の爲に動作する。
</p></blockquote>

<a name="v_003acount1"></a><a name="count1_002dvariable"></a><a name="index-v_003acount1"></a>
<a name="index-count1_002dvariable"></a>
</dd>
<dt>v:count1</dt>
<dd><p>&quot;v:count&quot; と同じだが、カウントが指定されなかつた時の既定値が 1 となる。
</p>
<a name="v_003actype"></a><a name="ctype_002dvariable"></a><a name="index-v_003actype"></a>
<a name="index-ctype_002dvariable"></a>
</dd>
<dt>v:ctype</dt>
<dd><p>文字に關する實行環境の現在のロケール設定。これを使へば Vim script 內で現在のロケール設定に對應できるやうになる。技術的な詳細: LC_CTYPE に等しい。ロケールを使用してゐないときは &quot;C&quot; になる。この變數を設定するには |<a href="mlang_002etxt.html#g_t_003alanguage">:language</a>| コマンドを使ふこと。直接設定することはできない。|<a href="mlang_002etxt.html#multi_002dlang">multi-lang</a>| を參照。
</p>
<a name="v_003adying"></a><a name="dying_002dvariable"></a><a name="index-v_003adying"></a>
<a name="index-dying_002dvariable"></a>
</dd>
<dt>v:dying</dt>
<dd><p>通常時は 0。致命的なシグナルを受信したとき 1 が代入される。複數のシグナルを受信すると値が增加していく。オートコマンド內で Vim が正常に終了するかチェックするために使へる。{Unix でのみ動作}
</p>
<p>例:
</p><pre class="verbatim">:au VimLeave * if v:dying | echo &quot;\nAAAAaaaarrrggghhhh!!!\n&quot; | endif
</pre><blockquote>
<p><strong>Note:</strong> <br>
v:dying が 1 のときに別の致命的なシグナルを受信した場合は VimLeave 自動コマンドは實行されない。
</p></blockquote>

<a name="v_003aerrmsg"></a><a name="errmsg_002dvariable"></a><a name="index-v_003aerrmsg"></a>
<a name="index-errmsg_002dvariable"></a>
</dd>
<dt>v:errmsg</dt>
<dd><p>最後に表示されたエラーメッセージ。この變數は代入することが許されてゐる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let errmsg = &quot;&quot;
:next
:if (errmsg != &quot;&quot;)
:  ...
</pre></div>
<p>|<a href="#scriptversion">scriptversion</a>| が 3 以降でなければ、&quot;errmsg&quot; も、以前の版の Vim との互換性の爲に動作する。
</p>
<a name="v_003aerrors"></a><a name="errors_002dvariable"></a><a name="assert_002dreturn"></a><a name="index-v_003aerrors"></a>
<a name="index-errors_002dvariable"></a>
<a name="index-assert_002dreturn"></a>
</dd>
<dt>v:errors</dt>
<dd><p>|<a href="#assert_005ftrue_0028_0029">assert_true()</a>| のやうな、テスト用函數によつて見つかつたエラー。
</p>
<p>これは文字列のリストである。テスト用函數はテストに失敗した時にエラーを末尾に追加する。戾りり値が示すもの: 要素が v:errors に追加された場合 1 が返る。それ以外では 0 が返る。
</p>
<p>古い結果を削除する方法はこの變數を空にする:
</p><div class="example">
<pre class="example">:let v:errors = []
</pre></div>
<p>たとへ |<a href="#v_003aerrors">v:errors</a>| にリスト以外のいかなる値をセットしたとしても、(次に實行される時に) テスト用函數によつて空のリストが設定 (上書き) される。
</p>
<a name="v_003aevent"></a><a name="event_002dvariable"></a><a name="index-v_003aevent"></a>
<a name="index-event_002dvariable"></a>
</dd>
<dt>v:event</dt>
<dd><p>現在の |<a href="autocmd_002etxt.html#autocommand">autocommand</a>| に關する情報を含む辭書。この辭書は |<a href="autocmd_002etxt.html#autocommand">autocommand</a>| が終了したときに空にされる。獨立したコピーの取得方法については |<a href="#dict_002didentity">dict-identity</a>| を參照。
</p>
<a name="v_003aexception"></a><a name="exception_002dvariable"></a><a name="index-v_003aexception"></a>
<a name="index-exception_002dvariable"></a>
</dd>
<dt>v:exception</dt>
<dd><p>最も直近に捕捉され、まだ終了してゐない例外の値。|<a href="#v_003athrowpoint">v:throwpoint</a>| と |<a href="#throw_002dvariables">throw-variables</a>| を參照。
</p>
<p>例:
</p><div class="example">
<pre class="example">:try
:  throw &quot;oops&quot;
:catch /.*/
:  echo &quot;caught&quot; v:exception
:endtry
</pre></div>
<p>出力: &quot;caught oops&quot;.
</p>
<a name="v_003afalse"></a><a name="false_002dvariable"></a><a name="index-v_003afalse"></a>
<a name="index-false_002dvariable"></a>
</dd>
<dt>v:false</dt>
<dd><p>數値 0。JSON では &quot;false&quot; として使はれる。|<a href="#json_005fencode_0028_0029">json_encode()</a>| を參照。
</p>
<p>文字列として使はれた時、これは &quot;v:false&quot; として評價される。
</p><div class="example">
<pre class="example">echo v:false
v:false
</pre></div>
<p>これは eval() がその文字列をパースしたときに、元の値に戾せるやうにするためである。讀出し專用。
</p>
<a name="v_003afcs_005freason"></a><a name="fcs_005freason_002dvariable"></a><a name="index-v_003afcs_005freason"></a>
<a name="index-fcs_005freason_002dvariable"></a>
</dd>
<dt>v:fcs_reason</dt>
<dd><p>|<a href="autocmd_002etxt.html#FileChangedShell">FileChangedShell</a>| イベントが發生した理由。オートコマンドの中で何をすべきかや v:fcs_choice に何を代入すべきかを決めるために使ふ。値は次のどれかとなる:
</p><table>
<tr><td width="20%">deleted</td><td width="80%">もはやファイルが存在しない</td></tr>
<tr><td width="20%">conflict</td><td width="80%">ファイルの內容、モード、タイムスタンプが變化してをり、バッファが變更されてゐる狀態。</td></tr>
<tr><td width="20%">changed</td><td width="80%">ファイルの內容が變化してゐる</td></tr>
<tr><td width="20%">mode</td><td width="80%">ファイルのモードが變化してゐる</td></tr>
<tr><td width="20%">time</td><td width="80%">タイムスタンプだけが變化してゐる</td></tr>
</table>

<a name="v_003afcs_005fchoice"></a><a name="fcs_005fchoice_002dvariable"></a><a name="index-v_003afcs_005fchoice"></a>
<a name="index-fcs_005fchoice_002dvariable"></a>
</dd>
<dt>v:fcs_choice</dt>
<dd><p>|<a href="autocmd_002etxt.html#FileChangedShell">FileChangedShell</a>| イベントが發生した後に何をすべきかを表す。オートコマンドの中で、そのバッファに對して何をすべきかを指示するために使ふ。
</p><table>
<tr><td width="20%">reload</td><td width="80%">バッファを讀み直す (バッファが削除されてゐる場合には效果がない)。</td></tr>
<tr><td width="20%">ask</td><td width="80%">何をすべきかをユーザーに問ひ合はせる。これはこのオートコマンドがない場合と同じである。ただしタイムスタンプだけが變化してゐるときは何もしない。</td></tr>
<tr><td width="20%">&lt;empty&gt;</td><td width="80%">何もしない。オートコマンドの中だけで必要なことは全て行つてしまつてゐるといふ場合にこの値を代入する。</td></tr>
</table>
<p>既定値は &lt;empty&gt;。これら以外の (無效な) 値が代入されたときは空のときと同じ動作になり、警告メッセージは表示されない。
</p>
<a name="v_003afname_005fin"></a><a name="fname_005fin_002dvariable"></a><a name="index-v_003afname_005fin"></a>
<a name="index-fname_005fin_002dvariable"></a>
</dd>
<dt>v:fname_in</dt>
<dd><p>入力ファイルの名前。以下のオプションを評價してゐる最中のみ有效:
</p><table>
<thead><tr><th width="30%">オプション</th><th width="70%">このファイル名の意味</th></tr></thead>
<tr><td width="30%">&rsquo;<samp>charconvert</samp>&rsquo;</td><td width="70%">變換するファイル</td></tr>
<tr><td width="30%">&rsquo;<samp>diffexpr</samp>&rsquo;</td><td width="70%">元のファイル</td></tr>
<tr><td width="30%">&rsquo;<samp>patchexpr</samp>&rsquo;</td><td width="70%">元のファイル</td></tr>
<tr><td width="30%">&rsquo;<samp>printexpr</samp>&rsquo;</td><td width="70%">印刷するファイル</td></tr>
</table>
<p>また、オートコマンドイベント |<a href="autocmd_002etxt.html#SwapExists">SwapExists</a>| が發生したときスワップファイル名が代入される。
</p>
<a name="v_003afname_005fout"></a><a name="fname_005fout_002dvariable"></a><a name="index-v_003afname_005fout"></a>
<a name="index-fname_005fout_002dvariable"></a>
</dd>
<dt>v:fname_out</dt>
<dd><p>出力ファイルの名前。以下のオプションを評價してゐる最中のみ有效:
</p><table>
<thead><tr><th width="30%">オプション</th><th width="70%">このファイル名の意味</th></tr></thead>
<tr><td width="30%">&rsquo;<samp>charconvert</samp>&rsquo;</td><td width="70%">變換した結果のファイル (*)</td></tr>
<tr><td width="30%">&rsquo;<samp>diffexpr</samp>&rsquo;</td><td width="70%">diff の出力</td></tr>
<tr><td width="30%">&rsquo;<samp>patchexpr</samp>&rsquo;</td><td width="70%">パッチを當てた結果のファイル</td></tr>
</table>
<p>(*) 書き込みコマンド (&quot;<code>:w file</code>&quot; など) を實行する際の變換では v:fname_in と同じになる。讀み込みコマンド (&quot;<code>:e file</code>&quot; など) を實行する際の變換では一時ファイル名になり、v:fname_in と異なる。
</p>
<a name="v_003afname_005fnew"></a><a name="fname_005fnew_002dvariable"></a><a name="index-v_003afname_005fnew"></a>
<a name="index-fname_005fnew_002dvariable"></a>
</dd>
<dt>v:fname_new</dt>
<dd><p>新しい方のファイル名。&rsquo;<samp>diffexpr</samp>&rsquo; を評價してゐる最中のみ有效。
</p>
<a name="v_003afname_005fdiff"></a><a name="fname_005fdiff_002dvariable"></a><a name="index-v_003afname_005fdiff"></a>
<a name="index-fname_005fdiff_002dvariable"></a>
</dd>
<dt>v:fname_diff</dt>
<dd><p>diff(patch) ファイルの名前。&rsquo;<samp>patchexpr</samp>&rsquo; を評價してゐる最中のみ有效。
</p>
<a name="v_003afolddashes"></a><a name="folddashes_002dvariable"></a><a name="index-v_003afolddashes"></a>
<a name="index-folddashes_002dvariable"></a>
</dd>
<dt>v:folddashes</dt>
<dd><p>&rsquo;<samp>foldtext</samp>&rsquo; 用。閉ぢた折り疊みのレベルを表すダッシュ。サンドボックス |<a href="#sandbox">sandbox</a>| の中では讀出し專用。|<a href="fold_002etxt.html#fold_002dfoldtext">fold-foldtext</a>|
</p>
<a name="v_003afoldlevel"></a><a name="foldlevel_002dvariable"></a><a name="index-v_003afoldlevel"></a>
<a name="index-foldlevel_002dvariable"></a>
</dd>
<dt>v:foldlevel</dt>
<dd><p>&rsquo;<samp>foldtext</samp>&rsquo; 用。閉ぢた折り疊みのレベル。サンドボックス |<a href="#sandbox">sandbox</a>| の中では讀出し專用。|<a href="fold_002etxt.html#fold_002dfoldtext">fold-foldtext</a>|
</p>
<a name="v_003afoldend"></a><a name="foldend_002dvariable"></a><a name="index-v_003afoldend"></a>
<a name="index-foldend_002dvariable"></a>
</dd>
<dt>v:foldend</dt>
<dd><p>&rsquo;<samp>foldtext</samp>&rsquo; 用。閉ぢた折り疊みの最後の行。サンドボックス |<a href="#sandbox">sandbox</a>| の中では讀出し專用。|<a href="fold_002etxt.html#fold_002dfoldtext">fold-foldtext</a>|
</p>
<a name="v_003afoldstart"></a><a name="foldstart_002dvariable"></a><a name="index-v_003afoldstart"></a>
<a name="index-foldstart_002dvariable"></a>
</dd>
<dt>v:foldstart</dt>
<dd><p>&rsquo;<samp>foldtext</samp>&rsquo; 用。閉ぢた折り疊みの最初の行。サンドボックス |<a href="#sandbox">sandbox</a>| の中では讀出し專用。|<a href="fold_002etxt.html#fold_002dfoldtext">fold-foldtext</a>|
</p>
<a name="v_003ahlsearch"></a><a name="hlsearch_002dvariable"></a><a name="index-v_003ahlsearch"></a>
<a name="index-hlsearch_002dvariable"></a>
</dd>
<dt>v:hlsearch</dt>
<dd><p>檢索による强調表示がオンになつてゐるかどうかを示す變數。設定は |<a href="various_002etxt.html#g_t_002bextra_005fsearch">+extra_search</a>| 機能が必要な &rsquo;<samp>hlsearch</samp>&rsquo; が有效になつてゐる時のみ意味をなす。この變數を 0 に設定することは、|<a href="pattern_002etxt.html#g_t_003anohlsearch">:nohlsearch</a>| コマンドを實行することと同樣に働き、1 に設定することは以下と同樣に働く
</p><div class="example">
<pre class="example">let &amp;hlsearch = &amp;hlsearch
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
函數から戾つたときに値が復元されることに注意すること。|<a href="#function_002dsearch_002dundo">function-search-undo</a>|
</p></blockquote>

<a name="v_003ainsertmode"></a><a name="insertmode_002dvariable"></a><a name="index-v_003ainsertmode"></a>
<a name="index-insertmode_002dvariable"></a>
</dd>
<dt>v:insertmode</dt>
<dd><p>オートコマンドイベント |<a href="autocmd_002etxt.html#InsertEnter">InsertEnter</a>| と |<a href="autocmd_002etxt.html#InsertChange">InsertChange</a>| 用。値は次のどれか:
</p><table>
<tr><td width="20%">i</td><td width="80%">插入モード</td></tr>
<tr><td width="20%">r</td><td width="80%">置換モード</td></tr>
<tr><td width="20%">v</td><td width="80%">假想置換モード</td></tr>
</table>

<a name="v_003akey"></a><a name="key_002dvariable"></a><a name="index-v_003akey"></a>
<a name="index-key_002dvariable"></a>
</dd>
<dt>v:key</dt>
<dd><p>辭書 |<a href="#Dictionary">Dictionary</a>| の現在の要素のキー。|<a href="#map_0028_0029">map()</a>| と |<a href="#filter_0028_0029">filter()</a>| で使はれる式を評價してゐる最中のみ有效。讀出し專用。
</p>
<a name="v_003alang"></a><a name="lang_002dvariable"></a><a name="index-v_003alang"></a>
<a name="index-lang_002dvariable"></a>
</dd>
<dt>v:lang</dt>
<dd><p>メッセージに關する實行環境の現在のロケール設定。これを使へば Vim script 內で現在のロケール設定に對應できるやうになる。技術的な詳細: LC_MESSAGES に等しい。この値はシステムに依存する。この變數を設定するには |<a href="mlang_002etxt.html#g_t_003alanguage">:language</a>| コマンドを使ふこと。直接設定することはできない。
</p>
<p>文字エンコーディングに使ふのと違ふ言語でメッセージを表示させたい場合は |<a href="#v_003actype">v:ctype</a>| と異なる値でもよい。|<a href="mlang_002etxt.html#multi_002dlang">multi-lang</a>| を參照。
</p>
<a name="v_003alc_005ftime"></a><a name="lc_005ftime_002dvariable"></a><a name="index-v_003alc_005ftime"></a>
<a name="index-lc_005ftime_002dvariable"></a>
</dd>
<dt>v:lc_time</dt>
<dd><p>時刻のメッセージに關する實行環境の現在のロケール設定。これを使へば Vim script 內で現在のロケール設定に對應できるやうになる。技術的な詳細: LC_TIME に等しい。この値はシステムに依存する。この變數を設定するには |<a href="mlang_002etxt.html#g_t_003alanguage">:language</a>| コマンドを使ふこと。直接設定することはできない。
</p>
<a name="v_003alnum"></a><a name="lnum_002dvariable"></a><a name="index-v_003alnum"></a>
<a name="index-lnum_002dvariable"></a>
</dd>
<dt>v:lnum</dt>
<dd><p>&rsquo;<samp>foldexpr</samp>&rsquo; |<a href="fold_002etxt.html#fold_002dexpr">fold-expr</a>| と &rsquo;<samp>indentexpr</samp>&rsquo; に使ふための行番號。また &rsquo;<samp>guitablabel</samp>&rsquo; と &rsquo;<samp>guitabtooltip</samp>&rsquo; の文脈ではタブページ番號になる。これらの式のどれかを評價してゐるときのみ有效。サンドボックス |<a href="#sandbox">sandbox</a>| の中では讀出し專用。
</p>
<a name="v_003amouse_005fwin"></a><a name="mouse_005fwin_002dvariable"></a><a name="index-v_003amouse_005fwin"></a>
<a name="index-mouse_005fwin_002dvariable"></a>
</dd>
<dt>v:mouse_win</dt>
<dd><p>|<a href="#getchar_0028_0029">getchar()</a>| でマウスクリックイベントが發生したときのウィンドウ番號。|<a href="#winnr_0028_0029">winnr()</a>| と同じく番號は 1 から始まる。マウスがクリックされなかつたときは 0 となる。
</p>
<a name="v_003amouse_005fwinid"></a><a name="mouse_005fwinid_002dvariable"></a><a name="index-v_003amouse_005fwinid"></a>
<a name="index-mouse_005fwinid_002dvariable"></a>
</dd>
<dt>v:mouse_winid</dt>
<dd><p>|<a href="#getchar_0028_0029">getchar()</a>| でマウスクリックイベントが發生したときのウィンドウ ID。マウスがクリックされてゐないときは 0 になる。
</p>
<a name="v_003amouse_005flnum"></a><a name="mouse_005flnum_002dvariable"></a><a name="index-v_003amouse_005flnum"></a>
<a name="index-mouse_005flnum_002dvariable"></a>
</dd>
<dt>v:mouse_lnum</dt>
<dd><p>|<a href="#getchar_0028_0029">getchar()</a>| でマウスクリックイベントが發生したときの行番號。物理行ではなく論理行。マウスがクリックされてゐないときは 0 となる。
</p>
<a name="v_003amouse_005fcol"></a><a name="mouse_005fcol_002dvariable"></a><a name="index-v_003amouse_005fcol"></a>
<a name="index-mouse_005fcol_002dvariable"></a>
</dd>
<dt>v:mouse_col</dt>
<dd><p>|<a href="#getchar_0028_0029">getchar()</a>| でマウスクリックイベントが發生したときの桁番號。|<a href="#virtcol_0028_0029">virtcol()</a>| と同じく畫面上の桁番號。マウスがクリックされてゐないときは 0 となる。
</p>
<a name="v_003anone"></a><a name="none_002dvariable"></a><a name="None"></a><a name="index-v_003anone"></a>
<a name="index-none_002dvariable"></a>
<a name="index-None"></a>
</dd>
<dt>v:none</dt>
<dd><p>空の文字列。JSON では空の要素として使はれる。|<a href="#json_005fencode_0028_0029">json_encode()</a>| を參照。數値として使はれた時、これは 0 として評價される。文字列として使はれた時、これは &quot;v:none&quot; として評價される。
</p><div class="example">
<pre class="example">echo v:none
v:none
</pre></div>
<p>これは eval() がその文字列をパースしたときに、元の値に戾せるやうにするためである。讀出し專用。
</p>
<a name="v_003anull"></a><a name="null_002dvariable"></a><a name="index-v_003anull"></a>
<a name="index-null_002dvariable"></a>
</dd>
<dt>v:null</dt>
<dd><p>空の文字列。JSON では &quot;null&quot; として使はれる。|<a href="#json_005fencode_0028_0029">json_encode()</a>| を參照。數値として使はれた時、これは 0 として評價される。文字列として使はれた時、これは &quot;v:null&quot; として評價される。
</p><div class="example">
<pre class="example">echo v:null
v:null
</pre></div>
<p>これは eval() がその文字列をパースしたときに、元の値に戾せるやうにするためである。讀出し專用。
</p>
<a name="v_003aoldfiles"></a><a name="oldfiles_002dvariable"></a><a name="index-v_003aoldfiles"></a>
<a name="index-oldfiles_002dvariable"></a>
</dd>
<dt>v:oldfiles</dt>
<dd><p>起動時に |<a href="starting_002etxt.html#viminfo">viminfo</a>| から讀み込まれたファイルの名前のリスト。これらはマークを記憶してゐるファイルである。リストの長さの上限はオプション &rsquo;<samp>viminfo</samp>&rsquo; の引數 &rsquo; によつて決まる (既定では 100)。|<a href="starting_002etxt.html#viminfo">viminfo</a>| ファイルが使はれてゐない時、リストは空となる。|<a href="starting_002etxt.html#g_t_003aoldfiles">:oldfiles</a>| と |<a href="cmdline_002etxt.html#c_005f_0023_003c">c_#&lt;</a>| を參照。このリストは變更可能であるが、後で |<a href="starting_002etxt.html#viminfo">viminfo</a>| ファイルに書き込まれるものには影響しない。文字列以外の値を使ふと問題を引き起こすだらう。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bviminfo">+viminfo</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="v_003aoption_005fnew"></a><a name="index-v_003aoption_005fnew"></a>
</dd>
<dt>v:option_new</dt>
<dd><p>オプションに設定された新しい値。自動コマンド |<a href="autocmd_002etxt.html#OptionSet">OptionSet</a>| を實行してゐる閒のみ有效。
<a name="v_003aoption_005fold"></a><a name="index-v_003aoption_005fold"></a>
</p></dd>
<dt>v:option_old</dt>
<dd><p>オプションの以前の値。自動コマンド |<a href="autocmd_002etxt.html#OptionSet">OptionSet</a>| を實行してゐる閒のみ有效。設定に使用されたコマンドおよびオプションの種類によつて、ローカルの以前の値またはグローバルの以前の値のどちらかになる。
<a name="v_003aoption_005foldlocal"></a><a name="index-v_003aoption_005foldlocal"></a>
</p></dd>
<dt>v:option_oldlocal</dt>
<dd><p>オプションの以前のローカル値。|<a href="autocmd_002etxt.html#OptionSet">OptionSet</a>| 自動コマンドの實行中に有效である。
<a name="v_003aoption_005foldglobal"></a><a name="index-v_003aoption_005foldglobal"></a>
</p></dd>
<dt>v:option_oldglobal</dt>
<dd><p>オプションの以前のグローバル値。|<a href="autocmd_002etxt.html#OptionSet">OptionSet</a>| 自動コマンドの實行中に有效である。
<a name="v_003aoption_005ftype"></a><a name="index-v_003aoption_005ftype"></a>
</p></dd>
<dt>v:option_type</dt>
<dd><p>set コマンドのスコープ。自動コマンド |<a href="autocmd_002etxt.html#OptionSet">OptionSet</a>| を實行してゐる閒のみ有效。&quot;global&quot; もしくは &quot;local&quot; のどちらかとなる。
<a name="v_003aoption_005fcommand"></a><a name="index-v_003aoption_005fcommand"></a>
</p></dd>
<dt>v:option_command</dt>
<dd><p>オプションを設定するために使はれたコマンド。|<a href="autocmd_002etxt.html#OptionSet">OptionSet</a>| 自動コマンドの實行中に有效である。
</p><table>
<thead><tr><th width="30%">値</th><th width="70%">オプションは以下によつて設定された</th></tr></thead>
<tr><td width="30%">&quot;setlocal&quot;</td><td width="70%">|<a href="options_002etxt.html#g_t_003asetlocal">:setlocal</a>| または &quot;<code>:let l:xxx</code>&quot;</td></tr>
<tr><td width="30%">&quot;setglobal&quot;</td><td width="70%">|<a href="options_002etxt.html#g_t_003asetglobal">:setglobal</a>| または &quot;<code>:let g:xxx</code>&quot;</td></tr>
<tr><td width="30%">&quot;set&quot;</td><td width="70%">|<a href="options_002etxt.html#g_t_003aset">:set</a>| または |<a href="#g_t_003alet">:let</a>|</td></tr>
<tr><td width="30%">&quot;modeline&quot;</td><td width="70%">|<a href="options_002etxt.html#modeline">modeline</a>|</td></tr>
</table>
<a name="v_003aoperator"></a><a name="operator_002dvariable"></a><a name="index-v_003aoperator"></a>
<a name="index-operator_002dvariable"></a>
</dd>
<dt>v:operator</dt>
<dd><p>ノーマルモードにおいて最後に實行したオペレータコマンド。基本的に 1 文字である。例外は &lt;g&gt; や &lt;z&gt; で始まるコマンドで、その場合は2文字になる。|<a href="#v_003aprevcount">v:prevcount</a>| と |<a href="#v_003aregister">v:register</a>| と組み合はせて使ふとよい。オペレータ待機モードをキャンセルして、それからオペレータを使ひたいときに便利である。例:
</p><div class="example">
<pre class="example">:omap O &lt;Esc&gt;:call MyMotion(v:operator)&lt;CR&gt;
</pre></div>
<p>この値は他のオペレータが入力されるまでセットされてゐる。よつて空になると期待してはいけない。|<a href="change_002etxt.html#g_t_003adelete">:delete</a>|, |<a href="change_002etxt.html#g_t_003ayank">:yank</a>| などの Ex コマンドに對しては v:operator はセットされない。
</p>
<p>讀出し專用。
</p>
<a name="v_003aprevcount"></a><a name="prevcount_002dvariable"></a><a name="index-v_003aprevcount"></a>
<a name="index-prevcount_002dvariable"></a>
</dd>
<dt>v:prevcount</dt>
<dd><p>最後の 1 つ前のノーマルモードコマンドに與へられたカウントの値。前のコマンドの v:count の値である。ビジュアルモードやオペレータ待機モードをキャンセルし、その後にカウントを使ふ場合に便利である。例:
</p><div class="example">
<pre class="example">:vmap % &lt;Esc&gt;:call MyFilter(v:prevcount)&lt;CR&gt;
</pre></div>
<p>讀出し專用。
</p>
<a name="v_003aprofiling"></a><a name="profiling_002dvariable"></a><a name="index-v_003aprofiling"></a>
<a name="index-profiling_002dvariable"></a>
</dd>
<dt>v:profiling</dt>
<dd><p>通常時は 0。&quot;:profile start&quot; を實行すると1が代入される。|<a href="repeat_002etxt.html#profiling">profiling</a>| を參照。
</p>
<a name="v_003aprogname"></a><a name="progname_002dvariable"></a><a name="index-v_003aprogname"></a>
<a name="index-progname_002dvariable"></a>
</dd>
<dt>v:progname</dt>
<dd><p>Vim を起動したときのプログラム名(パスは除かれる)。|<a href="starting_002etxt.html#view">view</a>|, |<a href="starting_002etxt.html#evim">evim</a>| などの名前やシンボリックリンクなどで起動した場合に特別な初期化を行ふのに便利。
</p>
<p>讀出し專用。
</p>
<a name="v_003aprogpath"></a><a name="progpath_002dvariable"></a><a name="index-v_003aprogpath"></a>
<a name="index-progpath_002dvariable"></a>
</dd>
<dt>v:progpath</dt>
<dd><p>Vim を起動したときのコマンド (パスを含む)。|<a href="remote_002etxt.html#g_t_002d_002dremote_002dexpr">--remote-expr</a>| で Vim サーバーにメッセージを送信するときに便利。フルパスを得るには:
</p><div class="example">
<pre class="example">echo exepath(v:progpath)
</pre></div>
<p>パスが相對の場合、フルパスに展開され、これにより &lsquo;:cd&lsquo; 後でも機能する。例へば &quot;./vim&quot; で開始すると &quot;/home/user/path/to/vim/src/vim&quot; といふ結果になる。MS-Windows では實行ファイルが &quot;vim.exe&quot; として呼び出されるかもしれないが、&quot;.exe&quot; は v:progpath には追加されない。
</p>
<p>讀出し專用。
</p>
<a name="v_003aregister"></a><a name="register_002dvariable"></a><a name="index-v_003aregister"></a>
<a name="index-register_002dvariable"></a>
</dd>
<dt>v:register</dt>
<dd><p>現在のノーマルモードコマンドに適用されるレジスタの名前 (そのコマンドが實際にレジスタを使ふかどうかには依らない)。または、現在實行してゐるノーマルモードマッピング用のレジスタの名前 (レジスタを使ふカスタムコマンドの中で使ふ)。レジスタが指定されなかつたときはデフォルトレジスタ &rsquo;&quot;&rsquo; になる。&rsquo;<samp>clipboard</samp>&rsquo; に &quot;unnamed&quot; か &quot;unnamedplus&quot; が含まれてゐるときはデフォルトはそれぞれ &rsquo;*&rsquo; か &rsquo;+&rsquo; になる。|<a href="#getreg_0028_0029">getreg()</a>| と |<a href="#setreg_0028_0029">setreg()</a>| も參照。
</p>
<a name="v_003ascrollstart"></a><a name="scrollstart_002dvariable"></a><a name="index-v_003ascrollstart"></a>
<a name="index-scrollstart_002dvariable"></a>
</dd>
<dt>v:scrollstart</dt>
<dd><p>畫面のスクロールの原因となつたスクリプトや函數を說明する文字列。空であるときのみ代入される。よつてこの變數には最初の原因だけが記錄されてゐる。原因がキーボードから入力されたコマンドの場合は &quot;Unknown&quot; が代入される。スクリプトを實行したとき現れた hit-enter プロンプトの原因を探るために便利。
</p>
<a name="v_003aservername"></a><a name="servername_002dvariable"></a><a name="index-v_003aservername"></a>
<a name="index-servername_002dvariable"></a>
</dd>
<dt>v:servername</dt>
<dd><p>|<a href="remote_002etxt.html#client_002dserver_002dname">client-server-name</a>| で登錄された結果。
</p>
<p>讀出し專用。
</p>

<a name="v_003asearchforward"></a><a name="searchforward_002dvariable"></a><a name="index-v_003asearchforward"></a>
<a name="index-searchforward_002dvariable"></a>
</dd>
<dt>v:searchforward</dt>
<dd><p>檢索方向: 前方檢索の後なら 1、後方檢索の後なら 0。|<a href="change_002etxt.html#quote_002f">quote/</a>| で示す方法によつて最終檢索パターンを直接セットしたときは 1 (前方檢索) にリセットされる。函數から戾るとき、この値は呼び出し前の値に復元される。|<a href="#function_002dsearch_002dundo">function-search-undo</a>|。
</p>
<p>讀み書き兩用。
</p>
<a name="v_003ashell_005ferror"></a><a name="shell_005ferror_002dvariable"></a><a name="index-v_003ashell_005ferror"></a>
<a name="index-shell_005ferror_002dvariable"></a>
</dd>
<dt>v:shell_error</dt>
<dd><p>最後に實行したシェルコマンドの結果。シェルコマンドの實行時に何かエラーがあつたならば、非零の値を取る。問題がなければ零になる。これはシェルがエラーコードを Vim に通知する時のみ働く。コマンドが實行されなかつた時には、値として -1 が良く使はれる。讀出し專用。
</p>
<p>例:
</p><div class="example">
<pre class="example">:!mv foo bar
:if v:shell_error
:  echo 'could not rename &quot;foo&quot; to &quot;bar&quot;!'
:endif
</pre></div>
<p>|<a href="#scriptversion">scriptversion</a>| が 3 以降でなければ、&quot;shell_error&quot; も、以前の版の Vim との互換性の爲に動作する。
</p>
<a name="v_003astatusmsg"></a><a name="statusmsg_002dvariable"></a><a name="index-v_003astatusmsg"></a>
<a name="index-statusmsg_002dvariable"></a>
</dd>
<dt>v:statusmsg</dt>
<dd><p>最後に表示されたステータスメッセージ。この變數は代入することが許されてゐる。
</p>
<a name="v_003aswapname"></a><a name="swapname_002dvariable"></a><a name="index-v_003aswapname"></a>
<a name="index-swapname_002dvariable"></a>
</dd>
<dt>v:swapname</dt>
<dd><p>オートコマンド |<a href="autocmd_002etxt.html#SwapExists">SwapExists</a>| を實行してゐる最中のみ有效。見つかつたスワップファイルの名前。讀出し專用。
</p>
<a name="v_003aswapchoice"></a><a name="swapchoice_002dvariable"></a><a name="index-v_003aswapchoice"></a>
<a name="index-swapchoice_002dvariable"></a>
</dd>
<dt>v:swapchoice</dt>
<dd><p>イベント |<a href="autocmd_002etxt.html#SwapExists">SwapExists</a>| により實行されたオートコマンドが、見つかつたスワップファイルをどう處理するかをこの變數に代入する。
</p><table>
<tr><td width="20%">&rsquo;o&rsquo;</td><td width="80%">讀込專用で開く</td></tr>
<tr><td width="20%">&rsquo;e&rsquo;</td><td width="80%">とにかく編輯する</td></tr>
<tr><td width="20%">&rsquo;r&rsquo;</td><td width="80%">復活させる</td></tr>
<tr><td width="20%">&rsquo;d&rsquo;</td><td width="80%">スワップファイルを削除する</td></tr>
<tr><td width="20%">&rsquo;q&rsquo;</td><td width="80%">終了する</td></tr>
<tr><td width="20%">&rsquo;a&rsquo;</td><td width="80%">中止する</td></tr>
</table>
<p>この變數の値は 1 文字の文字列でなければならない。値が空のときはオートコマンド SwapExists が存在しないときと同じやうにユーザーに問ひ合はせる。既定値は空。
</p>
<a name="v_003aswapcommand"></a><a name="swapcommand_002dvariable"></a><a name="index-v_003aswapcommand"></a>
<a name="index-swapcommand_002dvariable"></a>
</dd>
<dt>v:swapcommand</dt>
<dd><p>ファイルを開いた後に實行するノーマルモードコマンド。オートコマンド |<a href="autocmd_002etxt.html#SwapExists">SwapExists</a>| で、他の Vim インスタンスにファイルを開かせ、指定位置までジャンプするために使ふことができる。例へば、あるタグへジャンプするには、この變數に &quot;:tag tagname\r&quot; といふ値を代入する。&quot;:edit +cmd file&quot; を實行させるには &quot;:cmd\r&quot; を代入する。
</p>
<a name="v_003at_005fTYPE"></a><a name="v_003at_005fbool"></a><a name="t_005fbool_002dvariable"></a><a name="index-v_003at_005fTYPE"></a>
<a name="index-v_003at_005fbool"></a>
<a name="index-t_005fbool_002dvariable"></a>
</dd>
<dt>v:t_bool</dt>
<dd><p>眞僞値型 |<a href="#Boolean">Boolean</a>| の値。讀出し專用。參照: |<a href="#type_0028_0029">type()</a>|
<a name="v_003at_005fchannel"></a><a name="t_005fchannel_002dvariable"></a><a name="index-v_003at_005fchannel"></a>
<a name="index-t_005fchannel_002dvariable"></a>
</p></dd>
<dt>v:t_channel</dt>
<dd><p>チャネル型 |<a href="#Channel">Channel</a>| の値。讀出し專用。參照: |<a href="#type_0028_0029">type()</a>|
<a name="v_003at_005fdict"></a><a name="t_005fdict_002dvariable"></a><a name="index-v_003at_005fdict"></a>
<a name="index-t_005fdict_002dvariable"></a>
</p></dd>
<dt>v:t_dict</dt>
<dd><p>辭書型 |<a href="#Dictionary">Dictionary</a>| の値。讀出し專用。參照: |<a href="#type_0028_0029">type()</a>|
<a name="v_003at_005ffloat"></a><a name="t_005ffloat_002dvariable"></a><a name="index-v_003at_005ffloat"></a>
<a name="index-t_005ffloat_002dvariable"></a>
</p></dd>
<dt>v:t_float</dt>
<dd><p>浮動小數點數型 |<a href="#Float">Float</a>| の値。讀出し專用。參照: |<a href="#type_0028_0029">type()</a>|
<a name="v_003at_005ffunc"></a><a name="t_005ffunc_002dvariable"></a><a name="index-v_003at_005ffunc"></a>
<a name="index-t_005ffunc_002dvariable"></a>
</p></dd>
<dt>v:t_func</dt>
<dd><p>|<a href="#Funcref">Funcref</a>| 型の値。讀出し專用。參照: |<a href="#type_0028_0029">type()</a>|
<a name="v_003at_005fjob"></a><a name="t_005fjob_002dvariable"></a><a name="index-v_003at_005fjob"></a>
<a name="index-t_005fjob_002dvariable"></a>
</p></dd>
<dt>v:t_job</dt>
<dd><p>ジョブ型 |<a href="#Job">Job</a>| の値。讀出し專用。參照: |<a href="#type_0028_0029">type()</a>|
<a name="v_003at_005flist"></a><a name="t_005flist_002dvariable"></a><a name="index-v_003at_005flist"></a>
<a name="index-t_005flist_002dvariable"></a>
</p></dd>
<dt>v:t_list</dt>
<dd><p>リスト型 |<a href="#List">List</a>| の値。讀出し專用。參照: |<a href="#type_0028_0029">type()</a>|
<a name="v_003at_005fnone"></a><a name="t_005fnone_002dvariable"></a><a name="index-v_003at_005fnone"></a>
<a name="index-t_005fnone_002dvariable"></a>
</p></dd>
<dt>v:t_none</dt>
<dd><p>特殊値型 |<a href="#None">None</a>| の値。讀出し專用。參照: |<a href="#type_0028_0029">type()</a>|
<a name="v_003at_005fnumber"></a><a name="t_005fnumber_002dvariable"></a><a name="index-v_003at_005fnumber"></a>
<a name="index-t_005fnumber_002dvariable"></a>
</p></dd>
<dt>v:t_number</dt>
<dd><p>數値型 |<a href="#Number">Number</a>| の値。讀出し專用。參照: |<a href="#type_0028_0029">type()</a>|
<a name="v_003at_005fstring"></a><a name="t_005fstring_002dvariable"></a><a name="index-v_003at_005fstring"></a>
<a name="index-t_005fstring_002dvariable"></a>
</p></dd>
<dt>v:t_string</dt>
<dd><p>文字列型 |<a href="#String">String</a>| の値。讀出し專用。參照: |<a href="#type_0028_0029">type()</a>|
<a name="v_003at_005fblob"></a><a name="t_005fblob_002dvariable"></a><a name="index-v_003at_005fblob"></a>
<a name="index-t_005fblob_002dvariable"></a>
</p></dd>
<dt>v:t_blob</dt>
<dd><p>|<a href="#Blob">Blob</a>| 型の値。讀出し專用。|<a href="#type_0028_0029">type()</a>| を參照。
</p>
<a name="v_003atermresponse"></a><a name="termresponse_002dvariable"></a><a name="index-v_003atermresponse"></a>
<a name="index-termresponse_002dvariable"></a>
</dd>
<dt>v:termresponse</dt>
<dd><p>termcap のエントリ |<a href="term_002etxt.html#t_005fRV">t_RV</a>| で端末から返されるエスケープシーケンス。
ESC [ または CSI で始まり、次に &rsquo;&gt;&rsquo; または &rsquo;?&rsquo; が來て、途中數字と &rsquo;;&rsquo; だけから構成され &rsquo;c&rsquo; で終はるエスケープシーケンスを受け取つたときに代入される。
</p>
<p>このオプションがセットされるとオートコマンドイベント TermResponse が發生し、端末からの應答に反應することができる。
新しい xterm からの應答は次の形式である: &quot;&lt;Esc&gt;[&gt; Pp ; Pv ; Pc c&quot;。ここで Pp は端末のタイプ: 0 なら vt100、1 なら vt220。Pv はパッチレベル (パッチ 95 で導入されたため常に 95 以上)。Pc は常に 0。
</p>
<p>{Vimが |<a href="various_002etxt.html#g_t_002btermresponse">+termresponse</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="v_003atermblinkresp"></a><a name="index-v_003atermblinkresp"></a>
</dd>
<dt>v:termblinkresp</dt>
<dd><p>termcap のエントリ |<a href="term_002etxt.html#t_005fRC">t_RC</a>| で端末から返されるエスケープシーケンス。端末カーソルが點滅してゐるかを調べるために使用される。|<a href="terminal_002etxt.html#term_005fgetcursor_0028_0029">term_getcursor()</a>| で使用される。
</p>
<a name="v_003atermstyleresp"></a><a name="index-v_003atermstyleresp"></a>
</dd>
<dt>v:termstyleresp</dt>
<dd><p>termcap のエントリ |<a href="term_002etxt.html#t_005fRS">t_RS</a>| で端末から返されるエスケープシーケンス。カーソルの形狀を調べるために使用される。|<a href="terminal_002etxt.html#term_005fgetcursor_0028_0029">term_getcursor()</a>| で使用される。
</p>
<a name="v_003atermrbgresp"></a><a name="index-v_003atermrbgresp"></a>
</dd>
<dt>v:termrbgresp</dt>
<dd><p>termcap のエントリ |<a href="term_002etxt.html#t_005fRB">t_RB</a>| で端末から返されるエスケープシーケンス。端末の背景色を調べるために使用される。&rsquo;<samp>background</samp>&rsquo; を參照。
</p>
<a name="v_003atermrfgresp"></a><a name="index-v_003atermrfgresp"></a>
</dd>
<dt>v:termrfgresp</dt>
<dd><p>termcap のエントリ |<a href="term_002etxt.html#t_005fRF">t_RF</a>| で端末から返されるエスケープシーケンス。端末の文字色を調べるために使用される。
</p>
<a name="v_003atermu7resp"></a><a name="index-v_003atermu7resp"></a>
</dd>
<dt>v:termu7resp</dt>
<dd><p>termcap のエントリ |<a href="term_002etxt.html#t_005fu7">t_u7</a>| で端末から返されるエスケープシーケンス。曖昧な幅の文字に對して端末が何をするか調べるのに使はれる。&rsquo;<samp>ambiwidth</samp>&rsquo; を參照。
</p>
<a name="v_003atesting"></a><a name="testing_002dvariable"></a><a name="index-v_003atesting"></a>
<a name="index-testing_002dvariable"></a>
</dd>
<dt>v:testing</dt>
<dd><p>&lsquo;test_garbagecollect_now()&lsquo; を使ふ前に設定する必要がある。また、これが設定されてゐると、特定のエラーメッセージが 2 秒閒表示されなくなる。(例: &quot;&rsquo;dictionary&rsquo; option is empty&quot;)
</p>
<a name="v_003athis_005fsession"></a><a name="this_005fsession_002dvariable"></a><a name="index-v_003athis_005fsession"></a>
<a name="index-this_005fsession_002dvariable"></a>
</dd>
<dt>v:this_session</dt>
<dd><p>最後にロードされたか、セーブされたセッションファイルの完全なファイル名。|<a href="starting_002etxt.html#g_t_003amksession">:mksession</a>| を參照。この變數は代入することが許されてゐる。それ以前にセーブされたセッションがなければ、この變數は空となる。
</p>
<p>|<a href="#scriptversion">scriptversion</a>| が 3 以降でなければ、&quot;this_session&quot; も、以前の版の Vim との互換性の爲に動作する。
</p>
<a name="v_003athrowpoint"></a><a name="throwpoint_002dvariable"></a><a name="index-v_003athrowpoint"></a>
<a name="index-throwpoint_002dvariable"></a>
</dd>
<dt>v:throwpoint</dt>
<dd><p>最も直近に捕捉されてまだ終了してゐない例外が發生した位置。キーボードから入力されたコマンドは記錄されてゐない。|<a href="#v_003aexception">v:exception</a>| と |<a href="#throw_002dvariables">throw-variables</a>| も參照。
</p>
<p>例:
</p><div class="example">
<pre class="example">:try
:  throw &quot;oops&quot;
:catch /.*/
:  echo &quot;Exception from&quot; v:throwpoint
:endtry
</pre></div>
<p>出力: &quot;Exception from test.vim, line 2&quot;
</p>
<a name="v_003atrue"></a><a name="true_002dvariable"></a><a name="index-v_003atrue"></a>
<a name="index-true_002dvariable"></a>
</dd>
<dt>v:true</dt>
<dd><p>數値 1。JSON では &quot;true&quot; として使はれる。|<a href="#json_005fencode_0028_0029">json_encode()</a>| を參照。
</p>
<p>文字列として使はれた時、これは &quot;v:true&quot; として評價される。
</p><div class="example">
<pre class="example">echo v:true
v:true ~
</pre></div>
<p>これは eval() がその文字列をパースしたときに、元の値に戾せるやうにするためである。讀出し專用。
<a name="v_003aval"></a><a name="val_002dvariable"></a><a name="index-v_003aval"></a>
<a name="index-val_002dvariable"></a>
</p></dd>
<dt>v:val</dt>
<dd><p>リスト |<a href="#List">List</a>| や辭書 |<a href="#Dictionary">Dictionary</a>| の現在の要素の値。|<a href="#map_0028_0029">map()</a>| と |<a href="#filter_0028_0029">filter()</a>| で使はれる式を評價してゐる最中のみ有效。讀出し專用。
</p>
<a name="v_003aversion"></a><a name="version_002dvariable"></a><a name="index-v_003aversion"></a>
<a name="index-version_002dvariable"></a>
</dd>
<dt>v:version</dt>
<dd><p>Vim のバージョン番號。メジャーバージョン番號は100倍され、マイナーバージョン番號と足されてゐる。Version 5.0 は 500。Version 5.1 は 501 となる。讀出し專用。|<a href="#scriptversion">scriptversion</a>| が 3 以降でなければ、&quot;version&quot; も、以前の版の Vim との互換性の爲に動作する。
特定のパッチが適用されてゐるかを調べるには |<a href="#has_0028_0029">has()</a>| を使ふ。例:
</p><div class="example">
<pre class="example">if has(&quot;patch-7.4.123&quot;)
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
5.0 と 5.1 には兩方ともパッチ 123 が存在してゐるが、バージョンが違へば番號は同じでもパッチの內容は全く異なつてゐる。
</p></blockquote>

<a name="v_003aversionlong"></a><a name="versionlong_002dvariable"></a><a name="index-v_003aversionlong"></a>
<a name="index-versionlong_002dvariable"></a>
</dd>
<dt>v:versionlong</dt>
<dd><p>v:version と同じだが、最後の 4 桁にパッチレベルも含む。パッチ 123 を適用したバージョン 8.1 の値は 8010123 である。
</p>
<p>これは次のやうに使用できる:
</p><div class="example">
<pre class="example">if v:versionlong &gt;= 8010123
</pre></div>
<p>ただし、含まれてゐるパッチのリストに隙閒がある場合は、うまくいかない。これは、最近のパッチが古いバージョンに含まれてゐた場合に起こる。例へば、セキュリティ修正のため。パッチが實際に含まれてゐることを確認するためには has() 函數を使用すること。
</p>
<a name="v_003avim_005fdid_005fenter"></a><a name="vim_005fdid_005fenter_002dvariable"></a><a name="index-v_003avim_005fdid_005fenter"></a>
<a name="index-vim_005fdid_005fenter_002dvariable"></a>
</dd>
<dt>v:vim_did_enter</dt>
<dd><p>ほとんどのスタートアップが完了するまでの閒 0。|<a href="autocmd_002etxt.html#VimEnter">VimEnter</a>| 自動コマンドが實行される直前に 1 にセットされる。
</p>
<a name="v_003awarningmsg"></a><a name="warningmsg_002dvariable"></a><a name="index-v_003awarningmsg"></a>
<a name="index-warningmsg_002dvariable"></a>
</dd>
<dt>v:warningmsg</dt>
<dd><p>最後に表示された警告メッセージ。この變數は代入することが許されてゐる。
</p>
<a name="v_003awindowid"></a><a name="windowid_002dvariable"></a><a name="index-v_003awindowid"></a>
<a name="index-windowid_002dvariable"></a>
</dd>
<dt>v:windowid</dt>
<dd><p>X11 ベースの GUI を使つてゐるとき、もしくは端末の Vim を使つてゐて X サーバーに接續してゐるとき (|<a href="starting_002etxt.html#g_t_002dX">-X</a>|) は、ウィンドウ ID がセットされる。MS-Windows の GUI を使つてゐるときはウィンドウハンドルがセットされる。それ以外では値はゼロである。
</p><blockquote>
<p><strong>Note:</strong> <br>
Vim の中のウィンドウを扱ふときは |<a href="#winnr_0028_0029">winnr()</a>| または |<a href="#win_005fgetid_0028_0029">win_getid()</a>| を使ふ。|<a href="windows_002etxt.html#window_002dID">window-ID</a>| を參照。
</p></blockquote>
</dd>
</dl>

<a name="functions"></a><a name="index-functions"></a>
<a name="index-Zu-miIp-miGuan-Shu-"></a>
<a name="g_t4_002e-Zu-miIp-miGuan-Shu-"></a>
<h3 class="section">4. 組み込み函數</h3>

<p>機能別に分類された一覽は |<a href="usr_005f41_002etxt.html#function_002dlist">function-list</a>| を參照のこと。
</p>
<p>(函數名の上で <kbd>CTRL-]</kbd> を使ふことで、詳細な說明へ飛ぶことができる。)
</p>
<table>
<thead><tr><th width="40%">使用法</th><th width="20%">結果</th><th width="40%">說明</th></tr></thead>
<tr><td width="40%"><a href="#abs_0028_0029">abs</a>({expr})</td><td width="20%">浮動小數點數または數値</td><td width="40%">{expr} の絕對値</td></tr>
<tr><td width="40%"><a href="#acos_0028_0029">acos</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} のアークコサイン</td></tr>
<tr><td width="40%"><a href="#add_0028_0029">add</a>({object}, {item})</td><td width="20%">リスト/Blob</td><td width="40%">{item} を {object} に追加する</td></tr>
<tr><td width="40%"><a href="#and_0028_0029">and</a>({expr}, {expr})</td><td width="20%">數値</td><td width="40%">ビット論理積</td></tr>
<tr><td width="40%"><a href="#append_0028_0029">append</a>({lnum}, {text})</td><td width="20%">數値</td><td width="40%">{text} を {lnum} 行目に付け加へる</td></tr>
<tr><td width="40%"><a href="#append_0028_0029">append</a>({lnum}, {list})</td><td width="20%">數値</td><td width="40%">行 {list} を {lnum} 行目に付け加へる</td></tr>
<tr><td width="40%"><a href="#appendbufline_0028_0029">appendbufline</a>({expr}, {lnum}, {text})</td><td width="20%">數値</td><td width="40%">{expr} バッファの {lnum} 行目の次に {text} を加へる</td></tr>
<tr><td width="40%"><a href="#argc_0028_0029">argc</a>([{winid}])</td><td width="20%">數値</td><td width="40%">引數內のファイルの數</td></tr>
<tr><td width="40%"><a href="#argidx_0028_0029">argidx</a>()</td><td width="20%">數値</td><td width="40%">引數リスト內の現在のインデックス</td></tr>
<tr><td width="40%"><a href="#arglistid_0028_0029">arglistid</a>([{winnr} [, {tabnr}]])</td><td width="20%">數値</td><td width="40%">引數リストID</td></tr>
<tr><td width="40%"><a href="#argv_0028_0029">argv</a>({nr} [, {winid}])</td><td width="20%">文字列</td><td width="40%">引數の第 {nr} 番目</td></tr>
<tr><td width="40%"><a href="#argv_0028_0029">argv</a>([-1, {winid}])</td><td width="20%">リスト</td><td width="40%">引數リスト</td></tr>
<tr><td width="40%"><a href="#assert_005fbeeps_0028_0029">assert_beeps</a>({cmd})</td><td width="20%">數値</td><td width="40%">{cmd} がビープ音を鳴らすことをテストする</td></tr>
<tr><td width="40%"><a href="#assert_005fequal_0028_0029">assert_equal</a>({exp}, {act} [, {msg}])</td><td width="20%">數値</td><td width="40%">{exp} と {act} が等しいかどうかテストする</td></tr>
<tr><td width="40%"><a href="#assert_005fequalfile_0028_0029">assert_equalfile</a>({fname-one}, {fname-two})</td><td width="20%">數値</td><td width="40%">ファイルの內容が等しいことをテストする</td></tr>
<tr><td width="40%"><a href="#assert_005fexception_0028_0029">assert_exception</a>({error} [, {msg}])</td><td width="20%">數値</td><td width="40%">v:exception が {error} であるかテストする</td></tr>
<tr><td width="40%"><a href="#assert_005ffails_0028_0029">assert_fails</a>({cmd} [, {error} [, {msg}]])</td><td width="20%">數値</td><td width="40%">{cmd} が失敗するかどうかテストする</td></tr>
<tr><td width="40%"><a href="#assert_005ffalse_0028_0029">assert_false</a>({actual} [, {msg}])</td><td width="20%">數値</td><td width="40%">{actual} が false かどうかテストする</td></tr>
<tr><td width="40%"><a href="#assert_005finrange_0028_0029">assert_inrange</a>({lower}, {upper}, {actual} [, {msg}])</td><td width="20%">數値</td><td width="40%">{actual} が範圍內にあるかテストする</td></tr>
<tr><td width="40%"><a href="#assert_005fmatch_0028_0029">assert_match</a>({pat}, {text} [, {msg}])</td><td width="20%">數値</td><td width="40%">{pat} が {text} にマッチするかテストする</td></tr>
<tr><td width="40%"><a href="#assert_005fnotequal_0028_0029">assert_notequal</a>({exp}, {act} [, {msg}])</td><td width="20%">數値</td><td width="40%">{exp} が {act} と等しくないことをテストする</td></tr>
<tr><td width="40%"><a href="#assert_005fnotmatch_0028_0029">assert_notmatch</a>({pat}, {text} [, {msg}])</td><td width="20%">數値</td><td width="40%">{pat} が {text} とマッチしないことをテストする</td></tr>
<tr><td width="40%"><a href="#assert_005freport_0028_0029">assert_report</a>({msg})</td><td width="20%">數値</td><td width="40%">テストの失敗を報告する</td></tr>
<tr><td width="40%"><a href="#assert_005ftrue_0028_0029">assert_true</a>({actual} [, {msg}])</td><td width="20%">數値</td><td width="40%">{actual} が true かどうかテストする</td></tr>
<tr><td width="40%"><a href="#asin_0028_0029">asin</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} のアークサイン</td></tr>
<tr><td width="40%"><a href="#atan_0028_0029">atan</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} のアークタンジェント</td></tr>
<tr><td width="40%"><a href="#atan2_0028_0029">atan2</a>({expr}, {expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr1} / {expr2} のアークタンジェント</td></tr>
<tr><td width="40%"><a href="#balloon_005fgettext_0028_0029">balloon_gettext</a>()</td><td width="20%">文字列</td><td width="40%">バルーン內のカレントテキストを得る</td></tr>
<tr><td width="40%"><a href="#balloon_005fshow_0028_0029">balloon_show</a>({expr})</td><td width="20%">なし</td><td width="40%">{expr} をバルーン內に表示</td></tr>
<tr><td width="40%"><a href="#balloon_005fsplit_0028_0029">balloon_split</a>({msg})</td><td width="20%">リスト</td><td width="40%">{msg} をバルーンで使はれるやうに分割する</td></tr>
<tr><td width="40%"><a href="#browse_0028_0029">browse</a>({save}, {title}, {initdir}, {default})</td><td width="20%">文字列</td><td width="40%">ファイル選擇ダイアログを表示</td></tr>
<tr><td width="40%"><a href="#browsedir_0028_0029">browsedir</a>({title}, {initdir})</td><td width="20%">文字列</td><td width="40%">ディレクトリ選擇ダイアログを表示</td></tr>
<tr><td width="40%"><a href="#bufadd_0028_0029">bufadd</a>({name})</td><td width="20%">數値</td><td width="40%">バッファリストにバッファを追加する</td></tr>
<tr><td width="40%"><a href="#bufexists_0028_0029">bufexists</a>({expr})</td><td width="20%">數値</td><td width="40%">バッファ {expr} が存在すれば |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#buflisted_0028_0029">buflisted</a>({expr})</td><td width="20%">數値</td><td width="40%">バッファ {expr} がリストにあるなら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#bufload_0028_0029">bufload</a>({expr})</td><td width="20%">數値</td><td width="40%">もしもロードされてゐないなければバッファ {expr} をロードする</td></tr>
<tr><td width="40%"><a href="#bufloaded_0028_0029">bufloaded</a>({expr})</td><td width="20%">數値</td><td width="40%">バッファ {expr} がロード濟みなら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#bufname_0028_0029">bufname</a>({expr})</td><td width="20%">文字列</td><td width="40%">バッファ {expr} の名前</td></tr>
<tr><td width="40%"><a href="#bufnr_0028_0029">bufnr</a>({expr} [, {create}])</td><td width="20%">數値</td><td width="40%">バッファ {expr} の番號</td></tr>
<tr><td width="40%"><a href="#bufwinid_0028_0029">bufwinid</a>({expr})</td><td width="20%">數値</td><td width="40%">バッファ {expr} のウィンドウ ID</td></tr>
<tr><td width="40%"><a href="#bufwinnr_0028_0029">bufwinnr</a>({nr})</td><td width="20%">數値</td><td width="40%">バッファ {nr} のウィンドウ番號</td></tr>
<tr><td width="40%"><a href="#byte2line_0028_0029">byte2line</a>({byte})</td><td width="20%">數値</td><td width="40%">{byte} 番目のバイトの行番號</td></tr>
<tr><td width="40%"><a href="#byteidx_0028_0029">byteidx</a>({expr}, {nr})</td><td width="20%">數値</td><td width="40%">{expr} の {nr} 文字目のバイトインデックス</td></tr>
<tr><td width="40%"><a href="#byteidxcomp_0028_0029">byteidxcomp</a>({expr}, {nr})</td><td width="20%">數値</td><td width="40%">{expr} の {nr} 文字目のバイトインデックス</td></tr>
<tr><td width="40%"><a href="#call_0028_0029">call</a>({func}, {arglist} [, {dict}])</td><td width="20%">任意</td><td width="40%">引數 {arglist} をつけて {func} を呼ぶ</td></tr>
<tr><td width="40%"><a href="#ceil_0028_0029">ceil</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} を切り上げる</td></tr>
<tr><td width="40%"><a href="#ch_005fcanread_0028_0029">ch_canread</a>({handle})</td><td width="20%">數値</td><td width="40%">何か讀むものがあるかをチェックする</td></tr>
<tr><td width="40%"><a href="#ch_005fclose_0028_0029">ch_close</a>({handle})</td><td width="20%">なし</td><td width="40%">{handle} を閉ぢる</td></tr>
<tr><td width="40%"><a href="#ch_005fclose_005fin_0028_0029">ch_close_in</a>({handle})</td><td width="20%">なし</td><td width="40%">{handle} の入力を閉ぢる</td></tr>
<tr><td width="40%"><a href="#ch_005fevalexpr_0028_0029">ch_evalexpr</a>({handle}, {expr} [, {options}])</td><td width="20%">任意</td><td width="40%">{handle} に {expr} を送り應答を JSON として評價する</td></tr>
<tr><td width="40%"><a href="#ch_005fevalraw_0028_0029">ch_evalraw</a>({handle}, {string} [, {options}])</td><td width="20%">任意</td><td width="40%">{handle} に {string} を送り應答を生の文字列として評價する</td></tr>
<tr><td width="40%"><a href="#ch_005fgetbufnr_0028_0029">ch_getbufnr</a>({handle}, {what})</td><td width="20%">數値</td><td width="40%">{handle}/{what} に割り當てられたバッファ番號を得る</td></tr>
<tr><td width="40%"><a href="#ch_005fgetjob_0028_0029">ch_getjob</a>({channel})</td><td width="20%">ジョブ</td><td width="40%">{channel} の Job を得る</td></tr>
<tr><td width="40%"><a href="#ch_005finfo_0028_0029">ch_info</a>({handle})</td><td width="20%">文字列</td><td width="40%">チャネル {handle} に關する情報を得る</td></tr>
<tr><td width="40%"><a href="#ch_005flog_0028_0029">ch_log</a>({msg} [, {handle}])</td><td width="20%">なし</td><td width="40%">チャネルのログファイルに {msg} を書き込む</td></tr>
<tr><td width="40%"><a href="#ch_005flogfile_0028_0029">ch_logfile</a>({fname} [, {mode}])</td><td width="20%">なし</td><td width="40%">チャネルの擧動ログ出力を開始する</td></tr>
<tr><td width="40%"><a href="#ch_005fopen_0028_0029">ch_open</a>({address} [, {options}])</td><td width="20%">チャネル</td><td width="40%">{address} へのチャネルを開く</td></tr>
<tr><td width="40%"><a href="#ch_005fread_0028_0029">ch_read</a>({handle} [, {options}])</td><td width="20%">文字列</td><td width="40%">{handle} から讀み込む</td></tr>
<tr><td width="40%"><a href="#ch_005freadblob_0028_0029">ch_readblob</a>({handle} [, {options}])</td><td width="20%">Blob</td><td width="40%">{handle} から Blob を讀み込む</td></tr>
<tr><td width="40%"><a href="#ch_005freadraw_0028_0029">ch_readraw</a>({handle} [, {options}])</td><td width="20%">文字列</td><td width="40%">{handle} から生の文字列を讀み込む</td></tr>
<tr><td width="40%"><a href="#ch_005fsendexpr_0028_0029">ch_sendexpr</a>({handle}, {expr} [, {options}])</td><td width="20%">任意</td><td width="40%">{expr} を JSON チャネル {handle} に送る</td></tr>
<tr><td width="40%"><a href="#ch_005fsendraw_0028_0029">ch_sendraw</a>({handle}, {expr} [, {options}])</td><td width="20%">任意</td><td width="40%">{expr} を raw チャネル {handle} に送る</td></tr>
<tr><td width="40%"><a href="#ch_005fsetoptions_0028_0029">ch_setoptions</a>{handle}, {options})</td><td width="20%">なし</td><td width="40%">{handle} にオプションを設定する</td></tr>
<tr><td width="40%"><a href="#ch_005fstatus_0028_0029">ch_status</a>({handle} [, {options}])</td><td width="20%">文字列</td><td width="40%">チャネル {handle} の狀態</td></tr>
<tr><td width="40%"><a href="#changenr_0028_0029">changenr</a>()</td><td width="20%">數値</td><td width="40%">現在の變更番號</td></tr>
<tr><td width="40%"><a href="#char2nr_0028_0029">char2nr</a>({expr} [, {utf8}])</td><td width="20%">數値</td><td width="40%">{expr} の先頭文字の ASCII/UTF8 コード</td></tr>
<tr><td width="40%"><a href="#chdir_0028_0029">chdir</a>({dir})</td><td width="20%">文字列</td><td width="40%">現在の作業ディレクトリを變更する</td></tr>
<tr><td width="40%"><a href="#cindent_0028_0029">cindent</a>({lnum})</td><td width="20%">數値</td><td width="40%">{lnum} 行目の C インデント量</td></tr>
<tr><td width="40%"><a href="#clearmatches_0028_0029">clearmatches</a>([{win}])</td><td width="20%">なし</td><td width="40%">全マッチをクリアする</td></tr>
<tr><td width="40%"><a href="#col_0028_0029">col</a>({expr})</td><td width="20%">數値</td><td width="40%">カーソルかマークのカラム番號</td></tr>
<tr><td width="40%"><a href="#complete_0028_0029">complete</a>({startcol}, {matches})</td><td width="20%">なし</td><td width="40%">插入モード補完を設定する</td></tr>
<tr><td width="40%"><a href="#complete_005fadd_0028_0029">complete_add</a>({expr})</td><td width="20%">數値</td><td width="40%">補完候補を追加する</td></tr>
<tr><td width="40%"><a href="#complete_005fcheck_0028_0029">complete_check</a>()</td><td width="20%">數値</td><td width="40%">補完中に押されたキーをチェックする</td></tr>
<tr><td width="40%"><a href="#complete_005finfo_0028_0029">complete_info</a>([{what}])</td><td width="20%">辭書</td><td width="40%">現在の補完情報を取得</td></tr>
<tr><td width="40%"><a href="#confirm_0028_0029">confirm</a>({msg} [, {choices} [, {default} [, {type}]]])</td><td width="20%">數値</td><td width="40%">ユーザーへの選擇肢と番號</td></tr>
<tr><td width="40%"><a href="#copy_0028_0029">copy</a>({expr})</td><td width="20%">任意</td><td width="40%">{expr} の淺いコピーを作る</td></tr>
<tr><td width="40%"><a href="#cos_0028_0029">cos</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} の餘弦 (コサイン)</td></tr>
<tr><td width="40%"><a href="#cosh_0028_0029">cosh</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} のハイパボリックコサイン</td></tr>
<tr><td width="40%"><a href="#count_0028_0029">count</a>({comp}, {expr} [, {ic} [, {start}]])</td><td width="20%">數値</td><td width="40%">{comp} 中に {expr} が何個現れるか數へる</td></tr>
<tr><td width="40%"><a href="#cscope_005fconnection_0028_0029">cscope_connection</a>([{num} , {dbpath} [, {prepend}]])</td><td width="20%">數値</td><td width="40%">cscope 接續の存在を判定する</td></tr>
<tr><td width="40%"><a href="#cursor_0028_0029">cursor</a>({lnum}, {col} [, {off}])</td><td width="20%">數値</td><td width="40%">カーソルを {lnum}, {col}, {off} へ移動</td></tr>
<tr><td width="40%"><a href="#cursor_0028_0029">cursor</a>({list})</td><td width="20%">數値</td><td width="40%">カーソルを {list} の位置へ移動</td></tr>
<tr><td width="40%"><a href="#debugbreak_0028_0029">debugbreak</a>({pid})</td><td width="20%">數値</td><td width="40%">デバッグするプロセスへ割り込む</td></tr>
<tr><td width="40%"><a href="#deepcopy_0028_0029">deepcopy</a>({expr} [, {noref}])</td><td width="20%">任意</td><td width="40%">{expr} の完全なコピーを作る</td></tr>
<tr><td width="40%"><a href="#delete_0028_0029">delete</a>({fname} [, {flags}])</td><td width="20%">數値</td><td width="40%">ファイルやディレクトリ {fname} を消す</td></tr>
<tr><td width="40%"><a href="#deletebufline_0028_0029">deletebufline</a>({expr}, {first} [, {last}])</td><td width="20%">數値</td><td width="40%">バッファ {expr} から行を削除する</td></tr>
<tr><td width="40%"><a href="#did_005ffiletype_0028_0029">did_filetype</a>()</td><td width="20%">數値</td><td width="40%">FileType の autocommand が實行されると |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#diff_005ffiller_0028_0029">diff_filler</a>({lnum})</td><td width="20%">數値</td><td width="40%">差分モードで {lnum} に插入された行</td></tr>
<tr><td width="40%"><a href="#diff_005fhlID_0028_0029">diff_hlID</a>({lnum}, {col})</td><td width="20%">數値</td><td width="40%">差分モードで {lnum}/{col} 位置の强調</td></tr>
<tr><td width="40%"><a href="#empty_0028_0029">empty</a>({expr})</td><td width="20%">數値</td><td width="40%">{expr} が空なら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#environ_0028_0029">environ</a>()</td><td width="20%">辭書</td><td width="40%">すべての環境變數を返す</td></tr>
<tr><td width="40%"><a href="#escape_0028_0029">escape</a>({string}, {chars})</td><td width="20%">文字列</td><td width="40%">{string} 內の {chars} を &rsquo;\&rsquo; でエスケープ</td></tr>
<tr><td width="40%"><a href="#eval_0028_0029">eval</a>({string})</td><td width="20%">任意</td><td width="40%">{string} を評價し、値を得る</td></tr>
<tr><td width="40%"><a href="#eventhandler_0028_0029">eventhandler</a>()</td><td width="20%">數値</td><td width="40%">イベントハンドラの內側なら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#executable_0028_0029">executable</a>({expr})</td><td width="20%">數値</td><td width="40%">實行可能な {expr} が存在するなら 1</td></tr>
<tr><td width="40%"><a href="#execute_0028_0029">execute</a>({command})</td><td width="20%">文字列</td><td width="40%">{command} を實行し、出力を得る</td></tr>
<tr><td width="40%"><a href="#exepath_0028_0029">exepath</a>({expr})</td><td width="20%">文字列</td><td width="40%">コマンド {expr} のフルパス</td></tr>
<tr><td width="40%"><a href="#exists_0028_0029">exists</a>({var})</td><td width="20%">數値</td><td width="40%">變數 {var} が存在したら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#extend_0028_0029">extend</a>({expr1}, {expr2} [, {expr3}])</td><td width="20%">リスト/辭書</td><td width="40%">{expr1} に {expr2} の要素を插入</td></tr>
<tr><td width="40%"><a href="#exp_0028_0029">exp</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} の指數</td></tr>
<tr><td width="40%"><a href="#expand_0028_0029">expand</a>({expr} [, {nosuf} [, {list}]])</td><td width="20%">任意</td><td width="40%">{expr} 內の特別なキーワードを展開</td></tr>
<tr><td width="40%"><a href="#expandcmd_0028_0029">expandcmd</a>({expr})</td><td width="20%">文字列</td><td width="40%">&lsquo;:edit&lsquo; のやうに {expr} を展開</td></tr>
<tr><td width="40%"><a href="#feedkeys_0028_0029">feedkeys</a>({string} [, {mode}])</td><td width="20%">數値</td><td width="40%">先行入力バッファにキーシーケンスを追加</td></tr>
<tr><td width="40%"><a href="#filereadable_0028_0029">filereadable</a>({file})</td><td width="20%">數値</td><td width="40%">{file} が讀み込み可能なら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#filewritable_0028_0029">filewritable</a>({file})</td><td width="20%">數値</td><td width="40%">{file} が書き込み可能なら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#filter_0028_0029">filter</a>({expr1}, {expr2})</td><td width="20%">リスト/辭書</td><td width="40%">{expr2} が 0 となる要素を {expr1} からとり除く</td></tr>
<tr><td width="40%"><a href="#finddir_0028_0029">finddir</a>({name} [, {path} [, {count}]])</td><td width="20%">文字列</td><td width="40%">{path} からディレクトリ {name} を探す</td></tr>
<tr><td width="40%"><a href="#findfile_0028_0029">findfile</a>({name} [, {path} [, {count}]])</td><td width="20%">文字列</td><td width="40%">{path} からファイル {name} を探す</td></tr>
<tr><td width="40%"><a href="#float2nr_0028_0029">float2nr</a>({expr})</td><td width="20%">數値</td><td width="40%">浮動小數點數 {expr} を數値に變換する</td></tr>
<tr><td width="40%"><a href="#floor_0028_0029">floor</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} を切り捨てる</td></tr>
<tr><td width="40%"><a href="#fmod_0028_0029">fmod</a>({expr1}, {expr2})</td><td width="20%">浮動小數點數</td><td width="40%">{expr1} / {expr2} の餘り</td></tr>
<tr><td width="40%"><a href="#fnameescape_0028_0029">fnameescape</a>({fname})</td><td width="20%">文字列</td><td width="40%">{fname} 內の特殊文字をエスケープする</td></tr>
<tr><td width="40%"><a href="#fnamemodify_0028_0029">fnamemodify</a>({fname}, {mods})</td><td width="20%">文字列</td><td width="40%">ファイル名を變更</td></tr>
<tr><td width="40%"><a href="#foldclosed_0028_0029">foldclosed</a>({lnum})</td><td width="20%">數値</td><td width="40%">{lnum} の折り疊みの最初の行 (閉ぢてゐるなら)</td></tr>
<tr><td width="40%"><a href="#foldclosedend_0028_0029">foldclosedend</a>({lnum})</td><td width="20%">數値</td><td width="40%">{lnum} の折り疊みの最後の行 (閉ぢてゐるなら)</td></tr>
<tr><td width="40%"><a href="#foldlevel_0028_0029">foldlevel</a>({lnum})</td><td width="20%">數値</td><td width="40%">{lnum} の折り疊みレベル</td></tr>
<tr><td width="40%"><a href="#foldtext_0028_0029">foldtext</a>()</td><td width="20%">文字列</td><td width="40%">閉ぢた折り疊みに表示されてゐる行</td></tr>
<tr><td width="40%"><a href="#foldtextresult_0028_0029">foldtextresult</a>({lnum})</td><td width="20%">文字列</td><td width="40%">{lnum} で閉ぢてゐる折り疊みのテキスト</td></tr>
<tr><td width="40%"><a href="#foreground_0028_0029">foreground</a>()</td><td width="20%">數値</td><td width="40%">Vim ウィンドウを前面に移動する</td></tr>
<tr><td width="40%"><a href="#funcref_0028_0029">funcref</a>({name} [, {arglist}] [, {dict}])</td><td width="20%">Funcref</td><td width="40%">函數 {name} への參照</td></tr>
<tr><td width="40%"><a href="#function_0028_0029">function</a>({name} [, {arglist}] [, {dict}])</td><td width="20%">Funcref</td><td width="40%">名前による函數 {name} への參照</td></tr>
<tr><td width="40%"><a href="#garbagecollect_0028_0029">garbagecollect</a>([{atexit}])</td><td width="20%">なし</td><td width="40%">メモリを解放する。循環參照を斷ち切る</td></tr>
<tr><td width="40%"><a href="#get_0028_0029">get</a>({list}, {idx} [, {def}])</td><td width="20%">任意</td><td width="40%">{list} や {def} から要素 {idx} を取得</td></tr>
<tr><td width="40%"><a href="#get_0028_0029">get</a>({dict}, {key} [, {def}])</td><td width="20%">任意</td><td width="40%">{dict} や {def} から要素 {key} を取得</td></tr>
<tr><td width="40%"><a href="#get_0028_0029">get</a>({func}, {what})</td><td width="20%">任意</td><td width="40%">funcref/partial {func} のプロパティ取得</td></tr>
<tr><td width="40%"><a href="#getbufinfo_0028_0029">getbufinfo</a>([{expr}])</td><td width="20%">リスト</td><td width="40%">バッファに關する情報</td></tr>
<tr><td width="40%"><a href="#getbufline_0028_0029">getbufline</a>({expr}, {lnum} [, {end}])</td><td width="20%">リスト</td><td width="40%">バッファ {expr} の {lnum} から {end} 行目</td></tr>
<tr><td width="40%"><a href="#getbufvar_0028_0029">getbufvar</a>({expr}, {varname} [, {def}])</td><td width="20%">任意</td><td width="40%">バッファ {expr} の變數 {varname}</td></tr>
<tr><td width="40%"><a href="#getchangelist_0028_0029">getchangelist</a>({expr})</td><td width="20%">リスト</td><td width="40%">變更リスト要素のリスト</td></tr>
<tr><td width="40%"><a href="#getchar_0028_0029">getchar</a>([expr])</td><td width="20%">數値</td><td width="40%">ユーザーから 1 文字を取得する</td></tr>
<tr><td width="40%"><a href="#getcharmod_0028_0029">getcharmod</a>()</td><td width="20%">數値</td><td width="40%">修飾キーの狀態を表す數値を取得</td></tr>
<tr><td width="40%"><a href="#getcharsearch_0028_0029">getcharsearch</a>()</td><td width="20%">辭書</td><td width="40%">最後の文字檢索を取得</td></tr>
<tr><td width="40%"><a href="#getcmdline_0028_0029">getcmdline</a>()</td><td width="20%">文字列</td><td width="40%">現在のコマンドラインを取得</td></tr>
<tr><td width="40%"><a href="#getcmdpos_0028_0029">getcmdpos</a>()</td><td width="20%">數値</td><td width="40%">コマンドラインのカーソル位置を取得</td></tr>
<tr><td width="40%"><a href="#getcmdtype_0028_0029">getcmdtype</a>()</td><td width="20%">文字列</td><td width="40%">現在のコマンドラインの種類を取得</td></tr>
<tr><td width="40%"><a href="#getcmdwintype_0028_0029">getcmdwintype</a>()</td><td width="20%">文字列</td><td width="40%">現在のコマンドラインウィンドウの種類</td></tr>
<tr><td width="40%"><a href="#getcompletion_0028_0029">getcompletion</a>({pat}, {type} [, {filtered}])</td><td width="20%">リスト</td><td width="40%">コマンドライン補完にマッチするリスト</td></tr>
<tr><td width="40%"><a href="#getcurpos_0028_0029">getcurpos</a>()</td><td width="20%">リスト</td><td width="40%">カーソルの位置</td></tr>
<tr><td width="40%"><a href="#getcwd_0028_0029">getcwd</a>([{winnr} [, {tabnr}]])</td><td width="20%">文字列</td><td width="40%">現在の作業ディレクトリを取得</td></tr>
<tr><td width="40%"><a href="#getenv_0028_0029">getenv</a>({name})</td><td width="20%">文字列</td><td width="40%">環境變數を返す</td></tr>
<tr><td width="40%"><a href="#getfontname_0028_0029">getfontname</a>([{name}])</td><td width="20%">文字列</td><td width="40%">使用してゐるフォントの名前</td></tr>
<tr><td width="40%"><a href="#getfperm_0028_0029">getfperm</a>({fname})</td><td width="20%">文字列</td><td width="40%">ファイル {fname} の許可屬性を取得</td></tr>
<tr><td width="40%"><a href="#getfsize_0028_0029">getfsize</a>({fname})</td><td width="20%">數値</td><td width="40%">ファイル {fname} のバイト數を取得</td></tr>
<tr><td width="40%"><a href="#getftime_0028_0029">getftime</a>({fname})</td><td width="20%">數値</td><td width="40%">ファイルの最終更新時閒</td></tr>
<tr><td width="40%"><a href="#getftype_0028_0029">getftype</a>({fname})</td><td width="20%">文字列</td><td width="40%">ファイル {fname} の種類の說明</td></tr>
<tr><td width="40%"><a href="#getjumplist_0028_0029">getjumplist</a>([{winnr} [, {tabnr}]])</td><td width="20%">リスト</td><td width="40%">ジャンプリスト要素のリスト</td></tr>
<tr><td width="40%"><a href="#getline_0028_0029">getline</a>({lnum})</td><td width="20%">文字列</td><td width="40%">現在のバッファから行の內容を取得</td></tr>
<tr><td width="40%"><a href="#getline_0028_0029">getline</a>({lnum}, {end})</td><td width="20%">リスト</td><td width="40%">カレントバッファの {lnum} から {end} 行目</td></tr>
<tr><td width="40%"><a href="#getloclist_0028_0029">getloclist</a>({nr} [, {what}])</td><td width="20%">リスト</td><td width="40%">ロケーションリストの要素のリスト</td></tr>
<tr><td width="40%"><a href="#getmatches_0028_0029">getmatches</a>([{win}])</td><td width="20%">リスト</td><td width="40%">現在のマッチのリスト</td></tr>
<tr><td width="40%"><a href="#getpid_0028_0029">getpid</a>()</td><td width="20%">數値</td><td width="40%">Vim のプロセス ID</td></tr>
<tr><td width="40%"><a href="#getpos_0028_0029">getpos</a>({expr})</td><td width="20%">リスト</td><td width="40%">カーソル・マークなどの位置を取得</td></tr>
<tr><td width="40%"><a href="#getqflist_0028_0029">getqflist</a>([{what}])</td><td width="20%">リスト</td><td width="40%">quickfix 要素のリスト</td></tr>
<tr><td width="40%"><a href="#getreg_0028_0029">getreg</a>([{regname} [, 1 [, {list}]]])</td><td width="20%">文字列/リスト</td><td width="40%">レジスタの中身を取得</td></tr>
<tr><td width="40%"><a href="#getregtype_0028_0029">getregtype</a>([{regname}])</td><td width="20%">文字列</td><td width="40%">レジスタの種類を取得</td></tr>
<tr><td width="40%"><a href="#gettabinfo_0028_0029">gettabinfo</a>([{expr}])</td><td width="20%">リスト</td><td width="40%">タブページのリスト</td></tr>
<tr><td width="40%"><a href="#gettabvar_0028_0029">gettabvar</a>({nr}, {varname} [, {def}])</td><td width="20%">任意</td><td width="40%">タブ {nr} の變數 {varname} または {def}</td></tr>
<tr><td width="40%"><a href="#gettabwinvar_0028_0029">gettabwinvar</a>({tabnr}, {winnr}, {name} [, {def}])</td><td width="20%">任意</td><td width="40%">タブページ {tabnr} の {winnr} の {name}</td></tr>
<tr><td width="40%"><a href="#gettagstack_0028_0029">gettagstack</a>([{nr}])</td><td width="20%">辭書</td><td width="40%">ウィンドウ {nr} のタグスタックを取得する</td></tr>
<tr><td width="40%"><a href="#getwininfo_0028_0029">getwininfo</a>([{winid}])</td><td width="20%">リスト</td><td width="40%">各ウィンドウに關する情報のリスト</td></tr>
<tr><td width="40%"><a href="#getwinpos_0028_0029">getwinpos</a>([{timeout}])</td><td width="20%">リスト</td><td width="40%">Vim ウィンドウのピクセルでの X および Y 座標</td></tr>
<tr><td width="40%"><a href="#getwinposx_0028_0029">getwinposx</a>()</td><td width="20%">數値</td><td width="40%">Vim ウィンドウのピクセルでの X 座標</td></tr>
<tr><td width="40%"><a href="#getwinposy_0028_0029">getwinposy</a>()</td><td width="20%">數値</td><td width="40%">Vim ウィンドウのピクセルでの Y 座標</td></tr>
<tr><td width="40%"><a href="#getwinvar_0028_0029">getwinvar</a>({nr}, {varname} [, {def}])</td><td width="20%">文字列</td><td width="40%">ウィンドウ {nr} の變數 {varname}</td></tr>
<tr><td width="40%"><a href="#glob_0028_0029">glob</a>({expr} [, {nosuf} [, {list} [, {alllinks}]]])</td><td width="20%">任意</td><td width="40%">{expr} 內の file wildcard を展開</td></tr>
<tr><td width="40%"><a href="#glob2regpat_0028_0029">glob2regpat</a>({expr})</td><td width="20%">文字列</td><td width="40%">glob パターンを檢索パターンに變換</td></tr>
<tr><td width="40%"><a href="#globpath_0028_0029">globpath</a>({path}, {expr} [, {nosuf} [, {list} [, {alllinks}]]])</td><td width="20%">文字列</td><td width="40%">{path}の全ディレクトリに對し glob({expr}) を行ふ</td></tr>
<tr><td width="40%"><a href="#has_0028_0029">has</a>({feature})</td><td width="20%">數値</td><td width="40%">機能 {feature} がサポートならば |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#has_005fkey_0028_0029">has_key</a>({dict}, {key})</td><td width="20%">數値</td><td width="40%">{dict} が要素 {key} を持つなら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#haslocaldir_0028_0029">haslocaldir</a>([{winnr} [, {tabnr}]])</td><td width="20%">數値</td><td width="40%">現在のウィンドウで |<a href="editing_002etxt.html#g_t_003alcd">:lcd</a>| か |<a href="editing_002etxt.html#g_t_003atcd">:tcd</a>| が實行されたなら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#hasmapto_0028_0029">hasmapto</a>({what} [, {mode} [, {abbr}]])</td><td width="20%">數値</td><td width="40%">{what} のマッピングが存在するなら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#histadd_0028_0029">histadd</a>({history}, {item})</td><td width="20%">文字列</td><td width="40%">ヒストリに追加</td></tr>
<tr><td width="40%"><a href="#histdel_0028_0029">histdel</a>({history} [, {item}])</td><td width="20%">文字列</td><td width="40%">ヒストリから item を削除</td></tr>
<tr><td width="40%"><a href="#histget_0028_0029">histget</a>({history} [, {index}])</td><td width="20%">文字列</td><td width="40%">ヒストリから {index} アイテムを取得</td></tr>
<tr><td width="40%"><a href="#histnr_0028_0029">histnr</a>({history})</td><td width="20%">數値</td><td width="40%">ヒストリの數</td></tr>
<tr><td width="40%"><a href="#hlexists_0028_0029">hlexists</a>({name})</td><td width="20%">數値</td><td width="40%">highlight group {name} が存在したら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#hlID_0028_0029">hlID</a>({name})</td><td width="20%">數値</td><td width="40%">highlight group {name} の ID</td></tr>
<tr><td width="40%"><a href="#hostname_0028_0029">hostname</a>()</td><td width="20%">文字列</td><td width="40%">vim が動作してゐるマシンの名前</td></tr>
<tr><td width="40%"><a href="#iconv_0028_0029">iconv</a>({expr}, {from}, {to})</td><td width="20%">文字列</td><td width="40%">{expr} のエンコーディングを變換する</td></tr>
<tr><td width="40%"><a href="#indent_0028_0029">indent</a>({lnum})</td><td width="20%">文字列</td><td width="40%">行 {lnum} のインデントを取得</td></tr>
<tr><td width="40%"><a href="#index_0028_0029">index</a>({object}, {expr} [, {start} [, {ic}]])</td><td width="20%">數値</td><td width="40%">{object} 中に {expr} が現れる位置</td></tr>
<tr><td width="40%"><a href="#input_0028_0029">input</a>({prompt} [, {text} [, {completion}]])</td><td width="20%">文字列</td><td width="40%">ユーザーからの入力を取得</td></tr>
<tr><td width="40%"><a href="#inputdialog_0028_0029">inputdialog</a>({prompt} [, {text} [, {completion}]])</td><td width="20%">文字列</td><td width="40%">input() と同樣。GUI のダイアログを使用</td></tr>
<tr><td width="40%"><a href="#inputlist_0028_0029">inputlist</a>({textlist})</td><td width="20%">數値</td><td width="40%">ユーザーに選擇肢から選ばせる</td></tr>
<tr><td width="40%"><a href="#inputrestore_0028_0029">inputrestore</a>()</td><td width="20%">數値</td><td width="40%">先行入力を復元する</td></tr>
<tr><td width="40%"><a href="#inputsave_0028_0029">inputsave</a>()</td><td width="20%">數値</td><td width="40%">先行入力を保存し、クリアする</td></tr>
<tr><td width="40%"><a href="#inputsecret_0028_0029">inputsecret</a>({prompt} [, {text}])</td><td width="20%">文字列</td><td width="40%">input() だがテキストを隱す</td></tr>
<tr><td width="40%"><a href="#insert_0028_0029">insert</a>({object}, {item} [, {idx}])</td><td width="20%">リスト</td><td width="40%">{object} に要素 {item} を插入 [{idx} の前]</td></tr>
<tr><td width="40%"><a href="#invert_0028_0029">invert</a>({expr})</td><td width="20%">數値</td><td width="40%">ビット反轉</td></tr>
<tr><td width="40%"><a href="#isdirectory_0028_0029">isdirectory</a>({directory})</td><td width="20%">數値</td><td width="40%">{directory} がディレクトリならば |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#isinf_0028_0029">isinf</a>({expr})</td><td width="20%">數値</td><td width="40%">{expr} が (正負の) 無限大かどうか判定する</td></tr>
<tr><td width="40%"><a href="#islocked_0028_0029">islocked</a>({expr})</td><td width="20%">數値</td><td width="40%">{expr} がロックされてゐるなら |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#isnan_0028_0029">isnan</a>({expr})</td><td width="20%">數値</td><td width="40%">{expr}が NaN ならば |<a href="#TRUE">TRUE</a>|</td></tr>
<tr><td width="40%"><a href="#items_0028_0029">items</a>({dict})</td><td width="20%">リスト</td><td width="40%">{dict} のキーと値のペアを取得</td></tr>
<tr><td width="40%"><a href="#job_005fgetchannel_0028_0029">job_getchannel</a>({job})</td><td width="20%">チャネル</td><td width="40%">{job} のチャネルハンドルを取得</td></tr>
<tr><td width="40%"><a href="#job_005finfo_0028_0029">job_info</a>([{job}])</td><td width="20%">辭書</td><td width="40%">{job} についての情報を取得</td></tr>
<tr><td width="40%"><a href="#job_005fsetoptions_0028_0029">job_setoptions</a>({job}, {options})</td><td width="20%">なし</td><td width="40%">{job} のオプションを設定する</td></tr>
<tr><td width="40%"><a href="#job_005fstart_0028_0029">job_start</a>({command} [, {options}])</td><td width="20%">ジョブ</td><td width="40%">ジョブを開始する</td></tr>
<tr><td width="40%"><a href="#job_005fstatus_0028_0029">job_status</a>({job})</td><td width="20%">文字列</td><td width="40%">{job} のステータスを取得する</td></tr>
<tr><td width="40%"><a href="#job_005fstop_0028_0029">job_stop</a>({job} [, {how}])</td><td width="20%">數値</td><td width="40%">{job} を停止する</td></tr>
<tr><td width="40%"><a href="#join_0028_0029">join</a>({list} [, {sep}])</td><td width="20%">文字列</td><td width="40%">{list} の要素を連結して文字列にする</td></tr>
<tr><td width="40%"><a href="#js_005fdecode_0028_0029">js_decode</a>({string})</td><td width="20%">任意</td><td width="40%">JS 形式の JSON をデコードする</td></tr>
<tr><td width="40%"><a href="#js_005fencode_0028_0029">js_encode</a>({expr})</td><td width="20%">文字列</td><td width="40%">JS 形式の JSON にエンコードする</td></tr>
<tr><td width="40%"><a href="#json_005fdecode_0028_0029">json_decode</a>({string})</td><td width="20%">任意</td><td width="40%">JSON をデコードする</td></tr>
<tr><td width="40%"><a href="#json_005fencode_0028_0029">json_encode</a>({expr})</td><td width="20%">文字列</td><td width="40%">JSON にエンコードする</td></tr>
<tr><td width="40%"><a href="#keys_0028_0029">keys</a>({dict})</td><td width="20%">リスト</td><td width="40%">{dict} のキーを取得</td></tr>
<tr><td width="40%"><a href="#len_0028_0029">len</a>({expr})</td><td width="20%">數値</td><td width="40%">{expr} の長さを取得</td></tr>
<tr><td width="40%"><a href="#libcall_0028_0029">libcall</a>({lib}, {func}, {arg}</td><td width="20%">文字列</td><td width="40%">ライブラリ {lib} の函數 {func} をコール</td></tr>
<tr><td width="40%"><a href="#libcallnr_0028_0029">libcallnr</a>({lib}, {func}, {arg})</td><td width="20%">數値</td><td width="40%">上と同じ。ただし數値を返す</td></tr>
<tr><td width="40%"><a href="#line_0028_0029">line</a>({expr})</td><td width="20%">數値</td><td width="40%">行番號の取得</td></tr>
<tr><td width="40%"><a href="#line2byte_0028_0029">line2byte</a>({lnum})</td><td width="20%">數値</td><td width="40%">行 {lnum} のバイトカウント</td></tr>
<tr><td width="40%"><a href="#lispindent_0028_0029">lispindent</a>({lnum})</td><td width="20%">數値</td><td width="40%">{lnum} 行目の Lisp インデント量を取得</td></tr>
<tr><td width="40%"><a href="#list2str_0028_0029">list2str</a>({list} [, {utf8}])</td><td width="20%">文字列</td><td width="40%">{list} の數値を文字列に變換する</td></tr>
<tr><td width="40%"><a href="#listener_005fadd_0028_0029">listener_add</a>({callback} [, {buf}])</td><td width="20%">數値</td><td width="40%">變更を監視するためのコールバックを追加</td></tr>
<tr><td width="40%"><a href="#listener_005fflush_0028_0029">listener_flush</a>([{buf}])</td><td width="20%">なし</td><td width="40%">リスナーコールバックを呼び出す</td></tr>
<tr><td width="40%"><a href="#listener_005fremove_0028_0029">listener_remove</a>({id})</td><td width="20%">なし</td><td width="40%">リスナーコールバックを削除する</td></tr>
<tr><td width="40%"><a href="#localtime_0028_0029">localtime</a>()</td><td width="20%">數値</td><td width="40%">現在時刻</td></tr>
<tr><td width="40%"><a href="#log_0028_0029">log</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} の自然對數 (底 e)</td></tr>
<tr><td width="40%"><a href="#log10_0028_0029">log10</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">浮動小數點數 {expr} の 10 を底とする對數</td></tr>
<tr><td width="40%"><a href="#luaeval_0028_0029">luaeval</a>({expr} [, {expr}])</td><td width="20%">任意</td><td width="40%">|<a href="if_005flua_002etxt.html#Lua">Lua</a>| の式を評價する</td></tr>
<tr><td width="40%"><a href="#map_0028_0029">map</a>({expr1}, {expr2})</td><td width="20%">リスト/辭書</td><td width="40%">{expr1} の各要素を {expr2} に變へる</td></tr>
<tr><td width="40%"><a href="#maparg_0028_0029">maparg</a>({name} [, {mode} [, {abbr} [, {dict}]]])</td><td width="20%">文字列/辭書</td><td width="40%">モード {mode} でのマッピング {name} の値</td></tr>
<tr><td width="40%"><a href="#mapcheck_0028_0029">mapcheck</a>({name} [, {mode} [, {abbr}]])</td><td width="20%">文字列</td><td width="40%">{name} にマッチするマッピングを確認</td></tr>
<tr><td width="40%"><a href="#match_0028_0029">match</a>({expr}, {pat} [, {start} [, {count}]])</td><td width="20%">數値</td><td width="40%">{expr} 內で {pat} がマッチする位置</td></tr>
<tr><td width="40%"><a href="#matchadd_0028_0029">matchadd</a>({group}, {pattern} [, {priority} [, {id} [, {dict}]]])</td><td width="20%">數値</td><td width="40%">{pattern} を {group} で强調表示する</td></tr>
<tr><td width="40%"><a href="#matchaddpos_0028_0029">matchaddpos</a>({group}, {pos} [, {priority} [, {id} [, {dict}]]])</td><td width="20%">數値</td><td width="40%">位置を {group} で强調表示する</td></tr>
<tr><td width="40%"><a href="#matcharg_0028_0029">matcharg</a>({nr})</td><td width="20%">リスト</td><td width="40%">|<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| の引數</td></tr>
<tr><td width="40%"><a href="#matchdelete_0028_0029">matchdelete</a>({id} [, {win}])</td><td width="20%">數値</td><td width="40%">{id} で指定されるマッチを削除する</td></tr>
<tr><td width="40%"><a href="../matchend/matchend_0028_0029.html#matchend_0028_0029">(matchend)matchend()</a>({expr}, {pat} [, {start} [, {count}]])</td><td width="20%">數値</td><td width="40%">{expr} 內で {pat} が終了する位置</td></tr>
<tr><td width="40%"><a href="#matchlist_0028_0029">matchlist</a>({expr}, {pat} [, {start} [, {count}]])</td><td width="20%">リスト</td><td width="40%">{expr} 內の {pat} のマッチと部分マッチ</td></tr>
<tr><td width="40%"><a href="#matchstr_0028_0029">matchstr</a>({expr}, {pat} [, {start} [, {count}]])</td><td width="20%">文字列</td><td width="40%">{expr} 內の {count} 番目の {pat} のマッチ</td></tr>
<tr><td width="40%"><a href="#matchstrpos_0028_0029">matchstrpos</a>({expr}, {pat} [, {start} [, {count}]])</td><td width="20%">リスト</td><td width="40%">{expr} 內の {count} 番目の {pat} のマッチ</td></tr>
<tr><td width="40%"><a href="#max_0028_0029">max</a>({expr})</td><td width="20%">數値</td><td width="40%">{expr} 內の要素の最大値</td></tr>
<tr><td width="40%"><a href="#min_0028_0029">min</a>({expr})</td><td width="20%">數値</td><td width="40%">{expr} 內の要素の最小値</td></tr>
<tr><td width="40%"><a href="#mkdir_0028_0029">mkdir</a>({name} [, {path} [, {prot}]])</td><td width="20%">數値</td><td width="40%">ディレクトリ {name} を作成</td></tr>
<tr><td width="40%"><a href="#mode_0028_0029">mode</a>([expr])</td><td width="20%">文字列</td><td width="40%">現在の編輯モード</td></tr>
<tr><td width="40%"><a href="#mzeval_0028_0029">mzeval</a>({expr})</td><td width="20%">任意</td><td width="40%">|<a href="if_005fmzsch_002etxt.html#MzScheme">MzScheme</a>| の式を評價する</td></tr>
<tr><td width="40%"><a href="#nextnonblank_0028_0029">nextnonblank</a>({lnum})</td><td width="20%">數値</td><td width="40%">{lnum} 行目以降で空行でない行の行番號</td></tr>
<tr><td width="40%"><a href="#nr2char_0028_0029">nr2char</a>({expr} [, {utf8}])</td><td width="20%">文字列</td><td width="40%">ASCII/UTF8 コード {expr} で示される文字</td></tr>
<tr><td width="40%"><a href="#or_0028_0029">or</a>({expr}, {expr})</td><td width="20%">數値</td><td width="40%">ビット論理和</td></tr>
<tr><td width="40%"><a href="#pathshorten_0028_0029">pathshorten</a>({expr})</td><td width="20%">文字列</td><td width="40%">path 內の短縮したディレクトリ名</td></tr>
<tr><td width="40%"><a href="#perleval_0028_0029">perleval</a>({expr})</td><td width="20%">任意</td><td width="40%">|<a href="if_005fperl_002etxt.html#Perl">Perl</a>| の式を評價する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fatcursor_0028_0029">popup_atcursor</a>({what}, {options})</td><td width="20%">數値</td><td width="40%">カーソル付近にポップアップウィンドウを作成する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fbeval_0028_0029">popup_beval</a>({what}, {options})</td><td width="20%">數値</td><td width="40%">&rsquo;<samp>ballooneval</samp>&rsquo; 用にポップアップウィンドウを作成する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fclear_0028_0029">popup_clear</a>()</td><td width="20%">なし</td><td width="40%">すべてのポップアップウィンドウを閉ぢる</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fclose_0028_0029">popup_close</a>({id} [, {result}])</td><td width="20%">なし</td><td width="40%">{id} のポップアップウィンドウを閉ぢる</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fcreate_0028_0029">popup_create</a>({what}, {options})</td><td width="20%">數値</td><td width="40%">ポップアップウィンドウを作成する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fdialog_0028_0029">popup_dialog</a>({what}, {options})</td><td width="20%">數値</td><td width="40%">ダイアログとして使用するポップアップウィンドウを作成する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005ffilter_005fmenu_0028_0029">popup_filter_menu</a>({id}, {key})</td><td width="20%">數値</td><td width="40%">filter for a menu popup window</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005ffilter_005fyesno_0028_0029">popup_filter_yesno</a>({id}, {key})</td><td width="20%">數値</td><td width="40%">filter for a dialog popup window</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fgetoptions_0028_0029">popup_getoptions</a>({id})</td><td width="20%">辭書</td><td width="40%">get options of popup window {id}</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fgetpos_0028_0029">popup_getpos</a>({id})</td><td width="20%">辭書</td><td width="40%">get position of popup window {id}</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fhide_0028_0029">popup_hide</a>({id})</td><td width="20%">なし</td><td width="40%">hide popup menu {id}</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fmenu_0028_0029">popup_menu</a>({what}, {options})</td><td width="20%">數値</td><td width="40%">create a popup window used as a menu</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fmove_0028_0029">popup_move</a>({id}, {options})</td><td width="20%">なし</td><td width="40%">set position of popup window {id}</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fnotification_0028_0029">popup_notification</a>({what}, {options})</td><td width="20%">數値</td><td width="40%">create a notification popup window</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fshow_0028_0029">popup_show</a>({id})</td><td width="20%">なし</td><td width="40%">unhide popup window {id}</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fsetoptions_0028_0029">popup_setoptions</a>({id}, {options})</td><td width="20%">なし</td><td width="40%">set options for popup window {id}</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fsettext_0028_0029">popup_settext</a>({id}, {text})</td><td width="20%">なし</td><td width="40%">set the text of popup window {id}</td></tr>
<tr><td width="40%"><a href="#pow_0028_0029">pow</a>({x}, {y})</td><td width="20%">浮動小數點數</td><td width="40%">{x} の {y} 乘</td></tr>
<tr><td width="40%"><a href="#prevnonblank_0028_0029">prevnonblank</a>({lnum})</td><td width="20%">數値</td><td width="40%">{lnum} 行目以前の空行でない行の行番號</td></tr>
<tr><td width="40%"><a href="#printf_0028_0029">printf</a>({fmt}, {expr1}...)</td><td width="20%">文字列</td><td width="40%">文字列を組み立てる</td></tr>
<tr><td width="40%"><a href="#prompt_005fsetcallback_0028_0029">prompt_setcallback</a>({buf}, {expr})</td><td width="20%">なし</td><td width="40%">プロンプトコールバック函數を設定する</td></tr>
<tr><td width="40%"><a href="#prompt_005fsetinterrupt_0028_0029">prompt_setinterrupt</a>({buf}, {text})</td><td width="20%">なし</td><td width="40%">プロンプトインタラプト函數を設定する</td></tr>
<tr><td width="40%"><a href="#prompt_005fsetprompt_0028_0029">prompt_setprompt</a>({buf}, {text})</td><td width="20%">なし</td><td width="40%">プロンプトテキストを設定する</td></tr>
<tr><td width="40%"><a href="#prop_005fadd_0028_0029">prop_add</a>({lnum}, {col}, {props})</td><td width="20%">なし</td><td width="40%">テキストプロパティを追加</td></tr>
<tr><td width="40%"><a href="#prop_005fclear_0028_0029">prop_clear</a>({lnum} [, {lnum-end} [, {props}]])</td><td width="20%">なし</td><td width="40%">全てのテキストプロパティを削除</td></tr>
<tr><td width="40%"><a href="#prop_005ffind_0028_0029">prop_find</a>({props} [, {direction}])</td><td width="20%">辭書</td><td width="40%">テキストプロパティを檢索する</td></tr>
<tr><td width="40%"><a href="#prop_005flist_0028_0029">prop_list</a>({lnum} [, {props})</td><td width="20%">リスト</td><td width="40%">{lnum} 行目のテキストプロパティを取得</td></tr>
<tr><td width="40%"><a href="#prop_005fremove_0028_0029">prop_remove</a>({props} [, {lnum} [, {lnum-end}]])</td><td width="20%">數値</td><td width="40%">テキストプロパティを削除</td></tr>
<tr><td width="40%"><a href="#prop_005ftype_005fadd_0028_0029">prop_type_add</a>({name}, {props})</td><td width="20%">なし</td><td width="40%">新しいプロパティタイプを定義</td></tr>
<tr><td width="40%"><a href="#prop_005ftype_005fchange_0028_0029">prop_type_change</a>({name}, {props})</td><td width="20%">なし</td><td width="40%">既存のプロパティタイプを變更</td></tr>
<tr><td width="40%"><a href="#prop_005ftype_005fdelete_0028_0029">prop_type_delete</a>({name} [, {props}])</td><td width="20%">なし</td><td width="40%">プロパティタイプを削除</td></tr>
<tr><td width="40%"><a href="#prop_005ftype_005fget_0028_0029">prop_type_get</a>([{name} [, {props}])</td><td width="20%">辭書</td><td width="40%">プロパティタイプの値を取得</td></tr>
<tr><td width="40%"><a href="#prop_005ftype_005flist_0028_0029">prop_type_list</a>([{props}])</td><td width="20%">リスト</td><td width="40%">プロパティタイプ一覽を取得</td></tr>
<tr><td width="40%"><a href="#pumvisible_0028_0029">pumvisible()</a></td><td width="20%">數値</td><td width="40%">ポップアップメニューが表示されてゐるか</td></tr>
<tr><td width="40%"><a href="#pyeval_0028_0029">pyeval</a>({expr})</td><td width="20%">任意</td><td width="40%">|<a href="if_005fpyth_002etxt.html#Python">Python</a>| の式を評價する</td></tr>
<tr><td width="40%"><a href="#py3eval_0028_0029">py3eval</a>({expr})</td><td width="20%">任意</td><td width="40%">|<a href="if_005fpyth_002etxt.html#python3">python3</a>| の式を評價する</td></tr>
<tr><td width="40%"><a href="#pyxeval_0028_0029">pyxeval</a>({expr})</td><td width="20%">任意</td><td width="40%">|<a href="if_005fpyth_002etxt.html#python_005fx">python_x</a>| の式を評價する</td></tr>
<tr><td width="40%"><a href="#range_0028_0029">range</a>({expr} [, {max} [, {stride}]])</td><td width="20%">リスト</td><td width="40%">{expr} から {max} までの要素のリスト</td></tr>
<tr><td width="40%"><a href="#readdir_0028_0029">readdir</a>({dir} [, {expr}])</td><td width="20%">リスト</td><td width="40%">{expr} によつて選擇された {dir} 內のファイル名を取得</td></tr>
<tr><td width="40%"><a href="#readfile_0028_0029">readfile</a>({fname} [, {type} [, {max}]])</td><td width="20%">リスト</td><td width="40%">ファイル {fname} から行のリストを取得</td></tr>
<tr><td width="40%"><a href="#reg_005fexecuting_0028_0029">reg_executing()</a></td><td width="20%">文字列</td><td width="40%">實行中のレジスタ名を取得する</td></tr>
<tr><td width="40%"><a href="#reg_005frecording_0028_0029">reg_recording()</a></td><td width="20%">文字列</td><td width="40%">記錄中のレジスタ名を取得する</td></tr>
<tr><td width="40%"><a href="#reltime_0028_0029">reltime</a>([{start} [, {end}]])</td><td width="20%">リスト</td><td width="40%">時刻の値を取得</td></tr>
<tr><td width="40%"><a href="#reltimefloat_0028_0029">reltimefloat</a>({time})</td><td width="20%">浮動小數點數</td><td width="40%">時刻の値を浮動小數點に變換</td></tr>
<tr><td width="40%"><a href="#reltimestr_0028_0029">reltimestr</a>({time})</td><td width="20%">文字列</td><td width="40%">時刻の値を文字列に變換</td></tr>
<tr><td width="40%"><a href="#remote_005fexpr_0028_0029">remote_expr</a>({server}, {string} [, {idvar} [, {timeout}]])</td><td width="20%">文字列</td><td width="40%">式を送信する</td></tr>
<tr><td width="40%"><a href="#remote_005fforeground_0028_0029">remote_foreground</a>({server})</td><td width="20%">數値</td><td width="40%">Vim サーバーを前面に出す</td></tr>
<tr><td width="40%"><a href="#remote_005fpeek_0028_0029">remote_peek</a>({serverid} [, {retvar}])</td><td width="20%">數値</td><td width="40%">返信文字列を讀み込む</td></tr>
<tr><td width="40%"><a href="#remote_005fread_0028_0029">remote_read</a>({serverid} [, {timeout}])</td><td width="20%">文字列</td><td width="40%">返信文字列を讀み込む</td></tr>
<tr><td width="40%"><a href="#remote_005fsend_0028_0029">remote_send</a>({server}, {string} [, {idvar}])</td><td width="20%">文字列</td><td width="40%">キーシーケンスを送信する</td></tr>
<tr><td width="40%"><a href="#remote_005fstartserver_0028_0029">remote_startserver</a>({name})</td><td width="20%">なし</td><td width="40%">サーバー {name} になる</td></tr>
<tr><td width="40%"><a href="#remove_0028_0029">remove</a>({list}, {idx} [, {end}])</td><td width="20%">任意/リスト</td><td width="40%">{list} から {idx} と {end} 閒の要素を削除</td></tr>
<tr><td width="40%"><a href="#remove_0028_0029">remove</a>({blob}, {idx} [, {end}])</td><td width="20%">數値/Blob</td><td width="40%">{blob} から {idx} と {end} 閒のバイトを削除</td></tr>
<tr><td width="40%"><a href="#remove_0028_0029">remove</a>({dict}, {key})</td><td width="20%">任意</td><td width="40%">{dict} から要素 {key} を削除</td></tr>
<tr><td width="40%"><a href="#rename_0028_0029">rename</a>({from}, {to})</td><td width="20%">數値</td><td width="40%">{file} から {to} へファイル名變更</td></tr>
<tr><td width="40%"><a href="#repeat_0028_0029">repeat</a>({expr}, {count})</td><td width="20%">文字列</td><td width="40%">{expr} を {count} 回繰り返す</td></tr>
<tr><td width="40%"><a href="#resolve_0028_0029">resolve</a>({filename})</td><td width="20%">文字列</td><td width="40%">ショートカットが指す先のファイル名</td></tr>
<tr><td width="40%"><a href="#reverse_0028_0029">reverse</a>({list})</td><td width="20%">文字列</td><td width="40%">{list} をその場で反轉させる</td></tr>
<tr><td width="40%"><a href="#round_0028_0029">round</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} を四捨五入する</td></tr>
<tr><td width="40%"><a href="#rubyeval_0028_0029">rubyeval</a>({expr})</td><td width="20%">任意</td><td width="40%">|<a href="if_005fruby_002etxt.html#Ruby">Ruby</a>| の式を評價</td></tr>
<tr><td width="40%"><a href="#screenattr_0028_0029">screenattr</a>({row}, {col})</td><td width="20%">數値</td><td width="40%">スクリーン位置の屬性</td></tr>
<tr><td width="40%"><a href="#screenchar_0028_0029">screenchar</a>({row}, {col})</td><td width="20%">數値</td><td width="40%">スクリーン位置の文字</td></tr>
<tr><td width="40%"><a href="#screenchars_0028_0029">screenchars</a>({row}, {col})</td><td width="20%">リスト</td><td width="40%">スクリーン位置の文字のリスト</td></tr>
<tr><td width="40%"><a href="#screencol_0028_0029">screencol</a>()</td><td width="20%">數値</td><td width="40%">現在のカーソル列</td></tr>
<tr><td width="40%"><a href="#screenpos_0028_0029">screenpos</a>({winid}, {lnum}, {col})</td><td width="20%">辭書</td><td width="40%">テキスト文字のスクリーン位置 (列と行)</td></tr>
<tr><td width="40%"><a href="#screenrow_0028_0029">screenrow</a>()</td><td width="20%">數値</td><td width="40%">現在のカーソル行</td></tr>
<tr><td width="40%"><a href="#screenstring_0028_0029">screenstring</a>({row}, {col})</td><td width="20%">文字列</td><td width="40%">スクリーン位置の文字列</td></tr>
<tr><td width="40%"><a href="#search_0028_0029">search</a>({pattern} [, {flags} [, {stopline} [, {timeout}]]])</td><td width="20%">數値</td><td width="40%">{pattern} を檢索する</td></tr>
<tr><td width="40%"><a href="#searchdecl_0028_0029">searchdecl</a>({name} [, {global} [, {thisblock}]])</td><td width="20%">數値</td><td width="40%">變數の宣言を檢索</td></tr>
<tr><td width="40%"><a href="#searchpair_0028_0029">searchpair</a>({start}, {middle}, {end} [, {flags} [, {skip} [...]]])</td><td width="20%">數値</td><td width="40%">開始/終端のペアの他方を檢索</td></tr>
<tr><td width="40%"><a href="#searchpairpos_0028_0029">searchpairpos</a>({start}, {middle}, {end} [, {flags} [, {skip} [...]]])</td><td width="20%">リスト</td><td width="40%">開始/終端のペアの他方を檢索</td></tr>
<tr><td width="40%"><a href="#searchpos_0028_0029">searchpos</a>({pattern} [, {flags} [, {stopline} [, {timeout}]]])</td><td width="20%">リスト</td><td width="40%">{pattern} を檢索</td></tr>
<tr><td width="40%"><a href="#server2client_0028_0029">server2client</a>({clientid}, {string})</td><td width="20%">數値</td><td width="40%">返信文字列を送信する</td></tr>
<tr><td width="40%"><a href="#serverlist_0028_0029">serverlist</a>()</td><td width="20%">文字列</td><td width="40%">利用可能なサーバーのリストを取得</td></tr>
<tr><td width="40%"><a href="#setbufline_0028_0029">setbufline</a>({expr}, {lnum}, {text})</td><td width="20%">數値</td><td width="40%">バッファ {expr} の {lnum} 行目に {text} を設定する</td></tr>
<tr><td width="40%"><a href="#setbufvar_0028_0029">setbufvar</a>({expr}, {varname}, {val})</td><td width="20%">なし</td><td width="40%">バッファ {expr} 內の變數 {varname} に {val} をセット</td></tr>
<tr><td width="40%"><a href="#setcharsearch_0028_0029">setcharsearch</a>({dict})</td><td width="20%">辭書</td><td width="40%">文字檢索を {dict} に設定</td></tr>
<tr><td width="40%"><a href="#setcmdpos_0028_0029">setcmdpos</a>({pos})</td><td width="20%">數値</td><td width="40%">コマンドライン內のカーソル位置を設定</td></tr>
<tr><td width="40%"><a href="#setenv_0028_0029">setenv</a>({name}, {val})</td><td width="20%">なし</td><td width="40%">環境變數を設定</td></tr>
<tr><td width="40%"><a href="#setfperm_0028_0029">setfperm</a>({fname}, {mode})</td><td width="20%">數値</td><td width="40%">ファイル {fname} のパーミッションを {mode} に設定</td></tr>
<tr><td width="40%"><a href="#setline_0028_0029">setline</a>({lnum}, {line})</td><td width="20%">數値</td><td width="40%">行 {lnum} に {line} (文字列) をセット</td></tr>
<tr><td width="40%"><a href="#setloclist_0028_0029">setloclist</a>({nr}, {list} [, {action} [, {what}]])</td><td width="20%">數値</td><td width="40%">{list} を使つてロケーションリストを變更</td></tr>
<tr><td width="40%"><a href="#setmatches_0028_0029">setmatches</a>({list} [, {win}])</td><td width="20%">數値</td><td width="40%">マッチのリストを復元する</td></tr>
<tr><td width="40%"><a href="#setpos_0028_0029">setpos</a>({expr}, {list})</td><td width="20%">なし</td><td width="40%">{expr} の位置を {list} にする</td></tr>
<tr><td width="40%"><a href="#setqflist_0028_0029">setqflist</a>({list} [, {action} [, {what}]])</td><td width="20%">數値</td><td width="40%">{list} を使つて QuickFix リストを變更</td></tr>
<tr><td width="40%"><a href="#setreg_0028_0029">setreg</a>({n}, {v} [, {opt}])</td><td width="20%">數値</td><td width="40%">レジスタの値とタイプを設定</td></tr>
<tr><td width="40%"><a href="#settabvar_0028_0029">settabvar</a>({nr}, {varname}, {val})</td><td width="20%">なし</td><td width="40%">タブページ {nr} の變數 {varname} を {val} に設定する</td></tr>
<tr><td width="40%"><a href="#settabwinvar_0028_0029">settabwinvar</a>({tabnr}, {winnr}, {varname}, {val})</td><td width="20%">なし</td><td width="40%">タブページ {tabnr} 內のウィンドウ {winnr} の變數 {varname} に {val} をセット</td></tr>
<tr><td width="40%"><a href="#settagstack_0028_0029">settagstack</a>({nr}, {dict} [, {action}])</td><td width="20%">數値</td><td width="40%">{dict} を用ゐてタグスタックを變更する</td></tr>
<tr><td width="40%"><a href="#setwinvar_0028_0029">setwinvar</a>({nr}, {varname}, {val})</td><td width="20%">なし</td><td width="40%">ウィンドウ {nr} の變數 {varname} に {val} をセット</td></tr>
<tr><td width="40%"><a href="#sha256_0028_0029">sha256</a>({string})</td><td width="20%">文字列</td><td width="40%">{string} の SHA256 チェックサム</td></tr>
<tr><td width="40%"><a href="#shellescape_0028_0029">shellescape</a>({string} [, {special}])</td><td width="20%">文字列</td><td width="40%">{string} をシェルコマンド引數として使ふためにエスケープする。</td></tr>
<tr><td width="40%"><a href="#shiftwidth_0028_0029">shiftwidth</a>([{col}])</td><td width="20%">數値</td><td width="40%">實際に使用される &rsquo;<samp>shiftwidth</samp>&rsquo; の値</td></tr>
<tr><td width="40%"><a href="#sign_005fdefine_0028_0029">sign_define</a>({name} [, {dict}])</td><td width="20%">數値</td><td width="40%">目印を定義または更新する</td></tr>
<tr><td width="40%"><a href="#sign_005fdefine_0028_0029">sign_define</a>({list})</td><td width="20%">リスト</td><td width="40%">目印のリストを定義または更新する</td></tr>
<tr><td width="40%"><a href="#sign_005fgetdefined_0028_0029">sign_getdefined</a>([{name}])</td><td width="20%">リスト</td><td width="40%">定義されてゐる目印のリストを取得する</td></tr>
<tr><td width="40%"><a href="#sign_005fgetplaced_0028_0029">sign_getplaced</a>([{expr} [, {dict}]])</td><td width="20%">リスト</td><td width="40%">設置されてゐる目印のリストを取得する</td></tr>
<tr><td width="40%"><a href="#sign_005fjump_0028_0029">sign_jump</a>({id}, {group}, {expr})</td><td width="20%">數値</td><td width="40%">目印に移動する</td></tr>
<tr><td width="40%"><a href="#sign_005fplace_0028_0029">sign_place</a>({id}, {group}, {name}, {expr} [, {dict}])</td><td width="20%">數値</td><td width="40%">目印を設置する</td></tr>
<tr><td width="40%"><a href="#sign_005fplacelist_0028_0029">sign_placelist</a>({list})</td><td width="20%">リスト</td><td width="40%">目印のリストを設置する</td></tr>
<tr><td width="40%"><a href="#sign_005fundefine_0028_0029">sign_undefine</a>([{name}])</td><td width="20%">數値</td><td width="40%">目印を削除する</td></tr>
<tr><td width="40%"><a href="#sign_005fundefine_0028_0029">sign_undefine</a>({list})</td><td width="20%">リスト</td><td width="40%">目印のリストを削除する</td></tr>
<tr><td width="40%"><a href="#sign_005funplace_0028_0029">sign_unplace</a>({group} [, {dict}])</td><td width="20%">數値</td><td width="40%">目印を解除する</td></tr>
<tr><td width="40%"><a href="#sign_005funplacelist_0028_0029">sign_unplacelist</a>({list})</td><td width="20%">リスト</td><td width="40%">目印のリストを解除する</td></tr>
<tr><td width="40%"><a href="#simplify_0028_0029">simplify</a>({filename})</td><td width="20%">文字列</td><td width="40%">ファイル名を可能なかぎり簡略化する</td></tr>
<tr><td width="40%"><a href="#sin_0028_0029">sin</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} の正弦(サイン)</td></tr>
<tr><td width="40%"><a href="#sinh_0028_0029">sinh</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} のハイパボリックサイン</td></tr>
<tr><td width="40%"><a href="#sort_0028_0029">sort</a>({list} [, {func} [, {dict}]])</td><td width="20%">リスト</td><td width="40%">比較に {func} を使つて {list} をソートする</td></tr>
<tr><td width="40%"><a href="#sound_005fclear_0028_0029">sound_clear</a>()</td><td width="20%">なし</td><td width="40%">すべてのサウンドの再生を停止する</td></tr>
<tr><td width="40%"><a href="#sound_005fplayevent_0028_0029">sound_playevent</a>({name} [, {callback}])</td><td width="20%">數値</td><td width="40%">イベントサウンドを再生する</td></tr>
<tr><td width="40%"><a href="#sound_005fplayfile_0028_0029">sound_playfile</a>({path} [, {callback}])</td><td width="20%">數値</td><td width="40%">サウンドファイル {path} を再生する</td></tr>
<tr><td width="40%">sound_stop({id})</td><td width="20%">なし</td><td width="40%">サウンド {id} の再生を停止する</td></tr>
<tr><td width="40%"><a href="#soundfold_0028_0029">soundfold</a>({word})</td><td width="20%">文字列</td><td width="40%">{word} の sound-fold</td></tr>
<tr><td width="40%"><a href="#spellbadword_0028_0029">spellbadword</a>()</td><td width="20%">文字列</td><td width="40%">カーソル位置のスペルミスした單語</td></tr>
<tr><td width="40%"><a href="#spellsuggest_0028_0029">spellsuggest</a>({word} [, {max} [, {capital}]])</td><td width="20%">リスト</td><td width="40%">スペリング補完</td></tr>
<tr><td width="40%"><a href="#split_0028_0029">split</a>({expr} [, {pat} [, {keepempty}]])</td><td width="20%">リスト</td><td width="40%">{expr} を {pat} で區切つてリスト |<a href="#List">List</a>| を作る</td></tr>
<tr><td width="40%"><a href="#sqrt_0028_0029">sqrt</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} の平方根</td></tr>
<tr><td width="40%"><a href="#str2float_0028_0029">str2float</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">文字列を浮動小數點數に變換する</td></tr>
<tr><td width="40%"><a href="#str2list_0028_0029">str2list</a>({expr} [, {utf8}])</td><td width="20%">リスト</td><td width="40%">{expr} の各文字を ASCII/UTF8 値に變換する</td></tr>
<tr><td width="40%"><a href="#str2nr_0028_0029">str2nr</a>({expr} [, {base}])</td><td width="20%">數値</td><td width="40%">文字列を數値に變換する</td></tr>
<tr><td width="40%"><a href="#strchars_0028_0029">strchars</a>({expr} [, {skipcc}])</td><td width="20%">數値</td><td width="40%">文字列 {expr} の文字の數</td></tr>
<tr><td width="40%"><a href="#strcharpart_0028_0029">strcharpart</a>({str}, {start} [, {len}])</td><td width="20%">文字列</td><td width="40%">{str} の {start} から長さ {len} の文字列を得る</td></tr>
<tr><td width="40%"><a href="#strdisplaywidth_0028_0029">strdisplaywidth</a>({expr} [, {col}])</td><td width="20%">數値</td><td width="40%">文字列 {expr} の表示幅</td></tr>
<tr><td width="40%"><a href="#strftime_0028_0029">strftime</a>({format} [, {time}])</td><td width="20%">文字列</td><td width="40%">指定されたフォーマットでの時刻</td></tr>
<tr><td width="40%"><a href="#strgetchar_0028_0029">strgetchar</a>({str}, {index})</td><td width="20%">數値</td><td width="40%">{str} から {index} 番目の文字インデックスを得る</td></tr>
<tr><td width="40%"><a href="#stridx_0028_0029">stridx</a>({haystack}, {needle} [, {start}])</td><td width="20%">數値</td><td width="40%">{haystack} 內の {needle} のインデックス</td></tr>
<tr><td width="40%"><a href="#string_0028_0029">string</a>({expr})</td><td width="20%">文字列</td><td width="40%">{expr} の値の文字列表現</td></tr>
<tr><td width="40%"><a href="#strlen_0028_0029">strlen</a>({expr})</td><td width="20%">數値</td><td width="40%">文字列 {expr} の長さ</td></tr>
<tr><td width="40%"><a href="#strpart_0028_0029">strpart</a>({str}, {start} [, {len}])</td><td width="20%">文字列</td><td width="40%">{str} 內 {start} から長さ {len} の部分</td></tr>
<tr><td width="40%"><a href="#strridx_0028_0029">strridx</a>({haystack}, {needle} [, {start}])</td><td width="20%">數値</td><td width="40%">{haystack} 內の最後の {needle} のインデックス</td></tr>
<tr><td width="40%"><a href="#strtrans_0028_0029">strtrans</a>({expr})</td><td width="20%">文字列</td><td width="40%">文字列を表示可能に變更</td></tr>
<tr><td width="40%"><a href="#strwidth_0028_0029">strwidth</a>({expr})</td><td width="20%">數値</td><td width="40%">文字列 {expr} の表示セル幅</td></tr>
<tr><td width="40%"><a href="#submatch_0028_0029">submatch</a>({nr} [, {list}])</td><td width="20%">文字列/リスト</td><td width="40%">&quot;<code>:s</code>&quot; や substitute() における特定のマッチ</td></tr>
<tr><td width="40%"><a href="#substitute_0028_0029">substitute</a>({expr}, {pat}, {sub}, {flags})</td><td width="20%">文字列</td><td width="40%">{expr} の {pat} を {sub} に置換へ</td></tr>
<tr><td width="40%"><a href="#swapinfo_0028_0029">swapinfo</a>({fname})</td><td width="20%">辭書</td><td width="40%">スワップファイル {fname} に關する情報</td></tr>
<tr><td width="40%"><a href="#swapname_0028_0029">swapname</a>({expr})</td><td width="20%">文字列</td><td width="40%">スワップファイルもしくはバッファ {expr}</td></tr>
<tr><td width="40%"><a href="#synID_0028_0029">synID</a>({line}, {col}, {trans})</td><td width="20%">數値</td><td width="40%">{line} と {col} の syntax ID を取得</td></tr>
<tr><td width="40%"><a href="#synIDattr_0028_0029">synIDattr</a>({synID}, {what} [, {mode}])</td><td width="20%">文字列</td><td width="40%">syntax ID {synID} の屬性 {what} を取得</td></tr>
<tr><td width="40%"><a href="#synIDtrans_0028_0029">synIDtrans</a>({synID})</td><td width="20%">數値</td><td width="40%">{synID} の飜譯された syntax ID</td></tr>
<tr><td width="40%"><a href="#synconcealed_0028_0029">synconcealed</a>({lnum}, {col})</td><td width="20%">リスト</td><td width="40%">Conceal の情報</td></tr>
<tr><td width="40%"><a href="#synstack_0028_0029">synstack</a>({lnum}, {col})</td><td width="20%">リスト</td><td width="40%">{lnum} 行 {col} 列目における構文 ID のスタック</td></tr>
<tr><td width="40%"><a href="#system_0028_0029">system</a>({expr} [, {input}])</td><td width="20%">文字列</td><td width="40%">シェルコマンド {expr} の出力結果</td></tr>
<tr><td width="40%"><a href="#systemlist_0028_0029">systemlist</a>({expr} [, {input}])</td><td width="20%">リスト</td><td width="40%">シェルコマンド {expr} の出力結果</td></tr>
<tr><td width="40%"><a href="#tabpagebuflist_0028_0029">tabpagebuflist</a>([{arg}])</td><td width="20%">リスト</td><td width="40%">タブページ內のバッファ番號のリスト</td></tr>
<tr><td width="40%"><a href="#tabpagenr_0028_0029">tabpagenr</a>([{arg}])</td><td width="20%">數値</td><td width="40%">現在または最後のタブページの番號</td></tr>
<tr><td width="40%"><a href="#tabpagewinnr_0028_0029">tabpagewinnr</a>({tabarg} [, {arg}])</td><td width="20%">數値</td><td width="40%">タブページ內の現在のウィンドウの番號</td></tr>
<tr><td width="40%"><a href="#taglist_0028_0029">taglist</a>({expr} [, {filename}])</td><td width="20%">リスト</td><td width="40%">{expr} にマッチするタグのリスト</td></tr>
<tr><td width="40%"><a href="#tagfiles_0028_0029">tagfiles</a>()</td><td width="20%">リスト</td><td width="40%">使用してゐるタグファイルのリスト</td></tr>
<tr><td width="40%"><a href="#tan_0028_0029">tan</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} のタンジェント</td></tr>
<tr><td width="40%"><a href="#tanh_0028_0029">tanh</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">{expr} のハイパボリックタンジェント</td></tr>
<tr><td width="40%"><a href="#tempname_0028_0029">tempname</a>()</td><td width="20%">文字列</td><td width="40%">テンポラリファイルの名前</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fdumpdiff_0028_0029">term_dumpdiff</a>({filename}, {filename} [, {options}])</td><td width="20%">數値</td><td width="40%">2 つのダンプ閒の差分を表示する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fdumpload_0028_0029">term_dumpload</a>({filename} [, {options}])</td><td width="20%">數値</td><td width="40%">スクリーンダンプの表示</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fdumpwrite_0028_0029">term_dumpwrite</a>({buf}, {filename} [, {options}])</td><td width="20%">なし</td><td width="40%">端末ウィンドウの內容をダンプする</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetaltscreen_0028_0029">term_getaltscreen</a>({buf})</td><td width="20%">數値</td><td width="40%">代替スクリーンフラグを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetansicolors_0028_0029">term_getansicolors</a>({buf})</td><td width="20%">リスト</td><td width="40%">GUI カラーモードでの ANSI パレットを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetattr_0028_0029">term_getattr</a>({attr}, {what})</td><td width="20%">數値</td><td width="40%">屬性 {what} の値を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetcursor_0028_0029">term_getcursor</a>({buf})</td><td width="20%">リスト</td><td width="40%">端末のカーソル位置を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetjob_0028_0029">term_getjob</a>({buf})</td><td width="20%">ジョブ</td><td width="40%">端末に關聯付けられてゐるジョブを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetline_0028_0029">term_getline</a>({buf}, {row})</td><td width="20%">文字列</td><td width="40%">端末から 1 行のテキストを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetscrolled_0028_0029">term_getscrolled</a>({buf})</td><td width="20%">數値</td><td width="40%">端末のスクロール數を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetsize_0028_0029">term_getsize</a>({buf})</td><td width="20%">リスト</td><td width="40%">端末のサイズを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetstatus_0028_0029">term_getstatus</a>({buf})</td><td width="20%">文字列</td><td width="40%">端末の狀態を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgettitle_0028_0029">term_gettitle</a>({buf})</td><td width="20%">文字列</td><td width="40%">端末のタイトルを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgettty_0028_0029">term_gettty</a>({buf}, [{input}])</td><td width="20%">文字列</td><td width="40%">端末の tty 名を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005flist_0028_0029">term_list</a>()</td><td width="20%">リスト</td><td width="40%">端末バッファのリストを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fscrape_0028_0029">term_scrape</a>({buf}, {row})</td><td width="20%">リスト</td><td width="40%">端末スクリーンの行を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fsendkeys_0028_0029">term_sendkeys</a>({buf}, {keys})</td><td width="20%">なし</td><td width="40%">キー入力を端末に送信する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fsetansicolors_0028_0029">term_setansicolors</a>({buf}, {colors})</td><td width="20%">なし</td><td width="40%">GUI カラーモードでの ANSI パレットを設定する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fsetkill_0028_0029">term_setkill</a>({buf}, {how})</td><td width="20%">なし</td><td width="40%">端末のジョブを停止するためのシグナルを設定する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fsetrestore_0028_0029">term_setrestore</a>({buf}, {command})</td><td width="20%">なし</td><td width="40%">端末を復元するためのコマンドを設定する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fsetsize_0028_0029">term_setsize</a>({buf}, {rows}, {cols})</td><td width="20%">なし</td><td width="40%">端末のサイズを設定する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fstart_0028_0029">term_start</a>({cmd} [, {options}])</td><td width="20%">數値</td><td width="40%">端末ウィンドウを開きジョブを實行する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fwait_0028_0029">term_wait</a>({buf} [, {time}])</td><td width="20%">數値</td><td width="40%">スクリーンが更新されるのを待つ</td></tr>
<tr><td width="40%"><a href="#test_005falloc_005ffail_0028_0029">test_alloc_fail</a>({id}, {countdown}, {repeat})</td><td width="20%">なし</td><td width="40%">メモリの確保を失敗にさせる</td></tr>
<tr><td width="40%"><a href="#test_005fautochdir_0028_0029">test_autochdir</a>()</td><td width="20%">なし</td><td width="40%">起動時に &rsquo;<samp>autochdir</samp>&rsquo; を有效にする</td></tr>
<tr><td width="40%"><a href="#test_005ffeedinput_0028_0029">test_feedinput</a>({string})</td><td width="20%">なし</td><td width="40%">キー入力を入力バッファに追加する</td></tr>
<tr><td width="40%"><a href="#test_005fgarbagecollect_005fnow_0028_0029">test_garbagecollect_now</a>()</td><td width="20%">なし</td><td width="40%">テスト用に直ちにメモリを解放する</td></tr>
<tr><td width="40%"><a href="#test_005fgarbagecollect_005fsoon_0028_0029">test_garbagecollect_soon</a>()</td><td width="20%">なし</td><td width="40%">テスト用にすぐにメモリを解放する</td></tr>
<tr><td width="40%"><a href="#test_005fgetvalue_0028_0029">test_getvalue</a>({string})</td><td width="20%">任意</td><td width="40%">內部變數の値を取得する</td></tr>
<tr><td width="40%"><a href="#test_005fignore_005ferror_0028_0029">test_ignore_error</a>({expr})</td><td width="20%">なし</td><td width="40%">特定のエラーを無視する</td></tr>
<tr><td width="40%"><a href="#test_005fnull_005fblob_0028_0029">test_null_blob</a>()</td><td width="20%">Blob</td><td width="40%">テスト用の null 値</td></tr>
<tr><td width="40%"><a href="#test_005fnull_005fchannel_0028_0029">test_null_channel</a>()</td><td width="20%">チャネル</td><td width="40%">テスト用の null 値</td></tr>
<tr><td width="40%"><a href="#test_005fnull_005fdict_0028_0029">test_null_dict</a>()</td><td width="20%">辭書&nbsp;</td><td width="40%">テスト用の null 値</td></tr>
<tr><td width="40%"><a href="#test_005fnull_005fjob_0028_0029">test_null_job</a>()</td><td width="20%">ジョブ</td><td width="40%">テスト用の null 値</td></tr>
<tr><td width="40%"><a href="#test_005fnull_005flist_0028_0029">test_null_list</a>()</td><td width="20%">リスト</td><td width="40%">テスト用の null 値</td></tr>
<tr><td width="40%"><a href="#test_005fnull_005fpartial_0028_0029">test_null_partial</a>()</td><td width="20%">Funcref</td><td width="40%">テスト用の null 値</td></tr>
<tr><td width="40%"><a href="#test_005fnull_005fstring_0028_0029">test_null_string</a>()</td><td width="20%">文字列</td><td width="40%">テスト用の null 値</td></tr>
<tr><td width="40%"><a href="#test_005foption_005fnot_005fset_0028_0029">test_option_not_set</a>({name})</td><td width="20%">なし</td><td width="40%">指定するフラグをリセットする</td></tr>
<tr><td width="40%"><a href="#test_005foverride_0028_0029">test_override</a>({expr}, {val})</td><td width="20%">なし</td><td width="40%">Vim の內部處理を置き換へてテストする</td></tr>
<tr><td width="40%"><a href="#test_005frefcount_0028_0029">test_refcount</a>({expr})</td><td width="20%">數値</td><td width="40%">{expr} の參照カウントを取得</td></tr>
<tr><td width="40%"><a href="#test_005fscrollbar_0028_0029">test_scrollbar</a>({which}, {value}, {dragging})</td><td width="20%">なし</td><td width="40%">GUI のテスト中にスクロールする</td></tr>
<tr><td width="40%"><a href="#test_005fsetmouse_0028_0029">test_setmouse</a>({row}, {col})</td><td width="20%">なし</td><td width="40%">テスト用にマウス位置を設定する</td></tr>
<tr><td width="40%"><a href="#test_005fsettime_0028_0029">test_settime</a>({expr})</td><td width="20%">なし</td><td width="40%">テスト用に現在の時刻を設定する</td></tr>
<tr><td width="40%"><a href="#timer_005finfo_0028_0029">timer_info</a>([{id}])</td><td width="20%">リスト</td><td width="40%">タイマーに關する情報</td></tr>
<tr><td width="40%"><a href="#timer_005fpause_0028_0029">timer_pause</a>({id}, {pause})</td><td width="20%">なし</td><td width="40%">タイマーの一時停止または一時停止解除</td></tr>
<tr><td width="40%"><a href="#timer_005fstart_0028_0029">timer_start</a>({time}, {callback} [, {options}])</td><td width="20%">數値</td><td width="40%">タイマーを作成する</td></tr>
<tr><td width="40%"><a href="#timer_005fstop_0028_0029">timer_stop</a>({timer})</td><td width="20%">なし</td><td width="40%">タイマーを停止する</td></tr>
<tr><td width="40%"><a href="#timer_005fstopall_0028_0029">timer_stopall</a>()</td><td width="20%">なし</td><td width="40%">すべてのタイマーを停止する</td></tr>
<tr><td width="40%"><a href="#tolower_0028_0029">tolower</a>({expr})</td><td width="20%">文字列</td><td width="40%">文字列 {expr} を小文字にする</td></tr>
<tr><td width="40%"><a href="#toupper_0028_0029">toupper</a>({expr})</td><td width="20%">文字列</td><td width="40%">文字列 {expr} を大文字にする</td></tr>
<tr><td width="40%"><a href="#tr_0028_0029">tr</a>({src}, {fromstr}, {tostr})</td><td width="20%">文字列</td><td width="40%">{src} 中に現れる文字 {fromstr} を {tostr} に變換する</td></tr>
<tr><td width="40%"><a href="#trim_0028_0029">trim</a>({text} [, {mask}])</td><td width="20%">文字列</td><td width="40%">{text} から {mask} 內の文字を切り取る</td></tr>
<tr><td width="40%"><a href="#trunc_0028_0029">trunc</a>({expr})</td><td width="20%">浮動小數點數</td><td width="40%">浮動小數點數 {expr} を切り詰める</td></tr>
<tr><td width="40%"><a href="#type_0028_0029">type</a>({name})</td><td width="20%">數値</td><td width="40%">變數 {name} の型</td></tr>
<tr><td width="40%"><a href="#undofile_0028_0029">undofile</a>({name})</td><td width="20%">文字列</td><td width="40%">{name} に對するアンドゥファイルの名前</td></tr>
<tr><td width="40%"><a href="#undotree_0028_0029">undotree</a>()</td><td width="20%">リスト</td><td width="40%">アンドゥファイルツリー</td></tr>
<tr><td width="40%"><a href="#uniq_0028_0029">uniq</a>({list} [, {func} [, {dict}]])</td><td width="20%">リスト</td><td width="40%">リストから隣接した重複を削除</td></tr>
<tr><td width="40%"><a href="#values_0028_0029">values</a>({dict})</td><td width="20%">リスト</td><td width="40%">{dict} の値のリスト</td></tr>
<tr><td width="40%"><a href="#virtcol_0028_0029">virtcol</a>({expr})</td><td width="20%">數値</td><td width="40%">カーソルのスクリーンカラム位置</td></tr>
<tr><td width="40%"><a href="#visualmode_0028_0029">visualmode</a>([expr])</td><td width="20%">文字列</td><td width="40%">最後に使はれたビジュアルモード</td></tr>
<tr><td width="40%"><a href="#wildmenumode_0028_0029">wildmenumode</a>()</td><td width="20%">數値</td><td width="40%">&rsquo;<samp>wildmenu</samp>&rsquo; モードが有效かどうか</td></tr>
<tr><td width="40%"><a href="#win_005fexecute_0028_0029">win_execute</a>({id}, {command} [, {silent}])</td><td width="20%">文字列</td><td width="40%">ウィンドウ {id} で {command} を實行する</td></tr>
<tr><td width="40%"><a href="#win_005ffindbuf_0028_0029">win_findbuf</a>({bufnr})</td><td width="20%">リスト</td><td width="40%">{bufnr} を含むウィンドウを見つける</td></tr>
<tr><td width="40%"><a href="#win_005fgetid_0028_0029">win_getid</a>([{win} [, {tab}]])</td><td width="20%">數値</td><td width="40%">{tab} の {win} のウィンドウ ID を取得</td></tr>
<tr><td width="40%"><a href="#win_005fgotoid_0028_0029">win_gotoid</a>({expr})</td><td width="20%">數値</td><td width="40%">ID {expr} のウィンドウに行く</td></tr>
<tr><td width="40%"><a href="#win_005fid2tabwin_0028_0029">win_id2tabwin</a>({expr})</td><td width="20%">リスト</td><td width="40%">ウィンドウ ID からタブとウィンドウ nr 取得</td></tr>
<tr><td width="40%"><a href="#win_005fid2win_0028_0029">win_id2win</a>({expr})</td><td width="20%">數値</td><td width="40%">ウィンドウ ID からウィンドウ nr 取得</td></tr>
<tr><td width="40%"><a href="#win_005fscreenpos_0028_0029">win_screenpos</a>({nr})</td><td width="20%">リスト</td><td width="40%">ウィンドウ {nr} のスクリーン位置を取得する</td></tr>
<tr><td width="40%"><a href="#winbufnr_0028_0029">winbufnr</a>({nr})</td><td width="20%">數値</td><td width="40%">ウィンドウ {nr} のバッファ番號</td></tr>
<tr><td width="40%"><a href="#wincol_0028_0029">wincol</a>()</td><td width="20%">數値</td><td width="40%">カーソル位置のウィンドウ桁</td></tr>
<tr><td width="40%"><a href="#winheight_0028_0029">winheight</a>({nr})</td><td width="20%">數値</td><td width="40%">ウィンドウ {nr} の高さ</td></tr>
<tr><td width="40%"><a href="#winlayout_0028_0029">winlayout</a>([{tabnr}])</td><td width="20%">リスト</td><td width="40%">タブ {tabnr} 中のウィンドウの配置</td></tr>
<tr><td width="40%"><a href="#winline_0028_0029">winline</a>()</td><td width="20%">數値</td><td width="40%">カーソル位置のウィンドウ行</td></tr>
<tr><td width="40%"><a href="#winnr_0028_0029">winnr</a>([{expr}])</td><td width="20%">數値</td><td width="40%">現在のウィンドウの番號</td></tr>
<tr><td width="40%"><a href="#winrestcmd_0028_0029">winrestcmd</a>()</td><td width="20%">文字列</td><td width="40%">ウィンドウサイズを復元するコマンド</td></tr>
<tr><td width="40%"><a href="#winrestview_0028_0029">winrestview</a>({dict})</td><td width="20%">なし</td><td width="40%">現在のウィンドウのビューを復元</td></tr>
<tr><td width="40%"><a href="#winsaveview_0028_0029">winsaveview</a>()</td><td width="20%">辭書</td><td width="40%">現在のウィンドウのビューを保存</td></tr>
<tr><td width="40%"><a href="#winwidth_0028_0029">winwidth</a>({nr})</td><td width="20%">數値</td><td width="40%">ウィンドウ {nr} の幅を取得</td></tr>
<tr><td width="40%"><a href="#wordcount_0028_0029">wordcount</a>()</td><td width="20%">辭書</td><td width="40%">バイト/文字/單語の統計情報を取得</td></tr>
<tr><td width="40%"><a href="#writefile_0028_0029">writefile</a>({object}, {fname} [, {flags}])</td><td width="20%">數値</td><td width="40%">行の |<a href="#Blob">Blob</a>| または |<a href="#list">list</a>| をファイルに書き込む</td></tr>
<tr><td width="40%"><a href="#xor_0028_0029">xor</a>({expr}, {expr})</td><td width="20%">數値</td><td width="40%">ビット排他的論理和</td></tr>
</table>


<dl compact="compact">
<dd><a name="abs_0028_0029"></a><a name="index-abs_0028_0029"></a>
</dd>
<dt>abs({expr})</dt>
<dd><p>{expr} の絕對値を返す。{expr} の値が浮動小數點數 |<a href="#Float">Float</a>| である場合は浮動小數點數を返す。{expr} が數値 |<a href="#Number">Number</a>| に變換可能な場合は abs() は數値を返す。それ以外の場合はエラーメッセージを表示し、-1 を返す。
</p>
<p>例:
</p><div class="example">
<pre class="example">echo abs(1.456)
1.456
echo abs(-5.456)
5.456
echo abs(-4)
4
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>

<a name="acos_0028_0029"></a><a name="index-acos_0028_0029"></a>
</dd>
<dt>acos({expr})</dt>
<dd><p>{expr} の逆餘弦 (アークコサイン) をラジアンで返す。値は [0, pi] の範圍の浮動小數點數 (|<a href="#Float">Float</a>|)。{expr} は [-1, 1] の範圍の浮動小數點數 (|<a href="#Float">Float</a>|) か數値 (|<a href="#Number">Number</a>|) でなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo acos(0)
1.570796
:echo acos(-0.5)
2.094395
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>

<a name="add_0028_0029"></a><a name="index-add_0028_0029"></a>
</dd>
<dt>add({object}, {expr})</dt>
<dd><p>リスト |<a href="#List">List</a>| または |<a href="#Blob">Blob</a>| {object} の末尾に項目 {expr} を追加する。結果の |<a href="#List">List</a>| か |<a href="#Blob">Blob</a>| を返す。例:
</p><div class="example">
<pre class="example">:let alist = add([1, 2, 3], item)
:call add(mylist, &quot;woodstock&quot;)
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
{expr} がリストのときは、1 個の要素として追加される。リストを連結するには |<a href="#extend_0028_0029">extend()</a>| を使ふ。{object} が |<a href="#Blob">Blob</a>| の場合、{expr} は數値でなければならない。他の位置に要素を追加するには |<a href="#insert_0028_0029">insert()</a>| を使ふ。
</p></blockquote>


<a name="and_0028_0029"></a><a name="index-and_0028_0029"></a>
</dd>
<dt>and({expr}, {expr})</dt>
<dd><p>2 つの引數のビット論理積。引數は數値に變換される。リスト、辭書、浮動小數點數を指定するとエラーになる。例:
</p><div class="example">
<pre class="example">:let flag = and(bits, 0x80)
</pre></div>


<a name="append_0028_0029"></a><a name="index-append_0028_0029"></a>
</dd>
<dt>append({lnum}, {text})</dt>
<dd><p>{text} がリスト |<a href="#List">List</a>| のときは、各要素をカレントバッファの {lnum} 行目以降にテキストとして追加する。リストでないときは、{text} をテキストとしてカレントバッファの {lnum} 行目以降にテキストとして追加する。
{lnum}は 0 でもよく、その場合は 1 行目の前に行を插入する。失敗した場合は 1 を返す({lnum} が不正な範圍であるか、メモリ不足)。成功なら 0 を返す。例:
</p><div class="example">
<pre class="example">:let failed = append(line('$'), &quot;# THE END&quot;)
:let failed = append(0, [&quot;Chapter 1&quot;, &quot;the beginning&quot;])
</pre></div>

<a name="appendbufline_0028_0029"></a><a name="index-appendbufline_0028_0029"></a>
</dd>
<dt>appendbufline({expr}, {lnum}, {text})</dt>
<dd><p>|<a href="#append_0028_0029">append()</a>| と同樣、ただしバッファ {expr} にテキストを追加する。
</p>
<p>{expr} の使ひ方については |<a href="#bufname_0028_0029">bufname()</a>| を參照。
</p>
<p>{lnum} は |<a href="#append_0028_0029">append()</a>| と同樣に扱はれる。
</p><blockquote>
<p><strong>Note:</strong> <br>
|<a href="#line_0028_0029">line()</a>| の使用は、追加對象のバッファではなくカレントバッファに適用されることに注意。バッファの最後に追加するには &quot;$&quot; を使用する。
</p></blockquote>

<p>成功時には 0 が返り、失敗時には 1 が返る。
</p>
<p>{expr} が有效なバッファでない、もしくは {lnum} が有效でない場合、エラーメッセージが與へられる。例:
</p><div class="example">
<pre class="example">:let failed = appendbufline(13, 0, &quot;# THE START&quot;)
</pre></div>
<a name="argc_0028_0029"></a><a name="index-argc_0028_0029"></a>
</dd>
<dt>argc([{winid}])</dt>
<dd><p>引數リスト內のファイルの數を返す。|<a href="editing_002etxt.html#arglist">arglist</a>| を參照。
</p>
<p>もしも {winid} が與へられてゐないなら、カレントウィンドウの引數リストが使はれる。もしも {winid} が -1 なら、大域の引數リストが使はれる。
</p>
<p>{winid} が與へられてゐるなら、どちらかのウィンドウ引數リストが使はれる: ウィンドウ番號もしくはウィンドウ ID
</p>
<p>もしも {winid} の引數が不正ならば -1 を返す。
</p>
<a name="argidx_0028_0029"></a><a name="index-argidx_0028_0029"></a>
</dd>
<dt>argidx()</dt>
<dd><p>引數リスト內の現在のインデックスを返す。最初のファイルは 0 となる。argc() - 1 が最後のファイルとなる。|<a href="editing_002etxt.html#arglist">arglist</a>| を參照。
</p>
<a name="arglistid_0028_0029"></a><a name="index-arglistid_0028_0029"></a>
</dd>
<dt>arglistid([{winnr} [, {tabnr}]])</dt>
<dd><p>引數リストの ID を返す。値は引數リストを區別するための數値である。ゼロはグローバル引數リストを意味する。|<a href="editing_002etxt.html#arglist">arglist</a>| 參照。引數が無效な場合は -1 を返す。
</p>
<p>引數を指定しなかつた場合はカレントウィンドウが使はれる。{winnr} を指定した場合はカレントタブページ內のウィンドウが使はれる。{winnr} と {tabnr} を指定した場合は指定したタブページ內のウィンドウが使はれる。{winnr} にはウィンドウ番號または |<a href="windows_002etxt.html#window_002dID">window-ID</a>| が使へる。
</p>
<a name="argv_0028_0029"></a><a name="index-argv_0028_0029"></a>
</dd>
<dt>argv([{nr} [, {winid}]])</dt>
<dd><p>結果は引數リスト內の {nr} 番目のファイル。|<a href="editing_002etxt.html#arglist">arglist</a>| を參照。 &quot;argv(0)&quot; は一番最初のファイルを示す。例:
</p><pre class="verbatim">:let i = 0
:while i &lt; argc()
:  let f = escape(fnameescape(argv(i)), '.')
:  exe 'amenu Arg.' . f . ' :e ' . f . '&lt;CR&gt;'
:  let i = i + 1
:endwhile
</pre><p>引數 {nr} が指定されなかつた、もしくは {nr} が -1 の場合は、引數リスト |<a href="editing_002etxt.html#arglist">arglist</a>| 全體を返す。
</p>
<p>{winid} 引數はウィンドウ ID を指定する。|<a href="#argc_0028_0029">argc()</a>| を參照。
</p>
<a name="assert_005fbeeps_0028_0029"></a><a name="index-assert_005fbeeps_0028_0029"></a>
</dd>
<dt>assert_beeps({cmd})</dt>
<dd><p>{cmd} を實行し、それがビープもしくはビジュアルベルを<strong>發生させなかつた</strong>場合、|<a href="#v_003aerrors">v:errors</a>| にエラーメッセージを追加する。|<a href="#assert_005ffails_0028_0029">assert_fails()</a>| および |<a href="#assert_002dreturn">assert-return</a>| も參照。
</p>
<a name="assert_005fequal_0028_0029"></a><a name="index-assert_005fequal_0028_0029"></a>
</dd>
<dt>assert_equal({expected}, {actual} [, {msg}])</dt>
<dd><p>{expected} と {actual} が等しくない場合、|<a href="#v_003aerrors">v:errors</a>| にエラーメッセージを追加し、1 が返る。さうでなければ 0 が返る。|<a href="#assert_002dreturn">assert-return</a>|
</p>
<p>暗默的な變換は行はれないため、文字列 &quot;4&quot; は數値 4 とは異なる。同樣に、數値 4 は浮動小數點數 4.0 と異なる。ここでは &rsquo;<samp>ignorecase</samp>&rsquo; の値は使はれず、大文字小文字は常に區別される。{msg} が省略された場合、&quot;Expected {expected} but got {actual}&quot; といふ形式のメッセージが生成される。
</p>
<p>例:
</p><div class="example">
<pre class="example">assert_equal('foo', 'bar')
</pre></div>
<p>以下の結果が |<a href="#v_003aerrors">v:errors</a>| に追加される:
</p><div class="example">
<pre class="example">test.vim line 12: Expected 'foo' but got 'bar'
</pre></div>

<a name="assert_005fequalfile_0028_0029"></a><a name="index-assert_005fequalfile_0028_0029"></a>
</dd>
<dt>assert_equalfile({fname-one}, {fname-two})</dt>
<dd><p>ファイル {fname-one} および {fname-two} がまつたく同じテキストでない場合、|<a href="#v_003aerrors">v:errors</a>| にエラーメッセージが追加される。|<a href="#assert_002dreturn">assert-return</a>| も參照。{fname-one} もしくは {fname-two} が存在しない場合、それに關聯したエラーとなる。主に |<a href="terminal_002etxt.html#terminal_002ddiff">terminal-diff</a>| で役立つ。
</p>
<a name="assert_005fexception_0028_0029"></a><a name="index-assert_005fexception_0028_0029"></a>
</dd>
<dt>assert_exception({error} [, {msg}])</dt>
<dd><p>v:exception に {error} が含まれてゐない時、|<a href="#v_003aerrors">v:errors</a>| にエラーメッセージを追加する。|<a href="#assert_002dreturn">assert-return</a>| も參照。これは例外を投げるコマンドのテストを行ふ場合に使ふことができる。コロンが續くエラー番號を使へば、飜譯の問題を囘避できる:
</p><pre class="verbatim">try
  失敗するコマンド
  call assert_false(1, 'command should have failed')
catch
  call assert_exception('E492:')
endtry
</pre>
<a name="assert_005ffails_0028_0029"></a><a name="index-assert_005ffails_0028_0029"></a>
</dd>
<dt>assert_fails({cmd} [, {error} [, {msg}]])</dt>
<dd><p>{cmd} を實行しエラーを生成しなかつた場合、|<a href="#v_003aerrors">v:errors</a>| にエラーメッセージを追加する。|<a href="#assert_002dreturn">assert-return</a>| も參照。{error} が渡された場合、|<a href="#v_003aerrmsg">v:errmsg</a>| の一部にマッチしなければならない。
</p><blockquote>
<p><strong>Note:</strong> <br>
ビープ音の發生はエラーとは見なされず、いくつかのコマンドは失敗時にビープ音を鳴らすだけであることに注意。これらについては |<a href="#assert_005fbeeps_0028_0029">assert_beeps()</a>| を使用すること。
</p></blockquote>

<a name="assert_005ffalse_0028_0029"></a><a name="index-assert_005ffalse_0028_0029"></a>
</dd>
<dt>assert_false({actual} [, {msg}])</dt>
<dd><p>|<a href="#assert_005fequal_0028_0029">assert_equal()</a>| と同樣に、{actual} が false でない場合、|<a href="#v_003aerrors">v:errors</a>| にエラーメッセージを追加する。|<a href="#assert_002dreturn">assert-return</a>| も參照。ゼロである時、その値は false である。{actual} が數値でない場合、テストが失敗する。{msg} が省略された場合、&quot;Expected False but got {actual}&quot; といふ形式のメッセージが生成される。
</p>
<a name="assert_005finrange_0028_0029"></a><a name="index-assert_005finrange_0028_0029"></a>
</dd>
<dt>assert_inrange({lower}, {upper}, {actual} [, {msg}])</dt>
<dd><p>これは數値または |<a href="#Float">Float</a>| の値をテストする。{actual} が {lower} より低いか {upper} より大きい場合、|<a href="#v_003aerrors">v:errors</a>| にエラーメッセージが追加される。|<a href="#assert_002dreturn">assert-return</a>| も參照。{msg} を省略すると、&quot;Expected range {lower} - {upper}, but got {actual}&quot; といふ形式のエラーが生成される。
</p>
<a name="assert_005fmatch_0028_0029"></a><a name="index-assert_005fmatch_0028_0029"></a>
</dd>
<dt>assert_match({pattern}, {actual} [, {msg}])</dt>
<dd><p>{pattern} が {actual} と一致しない場合、|<a href="#v_003aerrors">v:errors</a>| にエラーメッセージが追加される。|<a href="#assert_002dreturn">assert-return</a>| も參照。
</p>
<p>|<a href="#expr_002d_003d_007e">=~</a>| と同じやうに {pattern} が使はれる: マッチングは &rsquo;<samp>magic</samp>&rsquo; や &rsquo;<samp>cpoptions</samp>&rsquo; の實際の値に關係なく、&rsquo;<samp>magic</samp>&rsquo; が設定され、&rsquo;<samp>cpoptions</samp>&rsquo; が空であるやうに常に行はれる。
</p>
<p>{actual} は文字列として使用され、自動變換が適用される。テキストの先頭と最後に一致させるためには、&quot;^&quot; と &quot;$&quot; を使用すること。兩方を使用してテキスト全體を一致させる。{譯注: 使はなければ、部分一致で判定が行はれる。}
</p>
<p>{msg} を省略すると、&quot;Pattern {pattern} does not match {actual}&quot; といふ形式のエラーが生成される。例:
</p><div class="example">
<pre class="example">assert_match('^f.*o$', 'foobar')
</pre></div>
<p>これは |<a href="#v_003aerrors">v:errors</a>| に文字列が追加されることになる:
</p><div class="example">
<pre class="example">test.vim line 12: Pattern '^f.*o$' does not match 'foobar'
</pre></div>

<a name="assert_005fnotequal_0028_0029"></a><a name="index-assert_005fnotequal_0028_0029"></a>
</dd>
<dt>assert_notequal({expected}, {actual} [, {msg}])</dt>
<dd><p>&lsquo;<code>assert_equal()</code>&lsquo; の反對: {expected} と {actual} が等しいときにエラーメッセージを |<a href="#v_003aerrors">v:errors</a>| に追加する。|<a href="#assert_002dreturn">assert-return</a>| も參照。
</p>
<a name="assert_005fnotmatch_0028_0029"></a><a name="index-assert_005fnotmatch_0028_0029"></a>
</dd>
<dt>assert_notmatch({pattern}, {actual} [, {msg}])</dt>
<dd><p>&lsquo;<code>assert_match()</code>&lsquo; の反對: {pattern} が {actual} にマッチするときに |<a href="#v_003aerrors">v:errors</a>| にエラーメッセージを追加する。|<a href="#assert_002dreturn">assert-return</a>| も參照。
</p>
<a name="assert_005freport_0028_0029"></a><a name="index-assert_005freport_0028_0029"></a>
</dd>
<dt>assert_report({msg})</dt>
<dd><p>テストの失敗を {msg} を使つて直接報告する。常に 1 を返す。
</p>
<a name="assert_005ftrue_0028_0029"></a><a name="index-assert_005ftrue_0028_0029"></a>
</dd>
<dt>assert_true({actual} [, {msg}])</dt>
<dd><p>|<a href="#assert_005fequal_0028_0029">assert_equal()</a>| と同樣に、{actual} が true でない場合、|<a href="#v_003aerrors">v:errors</a>| にエラーメッセージを追加する。|<a href="#assert_002dreturn">assert-return</a>| も參照。非ゼロである時、その値は TRUE である。{actual} が數値でない場合、テストが失敗する。{msg} が省略された場合、&quot;Expected True but got {actual}&quot; といふ形式のメッセージが生成される。
</p>
<a name="asin_0028_0029"></a><a name="index-asin_0028_0029"></a>
</dd>
<dt>asin({expr})</dt>
<dd><p>{expr} の逆正弦 (アークサイン) をラジアンで返す。値は [-pi/2, pi/2] の範圍の浮動小數點數 (|<a href="#Float">Float</a>|)。{expr} は [-1, 1] の範圍の浮動小數點數 (|<a href="#Float">Float</a>|) か數値 (|<a href="#Number">Number</a>|) でなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo asin(0.8)
0.927295
:echo asin(-0.5)
-0.523599
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>

<a name="atan_0028_0029"></a><a name="index-atan_0028_0029"></a>
</dd>
<dt>atan({expr})</dt>
<dd><p>{expr} の逆正接 (アークタンジェント) の主値を浮動小數點數 |<a href="#Float">Float</a>| で返す。主値はラジアンで [-pi/2, +pi/2] の範圍內にある。{expr} は |<a href="#Float">Float</a>| か |<a href="#Number">Number</a>| に評價されなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo atan(100)
1.560797
:echo atan(-4.01)
-1.326405
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>

<a name="atan2_0028_0029"></a><a name="index-atan2_0028_0029"></a>
</dd>
<dt>atan2({expr1}, {expr2})</dt>
<dd><p>{expr1} / {expr2} の逆正接 (アークタンジェント) をラジアンで返す。値は [-pi, pi] の範圍の浮動小數點數 (|<a href="#Float">Float</a>|)。{expr1} と {expr2} は浮動小數點數 (|<a href="#Float">Float</a>|) か數値 (|<a href="#Number">Number</a>|) でなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo atan2(-1, 1)
-0.785398
:echo atan2(1, -1)
2.356194
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>
<a name="balloon_005fgettext_0028_0029"></a><a name="index-balloon_005fgettext_0028_0029"></a>
</dd>
<dt>balloon_gettext()</dt>
<dd><p>バルーン內の現在のテキストを返す。文字列に對してのみ使用され、リストには使用されない。
</p>
<a name="balloon_005fshow_0028_0029"></a><a name="index-balloon_005fshow_0028_0029"></a>
</dd>
<dt>balloon_show({expr})</dt>
<dd><p>{expr} をバルーン內に表示する。GUI では {expr} は文字列として扱はれる。端末では {expr} をバルーンの行を含むリストとしてもよい。{expr} がリストでない場合、|<a href="#balloon_005fsplit_0028_0029">balloon_split()</a>| で分割される。
</p>
<p>{expr} が空文字列の場合、既存のバルーンは削除される。
</p>
<p>例:
</p><pre class="verbatim">func GetBalloonContent()
   &quot; ... 內容の取得を開始
   return ''
endfunc
set balloonexpr=GetBalloonContent()

func BalloonCallback(result)
  call balloon_show(a:result)
endfunc
</pre><p>想定される使用方法は、バルーンの內容の取得が &rsquo;<samp>balloonexpr</samp>&rsquo; から開始されることである。そこから非同期メソッドを呼び出し、コールバックから balloon_show() を呼び出す。&rsquo;<samp>balloonexpr</samp>&rsquo; 自身は空文字列かプレースホルダーを返すことができる。
</p>
<p>バルーンを表示できないときは何も起こらず、エラーメッセージも表示されない。
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bballoon_005feval">+balloon_eval</a>| もしくは |<a href="various_002etxt.html#g_t_002bballoon_005feval_005fterm">+balloon_eval_term</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="balloon_005fsplit_0028_0029"></a><a name="index-balloon_005fsplit_0028_0029"></a>
</dd>
<dt>balloon_split({msg})</dt>
<dd><p>{msg} をバルーン內で表示される行に分割する。カレントウィンドウサイズ用に分割され、デバッガ出力を表示するために最適化される。分割された行の |<a href="#List">List</a>| を返す。
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bballoon_005feval_005fterm">+balloon_eval_term</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="browse_0028_0029"></a><a name="index-browse_0028_0029"></a>
</dd>
<dt>browse({save}, {title}, {initdir}, {default})</dt>
<dd><p>ファイル選擇ダイアログを起動。&quot;has(&quot;browse&quot;)&quot; が |<a href="#TRUE">TRUE</a>| を返すとき (幾つかの GUI バージョンに限定) だけ利用可能。
</p>
<p>入力フィールドの意味は:
</p><table>
<tr><td width="20%">{save}</td><td width="80%">|<a href="#TRUE">TRUE</a>| ならば書込み用ファイルの選擇</td></tr>
<tr><td width="20%">{title}</td><td width="80%">ダイアログのタイトル</td></tr>
<tr><td width="20%">{initdir}</td><td width="80%">ダイアログの始まるディレクトリ</td></tr>
<tr><td width="20%">{default}</td><td width="80%">ファイル名の省略値</td></tr>
</table>
<p>ダイアログがキャンセルされるか、何かエラーがあるか、もしくはブラウジングが不可能ならば、空文字列が戾つてくる。
</p>
<a name="browsedir_0028_0029"></a><a name="index-browsedir_0028_0029"></a>
</dd>
<dt>browsedir({title}, {initdir})</dt>
<dd><p>ディレクトリ選擇ダイアログを起動。&quot;has(&quot;browse&quot;)&quot; が |<a href="#TRUE">TRUE</a>| を返すとき (幾つかの GUI バージョンに限定) だけ利用可能。ディレクトリ選擇ダイアログがないシステムにおいてはファイル選擇ダイアログが使はれる。その場合は、指定したいディレクトリの中のファイルを選擇すること。
</p>
<p>入力フィールドの意味は:
</p><table>
<tr><td width="20%">{title}</td><td width="80%">ダイアログのタイトル</td></tr>
<tr><td width="20%">{initdir}</td><td width="80%">ダイアログの始まるディレクトリ</td></tr>
</table>
<p>ダイアログがキャンセルされるか、何かエラーがあるか、もしくはブラウジングが不可能ならば、空文字列が戾つてくる。
</p>
<a name="bufadd_0028_0029"></a><a name="index-bufadd_0028_0029"></a>
</dd>
<dt>bufadd({name})</dt>
<dd><p>バッファリストに {name} といふ名前でバッファを追加します。
もしもファイルのための {name} がすでに存在してゐるなら、バッファの番號を返します。さうでなければ、直近に作成されたバッファの番號を返します。{name} が空文字の場合、新規バッファが常に作成されます。
バッファは &rsquo;<samp>buflisted</samp>&rsquo; セットを持つてゐないし、まだロードもされてゐないでせう。バッファにテキストを追加するには次のやうに使用します:
</p><pre class="verbatim">let bufnr = bufadd('someName')
call bufload(bufnr)
call setbufline(bufnr, 1, ['some', 'text'])
</pre>
<a name="bufexists_0028_0029"></a><a name="index-bufexists_0028_0029"></a>
</dd>
<dt>bufexists({expr})</dt>
<dd><p>結果は數値で、{expr} と呼ばれるバッファが存在すれば |<a href="#TRUE">TRUE</a>| となる。{expr} が數値の場合、バッファ番號とみなされる。數値の 0 はカレントウィンドウの代替バッファである。
</p>
<p>{expr} が文字列の場合、バッファ名に正確にマッチしなければならない。名前として以下のものが許される:
</p><ul>
<li> カレントディレクトリからの相對パス。
</li><li> フルパス。
</li><li> &rsquo;<samp>buftype</samp>&rsquo; が &quot;<var>nofile</var>&quot; であるバッファの名前
</li><li> URL 名。
</li></ul>
<p>バッファリストにないバッファも檢索される。
</p><blockquote>
<p><strong>Note:</strong> <br>
|<a href="windows_002etxt.html#g_t_003abuffers">:buffers</a>| の出力で、ヘルプファイルは短い名前でリストされてゐるが、bufexists() は長い名前でないと見つけることができない。ある名前を bufexists() に與へて非零になつたとしても、その名前をコマンド |<a href="windows_002etxt.html#g_t_003abuffer">:buffer</a>| に與へる際には |<a href="#expand_0028_0029">expand()</a>| を使つて展開しなければならない場合がある。特に MS-Windows の &quot;c:\DOCUME~1&quot; といふ 8.3 名形式において。代替ファイル名が存在するかを判定するには &quot;bufexists(0)&quot; を使ふ。
</p></blockquote>
<a name="buffer_005fexists_0028_0029"></a><a name="index-buffer_005fexists_0028_0029"></a>
<p>以前の名前: buffer_exists().
</p>
<a name="buflisted_0028_0029"></a><a name="index-buflisted_0028_0029"></a>
</dd>
<dt>buflisted({expr})</dt>
<dd><p>戾り値は數値で、{expr} と呼ばれるバッファが存在しリストされてゐる (&rsquo;<samp>buflisted</samp>&rsquo; オプションがオンになつてゐる) ならば結果は |<a href="#TRUE">TRUE</a>| となる。引數 {expr} は |<a href="#bufexists_0028_0029">bufexists()</a>| と同じやうに扱はれる。
</p>
<a name="bufload_0028_0029"></a><a name="index-bufload_0028_0029"></a>
</dd>
<dt>bufload({expr})</dt>
<dd><p>バッファ {expr} がロードされることを確實にします。バッファ名が存在するファイルを指してゐるなら、ファイルが讀み込まれます。さうでなければバッファは空になるでせう。もしもバッファがすでに讀み込まれてゐるなら、變更はありません。
もしもバッファのファイルのためのスワップファイルが存在してゐるなら、何も言はずにとにかく讀み込まれるでせう。{expr} 引數は |<a href="#bufexists_0028_0029">bufexists()</a>| のやうに使はれます。
</p>
<a name="bufloaded_0028_0029"></a><a name="index-bufloaded_0028_0029"></a>
</dd>
<dt>bufloaded({expr})</dt>
<dd><p>戾り値は數値で、{expr} と呼ばれるバッファが存在しロード濟み (ウィンドウに表示されてゐるか、隱されてゐるかは問はない) ならば結果は |<a href="#TRUE">TRUE</a>| となる。引數 {expr} は |<a href="#bufexists_0028_0029">bufexists()</a>| と同じやうに扱はれる。
</p>
<a name="bufname_0028_0029"></a><a name="index-bufname_0028_0029"></a>
</dd>
<dt>bufname({expr})</dt>
<dd><p>戾り値はバッファの名前。バッファ名はコマンド &quot;<code>:ls</code>&quot; で表示されるものと同樣。
</p>
<p>{expr} が數値ならば、その番號のバッファ名が返される。0 は現在のウィンドウの代替バッファを意味する。{expr} が文字列ならば、バッファ名に對してファイル名マッチング |<a href="autocmd_002etxt.html#file_002dpattern">file-pattern</a>| を行ふパターンとなる。このマッチングは常に、&rsquo;<samp>magic</samp>&rsquo; をセットし &rsquo;<samp>cpoptions</samp>&rsquo; を空にした狀態で行はれる。複數マッチしてしまつた場合には空文字列が返される。
</p>
<p>&quot;&quot; や &quot;%&quot; は現在のバッファを意味し、&quot;#&quot; は代替バッファを意味する。
</p>
<p>完全マッチのものが優先され、完全マッチがなければ、バッファ名の先頭でのマッチ、末尾でのマッチ、中閒でのマッチが探される。完全マッチのみを探すには、パターン先頭に &quot;^&quot; を、末尾に &quot;$&quot; をつける。
</p>
<p>まずバッファリストにあるバッファが探される。そこで 1 個だけマッチが見つかればそれを返す。次にバッファリストにないものが探される。
</p>
<p>{expr} が文字列のときに、それをバッファ番號として使ひたいならば、0 を足すことによつて强制的に數値にすることができる:
</p><div class="example">
<pre class="example">echo bufname(&quot;3&quot; + 0)
</pre></div>
<p>バッファが存在しないか名前を持つてゐない場合には、空文字列が返される。
</p><table>
<tr><td width="40%">bufname(&quot;#&quot;)</td><td width="60%">代替バッファの名前</td></tr>
<tr><td width="40%">bufname(3)</td><td width="60%">バッファ 3 の名前</td></tr>
<tr><td width="40%">bufname(&quot;%&quot;)</td><td width="60%">カレントバッファの名前</td></tr>
<tr><td width="40%">bufname(&quot;file2&quot;)</td><td width="60%">&quot;file2&quot; にマッチするバッファの名前</td></tr>
</table>
<a name="buffer_005fname_0028_0029"></a><a name="index-buffer_005fname_0028_0029"></a>
<p>以前の名前: buffer_name().
</p>
<a name="bufnr_0028_0029"></a><a name="index-bufnr_0028_0029"></a>
</dd>
<dt>bufnr({expr} [, {create}])</dt>
<dd><p>結果はバッファの番號。バッファ番號はコマンド &quot;<code>:ls</code>&quot; で表示されるものと同樣。{expr} の使ひ方は前述の |<a href="#bufname_0028_0029">bufname()</a>| を參照。
バッファが存在しない場合 -1 が返される。ただし、{create} が與へられて0でないときは、バッファリストに載せない新しいバッファを作成しその番號を返す。
</p>
<p>bufnr(&quot;$&quot;) は最後のバッファを意味する:
</p><div class="example">
<pre class="example">:let last_buffer = bufnr(&quot;$&quot;)
</pre></div>
<p>結果は存在してゐるバッファのうちで、もつとも大きなバッファ番號となる。
</p><blockquote>
<p><strong>Note:</strong> <br>
そのバッファ番號より小さいバッファ番號を持つ (ハズの) バッファが、必ずしも全て存在するとは限らない。なぜなら &quot;<code>:bwipeout</code>&quot; がバッファを消すことができるからだ。バッファが存在するかテストするには bufexists() を使ふ。
</p></blockquote>
<a name="buffer_005fnumber_0028_0029"></a><a name="index-buffer_005fnumber_0028_0029"></a>
<p>以前の名前: buffer_number().
<a name="last_005fbuffer_005fnr_0028_0029"></a><a name="index-last_005fbuffer_005fnr_0028_0029"></a>
bufnr(&quot;$&quot;) の以前の名前: last_buffer_nr().
</p>
<a name="bufwinid_0028_0029"></a><a name="index-bufwinid_0028_0029"></a>
</dd>
<dt>bufwinid({expr})</dt>
<dd><p>その結果は數値で、バッファ {expr} に關聯付けられた最初のウィンドウの |<a href="windows_002etxt.html#window_002dID">window-ID</a>|。{expr} の使ひ方は前述の |<a href="#bufname_0028_0029">bufname()</a>| を參照。バッファ {expr} が存在しないか、ウィンドウが無い場合は、-1 が返される。例:
</p><div class="example">
<pre class="example">echo &quot;A window containing buffer 1 is &quot; . (bufwinid(1))
</pre></div>
<p>現在のタブページのみを處理する。
</p>
<a name="bufwinnr_0028_0029"></a><a name="index-bufwinnr_0028_0029"></a>
</dd>
<dt>bufwinnr({expr})</dt>
<dd><p>結果は數値で、バッファ {expr} に關聯付けられた最初のウィンドウの番號。{expr} の使ひ方は前述の |<a href="#bufname_0028_0029">bufname()</a>| を參照。バッファ {expr} が存在しないか、ウィンドウが無い場合には -1 を返す。例:
</p><div class="example">
<pre class="example">echo &quot;A window containing buffer 1 is &quot; . (bufwinnr(1))
</pre></div>
<p>この番號は |<a href="windows_002etxt.html#CTRL_002dW_005fw">CTRL-W_w</a>| や &quot;<code>:wincmd w</code>&quot; |<a href="windows_002etxt.html#g_t_003awincmd">:wincmd</a>| で使へる。
</p>
<p>カレントタブページ內のウィンドウだけを探す。
</p>
<a name="byte2line_0028_0029"></a><a name="index-byte2line_0028_0029"></a>
</dd>
<dt>byte2line({byte})</dt>
<dd><p>カレントバッファの先頭から {byte} 番目の文字が、何行目に含まれるかを返す。これにはカレントバッファの &rsquo;<samp>fileformat</samp>&rsquo; に依存した、改行文字も含まれる。先頭の文字にはバイトカウント 1 が與へられる。|<a href="#line2byte_0028_0029">line2byte()</a>| と |<a href="motion_002etxt.html#go">go</a>| と |<a href="motion_002etxt.html#g_t_003agoto">:goto</a>| も參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bbyte_005foffset">+byte_offset</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="byteidx_0028_0029"></a><a name="index-byteidx_0028_0029"></a>
</dd>
<dt>byteidx({expr}, {nr})</dt>
<dd><p>文字列 {expr} の {nr} 番目の文字のバイトインデックスを返す。最初の文字の {nr} は 0 であり、戾り値は 0 となる。この函數はマルチバイト文字が存在するときのみ有用であり、さうでなければこの函數が返す値は {nr} に等しい。合成文字はまとめて計算される。合成文字のバイト數はそれが合成されてゐるベース文字のバイト數に合算される。合成文字を別々に數へるには |<a href="#byteidxcomp_0028_0029">byteidxcomp()</a>| を參照。
例 :
</p><div class="example">
<pre class="example">echo matchstr(str, &quot;.&quot;, byteidx(str, 3))
</pre></div>
<p>は 4 文字目を表示する。次も同じことをする:
</p><div class="example">
<pre class="example">let s = strpart(str, byteidx(str, 3))
echo strpart(s, 0, byteidx(s, 1))
</pre></div>
<p>|<a href="#strgetchar_0028_0029">strgetchar()</a>| と |<a href="#strcharpart_0028_0029">strcharpart()</a>| も參照。{expr} が {nr} 文字以下の場合は -1 を返す。{expr} がちやうど {nr} 文字の場合は文字列の長さ (バイト單位) を返す。
</p>
<a name="byteidxcomp_0028_0029"></a><a name="index-byteidxcomp_0028_0029"></a>
</dd>
<dt>byteidxcomp({expr}, {nr})</dt>
<dd><p>byteidx() と同じだが、合成文字は個別にカウントされる。例:
</p><div class="example">
<pre class="example">let s = 'e' . nr2char(0x301)
echo byteidx(s, 1)
echo byteidxcomp(s, 1)
echo byteidxcomp(s, 2)
</pre></div>
<p>1 番目と 3 番目は 3 が出力される (&rsquo;e&rsquo; の長さと合成文字の長さを足すと 3 バイト)。2 番目は 1 が出力される (&rsquo;e&rsquo; は 1 バイト)。&rsquo;<samp>encoding</samp>&rsquo; に Unicode が設定されてゐるときのみ byteidx() と違ふ動作になる。
</p>
<a name="call_0028_0029"></a><a name="E699"></a><a name="index-call_0028_0029"></a>
<a name="index-E699"></a>
</dd>
<dt>call({func}, {arglist} [, {dict}])</dt>
<dd><p>リスト |<a href="#List">List</a>| {arglist} の要素を引數として函數 {func} を呼ぶ。{func} は |<a href="#Funcref">Funcref</a>| でも函數の名前でもよい。a:firstline と a:lastline にはカレント行が代入される。呼び出した函數の戾り値を返す。
</p>
<p>{dict} は &quot;dict&quot; 屬性つきの函數用で、これがローカル變數 &quot;self&quot; に代入される。|<a href="#Dictionary_002dfunction">Dictionary-function</a>| を參照。
</p>
<a name="ceil_0028_0029"></a><a name="index-ceil_0028_0029"></a>
</dd>
<dt>ceil({expr})</dt>
<dd><p>{expr} 以上となる最小の整數を浮動小數點數 |<a href="#Float">Float</a>| で返す (切り上げる)。{expr} は |<a href="#Float">Float</a>| か |<a href="#Number">Number</a>| に評價されなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">echo ceil(1.456)
2.0
echo ceil(-5.456)
-5.0
echo ceil(4.0)
4.0
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>
</dd>
<dt>ch_canread({handle})</dt>
<dd><a name="ch_005fcanread_0028_0029"></a><a name="index-ch_005fcanread_0028_0029"></a>
<p>{handle} から何か讀むものがあれば非ゼロを返す。{handle} はチャネルもしくはチャネルを持つジョブであつても良い。
</p>
<p>これはチャネルから、都合のよいときに讀むのに便利である。例へば、タイマーから。
</p>
<p>チャネルがコールバックを持つてゐない場合、メッセージはドロップされることに注意。それを防ぐには close コールバックを追加すること。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005fclose_0028_0029"></a><a name="index-ch_005fclose_0028_0029"></a>
</dd>
<dt>ch_close({handle})</dt>
<dd><p>{handle} を閉ぢる。|<a href="channel_002etxt.html#channel_002dclose">channel-close</a>| を參照。{handle} はチャネルもしくはチャネルを持つジョブであつても良い。閉ぢられたコールバックは呼び出されない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005fclose_005fin_0028_0029"></a><a name="index-ch_005fclose_005fin_0028_0029"></a>
</dd>
<dt>ch_close_in({handle})</dt>
<dd><p>{handle} の &quot;入力&quot; を閉ぢる。|<a href="channel_002etxt.html#channel_002dclose_002din">channel-close-in</a>| を參照。{handle} はチャネルもしくはチャネルを持つジョブであつても良い。閉ぢられたコールバックは呼び出されない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005fevalexpr_0028_0029"></a><a name="index-ch_005fevalexpr_0028_0029"></a>
</dd>
<dt>ch_evalexpr({handle}, {expr} [, {options}])</dt>
<dd><p>{handle} へ {expr} を送信する。{expr} はチャネル側と同じ型にエンコードされる。この函數は生のチャネルでは使用できない。|<a href="channel_002etxt.html#channel_002duse">channel-use</a>| を參照。{handle} はチャネルもしくはチャネルを持つジョブであつても良い。
<a name="E917"></a><a name="index-E917"></a>
{options} は辭書でなければならない。また &quot;callback&quot; のエントリを持つてはならない。また個別のリクエストに對して &quot;timeout&quot; を持つ事ができる。
</p>
<p>ch_evalexpr() は應答を待ち、式をデコードした物が返される。エラーもしくはタイムアウトの場合は空文字列が返る。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005fevalraw_0028_0029"></a><a name="index-ch_005fevalraw_0028_0029"></a>
</dd>
<dt>ch_evalraw({handle}, {string} [, {options}])</dt>
<dd><p>{handle} へ {string} を送信する。{handle} はチャネルもしくはチャネルを持つジョブであつても良い。
</p>
<p>|<a href="#ch_005fevalexpr_0028_0029">ch_evalexpr()</a>| と同樣に動作する。しかしリクエストをエンコードしたり應答をデコードしたりはしない。呼び出しは正しいコンテンツである事が保證される。また NL モードでは改行が行はれるが、ここでは改行が付與されない。NL は應答から削除される。
</p><blockquote>
<p><strong>Note:</strong> <br>
Vim は生チャネルで受け取つたテキストが完全なものなのかわからないことに注意。
最初の部分だけが返されてゐるのかもしれないし、殘りの部分を取り込むために |<a href="#ch_005freadraw_0028_0029">ch_readraw()</a>| を使ふ必要がある。
</p></blockquote>
<p>|<a href="channel_002etxt.html#channel_002duse">channel-use</a>| を參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005fgetbufnr_0028_0029"></a><a name="index-ch_005fgetbufnr_0028_0029"></a>
</dd>
<dt>ch_getbufnr({handle}, {what})</dt>
<dd><p>{what} に使用されてゐる {handle} のバッファ番號を得る。{handle} はチャネルもしくはチャネルを持つジョブであつても良い。{what} は標準エラーの爲の &quot;err&quot;、標準出力の爲の &quot;out&quot;、もしくはソケット出力の爲の空文字列が指定できる。バッファが存在しない場合は -1 が返る。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005fgetjob_0028_0029"></a><a name="index-ch_005fgetjob_0028_0029"></a>
</dd>
<dt>ch_getjob({channel})</dt>
<dd><p>{channel} に關聯付けられた Job を得る。もしジョブが無い場合、戾り値の Job で |<a href="#job_005fstatus_0028_0029">job_status()</a>| を呼び出すと &quot;fail&quot; が返される。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| と |<a href="various_002etxt.html#g_t_002bjob">+job</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005finfo_0028_0029"></a><a name="index-ch_005finfo_0028_0029"></a>
</dd>
<dt>ch_info({handle})</dt>
<dd><p>{handle} に關する情報を辭書で返す。アイテムは:
</p><table>
<tr><td width="20%">&quot;id&quot;</td><td width="80%">チャネル番號</td></tr>
<tr><td width="20%">&quot;status&quot;</td><td width="80%">ch_status() と同樣に、&quot;open&quot;, &quot;buffered&quot; または &quot;closed&quot;</td></tr>
</table>
<p>ch_open() で開いた場合:
</p><table>
<tr><td width="40%">&quot;hostname&quot;</td><td width="60%">アドレスのホスト名</td></tr>
<tr><td width="40%">&quot;port&quot;</td><td width="60%">アドレスのポート</td></tr>
<tr><td width="40%">&quot;sock_status&quot;</td><td width="60%">&quot;open&quot; または &quot;closed&quot;</td></tr>
<tr><td width="40%">&quot;sock_mode&quot;</td><td width="60%">&quot;NL&quot;, &quot;RAW&quot;, &quot;JSON&quot; または &quot;JS&quot;</td></tr>
<tr><td width="40%">&quot;sock_io&quot;</td><td width="60%">&quot;socket&quot;</td></tr>
<tr><td width="40%">&quot;sock_timeout&quot;</td><td width="60%">タイムアウト (ミリ秒)</td></tr>
</table>
<p>job_start() で開いた場合:
</p><table>
<tr><td width="30%">&quot;out_status&quot;</td><td width="70%">&quot;open&quot;, &quot;buffered&quot; または &quot;closed&quot;</td></tr>
<tr><td width="30%">&quot;out_mode&quot;</td><td width="70%">&quot;NL&quot;, &quot;RAW&quot;, &quot;JSON&quot; または &quot;JS&quot;</td></tr>
<tr><td width="30%">&quot;out_io&quot;</td><td width="70%">&quot;null&quot;, &quot;pipe&quot;, &quot;file&quot; または &quot;buffer&quot;</td></tr>
<tr><td width="30%">&quot;out_timeout&quot;</td><td width="70%">タイムアウト (ミリ秒)</td></tr>
<tr><td width="30%">&quot;err_status&quot;</td><td width="70%">&quot;open&quot;, &quot;buffered&quot; または &quot;closed&quot;</td></tr>
<tr><td width="30%">&quot;err_mode&quot;</td><td width="70%">&quot;NL&quot;, &quot;RAW&quot;, &quot;JSON&quot; または &quot;JS&quot;</td></tr>
<tr><td width="30%">&quot;err_io&quot;</td><td width="70%">&quot;out&quot;, &quot;null&quot;, &quot;pipe&quot;, &quot;file&quot; または &quot;buffer&quot;</td></tr>
<tr><td width="30%">&quot;err_timeout&quot;</td><td width="70%">タイムアウト (ミリ秒)</td></tr>
<tr><td width="30%">&quot;in_status&quot;</td><td width="70%">&quot;open&quot; または &quot;closed&quot;</td></tr>
<tr><td width="30%">&quot;in_mode&quot;</td><td width="70%">&quot;NL&quot;, &quot;RAW&quot;, &quot;JSON&quot; または &quot;JS&quot;</td></tr>
<tr><td width="30%">&quot;in_io&quot;</td><td width="70%">&quot;null&quot;, &quot;pipe&quot;, &quot;file&quot; または &quot;buffer&quot;</td></tr>
<tr><td width="30%">&quot;in_timeout&quot;</td><td width="70%">タイムアウト (ミリ秒)</td></tr>
</table>

<a name="ch_005flog_0028_0029"></a><a name="index-ch_005flog_0028_0029"></a>
</dd>
<dt>ch_log({msg} [, {handle}])</dt>
<dd><p>|<a href="#ch_005flogfile_0028_0029">ch_logfile()</a>| によつてログファイルが開かれてゐる場合はチャネルのログファイルに {msg} を書き込む。{handle} が渡されてゐる場合はチャネル番號がメッセージの中で使はれる。
</p>
<p>{handle} はチャネルもしくはチャネルを持つジョブであつても良い。使用されるチャネル番號のチャネルは開いてゐなければならない。
</p>
<a name="ch_005flogfile_0028_0029"></a><a name="index-ch_005flogfile_0028_0029"></a>
</dd>
<dt>ch_logfile({fname} [, {mode}])</dt>
<dd><p>{fname} へチャネルの擧動ログ出力を開始する。{fname} が空の場合、ロギングは停止する。
</p>
<p>{mode} が省略されるか &quot;a&quot; の場合、ファイルへの追加になる。{mode} が &quot;w&quot; の場合、空のファイルへで開始される。
</p>
<p>ログメッセージを書き込むには |<a href="#ch_005flog_0028_0029">ch_log()</a>| を使用する。UNIX で &quot;tail -f&quot; にてリアルタイムで何が行はれてゐるかが見える樣に、ファイルはメッセージ每にフラッシュされる。
</p>
<p>この函數は |<a href="#sandbox">sandbox</a>| 內では無效である。
</p><blockquote>
<p><strong>Note:</strong> <br>
チャネルとの通信はファイルに格納される。これには、あなたが端末ウィンドウ上でタイプしたパスワードのやうな、機密やプライバシーに關する情報を含むことがあることに注意すること。
</p></blockquote>


<a name="ch_005fopen_0028_0029"></a><a name="index-ch_005fopen_0028_0029"></a>
</dd>
<dt>ch_open({address} [, {options}])</dt>
<dd><p>{address}へのチャネルを開く。|<a href="channel_002etxt.html#channel">channel</a>| を參照。チャネルを返す。失敗をチェックするには |<a href="#ch_005fstatus_0028_0029">ch_status()</a>| を使用する。
</p>
<p>{address} は &quot;localhost:8765&quot; のやうに &quot;ホスト名:ポート&quot; の形式である。
</p>
<p>{options} が與へられる場合は辭書でなければならない。|<a href="channel_002etxt.html#channel_002dopen_002doptions">channel-open-options</a>| を參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005fread_0028_0029"></a><a name="index-ch_005fread_0028_0029"></a>
</dd>
<dt>ch_read({handle} [, {options}])</dt>
<dd><p>{handle} から讀み込みメッセージを受信する。{handle} はチャネルもしくはチャネルを持つジョブであつても良い。NL チャネルの場合、何も讀み込むものがない (チャネルが閉ぢられた) 場合を除いて、NL を受信するまで待つ。|<a href="channel_002etxt.html#channel_002dmore">channel-more</a>| を參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005freadblob_0028_0029"></a><a name="index-ch_005freadblob_0028_0029"></a>
</dd>
<dt>ch_readblob({handle} [, {options}])</dt>
<dd><p>ch_read() と同樣に動作するが、バイナリデータを讀み込んで |<a href="#Blob">Blob</a>| を返す。
</p>
<p>|<a href="channel_002etxt.html#channel_002dmore">channel-more</a>| を參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005freadraw_0028_0029"></a><a name="index-ch_005freadraw_0028_0029"></a>
</dd>
<dt>ch_readraw({handle} [, {options}])</dt>
<dd><p>ch_read() と同樣に動作するが JS や JSON の場合でもメッセージはデコードされない。NL チャネルの場合、NL を受信するまで待つことはないが、それ以外は ch_read() と同樣に動作する。|<a href="channel_002etxt.html#channel_002dmore">channel-more</a>| を參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005fsendexpr_0028_0029"></a><a name="index-ch_005fsendexpr_0028_0029"></a>
</dd>
<dt>ch_sendexpr({handle}, {expr} [, {options}])</dt>
<dd><p>{handle} へ {expr} を送信する。{expr} はチャネル側と同じ型にエンコードされる。この函數は生のチャネルでは使用できない。
<a name="E912"></a><a name="index-E912"></a>
|<a href="channel_002etxt.html#channel_002duse">channel-use</a>| を參照。
</p>
<p>{handle} はチャネルもしくはチャネルを持つジョブであつても良い。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005fsendraw_0028_0029"></a><a name="index-ch_005fsendraw_0028_0029"></a>
</dd>
<dt>ch_sendraw({handle}, {expr} [, {options}])</dt>
<dd><p>|<a href="#String">String</a>| や |<a href="#Blob">Blob</a>| {expr} を {handle} 越しに送る。|<a href="#ch_005fsendexpr_0028_0029">ch_sendexpr()</a>| と同樣に動作するが、リクエストをエンコードしたり應答をデコードしたりはしない。呼び出しは正しいコンテンツである事が保證される。また NL モードでは改行が行はれるが、ここでは改行が付與されない。NL は應答から削除される。|<a href="channel_002etxt.html#channel_002duse">channel-use</a>| を參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="ch_005fsetoptions_0028_0029"></a><a name="index-ch_005fsetoptions_0028_0029"></a>
</dd>
<dt>ch_setoptions({handle}, {options})</dt>
<dd><p>{handle} にオプションを設定する:
</p><table>
<tr><td width="30%">&quot;callback&quot;</td><td width="70%">チャネルのコールバック</td></tr>
<tr><td width="30%">&quot;timeout&quot;</td><td width="70%">デフォルトの讀み込みタイムアウト (ミリ秒)</td></tr>
<tr><td width="30%">&quot;mode&quot;</td><td width="70%">チャネル全體のモード</td></tr>
</table>
<p>より詳しい說明は |<a href="#ch_005fopen_0028_0029">ch_open()</a>| を參照。{handle} はチャネルもしくはチャネルを持つジョブであつても良い。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
モードの變更はキューイングされてゐるメッセージを失つてしまふかもしれない。
</p></blockquote>
<p>以下のオプションは變更できない:
</p><table>
<tr><td width="30%">&quot;waittime&quot;</td><td width="70%">|<a href="#ch_005fopen_0028_0029">ch_open()</a>| だけで適用できる</td></tr>
</table>

<a name="ch_005fstatus_0028_0029"></a><a name="index-ch_005fstatus_0028_0029"></a>
</dd>
<dt>ch_status({handle} [, {options}])</dt>
<dd><p>{handle} の狀態を返す:
</p><table>
<tr><td width="20%">&quot;fail&quot;</td><td width="80%">チャネルのオープンに失敗</td></tr>
<tr><td width="20%">&quot;open&quot;</td><td width="80%">チャネルは利用可能</td></tr>
<tr><td width="20%">&quot;buffered&quot;</td><td width="80%">チャネルは讀込可能、または書き込まれてゐない</td></tr>
<tr><td width="20%">&quot;closed&quot;</td><td width="80%">チャネルは利用不可</td></tr>
</table>
<p>{handle} はチャネルもしくはチャネルを持つジョブであつても良い。チャネルは閉ぢられてゐるが |<a href="#ch_005fread_0028_0029">ch_read()</a>| を使つて殘つたデータをまだ讀み取る事ができる場合には &quot;buffered&quot; が利用できる。
</p>
<p>{options} が指定された場合、&quot;part&quot; 要素でチャネルのどのパート (&quot;out&quot; または &quot;err&quot;) の狀態を返すかを指定できる。例へば、エラーの狀態を得るには:
</p><div class="example">
<pre class="example">ch_status(job, {&quot;part&quot;: &quot;err&quot;})
</pre></div>
<a name="changenr_0028_0029"></a><a name="index-changenr_0028_0029"></a>
</dd>
<dt>changenr()</dt>
<dd><p>最も最近の變更の番號を返す。|<a href="undo_002etxt.html#g_t_003aundolist">:undolist</a>| で表示される番號と同じであり、|<a href="undo_002etxt.html#g_t_003aundo">:undo</a>| コマンドの引數として使ふことができる。變更を行つた直後ではその變更の番號となる。redo を行つた直後は redo された變更の番號となる。undo を行つた直後は undo された變更より 1 小さい番號になる。
</p>
<a name="char2nr_0028_0029"></a><a name="index-char2nr_0028_0029"></a>
</dd>
<dt>char2nr({expr} [, {utf8}])</dt>
<dd><p>{expr} の最初の文字の ASCII コードを返す。例:
</p><table>
<tr><td width="40%">char2nr(&quot; &quot;)</td><td width="60%">returns 32</td></tr>
<tr><td width="40%">char2nr(&quot;ABC&quot;)</td><td width="60%">returns 65</td></tr>
</table>
<p>{utf8} を省略、またはゼロを指定すると、現在の &rsquo;<samp>encoding</samp>&rsquo; が適用される。&quot;<var>utf-8</var>&quot; の場合の例:
</p><table>
<tr><td width="40%">char2nr(&quot;á&quot;)</td><td width="60%">returns 225</td></tr>
<tr><td width="40%">char2nr(&quot;á&quot;[0])</td><td width="60%">returns 195</td></tr>
</table>
<p>{utf8} に 1 を指定すると、常に utf-8 文字として扱はれる。合成文字は個別の文字として扱はれる。|<a href="#nr2char_0028_0029">nr2char()</a>| はこの逆を行ふ。
文字列を文字の番號のリストに變換するには:
</p><pre class="verbatim">let str = &quot;ABC&quot;
let list = map(split(str, '\zs'), {_, val -&gt; char2nr(val)})
</pre><p>結果: [65, 66, 67]
</p>
</dd>
<dt>chdir({dir})</dt>
<dd><a name="chdir_0028_0029"></a><a name="index-chdir_0028_0029"></a>
<p>現在の作業ディレクトリを {dir} に變更する。ディレクトリの變更範圍は、カレントウィンドウのディレクトリによつて異なる:
</p><ul>
<li> カレントウィンドウにウィンドウローカルディレクトリ (|<a href="editing_002etxt.html#g_t_003alcd">:lcd</a>|) がある場合は、ウィンドウローカルディレクトリを變更する。
</li><li> それ以外の場合、カレントタブページにローカルディレクトリ (|<a href="editing_002etxt.html#g_t_003atcd">:tcd</a>|) がある場合は、タブページのローカルディレクトリを變更する。
</li><li> それ以外の場合、グローバルディレクトリを變更する。
</li></ul>
<p>If successful, returns the previous working directory.  Pass
		this to another chdir() to restore the directory.
		On failure, returns an empty string.
</p>
<p>Example: &gt;
			let save_dir = chdir(newdir)
			if save_dir != &quot;&quot;
			   &quot; ... do some work
			   call chdir(save_dir)
			endif
&lt;
<a name="cindent_0028_0029"></a><a name="index-cindent_0028_0029"></a>
</p></dd>
<dt>cindent({lnum})</dt>
<dd><p>&rsquo;<samp>cindent</samp>&rsquo; で使はれるのと同じ C 言語用のインデント規則に從つた場合の {lnum} 行目のインデント量を返す。インデント量はスペースで數へられ、&rsquo;<samp>tabstop</samp>&rsquo; の値は關係ない。{lnum} は |<a href="#getline_0028_0029">getline()</a>| の場合と同樣に扱はれる。{lnum} が無效な値のときや |<a href="various_002etxt.html#g_t_002bcindent">+cindent</a>| 機能なしでコンパイルされてゐるときは -1 を返す。|<a href="indent_002etxt.html#C_002dindenting">C-indenting</a>| を參照。
</p>
<a name="clearmatches_0028_0029"></a><a name="index-clearmatches_0028_0029"></a>
</dd>
<dt>clearmatches([{win}])</dt>
<dd><p>|<a href="#matchadd_0028_0029">matchadd()</a>| と コマンド |<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| によりカレントウィンドウに定義されたマッチをすべて消去する。
</p>
<p>{win} が指定されれば、カレントウィンドウではなく指定されたウィンドウあるいはウィンドウ ID を對象にする。
</p>
<a name="col_0028_0029"></a><a name="index-col_0028_0029"></a>
</dd>
<dt>col({expr})</dt>
<dd><p>戾り値は數値で、{expr} で與へられる位置の桁番號 (バイトインデックス)。有效な位置は:
</p><table>
<tr><td width="10%">.</td><td width="90%">現在の位置</td></tr>
<tr><td width="10%">$</td><td width="90%">カレント行の末尾 (カレント行のバイト數 +1 を返す)</td></tr>
<tr><td width="10%">&rsquo;x</td><td width="90%">マークxの位置 (マークが設定されてゐない場合 0)</td></tr>
<tr><td width="10%">v</td><td width="90%">ビジュアルモードでは: ビジュアル選擇領域の開始行 (カーソルがその端)。ビジュアルモード以外ではカーソル位置を返す。すぐに更新される點が |<a href="motion_002etxt.html#g_t_0027_003c">'&lt;</a>| と違ふ。</td></tr>
</table>
<p>さらに {expr} は [lnum, col] といふ行番號と桁番號のリスト |<a href="#List">List</a>| であつてもよい。col に &quot;$&quot; を指定して、ある行の最後の桁を取得するのにとても便利である。&quot;lnum&quot; か &quot;col&quot; が範圍外である場合は 0 を返す。
</p>
<p>行番號を取得するには |<a href="#line_0028_0029">line()</a>| を使ふ。行番號と桁番號兩方を取得するには |<a href="#getpos_0028_0029">getpos()</a>| を使ふ。畫面上の桁番號を取得するには |<a href="#virtcol_0028_0029">virtcol()</a>| を使ふ。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
現在のファイルのマークしか使へないことに注意。
</p></blockquote>
<p>例:
</p><table>
<tr><td width="50%">col(&quot;.&quot;)</td><td width="50%">カーソルの桁</td></tr>
<tr><td width="50%">col(&quot;$&quot;)</td><td width="50%">カレント行の長さ +1</td></tr>
<tr><td width="50%">col(&quot;&rsquo;t&quot;)</td><td width="50%">マークtの桁</td></tr>
<tr><td width="50%">col(&quot;&rsquo;&quot; . markname)</td><td width="50%">マーク markname の桁</td></tr>
</table>
<p>先頭の桁は 1 になる。戾り値 0 はエラーを意味する。大文字のマークは他のバッファを指してゐるかもしれない。&rsquo;<samp>virtualedit</samp>&rsquo; が有效なとき、カーソルが行末を越えてゐると、桁番號は行の長さより 1 大きい値を返す。插入モードで桁番號を取得するには次のマップが使へる:
</p><div class="example">
<pre class="example">:imap &lt;F2&gt; &lt;C-O&gt;:let save_ve = &amp;ve&lt;CR&gt;
        \&lt;C-O&gt;:set ve=all&lt;CR&gt;
        \&lt;C-O&gt;:echo col(&quot;.&quot;) . &quot;\n&quot; &lt;Bar&gt;
        \let &amp;ve = save_ve&lt;CR&gt;
</pre></div>

<a name="complete_0028_0029"></a><a name="E785"></a><a name="index-complete_0028_0029"></a>
<a name="index-E785"></a>
</dd>
<dt>complete({startcol}, {matches})</dt>
<dd><p>插入モード補完の候補を設定する。插入モードでのみ使用できる。CTRL-R = (|<a href="insert_002etxt.html#i_005fCTRL_002dR">i_CTRL-R</a>| を參照) と組み合はせてマッピングを作る必要がある。CTRL-O の後や、&lt;expr&gt; マッピングの中では正しく動作しない。
{startcol} は補完すべき單語の開始位置を示す、行內のバイトオフセットである。その位置からカーソルまでのテキストが補完すべき單語となる。
</p>
<p>{matches} はリスト |<a href="#List">List</a>| でなければならない。リストの各要素が 1 つの候補となる。この要素として許される値については |<a href="insert_002etxt.html#complete_002ditems">complete-items</a>| を參照。
</p><blockquote>
<p><strong>Note:</strong> <br>
この函數を呼んだ後は補完を停止させるやうなテキストの插入をしないやうに注意しなければならない。
</p></blockquote>
<p>この函數で設定した候補は普通の插入モード補完と同じ樣に <kbd>CTRL-N</kbd> と <kbd>CTRL-P</kbd> で選擇できる。設定されてゐればポップアップメニューが表示される。|<a href="insert_002etxt.html#ins_002dcompletion_002dmenu">ins-completion-menu</a>| を參照。
</p>
<p>例:
</p><pre class="verbatim">inoremap &lt;F5&gt; &lt;C-R&gt;=ListMonths()&lt;CR&gt;
func! ListMonths()
  call complete(col('.'), ['January', 'February', 'March',
        \ 'April', 'May', 'June', 'July', 'August', 'September',
        \ 'October', 'November', 'December'])
  return ''
endfunc
</pre><p>この例はそれほど役には立たないが、使ひ方を示してゐる。
</p><blockquote>
<p><strong>Note:</strong> <br>
0 が插入されてしまはないやうに空文字列を返してゐることに注意。
</p></blockquote>

<a name="complete_005fadd_0028_0029"></a><a name="index-complete_005fadd_0028_0029"></a>
</dd>
<dt>complete_add({expr})</dt>
<dd><p>候補のリストに {expr} を追加する。&rsquo;<samp>completefunc</samp>&rsquo; で指定された函數の中でのみ使はれる。
</p>
<p>失敗したときは 0 を返す (空文字列かメモリ不足)。候補が追加されたときは 1 を返し、その候補が既にリストに存在するときは 2 を返す。
</p>
<p>{expr} の說明については |<a href="insert_002etxt.html#complete_002dfunctions">complete-functions</a>| を參照。&rsquo;<samp>omnifunc</samp>&rsquo; が返すリストと同じである。
</p>
<a name="complete_005fcheck_0028_0029"></a><a name="index-complete_005fcheck_0028_0029"></a>
</dd>
<dt>complete_check()</dt>
<dd><p>補完候補を探してゐる閒にキーがタイプされたかどうか確認する。補完の檢索に時閒がかかる場合に使はれる。候補の檢索を中斷しようとしてゐるときは |<a href="#TRUE">TRUE</a>| を返す。さうでないときは 0 を返す。
</p>
<p>&rsquo;<samp>completefunc</samp>&rsquo; で指定された函數の中でのみ使はれる。
</p>
</dd>
<dt>complete_info([{what}])</dt>
<dd><a name="complete_005finfo_0028_0029"></a><a name="index-complete_005finfo_0028_0029"></a>
<p>插入モードの補完に關する情報を辭書で返す。|<a href="insert_002etxt.html#ins_002dcompletion">ins-completion</a>| を參照。
要素は以下の通り:
</p><table>
<tr><td width="30%">mode</td><td width="70%">現在の補完モード名の文字列。値は |<a href="#complete_005finfo_005fmode">complete_info_mode</a>| を參照。</td></tr>
<tr><td width="30%">pum_visible</td><td width="70%">ポップアップメニューが表示されてゐるなら |<a href="#TRUE">TRUE</a>|。

<p>|<a href="#pumvisible_0028_0029">pumvisible()</a>| を參照。
</p></td></tr>
<tr><td width="30%">items</td><td width="70%">補完マッチのリスト。各要素は &quot;word&quot;, &quot;abbr&quot;, &quot;menu&quot;, &quot;kind&quot;, &quot;info&quot;, &quot;user_data&quot; を含む辭書。

<p>|<a href="insert_002etxt.html#complete_002ditems">complete-items</a>| を參照。
</p></td></tr>
<tr><td width="30%">selected</td><td width="70%">選擇された補完候補のインデックス。最初のインデックスが 0。どの補完候補も選擇されてゐなければ -1 (入力したテキストのみを表示)。</td></tr>
<tr><td width="30%">inserted</td><td width="70%">入力された文字列。[現時點では未實裝]</td></tr>
</table>

<a name="complete_005finfo_005fmode"></a><a name="index-complete_005finfo_005fmode"></a>
<p>mode の値は:
</p><table>
<tr><td width="30%">&quot;&quot;</td><td width="70%">補完モードでない</td></tr>
<tr><td width="30%">&quot;keyword&quot;</td><td width="70%">キーワード補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002dN">i_CTRL-X_CTRL-N</a>|</td></tr>
<tr><td width="30%">&quot;ctrl_x&quot;</td><td width="70%">CTRL-X のみが入力された |<a href="insert_002etxt.html#i_005fCTRL_002dX">i_CTRL-X</a>|</td></tr>
<tr><td width="30%">&quot;whole_line&quot;</td><td width="70%">行全體補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002dL">i_CTRL-X_CTRL-L</a>|</td></tr>
<tr><td width="30%">&quot;files&quot;</td><td width="70%">ファイル名補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002dF">i_CTRL-X_CTRL-F</a>|</td></tr>
<tr><td width="30%">&quot;tags&quot;</td><td width="70%">タグ補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002d_005d">i_CTRL-X_CTRL-]</a>|</td></tr>
<tr><td width="30%">&quot;path_defines&quot;</td><td width="70%">定義補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002dD">i_CTRL-X_CTRL-D</a>|</td></tr>
<tr><td width="30%">&quot;path_patterns&quot;</td><td width="70%">インクルード補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002dI">i_CTRL-X_CTRL-I</a>|</td></tr>
<tr><td width="30%">&quot;dictionary&quot;</td><td width="70%">辭書補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002dK">i_CTRL-X_CTRL-K</a>|</td></tr>
<tr><td width="30%">&quot;thesaurus&quot;</td><td width="70%">同義語補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002dT">i_CTRL-X_CTRL-T</a>|</td></tr>
<tr><td width="30%">&quot;cmdline&quot;</td><td width="70%">Vim コマンドライン補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002dV">i_CTRL-X_CTRL-V</a>|</td></tr>
<tr><td width="30%">&quot;function&quot;</td><td width="70%">ユーザー定義補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002dU">i_CTRL-X_CTRL-U</a>|</td></tr>
<tr><td width="30%">&quot;omni&quot;</td><td width="70%">オムニ補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fCTRL_002dO">i_CTRL-X_CTRL-O</a>|</td></tr>
<tr><td width="30%">&quot;spell&quot;</td><td width="70%">スペル補完 |<a href="insert_002etxt.html#i_005fCTRL_002dX_005fs">i_CTRL-X_s</a>|</td></tr>
<tr><td width="30%">&quot;eval&quot;</td><td width="70%">|<a href="#complete_0028_0029">complete()</a>| 補完</td></tr>
<tr><td width="30%">&quot;unknown&quot;</td><td width="70%">その他の內部モード</td></tr>
</table>

<p>オプショナル引數としてリスト {what} が與へられると、{what} にある項目のみが返る。{what} 內のサポートされてゐない項目は無視される。
</p>
<p>例:
</p><div class="example">
<pre class="example">&quot; 全ての項目を取得
call complete_info()
&quot; 'mode' のみを取得
call complete_info(['mode'])
&quot; 'mode' と 'pum_visible' のみを取得
call complete_info(['mode', 'pum_visible'])
</pre></div>
<a name="confirm_0028_0029"></a><a name="index-confirm_0028_0029"></a>
</dd>
<dt>confirm({msg} [, {choices} [, {default} [, {type}]]])</dt>
<dd><p>confirm() はユーザーに選擇させるためのダイアログを提供する。戾り値は選擇した番號になる。最初の選擇肢が 1 である。
</p><blockquote>
<p><strong>Note:</strong> <br>
confirm() は、ダイアログサポートを有效にしてコンパイルした時にだけ動作する。|<a href="various_002etxt.html#g_t_002bdialog_005fcon">+dialog_con</a>| と |<a href="various_002etxt.html#g_t_002bdialog_005fgui">+dialog_gui</a>| を參照。
</p></blockquote>

<p>ダイアログ |<a href="gui_005fw32_002etxt.html#dialog">dialog</a>| には {msg} に加へて {choices} の選擇肢が表示される。{choices} が指定されない、または空の場合は選擇肢 &quot;&amp;OK&quot; が表示される (使用してゐる言語に飜譯される)。{msg} は文字列で &rsquo;\n&rsquo; を改行として使用できる。幾つかのシステムでは、長すぎる行は自動的に折り返される。
</p>
<p>{choices} は文字列で、個々の選擇肢は &rsquo;\n&rsquo; によつて區切られる。例:
</p><div class="example">
<pre class="example">confirm(&quot;Save changes?&quot;, &quot;&amp;Yes\n&amp;No\n&amp;Cancel&quot;)
</pre></div>
<p>&rsquo;&amp;&rsquo; の後の文字は選擇肢のショートカットキーになる。この場合 &quot;Cancel&quot; を選擇するのに &rsquo;c&rsquo; をタイプすることができる。ショートカットキーは最初の文字である必要は無い:
</p><div class="example">
<pre class="example">confirm(&quot;file has been modified&quot;, &quot;&amp;Save\nSave &amp;All&quot;)
</pre></div>

<p>コンソールでは、デフォルトのショートカットキーとして、各選擇肢の最初の文字が使はれる。
</p>
<p>省略可能な引數 {default} は <code class="tt-key">&lt;CR&gt;</code> キーを叩いた時に選擇される選擇肢の番號を指定する。最初の選擇肢をデフォルトにするならば1を使用する。デフォルトを設定したくないのならば 0 を使用する。{default} を省略した場合、1 が使用される。
</p>
<p>省略可能な引數 {type} はダイアログの種類を指定する。これは GTK, Mac, Motif, Win32 の GUI でアイコンを指定するのに使はれる。&quot;Error&quot;, &quot;Question&quot;, &quot;Info&quot;, &quot;Warning&quot;, &quot;Generic&quot; のうちどれか 1 つを指定する。以上のうちの先頭の文字だけで指定できる。{type} が省略された場合、&quot;Generic&quot; が使用される。
</p>
<p>ユーザーが <code class="tt-key">&lt;Esc&gt;</code> や <kbd>CTRL-C</kbd> や、その他の割りこみキーでダイアログを中斷した場合、confirm() は 0 を返す。
</p>
<p>例:
</p><pre class="verbatim">:let choice = confirm(&quot;What do you want?&quot;, &quot;&amp;Apples\n&amp;Oranges\n&amp;Bananas&quot;, 2)
:if choice == 0
:	echo &quot;make up your mind!&quot;
:elseif choice == 3
:	echo &quot;tasteful&quot;
:else
:	echo &quot;I prefer bananas myself.&quot;
:endif
</pre><p>GUI のダイアログではボタンが使用される。ボタンの配置は &rsquo;<samp>guioptions</samp>&rsquo; の &rsquo;<var>v</var>&rsquo; フラグに依存する。もしも &rsquo;<var>v</var>&rsquo; フラグが含まれてゐるのなら、ボタンは常に垂直に配置される。さうでなければ水平に配置しようと試みられる。水平配置がうまくマッチしない場合は、垂直配置が使はれる。幾つかのシステムでは常に水平配置が使はれる。
</p>
<a name="copy_0028_0029"></a><a name="index-copy_0028_0029"></a>
</dd>
<dt>copy({expr})</dt>
<dd><p>{expr} のコピーを作る。數値と文字列の場合は、{expr} そのものとコピーの閒に違ひはない。{expr} がリスト |<a href="#List">List</a>| の場合は淺いコピーを作る。つまり元のリストを變更してもコピーは變更されず、逆も同じである。しかし要素は共通で、片方の要素に對し變更を加へると、もう一方の要素も變更される |<a href="#Lists">Lists</a>|。辭書 |<a href="#Dictionary">Dictionary</a>| はリスト |<a href="#List">List</a>| と同樣な方法でコピーされる。|<a href="#deepcopy_0028_0029">deepcopy()</a>| も參照。
</p>
<a name="cos_0028_0029"></a><a name="index-cos_0028_0029"></a>
</dd>
<dt>cos({expr})</dt>
<dd><p>{expr} の餘弦 (コサイン) をラジアンで浮動小數點數 |<a href="#Float">Float</a>| で返す。{expr} は |<a href="#Float">Float</a>| または |<a href="#Number">Number</a>| に評價されなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo cos(100)
0.862319
:echo cos(-4.01)
-0.646043
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>

<a name="cosh_0028_0029"></a><a name="index-cosh_0028_0029"></a>
</dd>
<dt>cosh({expr})</dt>
<dd><p>{expr} の雙曲線餘弦 (ハイパボリックコサイン) を返す。値は [1, inf] の範圍の浮動小數點數 (|<a href="#Float">Float</a>|)。{expr} は浮動小數點數 (|<a href="#Float">Float</a>|) か 數値 (|<a href="#Number">Number</a>|) でなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo cosh(0.5)
1.127626
:echo cosh(-0.5)
-1.127626
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>

<a name="count_0028_0029"></a><a name="index-count_0028_0029"></a>
</dd>
<dt>count({comp}, {expr} [, {ic} [, {start}]])</dt>
<dd><p>文字列 |<a href="#String">String</a>|、リスト |<a href="#List">List</a>| または辭書 |<a href="#Dictionary">Dictionary</a>| {comp} の中に値 {expr} が何囘現れるかを返す。
</p>
<p>{start} が指定されたときはそのインデックスの要素から檢索を開始する。{start} は {comp} がリストの場合のみ使用できる。
</p>
<p>{ic} が指定され、|<a href="#TRUE">TRUE</a>| の場合は大文字・小文字は區別されない。
</p>
<p>{comp} が文字列の場合、オーバーラップしてゐない {expr} の回數が返される。{expr} が空文字列の場合は 0 が返る。
</p>

<a name="cscope_005fconnection_0028_0029"></a><a name="index-cscope_005fconnection_0028_0029"></a>
</dd>
<dt>cscope_connection([{num} , {dbpath} [, {prepend}]])</dt>
<dd><p>|<a href="if_005fcscop_002etxt.html#cscope">cscope</a>| 接續が存在するかどうか判定する。引數が 1 個も指定されなかつた場合、戾り値は以下のやうになる:
</p><table>
<tr><td width="10%">0</td><td width="90%">cscope が利用できない (コンパイル時に無效化されてゐる) または cscope 接續が存在しない場合</td></tr>
<tr><td width="10%">1</td><td width="90%">1 個以上の cscope 接續が存在する場合</td></tr>
</table>

<p>引數が與へられた場合は次のやうになる。{num} は、接續の存在を確認する際のマッチング方法を指定する。
</p>
<table>
<thead><tr><th width="10%">{num}</th><th width="90%">存在確認の方法</th></tr></thead>
<tr><td width="10%">0</td><td width="90%">引數なしの場合と同じ (例: &quot;cscope_connection()&quot;)。</td></tr>
<tr><td width="10%">1</td><td width="90%">{prepend} を無視し、{dbpath} に部分マッチを行ふ。</td></tr>
<tr><td width="10%">2</td><td width="90%">{prepend} を無視し、{dbpath} に部分マッチを行ふ。</td></tr>
<tr><td width="10%">3</td><td width="90%">{prepend} を使用し、{dbpath} と {prepend} に部分マッチを行ふ。</td></tr>
<tr><td width="10%">4</td><td width="90%">{prepend} を使用し、{dbpath} と {prepend} に完全マッチを行ふ。</td></tr>
</table>

<blockquote>
<p><strong>Note:</strong> <br>
以上のどの場合も文字列の比較は大文字・小文字を區別する。
</p></blockquote>

<p>例: &quot;<code>:cs show</code>&quot; の表示が以下のやうになつたとする:
</p>
<div class="example">
<pre class="example"># pid    database name                        prepend path
0 27664  cscope.out                           /usr/local
</pre></div>
<pre class="verbatim">實行                                            戾り値
cscope_connection()                                     1
cscope_connection(1, &quot;out&quot;)                             1
cscope_connection(2, &quot;out&quot;)                             0
cscope_connection(3, &quot;out&quot;)                             0
cscope_connection(3, &quot;out&quot;, &quot;local&quot;)                    1
cscope_connection(4, &quot;out&quot;)                             0
cscope_connection(4, &quot;out&quot;, &quot;local&quot;)                    0
cscope_connection(4, &quot;cscope.out&quot;, &quot;/usr/local&quot;)        1
</pre><a name="cursor_0028_0029"></a><a name="index-cursor_0028_0029"></a>
</dd>
<dt>cursor({lnum}, {col} [, {off}]) または</dt>
<dt>cursor({list})</dt>
<dd><p>{lnum} 行目の {col} 桁目 (バイトで數へる) にカーソルを移動させる。桁番號 {col} は 1 から始まる。
</p>
<p>引數に {list} が 1 つだけ指定された場合は、それは要素が 2 個か 3 個、または 4 個の |<a href="#List">List</a>| として解釋される:
</p><table>
<tr><td width="99%">[{lnum}, {col}]</td></tr>
<tr><td width="99%">[{lnum}, {col}, {off}]</td></tr>
<tr><td width="99%">[{lnum}, {col}, {off}, {curswant}]</td></tr>
</table>
<p>これは |<a href="#getpos_0028_0029">getpos()</a>| や |<a href="#getcurpos_0028_0029">getcurpos()</a>| の戾り値とほぼ同じである。違ひは最初の要素がないこと。
</p>
<p>この函數を呼んでもジャンプリストは變更されない。{lnum} がバッファの行數よりも大きい場合は、最後の行へ移動する。{lnum} が 0 の場合はカレント行に留まる。{col} がその行のバイト數より大きい場合は、その行の最後の文字へ移動する。
</p>
<p>{col} が 0 の場合は、カレント桁に留まる。{curswant} が與へられた場合は、縱方向移動の優先的列番號として使はれる。指定がない場合は {col} が使はれる。
</p>
<p>&rsquo;<samp>virtualedit</samp>&rsquo; が有效のとき、{off} は文字の先頭からの畫面上のオフセットを指定する。例へば、&lt;Tab&gt; の中の位置や最後の文字より後などへも移動できる。カーソルを移動できたときは 0 を、できなかつたときは -1 を返す。
</p>
<a name="debugbreak_0028_0029"></a><a name="index-debugbreak_0028_0029"></a>
</dd>
<dt>debugbreak({pid})</dt>
<dd><p>主にデバッグしてゐるプログラムに割り込むために使用される。プロセス {pid} に對して SIGTRAP を發生させる。關係のないプロセスへの振る舞ひは未定義である。|<a href="terminal_002etxt.html#terminal_002ddebugger">terminal-debugger</a>| を參照。
</p>
<p>{MS-Windows 上でのみ有效}
</p>
<a name="deepcopy_0028_0029"></a><a name="E698"></a><a name="index-deepcopy_0028_0029"></a>
<a name="index-E698"></a>
</dd>
<dt>deepcopy({expr} [, {noref}])</dt>
<dd><p>{expr} のコピーを作る。數値と文字列の場合は、{expr} そのものとコピーの閒に違ひはない。
</p>
<p>{expr} がリスト |<a href="#List">List</a>| の場合は完全なコピーを作る。つまり元のリストを變更してもコピーは變更されず、逆も同じである。要素の 1 つがリストまたは辭書 |<a href="#Dictionary">Dictionary</a>| であるときは、再歸的にコピーが作成される。よつてコピーの要素に變更を加へても元のリストの要素は變更を受けない。
</p>
<p>辭書 |<a href="#Dictionary">Dictionary</a>| はリスト |<a href="#List">List</a>| と同樣な方法でコピーされる。{noref} が省略された、または 0 のとき、含まれてゐるリストや辭書は 1 度だけコピーされる。全ての參照はこのただ 1 つのコピーを指す。{noref} が 1 の場合、リストや辭書は現れるたびに新しいコピーが作られる。そのため循環參照があると deepcopy() は失敗する。
</p>
<a name="E724"></a><a name="index-E724"></a>
<p>ネストは 100 レベルまで可能である。それ以上參照を繰り返してゐる要素があると、{noref} が 1 の場合は失敗する。|<a href="#copy_0028_0029">copy()</a>| も參照。
</p>
<a name="delete_0028_0029"></a><a name="index-delete_0028_0029"></a>
</dd>
<dt>delete({fname} [, {flags}])</dt>
<dd><p>{flags} を指定しないもしくは {flags} を空で指定した場合: ファイル {fname} を削除する。これは {fname} がシンボリックリンクの時でも動作する。
</p>
<p>{flags}が &quot;d&quot; の場合: ディレクトリ {fname} を削除する。これはディレクトリ {fname} が空でない場合は失敗する。
</p>
<p>{flags} が &quot;rf&quot; の場合: ディレクトリ {fname}、その中に含むすべてのものを再歸的に削除する。氣をつけて！
</p><blockquote>
<p><strong>Note:</strong> <br>
MS-Windows では、使用中のディレクトリを削除することはできない。
</p></blockquote>

<p>シンボリックリンクは、それが示すものではなく、リンク自身が削除される。
</p>
<p>結果は數値であり、削除に成功すれば 0、削除に失敗すれば -1 である。
</p>
<p>リスト |<a href="#List">List</a>| から項目を削除するには |<a href="#remove_0028_0029">remove()</a>| を使ふ。バッファから行を削除するには |<a href="change_002etxt.html#g_t_003adelete">:delete</a>| もしくは |<a href="#deletebufline_0028_0029">deletebufline()</a>| を使ふ。
</p>
<a name="deletebufline_0028_0029"></a><a name="index-deletebufline_0028_0029"></a>
</dd>
<dt>deletebufline({expr}, {first} [, {last}])</dt>
<dd><p>{first} から {last} (を含む) までの行をバッファ {expr} から削除する。{last} が省略されてゐる場合、{first} 行だけを削除する。成功時には 0 が返され、失敗時には 1 が返される。
</p>
<p>{expr} の使ひ方は前述の |<a href="#bufname_0028_0029">bufname()</a>| を參照。
</p>
<p>{first} および {last} は |<a href="#getline_0028_0029">getline()</a>| と同樣に扱はれる。
</p><blockquote>
<p><strong>Note:</strong> <br>
|<a href="#line_0028_0029">line()</a>| の使用はカレントバッファを參照することに注意。バッファ {expr} 內の最後の行を參照するには &quot;$&quot; を使用する。
</p></blockquote>

<a name="did_005ffiletype_0028_0029"></a><a name="index-did_005ffiletype_0028_0029"></a>
</dd>
<dt>did_filetype()</dt>
<dd><p>autocommand が實行され FileType イベントが一度でも起こつてゐれば、|<a href="#TRUE">TRUE</a>| が返る。スクリプトの FileType イベントが、複數回呼び出されるのを囘避するのに使へる。|<a href="autocmd_002etxt.html#FileType">FileType</a>|
</p>
<p>&lsquo;<code>:setf FALLBACK</code>&lsquo; が使用されてゐる場合は |<a href="#FALSE">FALSE</a>| を返す。
他のファイルへ移動すると、このカウンタはリセットされる。よつて實際は、カレントバッファに對して FileType イベントが發生したかどうかを判定する。他のバッファを開くオートコマンドの中でこの函數を使つて &rsquo;<samp>filetype</samp>&rsquo; を設定し、構文ファイルを讀み込むために使へる。
</p>
<a name="diff_005ffiller_0028_0029"></a><a name="index-diff_005ffiller_0028_0029"></a>
</dd>
<dt>diff_filler({lnum})</dt>
<dd><p>{lnum} 行目より上にある削除行の數を返す。削除行とは、差分モードで他方のウィンドウにテキストが插入されてゐることを表す行のことである。削除行は表示はされてゐるが、實際にはバッファに存在しない。
</p>
<p>{lnum} は |<a href="#getline_0028_0029">getline()</a>| と同樣に扱はれる。つまり &quot;.&quot; はカレント行となり、&quot;&rsquo;m&quot; はマーク m を表す。
</p>
<p>カレントウィンドウが差分モードでないときは 0 を返す。
</p>
<a name="diff_005fhlID_0028_0029"></a><a name="index-diff_005fhlID_0028_0029"></a>
</dd>
<dt>diff_hlID({lnum}, {col})</dt>
<dd><p>差分モードで {lnum} 行 {col} 桁 (バイト單位) の位置のハイライト ID を返す。カレント行に變更がないときは 0 を返す。
</p>
<p>{lnum} は |<a href="#getline_0028_0029">getline()</a>| と同樣に扱はれる。つまり &quot;.&quot; はカレント行となり、&quot;&rsquo;m&quot; はマーク m を表す。
</p>
<p>先頭の桁の {col} は 1 となり、最初の行の {lnum} は 1 となる。
</p>
<p>ハイライト ID は |<a href="#synIDattr_0028_0029">synIDattr()</a>| を使つて構文情報を得るために使へる。
</p>
<a name="environ_0028_0029"></a><a name="index-environ_0028_0029"></a>
</dd>
<dt>environ()</dt>
<dd><p>すべての環境變數を辭書として返す。このやうに環境變數が存在するかどうかを確認できる:
</p><div class="example">
<pre class="example">:echo has_key(environ(), 'HOME')
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
變數名はキャメルケース (CamelCase) でも構はない。大文字と小文字を區別しないためにこれを使用すること:
</p><div class="example">
<pre class="example">:echo index(keys(environ()), 'HOME', 0, 1) != -1
</pre></div>
</blockquote>

<a name="empty_0028_0029"></a><a name="index-empty_0028_0029"></a>
</dd>
<dt>empty({expr})</dt>
<dd><p>{expr} が空なら 1 を、さうでなければ 0 を返す。
</p><ul>
<li> リスト |<a href="#List">List</a>| または辭書 |<a href="#Dictionary">Dictionary</a>| は要素を 1 個も持たないとき空とみなされる。
</li><li> 文字列 |<a href="#String">String</a>| はその長さが 0 のとき空とみなされる。
</li><li> 數値 |<a href="#Number">Number</a>| と浮動小數點數 |<a href="#Float">Float</a>| は値が 0 のとき空とみなされる。
</li><li> |<a href="#v_003afalse">v:false</a>|, |<a href="#v_003anone">v:none</a>|, |<a href="#v_003anull">v:null</a>| は空であり、|<a href="#v_003atrue">v:true</a>| は空ではない。
</li><li> ジョブ |<a href="#Job">Job</a>| は開始に失敗したときは空である。
</li><li> チャネル |<a href="#Channel">Channel</a>| は閉ぢられてゐると空である。
</li><li> |<a href="#Blob">Blob</a>| はその長さが 0 のときは空である。
</li></ul>

<p>長いリスト |<a href="#List">List</a>| に對しては長さを 0 と比較するよりこちらの方がずつと高速である。
</p>
<a name="escape_0028_0029"></a><a name="index-escape_0028_0029"></a>
</dd>
<dt>escape({string}, {chars})</dt>
<dd><p>{string} 內に現れる {chars} の文字をバックスラッシュでエスケープする。例:
</p><div class="example">
<pre class="example">:echo escape('c:\program files\vim', ' \')
</pre></div>
<p>結果:
</p><div class="example">
<pre class="example">c:\\program\ files\\vim
</pre></div>
<p>|<a href="#shellescape_0028_0029">shellescape()</a>| および |<a href="#fnameescape_0028_0029">fnameescape()</a>| も參照。
</p>
<a name="eval_0028_0029"></a><a name="index-eval_0028_0029"></a>
</dd>
<dt>eval({string})</dt>
<dd><p>{string} を評價し、値を返す。|<a href="#string_0028_0029">string()</a>| の戾り値を元の値に戾すのに非常に便利である。數値、浮動小數點數、文字列、Blobs、およびそれらの複合に對して動作する。實際に存在する函數への |<a href="#Funcref">Funcref</a>| に對しても動作する。
</p>
<a name="eventhandler_0028_0029"></a><a name="index-eventhandler_0028_0029"></a>
</dd>
<dt>eventhandler()</dt>
<dd><p>イベントハンドラの中では 1 を返す。つまり、ユーザーの文字入力を待つてゐる閒に、例へばファイルをドラッグ＆ドロップするなどの割り込みがされたことを表す。このときは對話的なコマンドは使へない。イベントハンドラの中でないときは 0 を返す。
</p>
<a name="executable_0028_0029"></a><a name="index-executable_0028_0029"></a>
</dd>
<dt>executable({expr})</dt>
<dd><p>{expr} といふ名前の實行可能ファイルが存在するかどうか判定する。{expr} は引數を何もつけないプログラム名でなければならない。executable() は <code>$PATH</code> と通常のプログラム檢索ディレクトリを參照する。
<a name="PATHEXT"></a><a name="index-PATHEXT"></a>
</p>
<p>MS-DOS と MS-Windows では &quot;.exe&quot;, &quot;.bat&quot; などの擴張子は含めても含めなくてもよい。省略された場合は <code>$PATHEXT</code> の擴張子を檢索する。よつて &quot;<samp>foo.exe</samp>&quot; が存在しなければ &quot;<samp>foo.exe.bat</samp>&quot; が見つかることもありうる。<code>$PATHEXT</code> が存在しなければ &quot;.exe;.com;.bat;.cmd&quot; が使はれる。<code>$PATHEXT</code> にドットだけを含めると擴張子なしの名前を檢索することができる。&rsquo;<samp>shell</samp>&rsquo; が Unix シェルのやうに思はれるときは、{expr} の後に擴張子をつけない名前も檢索される。
</p>
<p>MS-DOS と MS-Windows ではファイルが存在するかどうかだけを判定し、それがディレクトリでないことや、それが本當に實行可能であるかどうかは判定されない。MS-Windows では Vim と同じディレクトリにある實行ファイルは必ず發見できる。Vim がこのディレクトリを <code>$PATH</code> に加へるためである。|<a href="os_005fwin32_002etxt.html#win32_002dPATH">win32-PATH</a>|。
戾り値は數値:
</p><table>
<tr><td width="10%">1</td><td width="90%">存在する</td></tr>
<tr><td width="10%">0</td><td width="90%">存在しない</td></tr>
<tr><td width="10%">-1</td><td width="90%">このシステム上では實裝されてゐない</td></tr>
</table>
<p>|<a href="#exepath_0028_0029">exepath()</a>| は、實行ファイルの絕對パスを取得するのに使用することができる。
</p>
<a name="execute_0028_0029"></a><a name="index-execute_0028_0029"></a>
</dd>
<dt>execute({command} [, {silent}])</dt>
<dd><p>單一あるいは複數の Ex コマンドを實行して、出力を文字列として返す。
{command} は文字列かリストを使へる。リストの場合はそれらの行は一行ずつ實行される。
</p>
<p>以下と同等である:
</p><div class="example">
<pre class="example">redir =&gt; var
{command}
redir END
</pre></div>
<p>オプションの {silent} の引數は以下の値を取ることができる:
</p><table>
<tr><td width="40%">&quot;&quot;</td><td width="60%">&lsquo;:silent&lsquo; を使はない</td></tr>
<tr><td width="40%">&quot;silent&quot;</td><td width="60%">&lsquo;:silent&lsquo; を使ふ</td></tr>
<tr><td width="40%">&quot;silent!&quot;</td><td width="60%">&lsquo;:silent!&lsquo;を使ふ</td></tr>
</table>
<p>デフォルトは &quot;silent&quot; である。
</p><blockquote>
<p><strong>Note:</strong> <br>
&quot;silent!&quot; は &lsquo;redir&lsquo; とは異なり、エラーメッセージは削除されることに注意すること。もし外部コマンドを使つて畫面がをかしくなる樣であれば、代はりに &lsquo;system()&lsquo; を使ふことができる。
</p></blockquote>
<a name="E930"></a><a name="index-E930"></a>
<p>{command} の中のどこかで &lsquo;:redir&lsquo; を使ふことができない。
</p>
<p>行のリストを得るために、出力に |<a href="#split_0028_0029">split()</a>| を使ふことができる:
</p><div class="example">
<pre class="example">split(execute('args'), &quot;\n&quot;)
</pre></div>
<p>現在のウィンドウとは別のウィンドウでコマンドを實行するには &lsquo;<code>win_execute()</code>&lsquo; を使用すること。
</p>
<p>再歸的に使用されると、再歸呼び出しの出力は、上位呼び出しの出力に含まれません。
</p>
<a name="exepath_0028_0029"></a><a name="index-exepath_0028_0029"></a>
</dd>
<dt>exepath({expr})</dt>
<dd><p>{expr} が實行ファイルで、それが絕對パス、相對パス、または <code>$PATH</code> の中に存在する場合は、そのフルパスを返す。
</p><blockquote>
<p><strong>Note:</strong> <br>
{expr} が &quot;./&quot; で開始してゐる場合はカレントディレクトリが使はれる。Vim のパスを得る場合に問題になるかもしれない:
</p><div class="example">
<pre class="example">echo exepath(v:progpath)
</pre></div>
<p>{expr} が <code>$PATH</code> の中に見つからないか、それが實行ファイルではなかつた場合は空文字列が返る。
</p></blockquote>

<a name="exists_0028_0029"></a><a name="index-exists_0028_0029"></a>
</dd>
<dt>exists({expr})</dt>
<dd><p>結果は數値で、變數 {expr} が存在すれば |<a href="#TRUE">TRUE</a>| となり、さうでなければ 0 となる。
</p>
<p>ある機能がサポートされてゐるか判定するには |<a href="#has_0028_0029">has()</a>| を使ふ。
</p>
<p>ファイルが存在するかを判定するには |<a href="#filereadable_0028_0029">filereadable()</a>| を使ふ。
</p>
<p>引數 {expr} は文字列で次のうちいづれかである。
</p><dl compact="compact">
<dt>&amp;option-name</dt>
<dd><p>Vim オプション (存在するかだけを判定し、本當に動作するかは判定しない)
</p></dd>
<dt>+option-name</dt>
<dd><p>動作する Vim オプション
</p></dd>
<dt>$ENVNAME</dt>
<dd><p>環境變數 (空文字列と比較することでも判定できる)
</p></dd>
<dt>*funcname</dt>
<dd><p>組み込み函數 (|<a href="#functions">functions</a>| 參照) かユーザーが定義した函數 (|<a href="#user_002dfunctions">user-functions</a>| 參照)。また Funcref である變數に對しても動作する。
</p></dd>
<dt>varname</dt>
<dd><p>內部變數(|<a href="#internal_002dvariables">internal-variables</a>|)。|<a href="#curly_002dbraces_002dnames">curly-braces-names</a>|, |<a href="#Dictionary">Dictionary</a>| の要素、|<a href="#List">List</a>| の要素などに對しても動作する。インデックスの評價で無效な式であるとエラーメッセージが出る可能性があることに注意。例:
</p><div class="example">
<pre class="example">:let l = [1, 2, 3]
:echo exists(&quot;l[5]&quot;)
0
:echo exists(&quot;l[xx]&quot;)
E121: Undefined variable: xx
0
</pre></div>
</dd>
<dt>:cmdname</dt>
<dd><p>ex コマンド: 組み込みコマンド、ユーザー定義コマンド、コマンド修飾子 |<a href="map_002etxt.html#g_t_003acommand">:command</a>|。
</p>
<p>戾り値:
</p><ol>
<li> コマンド名の先頭に一致
</li><li> コマンド名に完全一致
</li><li> 複數のユーザー定義コマンドに一致
</li></ol>
<p>コマンドが定義されてゐるかどうかを判定するには、必ず戾り値が2であるかを確認すること。
</p></dd>
<dt>:2match</dt>
<dd><p>|<a href="pattern_002etxt.html#g_t_003a2match">:2match</a>| のコマンド。
</p></dd>
<dt>:3match</dt>
<dd><p>|<a href="pattern_002etxt.html#g_t_003a3match">:3match</a>| のコマンド。
</p></dd>
<dt>#event</dt>
<dd><p>このイベントに對するオートコマンド定義
</p></dd>
<dt>#event#pattern</dt>
<dd><p>このイベントとパターンに對するオートコマンド定義(パターンは文字そのままに解釋され、オートコマンドのパターンと 1 文字ずつ比較される)
</p></dd>
<dt>#group</dt>
<dd><p>オートコマンドグループが存在するか
</p></dd>
<dt>#group#event</dt>
<dd><p>このグループとイベントに對してオートコマンドが定義されてゐるか
</p></dd>
<dt>#group#event#pattern</dt>
<dd><p>このグループ、イベント、パターンに對するオートコマンド定義
</p></dd>
<dt>##event</dt>
<dd><p>このイベントに對するオートコマンドがサポートされてゐるか
</p></dd>
</dl>

<p>例:
</p><div class="example">
<pre class="example">exists(&quot;&amp;shortname&quot;)
exists(&quot;$HOSTNAME&quot;)
exists(&quot;*strftime&quot;)
exists(&quot;*s:MyFunc&quot;)
exists(&quot;bufcount&quot;)
exists(&quot;:Make&quot;)
exists(&quot;#CursorHold&quot;)
exists(&quot;#BufReadPre#*.gz&quot;)
exists(&quot;#filetypeindent&quot;)
exists(&quot;#filetypeindent#FileType&quot;)
exists(&quot;#filetypeindent#FileType#*&quot;)
exists(&quot;##ColorScheme&quot;)
</pre></div>
<p>シンボルである&amp;/$/*と名前の閒には、空白文字があつてはならない。
</p>
<p>ある少數の場合では無視されるが、名前の後に餘計な文字があつてはならない。將來はもつと嚴格になる可能性があるので、現在許されるからといつて賴つてはならない。
正しい例:
</p><div class="example">
<pre class="example">exists(&quot;:make&quot;)
</pre></div>
<p>正しくない例:
</p><div class="example">
<pre class="example">exists(&quot;:make install&quot;)
</pre></div>

<blockquote>
<p><strong>Note:</strong> <br>
引數は變數そのものではなく、文字列でなければならない。例へば、次は動作しない:
</p><div class="example">
<pre class="example">exists(bufcount)
</pre></div>
<p>これは變數 &quot;bufcount&quot; の存在を判定するのではなく、bufcount の値を渡し、それが存在するかどうか判定してしまふ。
</p></blockquote>

<a name="exp_0028_0029"></a><a name="index-exp_0028_0029"></a>
</dd>
<dt>exp({expr})</dt>
<dd><p>{expr} の指數を返す。値は [0, inf] の範圍の浮動小數點數 (|<a href="#Float">Float</a>|)。{expr} は浮動小數點數 (|<a href="#Float">Float</a>|) か數値 (|<a href="#Number">Number</a>|) でなければならない。
例:
</p><div class="example">
<pre class="example">:echo exp(2)
7.389056
:echo exp(-1)
0.367879
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>

<a name="expand_0028_0029"></a><a name="index-expand_0028_0029"></a>
</dd>
<dt>expand({expr} [, {nosuf} [, {list}]])</dt>
<dd><p>ワイルドカードと {expr} 內の特殊なキーワードを展開する。&rsquo;<samp>wildignorecase</samp>&rsquo; が適用される。
</p>
<p>{list} が指定されその値が |<a href="#TRUE">TRUE</a>| なら、結果はリストで返される。さうでない場合は結果は文字列で返される。その場合、複數のマッチがあるときはそれらは文字 &lt;NL&gt; で區切られる。
</p><blockquote>
<p><strong>Note:</strong> <br>
バージョン5.0 では空白文字が用ゐられ、スペースを含むファイル名について問題を引き起こしていた
</p></blockquote>

<p>展開が失敗した場合、結果は空文字列となる。{expr} が &rsquo;%&rsquo;, &rsquo;#&rsquo;, &rsquo;&lt;&rsquo; で始まらない限り、存在しないファイル名といふのは、結果の文字列には含まれない。下記を參照のこと。
</p>
<p>{expr} が &rsquo;%&rsquo; か &rsquo;#&rsquo; か &rsquo;&lt;&rsquo; で始まる場合には、展開は |<a href="cmdline_002etxt.html#cmdline_002dspecial">cmdline-special</a>| のやうに、變換子を受け付け、それらに關聯付けられた變換が施される。ここに簡單な槪略を示す:
</p>
<table>
<tr><td width="20%">%</td><td width="80%">現在のファイル名</td></tr>
<tr><td width="20%">#</td><td width="80%">代替バッファのファイル名</td></tr>
<tr><td width="20%">#n</td><td width="80%">n 番の代替バッファのファイル名</td></tr>
<tr><td width="20%">&lt;cfile&gt;</td><td width="80%">カーソルの下のファイル名</td></tr>
<tr><td width="20%">&lt;afile&gt;</td><td width="80%">autocmd のファイル名</td></tr>
<tr><td width="20%">&lt;abuf&gt;</td><td width="80%">autocmd のバッファ名</td></tr>
<tr><td width="20%">&lt;sfile&gt;</td><td width="80%">取り込み (source) 中のファイル名、函數名</td></tr>
<tr><td width="20%">&lt;slnum&gt;</td><td width="80%">取り込み (source) 中の行番號もしくは函數の行番號</td></tr>
<tr><td width="20%">&lt;sflnum&gt;</td><td width="80%">函數內であつてもスクリプトファイルの行番號</td></tr>
<tr><td width="20%">&lt;cword&gt;</td><td width="80%">カーソル下の單語 (word)</td></tr>
<tr><td width="20%">&lt;cWORD&gt;</td><td width="80%">カーソル下の單語 (WORD)</td></tr>
<tr><td width="20%">&lt;client&gt;</td><td width="80%">最後に受け取つたメッセージの {clientid} |<a href="#server2client_0028_0029">server2client()</a>|</td></tr>
</table>
<p>變換子:
</p><table>
<tr><td width="10%">:p</td><td width="90%">フルパス名を展開</td></tr>
<tr><td width="10%">:h</td><td width="90%">ヘッド (ディレクトリ)</td></tr>
<tr><td width="10%">:t</td><td width="90%">テイル (ファイル名だけ)</td></tr>
<tr><td width="10%">:r</td><td width="90%">擴張子が削除される</td></tr>
<tr><td width="10%">:e</td><td width="90%">擴張子だけ</td></tr>
</table>

<p>例:
</p><div class="example">
<pre class="example">:let &amp;tags = expand(&quot;%:p:h&quot;) . &quot;/tags&quot;
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
&rsquo;%&rsquo; や &rsquo;#&rsquo; や &rsquo;&lt;&rsquo; で始まる文字列を展開する時には、それに續くテキストは無視されることに注意。從つてこれは正しくない:
</p><div class="example">
<pre class="example">:let doesntwork = expand(&quot;%:h.bak&quot;)
</pre></div>
<p>かうすると良い:
</p><div class="example">
<pre class="example">:let doeswork = expand(&quot;%:h&quot;) . &quot;.bak&quot;
</pre></div>
<p>&quot;&lt;cfile&gt;&quot; やそれらを展開する時には、戾り値が完全な展開をされない參照名であることにも注意が必要。もしも &quot;&lt;cfile&gt;&quot; が &quot;~/.cshrc&quot; であつた場合、&quot;~/&quot; を展開してホームディレクトリにするために、もう一度 expand() を呼び出す必要がある:
</p><div class="example">
<pre class="example">:echo expand(expand(&quot;&lt;cfile&gt;&quot;))
</pre></div>
</blockquote>
<p>變數と變換子の閒には空白文字があつてはならない。函數 |<a href="#fnamemodify_0028_0029">fnamemodify()</a>| が通常のファイル名の變換には使用可能である。
</p>
<p>カレントバッファや代替バッファの名前が未定義のときに &rsquo;%&rsquo; や &rsquo;#&rsquo; を使ふと空文字列になる。&quot;%:p&quot; を名無しのバッファに使用した場合、結果はカレントディレクトリに &rsquo;/&rsquo; が付加されたものになる。
</p>
<p>&rsquo;%&rsquo; や &rsquo;#&rsquo; や &rsquo;&lt;&rsquo; で始まらない {expr} は、コマンドラインのファイル名と同じやうに展開される。{nosuf} 引數に |<a href="#TRUE">TRUE</a>| を指定しない限り、&rsquo;<samp>suffixes</samp>&rsquo; と &rsquo;<samp>wildignore</samp>&rsquo; が使用される。存在しないファイルの名前も結果の文字列に含まれる。&quot;**&quot; を使ふとディレクトリツリーを檢索できる。例へば、カレントディレクトリ以下にある全ての &quot;README&quot; を見つけるには次のやうにする:
</p><div class="example">
<pre class="example">:echo expand(&quot;**/README&quot;)
</pre></div>
<p>expand() はシェルの持つてゐる變數や環境變數を展開できる。しかし展開のためにシェルを起動するかもしれないので速度が遲くなることがある。|<a href="#expr_002denv_002dexpand">expr-env-expand</a>| 參照。展開された變數はファイル名のリストのやうに扱はれる。環境變數を展開できないときはそのままになる。よつて、&quot;<code>:echo expand('$FOOBAR')</code>&quot; の結果は &quot;$FOOBAR&quot; となる。
</p>
<p>存在するファイルを探すには |<a href="#glob_0028_0029">glob()</a>| を參照。外部コマンドの「生の」實行結果を扱ふには |<a href="#system_0028_0029">system()</a>| を參照。
</p>
<a name="expandcmd_0028_0029"></a><a name="index-expandcmd_0028_0029"></a>
</dd>
<dt>expandcmd({expr})</dt>
<dd><p>&lsquo;<code>:edit</code>&lsquo; などの Ex コマンドに對しておこなはれてゐるやうに、{expr} の特殊な項目を展開する。これは {expr} の中のどこでも、|<a href="#expand_0028_0029">expand()</a>| のやうな特殊なキーワードと環境變數を展開する。展開された文字列を返す。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo expandcmd('make %&lt;.o')
</pre></div>
<a name="extend_0028_0029"></a><a name="index-extend_0028_0029"></a>
</dd>
<dt>extend({expr1}, {expr2} [, {expr3}])</dt>
<dd><p>{expr1} と {expr2} は兩方ともリスト |<a href="#List">List</a>| であるか、兩方とも辭書 |<a href="#Dictionaries">Dictionaries</a>| でなければならない。
</p>
<p>兩方ともリスト |<a href="#Lists">Lists</a>| であるなら、{expr2} を {expr1} に付け加へる。{expr3} が指定された場合は、{expr1} の第 {expr3} 番目の要素の前に {expr2} の要素を插入する。{expr3} が 0 のときは最初の要素の前に插入する。{expr3} が len({expr1}) に等しいときは末尾に {expr2} が付け加へられる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo sort(extend(mylist, [7, 5]))
:call extend(mylist, [2, 3], 1)
</pre></div>
<p>{expr1} が {expr2} と同じリストである場合、コピーされる要素の數はリストの元の長さと同じである。例として {expr3} が 1 のとき、最初の要素の N 個の新しいコピーが插入される (ここで N はリストの元の長さ)。
</p>
<p>リストに 1 個の要素を加へるには |<a href="#add_0028_0029">add()</a>| を使ふ。2 つのリストを連結して新しいリストを作るには演算子 + を使ふ:
</p><div class="example">
<pre class="example">:let newlist = [1, 2, 3] + [4, 5]
</pre></div>
<p>兩方とも辭書 |<a href="#Dictionaries">Dictionaries</a>| である場合: {expr2} の全要素を {expr1} に加へる。
</p>
<p>{expr1} と {expr2} で共通のキーがある場合は、{expr3} によつて動作が決まる:
</p><table>
<tr><td width="50%">{expr3} = &quot;keep&quot; の場合:</td><td width="50%">{expr1} の値そのままにする</td></tr>
<tr><td width="50%">{expr3} = &quot;force&quot; の場合:</td><td width="50%">{expr2} の値で上書きする</td></tr>
<tr><td width="50%">{expr3} = &quot;error&quot; の場合:</td><td width="50%">エラーメッセージを表示する</td></tr>
</table>
<a name="E737"></a><a name="index-E737"></a>
<p>{expr3} が省略された場合は &quot;force&quot; と同じになる。
</p>
<p>{expr2} が空でないならば {expr1} が變更される。必要ならば最初に {expr1} のコピーを作ること。
</p>
<p>{expr2} は變更されない。
</p>
<p>{expr1} がロックされてゐて、かつ {expr2} が空でない場合は操作は失敗する。
</p>
<p>{expr1} を返す。
</p>

<a name="feedkeys_0028_0029"></a><a name="index-feedkeys_0028_0029"></a>
</dd>
<dt>feedkeys({string} [, {mode}])</dt>
<dd><p>{string} 中の各文字を、あたかもマッピングまたはユーザーによつてタイプされたかのやうに、處理キューに入れる。
</p>
<p>デフォルトではこれらの文字は先行入力バッファの末尾に付け足される。そのためマッピングを展開してゐる途中であれば、これらの文字はマッピングを展開した後に來ることになる。他の文字の前に插入するには、&rsquo;i&rsquo; フラグを使用する。それらはマッピングからの任意の文字の前の插入の次に實行される。
</p>
<p>この函數は、{string} 中の文字が處理されるまでは待たない。
</p>
<p>特殊なキーを {string} に含めるにはダブルクォートと &quot;\...&quot; 記法を使ふ (|<a href="#expr_002dquote">expr-quote</a>| を參照)。例へば、feedkeys(&quot;\&lt;CR&gt;&quot;) は <code class="tt-key">&lt;Enter&gt;</code> キーの押下をシミュレートする。しかし feedkeys(&rsquo;\&lt;CR&gt;&rsquo;) とすると、この文字の通り 5 文字を插入する。
<a name="g_t_003cIgnore_003e"></a><a name="index-_003cIgnore_003e"></a>
役に立つかもしれない特別なコードは &lt;Ignore&gt; だ。それは何もせずに文字の待機を終了する。
</p>
<p>{mode} は以下の文字フラグを含む文字列:
</p><table>
<tr><td width="10%">&rsquo;m&rsquo;</td><td width="90%">キーをマップ展開する。これが既定である。{mode} が省略されたときは、插入されたキーはマップ展開の對象になる。</td></tr>
<tr><td width="10%">&rsquo;n&rsquo;</td><td width="90%">キーをマップ展開しない。</td></tr>
<tr><td width="10%">&rsquo;t&rsquo;</td><td width="90%">キーをタイプされたかのやうに扱ふ。さうでない場合はマッピングから展開されたかのやうに扱はれる。これは undo や折り疊みの展開などで違ひが現れる。
<a name="E980"></a><a name="index-E980"></a></td></tr>
<tr><td width="10%">&rsquo;L&rsquo;</td><td width="90%">低レベル入力。Unix または GUI を使用してゐる場合にのみ機能する。キーは端末から來てゐるかのやうに使はれる。他のフラグは使用されない。</td></tr>
<tr><td width="10%">&rsquo;i&rsquo;</td><td width="90%">追加する代はりに文字を插入する。(上記參照)</td></tr>
<tr><td width="10%">&rsquo;x&rsquo;</td><td width="90%">先行入力が空になるまでコマンドを實行する。これは &quot;<code>:normal!</code>&quot; を使ふのと似てゐる。&rsquo;x&rsquo; なしで數回 feedkeys() を呼んだ後、&rsquo;x&rsquo; ありで 1 回 ({string} が空でも可能) feedkeys() を呼ぶことで先行入力をすべて實行できる。
<blockquote>
<p><strong>Note:</strong> <br>
Vim が插入モードを終了したときは、スクリプト續行前の文字入力待ちによる立ち往生を避けるために、<code class="tt-key">&lt;Esc&gt;</code> が入力されたかのやうに振る舞ふ。
</p></blockquote>
<blockquote>
<p><strong>Note:</strong> <br>
コマンドの實行中に feedkeys() を再歸的に呼び出した場合、最後の呼び出しですべての先行入力が消費される。
</p></blockquote></td></tr>
<tr><td width="10%">&rsquo;!&rsquo;</td><td width="90%">&rsquo;x&rsquo; と一緖に使用すると插入モードを終了しない。タイマーが少し後で插入モードを終了するやうに設定されてゐるときにテストで使用できる。CursorHoldI のテストに便利である。</td></tr>
</table>
<p>戾り値は常に0。
</p>
<a name="filereadable_0028_0029"></a><a name="index-filereadable_0028_0029"></a>
</dd>
<dt>filereadable({file})</dt>
<dd><p>結果は數値で、{file} といふファイルが存在し、讀み込むことが可能ならば |<a href="#TRUE">TRUE</a>| となる。ファイル {file} が存在しないかディレクトリだつた場合には、結果は |<a href="#FALSE">FALSE</a>| となる。引數 {file} は文字列として使へればどのやうな表現でもよい。ファイルが讀み込み可能でなくてもよい場合には |<a href="#glob_0028_0029">glob()</a>| を使ふ。
<a name="file_005freadable_0028_0029"></a><a name="index-file_005freadable_0028_0029"></a>
以前の名前: file_readable().
</p>

<a name="filewritable_0028_0029"></a><a name="index-filewritable_0028_0029"></a>
</dd>
<dt>filewritable({file})</dt>
<dd><p>結果は數値で、{file} といふファイルが存在し、書き込むことが可能ならば 1 となる。ファイル {file} が存在しないか書き込み不可能である場合には、結果は 0 となる。{file} がディレクトリであり、書き込み可能な場合、結果は 2 となる。
</p>

<a name="filter_0028_0029"></a><a name="index-filter_0028_0029"></a>
</dd>
<dt>filter({expr1}, {expr2})</dt>
<dd><p>{expr1} はリスト |<a href="#List">List</a>| または辭書 |<a href="#Dictionary">Dictionary</a>| でなければならない。{expr1} の各要素に對して {expr2} を評價し、その結果が 0 ならばリストまたは辭書からその要素を削除する。{expr2} は文字列 |<a href="#string">string</a>| または函數參照 |<a href="#Funcref">Funcref</a>| でなければならない。
</p>
<p>{expr2} が文字列 |<a href="#string">string</a>| の場合、{expr2} の內部では |<a href="#v_003aval">v:val</a>| が現在の要素の値を保持してゐる。辭書の場合は |<a href="#v_003akey">v:key</a>| が現在の要素のキーを保持してをり、リストの場合は |<a href="#v_003akey">v:key</a>| が現在の要素のインデックスを保持してゐる。
例:
</p><div class="example">
<pre class="example">call filter(mylist, 'v:val !~ &quot;OLD&quot;')
</pre></div>
<p>は要素 &quot;OLD&quot; を削除する。
</p><div class="example">
<pre class="example">call filter(mydict, 'v:key &gt;= 8')
</pre></div>
<p>は 8 未滿のキーを持つ要素を削除する。
</p><div class="example">
<pre class="example">call filter(var, 0)
</pre></div>
<p>は全要素を削除する。つまりリスト |<a href="#List">List</a>| または辭書 |<a href="#Dictionary">Dictionary</a>| をクリアする。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
{expr2} は式を表す文字列である。バックスラッシュを二重にしなくても濟むやうに |<a href="#literal_002dstring">literal-string</a>| を使ふとよいだらう。ただしその場合はシングルクォートを二重にしなければならない。
</p></blockquote>

<p>{expr2} が |<a href="#Funcref">Funcref</a>| の場合は、2 つの引數で呼び出される:
</p><ol>
<li> 現在の要素のキーまたはインデックス。
</li><li> 現在の要素の値。
</li></ol>
<p>函數は、その要素を保持すべきときは |<a href="#TRUE">TRUE</a>| を返さなければならない。リストの奇數版目の要素を保持する例:
</p><pre class="verbatim">func Odd(idx, val)
  return a:idx % 2 == 1
endfunc
call filter(mylist, function('Odd'))
</pre><p>|<a href="#lambda">lambda</a>| を使へばより短く書ける:
</p><div class="example">
<pre class="example">call filter(myList, {idx, val -&gt; idx * val &lt;= 42})
</pre></div>
<p>&quot;val&quot; を使はない場合は省略できる:
</p><div class="example">
<pre class="example">call filter(myList, {idx -&gt; idx % 2 == 1})
</pre></div>
<p>この操作はその場で (in-place) 行はれる。リスト |<a href="#List">List</a>| や辭書 |<a href="#Dictionary">Dictionary</a>| を變更したくない場合は最初にコピーを作ること:
</p><div class="example">
<pre class="example">:let l = filter(copy(mylist), 'v:val =~ &quot;KEEP&quot;')
</pre></div>

<p>{expr1} のリスト |<a href="#List">List</a>| または辭書 |<a href="#Dictionary">Dictionary</a>| をフィルターした結果を返す。{expr2} を評價してゐる最中にエラーが發生した場合は、{expr1} 內のそれ以降の要素の處理は行はれない。{expr2} が函數參照の場合、函數が &quot;abort&quot; フラグつきで定義されてゐない限り、函數內のエラーは無視される。
</p>

<a name="finddir_0028_0029"></a><a name="index-finddir_0028_0029"></a>
</dd>
<dt>finddir({name} [, {path} [, {count}]])</dt>
<dd><p>{path} から {name} といふ名前のディレクトリを探す。ディレクトリを上方・下方のどちらにも再歸的に檢索できる。{path} の記法については |<a href="editing_002etxt.html#file_002dsearching">file-searching</a>| を參照。
</p>
<p>最初に見つかつたディレクトリのパスを返す。そのディレクトリがカレントディレクトリの下にある場合は相對パスを返す。さうでなければ絕對パスを返す。{path} が省略されたとき、または空のときはオプション &rsquo;<samp>path</samp>&rsquo; の値が使はれる。
</p>
<p>省略可能な引數 {count} が指定されたときは、最初に見つかつたディレクトリでなく、{count} 番目に見つかつたディレクトリを返す。{count} が負の場合は、見つかつたディレクトリ全てのリスト |<a href="#List">List</a>| を返す。これは ex コマンド |<a href="editing_002etxt.html#g_t_003afind">:find</a>| によく似てゐる。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bfile_005fin_005fpath">+file_in_path</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<a name="findfile_0028_0029"></a><a name="index-findfile_0028_0029"></a>
</dd>
<dt>findfile({name} [, {path} [, {count}]])</dt>
<dd><p>|<a href="#finddir_0028_0029">finddir()</a>| と同樣だが、ディレクトリでなくファイルを檢索する。&rsquo;<samp>suffixesadd</samp>&rsquo; が適用される。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo findfile(&quot;tags.vim&quot;, &quot;.;&quot;)
</pre></div>
<p>この例は、カレントファイルがあるディレクトリから上方に &quot;tags.vim&quot; を見つけるまで再歸的に檢索する。
</p>
<a name="float2nr_0028_0029"></a><a name="index-float2nr_0028_0029"></a>
</dd>
<dt>float2nr({expr})</dt>
<dd><p>{expr} の小數點以下を切り捨てて |<a href="#Number">Number</a>| に變換する。{expr} は |<a href="#Float">Float</a>| または Number に評價されなければならない。
{expr} の値が |<a href="#Number">Number</a>| の範圍外の場合、結果は 0x7fffffff または -0x7fffffff になる (64 ビット數値が有效化されてゐる場合は 0x7fffffffffffffff または -0x7fffffffffffffff)。NaN は -0x80000000 になる (64 ビット數値が有效化されてゐる場合は -0x8000000000000000)。
例:
</p><div class="example">
<pre class="example">echo float2nr(3.95)
3
echo float2nr(-23.45)
-23
echo float2nr(1.0e100)
2147483647  (または 9223372036854775807)
echo float2nr(-1.0e150)
-2147483647  (または -9223372036854775807)
echo float2nr(1.0e-100)
0
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>

<a name="floor_0028_0029"></a><a name="index-floor_0028_0029"></a>
</dd>
<dt>floor({expr})</dt>
<dd><p>{expr} 以下の最大の整數を |<a href="#Float">Float</a>| で返す (切り捨て)。{expr} は |<a href="#Float">Float</a>| または |<a href="#Number">Number</a>| に評價されなければならない。
例:
</p><div class="example">
<pre class="example">echo floor(1.856)
1.0
echo floor(-5.456)
-6.0
echo floor(4.0)
4.0
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>

<a name="fmod_0028_0029"></a><a name="index-fmod_0028_0029"></a>
</dd>
<dt>fmod({expr1}, {expr2})</dt>
<dd><p>{expr1} / {expr2} の餘りを返す (割り算が表現できなくても)。{expr2} が非ゼロなら {expr1} - i * {expr2} の結果を返す (i は戾り値が {expr1} と同じ符號を持ちその絕對値が {expr2} よりも小さくなるやうな値)。
</p>
<p>{expr2} がゼロならゼロが返る。戾り値の型は浮動小數點數 (|<a href="#Float">Float</a>|)。{expr1} と {expr2} は浮動小數點數 (|<a href="#Float">Float</a>|) か數値 (|<a href="#Number">Number</a>|) でなければならない。
例:
</p><div class="example">
<pre class="example">:echo fmod(12.33, 1.22)
0.13
:echo fmod(-12.33, 1.22)
-0.13
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>

<a name="fnameescape_0028_0029"></a><a name="index-fnameescape_0028_0029"></a>
</dd>
<dt>fnameescape({string})</dt>
<dd><p>コマンド引數のファイル名として使ふために {string} をエスケープする。&rsquo;%&rsquo; や &rsquo;|&rsquo; など特別な意味を持つ全ての文字がバックスラッシュでエスケープされる。
</p>
<p>特別な文字とは、ほとんどのシステムにおいて&quot; \t\n*?[{&lsquo;$\\%#&rsquo;\&quot;|!&lt;&quot; である。ファイル名にバックスラッシュが現れるシステムにおいては &rsquo;<samp>isfname</samp>&rsquo; の値に依存する。
</p>
<p>先頭の &rsquo;+&rsquo; と &rsquo;&gt;&rsquo; もエスケープされる (|<a href="editing_002etxt.html#g_t_003aedit">:edit</a>| と |<a href="editing_002etxt.html#g_t_003awrite">:write</a>| の引數では特別な意味を持つ)。{string} が &quot;-&quot; である場合もエスケープされる (|<a href="editing_002etxt.html#g_t_003acd">:cd</a>| の引數では意味を持つ)。
例:
</p><div class="example">
<pre class="example">:let fname = '+some str%nge|name'
:exe &quot;edit &quot; . fnameescape(fname)
</pre></div>
<p>上記は次と同じ結果になる:
</p><div class="example">
<pre class="example">edit \+some\ str\%nge\|name
</pre></div>

<a name="fnamemodify_0028_0029"></a><a name="index-fnamemodify_0028_0029"></a>
</dd>
<dt>fnamemodify({fname}, {mods})</dt>
<dd><p>ファイル名 {fname} を {mods} にしたがつて變更する。{mods} はコマンドラインで使はれるのと同樣な文字列である。詳細は |<a href="cmdline_002etxt.html#filename_002dmodifiers">filename-modifiers</a>| を參照。
例:
</p><div class="example">
<pre class="example">:echo fnamemodify(&quot;main.c&quot;, &quot;:p:h&quot;)
</pre></div>
<p>結果:
</p><div class="example">
<pre class="example">/home/mool/vim/vim/src/
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
{fname} の中の環境變數は展開されない。環境變數を展開させるには |<a href="#expand_0028_0029">expand()</a>| を使ふこと。
</p></blockquote>

<a name="foldclosed_0028_0029"></a><a name="index-foldclosed_0028_0029"></a>
</dd>
<dt>foldclosed({lnum})</dt>
<dd><p>結果は數値。{lnum} 行目が閉ぢた折り疊みの中にあるなら、その折り疊みを構成する最初の行の行番號を返す。{lnum} 行目が閉ぢた折り疊みに入つてゐないなら -1 を返す。
</p>
<a name="foldclosedend_0028_0029"></a><a name="index-foldclosedend_0028_0029"></a>
</dd>
<dt>foldclosedend({lnum})</dt>
<dd><p>結果は數値。{lnum} 行目が閉ぢた折り疊みの中にあるなら、その折り疊みを構成する最後の行の行番號を返す。{lnum} 行目が閉ぢた折り疊みに入つてゐないなら -1 を返す。
</p>
<a name="foldlevel_0028_0029"></a><a name="index-foldlevel_0028_0029"></a>
</dd>
<dt>foldlevel({lnum})</dt>
<dd><p>カレントバッファの {lnum} 行目の折り疊みレベルを表す數値を返す。折り疊みがネストしてゐるときは一番下のレベルを返す。{lnum} 行目に折り疊みがまつたくないときは 0 を返す。折り疊みが開いてゐるか閉ぢてゐるかは關係ない。(&rsquo;<samp>foldexpr</samp>&rsquo; の中で) 折り疊みを更新してゐる最中に呼ぶと、まだ折り疊みを更新してゐなく、折り疊みレベルが未知の行に對しては -1 を返す。特別な場合として、普通は 1 行前のレベルは取得できる。
</p>
<a name="foldtext_0028_0029"></a><a name="index-foldtext_0028_0029"></a>
</dd>
<dt>foldtext()</dt>
<dd><p>閉ぢた折り疊みに表示する文字列を返す。これはオプション &rsquo;<samp>foldtext</samp>&rsquo; のデフォルトの函數であり、&rsquo;<samp>foldtext</samp>&rsquo; を評價してゐるときにだけ呼ぶようにすべきである。この函數は變數 |<a href="#v_003afoldstart">v:foldstart</a>|, |<a href="#v_003afoldend">v:foldend</a>|, |<a href="#v_003afolddashes">v:folddashes</a>| を使用する。
戾り値の文字列は次のやうになる:
</p><pre class="verbatim">+-- 45 lines: abcdef
</pre><p>先導するダッシュ (-) の數は折り疊みレベルによつて決まる。&quot;45&quot; はその折り疊みに含まれてゐる行數である。&quot;abcdef&quot; はその折り疊みの中の最初の空行でない行のテキストである。行頭の空白と、&quot;//&quot; や &quot;/*&quot;、&rsquo;<samp>foldmarker</samp>&rsquo; と &rsquo;<samp>commentstring</samp>&rsquo; に設定されてゐる文字列は削除される。
</p>
<p>實際に折り疊みテキストを表示するときには、行の殘りは &rsquo;<samp>fillchars</samp>&rsquo; で設定した折り疊み用の文字で埋められる。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bfolding">+folding</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<a name="foldtextresult_0028_0029"></a><a name="index-foldtextresult_0028_0029"></a>
</dd>
<dt>foldtextresult({lnum})</dt>
<dd><p>{lnum} 行目の閉ぢた折り疊みに表示される文字列を返す。&rsquo;<samp>foldtext</samp>&rsquo; を適切なコンテキストの中で評價する。{lnum} 行目に閉ぢた折り疊みがないときは空文字列を返す。
{lnum}は |<a href="#getline_0028_0029">getline()</a>| のときと同樣に扱はれる。つまり &quot;.&quot; はカレント行、&quot;&rsquo;m&quot; はマーク m を表す。折り疊まれたテキストを HTML などにエクスポートするときに有用。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bfolding">+folding</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<a name="foreground_0028_0029"></a><a name="index-foreground_0028_0029"></a>
</dd>
<dt>foreground()</dt>
<dd><p>Vim のウィンドウを前面に移動する。この函數はクライアントから Vim サーバーへ送ると便利である。|<a href="#remote_005fsend_0028_0029">remote_send()</a>| Win32 では自分自身のウィンドウを前面に持つてくることが必ずしも許可されてゐないので、動作しないかもしれない。そのときは代はりに |<a href="#remote_005fforeground_0028_0029">remote_foreground()</a>| を使ふこと。
</p>
<p>{Win32, Athena, Motif, GTK いづれかの GUI 版と Win32 コンソール版でのみ利用できる}
</p>
<a name="funcref_0028_0029"></a><a name="index-funcref_0028_0029"></a>
</dd>
<dt>funcref({name} [, {arglist}] [, {dict}])</dt>
<dd><p>|<a href="#function_0028_0029">function()</a>| と同樣である。ただし、返された Funcref は函數を名前ではなく參照で檢索する。これは函數 {name} が後で再定義されるときに重要である。
</p>
<p>|<a href="#function_0028_0029">function()</a>| とは違ひ、{name} はユーザー定義函數として存在してゐなければならない。また、autoload 函數についても同樣である。{name} は組込み函數であつてはならない。
</p>
<a name="function_0028_0029"></a><a name="E700"></a><a name="E922"></a><a name="E923"></a><a name="index-function_0028_0029"></a>
<a name="index-E700"></a>
<a name="index-E922"></a>
<a name="index-E923"></a>
</dd>
<dt>function({name} [, {arglist}] [, {dict}])</dt>
<dd><p>函數 {name} を參照する |<a href="#Funcref">Funcref</a>| の變數を返す。{name} はユーザー定義函數でも組み込み函數でもよい。
</p>
<p>ここで {name} は函數の參照、もしくは部分適用である。部分適用であるとき、それに格納されてゐる辭書が使用され、{dict} 引數が使用できない。例:
</p><div class="example">
<pre class="example">let FuncWithArg = function(dict.Func, [arg])
let Broken = function(dict.Func, [arg], dict)
</pre></div>
<p>Funcref が利用されるとき、その函數は {name} から見つけられる。これは後で再定義された場合も同樣である。常に同じ函數を見つけるためには |<a href="#funcref_0028_0029">funcref()</a>| を使ふこと。
</p>
<p>{arglist} もしくは {dict} が與へられると、函數の部分適用が作られる。すなはち引數のリスト及び/または辭書は Funcref に格納され、その Funcref が呼ばれるときに使用される。
</p>
<p>格納された引數は他の引數よりも前に函數に渡される。例へば:
</p><pre class="verbatim">func Callback(arg1, arg2, name)
...
let Func = function('Callback', ['one', 'two'])
...
call Func('name')
</pre><p>函數は次のやうに呼び出す:
</p><div class="example">
<pre class="example">call Callback('one', 'two', 'name')
</pre></div>

<p>function() は Funcref により多くの引數を加へるためにネストして呼び出すことができる。餘分な引數は、引數のリストに追加される。例へば:
</p><pre class="verbatim">func Callback(arg1, arg2, name)
...
let Func = function('Callback', ['one'])
let Func2 = function(Func, ['two'])
...
call Func2('name')
</pre><p>これは次のやうに函數を呼び出す:
</p><div class="example">
<pre class="example">call Callback('one', 'two', 'name')
</pre></div>

<p>辭書は &quot;dict&quot; 函數を呼び出すときのみ有用である。この場合、{dict} は &quot;self&quot; として渡される。例へば:
</p><pre class="verbatim">function Callback() dict
echo &quot;called for &quot; . self.name
endfunction
...
let context = @{&quot;name&quot;: &quot;example&quot;@}
let Func = function('Callback', context)
...
call Func()	&quot; will echo: called for example
</pre><p>餘分な引數がない場合、function() は必要ない。以下の 2 つは同等である:
</p><div class="example">
<pre class="example">let Func = function('Callback', context)
let Func = context.Callback
</pre></div>

<p>引數のリストと辭書を同時に使用することもできる:
</p><pre class="verbatim">function Callback(arg1, count) dict
...
let context = {&quot;name&quot;: &quot;example&quot;}
let Func = function('Callback', ['one'], context)
...
call Func(500)
</pre><p>これは次のやうに函數を呼び出す:
</p><div class="example">
<pre class="example">call context.Callback('one', 500)
</pre></div>


<a name="garbagecollect_0028_0029"></a><a name="index-garbagecollect_0028_0029"></a>
</dd>
<dt>garbagecollect([{atexit}])</dt>
<dd><p>循環參照を持ち、使はれてゐないリスト |<a href="#List">List</a>|、辭書 |<a href="#Dictionaries">Dictionaries</a>|、チャネル |<a href="#Channels">Channels</a>|、ジョブ |<a href="#Jobs">Jobs</a>| をクリーンアップする。
</p>
<p>これはメモリ不足に陷つたときや、&rsquo;<samp>updatetime</samp>&rsquo; 經過後ユーザーのキー入力を待つてゐるときに自動的に行はれるので、この函數を呼ぶ必要があることはほとんどない。循環參照を持たない要素は、使はれなくなつたとき必ず解放される。長時閒實行されるスクリプトの中で循環參照を持つ非常に大きなリスト |<a href="#List">List</a>| や辭書 |<a href="#Dictionary">Dictionary</a>| を削除したときに有用である。
</p>
<p>省略可能な引數 {atexit} に 1 を指定すると、Vim を終了するときにもガーベッジコレクションが行はれる。これはメモリリークを發見するのに役に立つ。
</p>
<p>ガーベッジコレクションはすぐには實行されず、安全な場合のみ實行される。これはユーザーが文字を入力するのを待つてゐるときである。ガーベッジコレクションを强制するには、すぐに |<a href="#test_005fgarbagecollect_005fnow_0028_0029">test_garbagecollect_now()</a>| を使用すること。
</p>
<a name="get_0028_0029"></a><a name="index-get_0028_0029"></a>
</dd>
<dt>get({list}, {idx} [, {default}])</dt>
<dd><p>リスト |<a href="#List">List</a>| {list} から {idx} 番目の要素を取得する。この要素を取得できないときは {default} を返す。{default} が省略されたときは 0 を返す。
</p></dd>
<dt>get({blob}, {idx} [, {default}])</dt>
<dd><p>|<a href="#Blob">Blob</a>| {blob} から {idx} 番目のバイトを取得する。このバイトを取得できないときは {default} を返す。{default} が省略されたときは -1 を返す。
</p></dd>
<dt>get({dict}, {key} [, {default}])</dt>
<dd><p>辭書 |<a href="#Dictionary">Dictionary</a>| {dict} からキー {key} に關聯づけられた値を取得する。この要素を取得できないときは {default} を返す。{default} が省略されたときは 0 を返す。
</p></dd>
<dt>get({func}, {what})</dt>
<dd><p>Funcref {func} から項目を取得する。{what} の可能な値は:
</p><table>
<tr><td width="10%">&quot;name&quot;</td><td width="90%">函數名</td></tr>
<tr><td width="10%">&quot;func&quot;</td><td width="90%">函數</td></tr>
<tr><td width="10%">&quot;dict&quot;</td><td width="90%">辭書</td></tr>
<tr><td width="10%">&quot;args&quot;</td><td width="90%">引數リスト</td></tr>
</table>

<a name="getbufinfo_0028_0029"></a><a name="index-getbufinfo_0028_0029"></a>
</dd>
<dt>getbufinfo([{expr}]) または</dt>
<dt>getbufinfo([{dict}])</dt>
<dd><p>バッファの情報を辭書のリストとして取得する。
</p>
<p>引數なしの場合、すべてのバッファに關する情報が返される。
</p>
<p>引數が辭書の場合、指定された條件を滿たすバッファのみが返される。{dict} には以下のキーを指定できる：
</p><table>
<tr><td width="20%">buflisted</td><td width="80%">リストされたバッファのみを含む。</td></tr>
<tr><td width="20%">bufloaded</td><td width="80%">ロードされたバッファのみを含む。</td></tr>
<tr><td width="20%">bufmodified</td><td width="80%">修正されたバッファのみを含む。</td></tr>
</table>

<p>それ以外の場合、{expr} は情報を返す特定のバッファを指定する。{expr} の使用については、上記の |<a href="#bufname_0028_0029">bufname()</a>| を參照。バッファが見つかつた場合、返される List には 1 つの項目がある。それ以外の場合、結果は空のリストになる。
</p>
<p>返される各 List 項目は、次のエントリを持つ辭書である:
</p><table>
<tr><td width="20%">bufnr</td><td width="80%">バッファ番號。</td></tr>
<tr><td width="20%">changed</td><td width="80%">バッファが變更されてゐる場合は TRUE。</td></tr>
<tr><td width="20%">changedtick</td><td width="80%">バッファに加へられた變更の數。</td></tr>
<tr><td width="20%">hidden</td><td width="80%">バッファが隱されてゐる場合は TRUE。</td></tr>
<tr><td width="20%">listed</td><td width="80%">バッファがリストされてゐる場合は TRUE。</td></tr>
<tr><td width="20%">lnum</td><td width="80%">バッファ內の現在の行番號。</td></tr>
<tr><td width="20%">loaded</td><td width="80%">バッファがロードされてゐる場合は TRUE。</td></tr>
<tr><td width="20%">name</td><td width="80%">バッファ內のファイルへのフルパス</td></tr>
<tr><td width="20%">signs</td><td width="80%">バッファに配置された目印のリスト。各リスト項目は、次のフィールドを含む辭書である:
<table>
<tr><td width="10%">id</td><td width="90%">目印識別子</td></tr>
<tr><td width="10%">lnum</td><td width="90%">行番號</td></tr>
<tr><td width="10%">name</td><td width="90%">目印名</td></tr>
</table></td></tr>
<tr><td width="20%">variables</td><td width="80%">バッファローカル變數の辭書への參照</td></tr>
<tr><td width="20%">windows</td><td width="80%">バッファを表示する |<a href="windows_002etxt.html#window_002dID">window-ID</a>| のリスト</td></tr>
<tr><td width="20%">popups</td><td width="80%">バッファを表示する ポップアップ |<a href="windows_002etxt.html#window_002dID">window-ID</a>| のリスト</td></tr>
</table>

<p>例:
</p><pre class="verbatim">for buf in getbufinfo()
    echo buf.name
endfor
for buf in getbufinfo({'buflisted':1})
    if buf.changed
        ....
    endif
endfor
</pre><p>バッファローカルオプションを取得するには:
</p><div class="example">
<pre class="example">getbufvar({bufnr}, '&amp;option_name')
</pre></div>
<a name="getbufline_0028_0029"></a><a name="index-getbufline_0028_0029"></a>
</dd>
<dt>getbufline({expr}, {lnum} [, {end}])</dt>
<dd><p>バッファ {expr} の {lnum} 行目から {end} 行目まで (兩端含む) の行からなるリスト |<a href="#List">List</a>| を返す。{end} が省略されたときは {lnum} 行目だけからなるリストを返す。
</p>
<p>{expr} の指定の仕方については |<a href="#bufname_0028_0029">bufname()</a>| を參照。
</p>
<p>{lnum} と {end} では &quot;$&quot; でバッファの最後の行を表すことができる。それ以外は數値でなければならない。
</p>
<p>{lnum} が 1 より小さいときや、バッファの行數より大きいときは空リスト |<a href="#List">List</a>| を返す。
</p>
<p>{end} がバッファの行數より大きいときは、バッファの行數が設定されたものとして扱ふ。{end} が {lnum} 行目より前に設定された場合は空リスト |<a href="#List">List</a>| を返す。
</p>
<p>この函數は讀み込まれてゐるバッファに對してのみ動作する。既にアンロードされてゐるバッファや存在しないバッファに對しては空リスト |<a href="#List">List</a>| を返す。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let lines = getbufline(bufnr(&quot;myfile&quot;), 1, &quot;$&quot;)
</pre></div>

<a name="getbufvar_0028_0029"></a><a name="index-getbufvar_0028_0029"></a>
</dd>
<dt>getbufvar({expr}, {varname} [, {def}])</dt>
<dd><p>バッファ {expr} のオプションの値やバッファローカル變數 {varname} の値を返す。
</p><blockquote>
<p><strong>Note:</strong> <br>
&quot;b:&quot; をつけない變數名を指定すること。
</p></blockquote>
<p>{varname} が空文字列の場合、全てのバッファローカル變數からなる辭書を返す。
</p>
<p>{varname} が &quot;&amp;&quot; に等しいとき、すべてのバッファローカルオプションを持つ辭書を返す。さうでなく、{varname} が &quot;&amp;&quot; で始まるとき、バッファローカルオプションの値を返す。
</p>
<p>グローバルオプション、バッファローカルオプションのどちらに對しても動作するが、グローバル變數、ウィンドウローカル變數、ウィンドウローカルオプションに對しては動作しない。
{expr} の指定の仕方については |<a href="#bufname_0028_0029">bufname()</a>| を參照。
</p>
<p>バッファや變數が存在しないときは {def} または空文字列を返し、エラーメッセージは表示されない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let bufmodified = getbufvar(1, &quot;&amp;mod&quot;)
:echo &quot;todo myvar = &quot; . getbufvar(&quot;todo&quot;, &quot;myvar&quot;)
</pre></div>
<a name="getchangelist_0028_0029"></a><a name="index-getchangelist_0028_0029"></a>
</dd>
<dt>getchangelist({expr})</dt>
<dd><p>バッファの {expr} の |<a href="motion_002etxt.html#changelist">changelist</a>| を返す。{expr} の使ひ方は、前述の |<a href="#bufname_0028_0029">bufname()</a>| を參照。バッファ {expr} が存在しない場合、空のリストが返される。
</p>
<p>返されるリストは 2 つのエントリを含む: 變更位置のリストと、リスト內の現在地。變更リスト內のそれぞれの項目は、以下の項目を含む辭書になつてゐる:
</p><table>
<tr><td width="30%">col</td><td width="70%">列番號</td></tr>
<tr><td width="30%">coladd</td><td width="70%">&rsquo;<samp>virtualedit</samp>&rsquo; 用の列のオフセット</td></tr>
<tr><td width="30%">lnum</td><td width="70%">行番號</td></tr>
</table>
<p>バッファ {expr} がカレンノバッファの場合、現在地はリスト內の位置を指す。それ以外のバッファではリストの長さに設定される。
</p>
<a name="getchar_0028_0029"></a><a name="index-getchar_0028_0029"></a>
</dd>
<dt>getchar([expr])</dt>
<dd><p>ユーザーまたは入力ストリームから 1 文字を取得する。
</p>
<p>[expr] が省略されたときは 1 文字を取得できるまで待つ。
</p>
<p>[expr] が 0 のときは 1 文字を取得できる場合のみ取得する。取得できなければ 0 を返す。
</p>
<p>[expr] が 1 のときは 1 文字を取得できるか判定し、實際には取得しない。取得できないときは 0 を返す。
</p>
<p>[expr] が省略されたときや [expr] が 0 のときは、文字全體または特殊キーを返す。それが 1 文字なら戾り値は數値である。これを文字列に戾すには nr2char() を使ふ。それ以外の場合にはエンコードして文字列にして返す。
</p>
<p>特殊キーとは 0x80 (10 進數で 128) で始まるバイト列からなる文字列である。これは文字列 &quot;\&lt;Key&gt;&quot; と同じ値である (例: &quot;\&lt;Left&gt;&quot;)。戾り値は文字列であり、修飾キー (shift, control, alt) は含まれない。
</p>
<p>[expr] が 0 や Esc が入力された場合は、これがエスケープシーケンスの始まりであるかどうかを Vim が知るために待つ閒、短い遲延があるだらう。
</p>
<p>[expr] が 1 のときは最初のバイトだけを返す。1 バイト文字の場合、これはその文字そのものを表す數値である。これを文字列に變換するには nr2char() を使ふ。
</p>
<p>修飾キーを取得するには getcharmod() を使ふ。
</p>
<p>ユーザーがマウスをクリックしたときはマウスイベントを返す。クリックした位置は |<a href="#v_003amouse_005fcol">v:mouse_col</a>|, |<a href="#v_003amouse_005flnum">v:mouse_lnum</a>|, |<a href="#v_003amouse_005fwinid">v:mouse_winid</a>|, |<a href="#v_003amouse_005fwin">v:mouse_win</a>| で得られる。以下の例は、普通にマウスがクリックされたときと同じやうにカーソルを移動させる。
</p><pre class="verbatim">let c = getchar()
if c == &quot;\&lt;LeftMouse&gt;&quot; &amp;&amp; v:mouse_win &gt; 0
  exe v:mouse_win . &quot;wincmd w&quot;
  exe v:mouse_lnum
  exe &quot;normal &quot; . v:mouse_col . &quot;|&quot;
endif
</pre><p>bracketed paste を使用してゐるときは最初の文字のみが返され、ペーストされた殘りのテキストは切り捨てられる。|<a href="term_002etxt.html#xterm_002dbracketed_002dpaste">xterm-bracketed-paste</a>|
</p>
<p>この函數を呼んだときプロンプトは表示されない。文字入力を待つてゐることをなんらかの方法でユーザーがわかるやうにしなければならないだらう。
</p>
<p>入力された文字に對してマッピングは適用されない。
</p>
<p>キーコードは置換される。つまりユーザーが <code class="tt-key">&lt;Del&gt;</code> を押した場合、「生の」文字シーケンスでなく <code class="tt-key">&lt;Del&gt;</code> キーに對應するコードが得られる。例:
</p><div class="example">
<pre class="example">getchar() == &quot;\&lt;Del&gt;&quot;
getchar() == &quot;\&lt;S-Left&gt;&quot;
</pre></div>
<p>以下の例は大文字・小文字を區別しないやうに &quot;f&quot; を再定義する:
</p><pre class="verbatim">:nmap f :call FindChar()&lt;CR&gt;
:function FindChar()
:  let c = nr2char(getchar())
:  while col('.') &lt; col('$') - 1
:    normal l
:    if getline('.')[col('.') - 1] ==? c
:      break
:    endif
:  endwhile
:endfunction
</pre><p>あなたは |<a href="autocmd_002etxt.html#g_t_003cCursorHold_003e">&lt;CursorHold&gt;</a>| のやうな合成文字も取得するかもしれない。多くの場合、あなたはこれを無視して別の文字を取得することになる:
</p><pre class="verbatim">:function GetKey()
:  let c = getchar()
:  while c == &quot;\&lt;CursorHold&gt;&quot;
:    let c = getchar()
:  endwhile
:  return c
:endfunction
</pre>
<a name="getcharmod_0028_0029"></a><a name="index-getcharmod_0028_0029"></a>
</dd>
<dt>getcharmod()</dt>
<dd><p>最後に getchar() などで得た文字に對する修飾キーの狀態を表す數値を返す。以下の値の和となる:
</p><table>
<tr><td width="10%">2</td><td width="90%">shift</td></tr>
<tr><td width="10%">4</td><td width="90%">control</td></tr>
<tr><td width="10%">8</td><td width="90%">alt (meta)</td></tr>
<tr><td width="10%">16</td><td width="90%">meta (ALT と META が區別される場合)</td></tr>
<tr><td width="10%">32</td><td width="90%">マウスのダブルクリック</td></tr>
<tr><td width="10%">64</td><td width="90%">マウスのトリプルクリック</td></tr>
<tr><td width="10%">96</td><td width="90%">マウスのクアドラプルクリック (== 32 + 64)</td></tr>
<tr><td width="10%">128</td><td width="90%">command (Macintosh のみ)</td></tr>
</table>
<p>文字自身に含まれてゐない修飾キーのみ取得できる。つまり、Shift-a は修飾キーなしの &quot;A&quot; となる。
</p>
<a name="getcharsearch_0028_0029"></a><a name="index-getcharsearch_0028_0029"></a>
</dd>
<dt>getcharsearch()</dt>
<dd><p>現在の文字檢索の情報である {dict} を返し、この辭書は下記のエントリを持つ:
</p>
<table>
<tr><td width="20%">char</td><td width="80%">文字檢索 (|<a href="motion_002etxt.html#t">t</a>|, |<a href="motion_002etxt.html#f">f</a>|, |<a href="motion_002etxt.html#T">T</a>|, |<a href="motion_002etxt.html#F">F</a>|) で以前に使はれた文字。もし文字檢索が實行されてゐないなら空文字列。</td></tr>
<tr><td width="20%">forward</td><td width="80%">文字檢索の方向。1 は前方、0 は後方。</td></tr>
<tr><td width="20%">until</td><td width="80%">文字檢索の種類。1 は |<a href="motion_002etxt.html#t">t</a>| もしくは |<a href="motion_002etxt.html#T">T</a>| の文字檢索、0 は |<a href="motion_002etxt.html#f">f</a>| もしくは |<a href="motion_002etxt.html#F">F</a>| の文字檢索。</td></tr>
</table>

<p>下記の設定は前囘の文字檢索の方向にかかはらず、|<a href="motion_002etxt.html#g_t_003b">;</a>| で前方檢索、|<a href="motion_002etxt.html#g_t_002c">,</a>| で後方檢索を常に行へるやうになり便利である:
</p><div class="example">
<pre class="example">:nnoremap &lt;expr&gt; ; getcharsearch().forward ? ';' : ','
:nnoremap &lt;expr&gt; , getcharsearch().forward ? ',' : ';'
</pre></div>
<p>|<a href="#setcharsearch_0028_0029">setcharsearch()</a>| も參照。
</p>
<a name="getcmdline_0028_0029"></a><a name="index-getcmdline_0028_0029"></a>
</dd>
<dt>getcmdline()</dt>
<dd><p>現在のコマンドラインの內容を取得する。コマンドラインを編輯してゐるときのみ動作する。つまり |<a href="cmdline_002etxt.html#c_005fCTRL_002d_005c_005fe">c_CTRL-\_e</a>| または |<a href="cmdline_002etxt.html#c_005fCTRL_002dR_005f_003d">c_CTRL-R_=</a>| を使つてゐるときのみ有效。
</p>
<p>例:
</p><div class="example">
<pre class="example">:cmap &lt;F7&gt; &lt;C-\&gt;eescape(getcmdline(), ' \')&lt;CR&gt;
</pre></div>
<p>|<a href="#getcmdtype_0028_0029">getcmdtype()</a>|, |<a href="#getcmdpos_0028_0029">getcmdpos()</a>|, |<a href="#setcmdpos_0028_0029">setcmdpos()</a>| も參照。
</p>
<p>パスワードの入力や |<a href="#inputsecret_0028_0029">inputsecret()</a>| が使はれたときは空文字を返す。
</p>
<a name="getcmdpos_0028_0029"></a><a name="index-getcmdpos_0028_0029"></a>
</dd>
<dt>getcmdpos()</dt>
<dd><p>コマンドラインにおけるカーソル位置をバイト單位で取得する。最初の桁は 1 となる。
</p>
<p>コマンドラインを編輯してゐるときのみ動作する。つまり |<a href="cmdline_002etxt.html#c_005fCTRL_002d_005c_005fe">c_CTRL-\_e</a>| または |<a href="cmdline_002etxt.html#c_005fCTRL_002dR_005f_003d">c_CTRL-R_=</a>| または式マッピングを使つてゐるときのみ有效。さうでないときは 0 を返す。
</p>
<p>|<a href="#getcmdtype_0028_0029">getcmdtype()</a>|, |<a href="#setcmdpos_0028_0029">setcmdpos()</a>|, |<a href="#getcmdline_0028_0029">getcmdline()</a>| も參照。
</p>
<a name="getcmdtype_0028_0029"></a><a name="index-getcmdtype_0028_0029"></a>
</dd>
<dt>getcmdtype()</dt>
<dd><p>現在のコマンドラインの種類を返す。戾り値は次のいづれか:
</p><table>
<tr><td width="10%">:</td><td width="90%">通常の ex コマンド</td></tr>
<tr><td width="10%">&gt;</td><td width="90%">デバッグモードコマンド |<a href="repeat_002etxt.html#debug_002dmode">debug-mode</a>|</td></tr>
<tr><td width="10%">/</td><td width="90%">前方檢索コマンド</td></tr>
<tr><td width="10%">?</td><td width="90%">後方檢索コマンド</td></tr>
<tr><td width="10%">&nbsp;</td><td width="90%">|<a href="#input_0028_0029">input()</a>| コマンド</td></tr>
<tr><td width="10%">-</td><td width="90%">|<a href="insert_002etxt.html#g_t_003ainsert">:insert</a>| または |<a href="insert_002etxt.html#g_t_003aappend">:append</a>| コマンド</td></tr>
<tr><td width="10%">=</td><td width="90%">|<a href="insert_002etxt.html#i_005fCTRL_002dR_005f_003d">i_CTRL-R_=</a>|</td></tr>
</table>
<p>コマンドラインを編輯してゐるときのみ動作する。つまり |<a href="cmdline_002etxt.html#c_005fCTRL_002d_005c_005fe">c_CTRL-\_e</a>| または |<a href="cmdline_002etxt.html#c_005fCTRL_002dR_005f_003d">c_CTRL-R_=</a>| または式マッピングを使つてゐるときのみ有效。さうでないときは空文字列を返す。
</p>
<p>|<a href="#getcmdpos_0028_0029">getcmdpos()</a>|, |<a href="#setcmdpos_0028_0029">setcmdpos()</a>|, |<a href="#getcmdline_0028_0029">getcmdline()</a>| も參照。
</p>
<a name="getcmdwintype_0028_0029"></a><a name="index-getcmdwintype_0028_0029"></a>
</dd>
<dt>getcmdwintype()</dt>
<dd><p>現在のコマンドラインウィンドウ (|<a href="cmdline_002etxt.html#command_002dline_002dwindow">command-line-window</a>|) の種類を返す。戾り値の意味は |<a href="#getcmdtype_0028_0029">getcmdtype()</a>| と同じ。コマンドラインウィンドウでなければ空文字列を返す。
</p>
<a name="getcompletion_0028_0029"></a><a name="index-getcompletion_0028_0029"></a>
</dd>
<dt>getcompletion({pat}, {type} [, {filtered}])</dt>
<dd><p>コマンドライン補完のマッチするリストを返す。{type} は何のためのものかを指定する。 次の補完タイプがサポートされてゐる:
</p>
<table>
<tr><td width="20%">arglist</td><td width="80%">引數リスト內のファイル名</td></tr>
<tr><td width="20%">augroup</td><td width="80%">自動コマンドグループ</td></tr>
<tr><td width="20%">buffer</td><td width="80%">バッファ名</td></tr>
<tr><td width="20%">behave</td><td width="80%">|<a href="gui_002etxt.html#g_t_003abehave">:behave</a>| サブオプション</td></tr>
<tr><td width="20%">color</td><td width="80%">カラースキーム</td></tr>
<tr><td width="20%">command</td><td width="80%">Ex コマンド (および引數)</td></tr>
<tr><td width="20%">compiler</td><td width="80%">コンパイラ</td></tr>
<tr><td width="20%">cscope</td><td width="80%">|<a href="if_005fcscop_002etxt.html#g_t_003acscope">:cscope</a>| のサブオプション</td></tr>
<tr><td width="20%">dir</td><td width="80%">ディレクトリ名</td></tr>
<tr><td width="20%">environment</td><td width="80%">環境變數名</td></tr>
<tr><td width="20%">event</td><td width="80%">自動コマンドのイベント</td></tr>
<tr><td width="20%">expression</td><td width="80%">Vim 式</td></tr>
<tr><td width="20%">file</td><td width="80%">ファイルおよびディレクトリ名</td></tr>
<tr><td width="20%">file_in_path</td><td width="80%">|<a href="options_002etxt.html#g_t_0027path_0027">'path'</a>| のファイルおよびディレクトリ名</td></tr>
<tr><td width="20%">filetype</td><td width="80%">ファイルタイプ名 |<a href="options_002etxt.html#g_t_0027filetype_0027">'filetype'</a>|</td></tr>
<tr><td width="20%">function</td><td width="80%">函數名</td></tr>
<tr><td width="20%">help</td><td width="80%">ヘルプ項目</td></tr>
<tr><td width="20%">highlight</td><td width="80%">ハイライトグループ</td></tr>
<tr><td width="20%">history</td><td width="80%">|<a href="cmdline_002etxt.html#g_t_003ahistory">:history</a>| サブオプション</td></tr>
<tr><td width="20%">locale</td><td width="80%">ロケール名 (locale -a の出力)</td></tr>
<tr><td width="20%">mapclear</td><td width="80%">バッファ引數</td></tr>
<tr><td width="20%">mapping</td><td width="80%">マッピング名</td></tr>
<tr><td width="20%">menu</td><td width="80%">メニュー</td></tr>
<tr><td width="20%">messages</td><td width="80%">|<a href="message_002etxt.html#g_t_003amessages">:messages</a>| サブオプション</td></tr>
<tr><td width="20%">option</td><td width="80%">オプション</td></tr>
<tr><td width="20%">packadd</td><td width="80%">任意パッケージ |<a href="repeat_002etxt.html#pack_002dadd">pack-add</a>| 名</td></tr>
<tr><td width="20%">shellcmd</td><td width="80%">シェルコマンド</td></tr>
<tr><td width="20%">sign</td><td width="80%">|<a href="sign_002etxt.html#g_t_003asign">:sign</a>| サブオプション</td></tr>
<tr><td width="20%">syntax</td><td width="80%">構文ファイル名 |<a href="options_002etxt.html#g_t_0027syntax_0027">'syntax'</a>|</td></tr>
<tr><td width="20%">syntime</td><td width="80%">|<a href="syntax_002etxt.html#g_t_003asyntime">:syntime</a>| サブオプション</td></tr>
<tr><td width="20%">tag</td><td width="80%">タグ</td></tr>
<tr><td width="20%">tag_listfiles</td><td width="80%">タグ、ファイル名</td></tr>
<tr><td width="20%">user</td><td width="80%">ユーザー名</td></tr>
<tr><td width="20%">var</td><td width="80%">ユーザー變數</td></tr>
</table>

<p>{pat} が空文字列の場合、すべてのマッチが返される。それ以外の場合、{pat} と一致する項目のみが返される。{pat} での特殊文字の使用については、|<a href="editing_002etxt.html#wildcards">wildcards</a>| を參照。
</p>
<p>オプションの {filtered} フラグが 1 に設定されてゐる場合、結果をフィルタリングするために &rsquo;<samp>wildignore</samp>&rsquo; が適用される。さうでなければ、すべての一致が返される。&rsquo;<samp>wildignorecase</samp>&rsquo; オプションは常に適用される。
</p>
<p>一致するものがなければ、空のリストが返される。{type} の値が無效だと、エラーが發生する。
</p>
<a name="getcurpos_0028_0029"></a><a name="index-getcurpos_0028_0029"></a>
</dd>
<dt>getcurpos()</dt>
<dd><p>カーソルの位置を返す。これは getpos(&rsquo;.&rsquo;) に似てゐるが、追加の情報を含む:
</p><div class="example">
<pre class="example">[bufnum, lnum, col, off, curswant]
</pre></div>
<p>&quot;curswant&quot; は縱方向移動の優先的列番號である。|<a href="#getpos_0028_0029">getpos()</a>| も參照。
</p>
<p>次のやうにしてカーソル位置の保存と復元ができる:
</p><div class="example">
<pre class="example">let save_cursor = getcurpos()
MoveTheCursorAround
call setpos('.', save_cursor)
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
これはウィンドウ內でのみ機能することに注意。より多くの狀態を復元する方法については |<a href="#winrestview_0028_0029">winrestview()</a>| を參照。
</p></blockquote>
<a name="getcwd_0028_0029"></a><a name="index-getcwd_0028_0029"></a>
</dd>
<dt>getcwd([{winnr} [, {tabnr}]])</dt>
<dd><p>結果は現在の作業ディレクトリ名の文字列である。
</p>
<p>{winnr} が指定された場合、現在のタブページ內の {winnr} のウィンドウのローカルカレントディレクトリを返す。{winnr} にはウィンドウ番號または |<a href="windows_002etxt.html#window_002dID">window-ID</a>| が使へる。
</p>
<p>{winnr} が -1 の場合、グローバル作業ディレクトリ名を返す。|<a href="#haslocaldir_0028_0029">haslocaldir()</a>| も參照。
</p>
<p>{winnr} と {tabnr} が指定された場合、{tabnr} のタブページ內の {winnr} のウィンドウのローカルカレントディレクトリを返す。{winnr} が -1 の場合、タブページの作業ディレクトリを返す。
</p>
<p>{winnr} が 0 の場合、カレントウィンドウを使用し、{tabnr} が 0 の場合はカレントタブページを使用する。
</p>
<p>引數なしの場合は、カレントウィンドウの作業ディレクトリを返す。
</p>
<p>もし引數が不正の場合、空文字列を返す。
</p>
<p>例:
</p><pre class="verbatim">&quot; カレントウィンドウの作業ディレクトリを取得
:echo getcwd()
:echo getcwd(0)
:echo getcwd(0, 0)
&quot; タブページ 2 のウィンドウ 3 の作業ディレクトリを取得
:echo getcwd(3, 2)
&quot; グローバル作業ディレクトリを取得
:echo getcwd(-1)
&quot; タブページ 3 の作業ディレクトリを取得
:echo getcwd(-1, 3)
&quot; カレントタブページの作業ディレクトリを取得
:echo getcwd(-1, 0)
</pre><a name="getenv_0028_0029"></a><a name="index-getenv_0028_0029"></a>
</dd>
<dt>getenv({name})</dt>
<dd><p>環境變數 {name} の値を返す。
</p>
<p>變數が存在しない場合は |<a href="#v_003anull">v:null</a>| が返される。これは、空の文字列に設定された變數とは異なる。
</p>
<p>|<a href="#expr_002denv">expr-env</a>| も參照。
</p>
<a name="getfontname_0028_0029"></a><a name="index-getfontname_0028_0029"></a>
</dd>
<dt>getfontname([{name}])</dt>
<dd><p>引數なしで使はれた場合には現在の通常のフォント名を返す。ハイライトグループ Normal に對して使はれるものと同樣 |<a href="syntax_002etxt.html#hl_002dNormal">hl-Normal</a>|。
引數が指定された場合には {name} が有效なフォント名であるか判定される。有效でないときは空文字列を返す。
</p>
<p>有效なときは實際のフォント名を返す。または GUI が實際の名前の取得をサポートしてゐないときは {name} をそのまま返す。
GUI モードで實行してゐるときのみ動作する。よつて vimrc や gvimrc の中では使へない。GUI モードが起動した直後にこの函數を呼ぶには、オートコマンド |<a href="autocmd_002etxt.html#GUIEnter">GUIEnter</a>| を使ふこと。
</p><blockquote>
<p><strong>Note:</strong> <br>
GTK の GUI はどんなフォント名でも受け付けてしまふため、名前が有效であるかのチェックは機能しない。
</p></blockquote>

<a name="getfperm_0028_0029"></a><a name="index-getfperm_0028_0029"></a>
</dd>
<dt>getfperm({fname})</dt>
<dd><p>{fname} で指定されたファイルの讀み込み、書き込み、實行の許可屬性を示す文字列を返す。
</p>
<p>{fname} が存在しない、またはそのディレクトリが讀み込み不可能なときは空文字列を返す。
戾り値は &quot;rwxrwxrwx&quot; の形で、&quot;rwx&quot; フラグの各グループは順にファイルの所有者、ファイルが所屬するグループ、その他のユーザーを表す。許可屬性が與へられてゐないフラグは &quot;-&quot; で置き換へられる。例:
</p><div class="example">
<pre class="example">:echo getfperm(&quot;/etc/passwd&quot;)
:echo getfperm(expand(&quot;~/.vimrc&quot;))
</pre></div>
<p>この例は、(セキュリティの觀點から望ましい設定がされてゐるならば) &quot;&lsquo;<samp>rw-r--r--</samp>&rsquo;&quot; あるいは &quot;&lsquo;<samp>rw-------</samp>&rsquo;&quot; と表示する。
</p>
<p>許可屬性を設定するには |<a href="#setfperm_0028_0029">setfperm()</a>| を使用する。
</p>
<a name="getfsize_0028_0029"></a><a name="index-getfsize_0028_0029"></a>
</dd>
<dt>getfsize({fname})</dt>
<dd><p>結果は數値で、{fname} で指定されるファイルのサイズをバイト單位で返す。
</p>
<p>{fname} がディレクトリのときは 0 を返す。
</p>
<p>ファイル {fname} が見つからないときは -1 を返す。
</p>
<p>{fname} のサイズが |<a href="#Number">Number</a>| の範圍外の場合は -2 を返す。
</p>
<a name="getftime_0028_0029"></a><a name="index-getftime_0028_0029"></a>
</dd>
<dt>getftime({fname})</dt>
<dd><p>結果は {fname} で與へられたファイルの、最終更新時閒を示す數値。1970年1月1日からの經過時閒(秒)で、strftime() に渡すことができるだらう。|<a href="#localtime_0028_0029">localtime()</a>| と |<a href="#strftime_0028_0029">strftime()</a>| も參照。
</p>
<p>ファイル {fname} が見つからなかつた場合には -1 を返す。
</p>
<a name="getftype_0028_0029"></a><a name="index-getftype_0028_0029"></a>
</dd>
<dt>getftype({fname})</dt>
<dd><p>{fname} で指定されたファイルの種別を示す文字列を返す。
</p>
<p>{fname} が存在しないときは空文字列を返す。
</p>
<p>ファイルの種別とそれらの結果の表を以下に示す:
</p><table>
<tr><td width="70%">通常ファイル</td><td width="30%">&quot;file&quot;</td></tr>
<tr><td width="70%">ディレクトリ</td><td width="30%">&quot;dir&quot;</td></tr>
<tr><td width="70%">シンボリックリンク</td><td width="30%">&quot;link&quot;</td></tr>
<tr><td width="70%">ブロックデバイス</td><td width="30%">&quot;bdev&quot;</td></tr>
<tr><td width="70%">キャラクタデバイス</td><td width="30%">&quot;cdev&quot;</td></tr>
<tr><td width="70%">ソケット</td><td width="30%">&quot;socket&quot;</td></tr>
<tr><td width="70%">FIFO</td><td width="30%">&quot;fifo&quot;</td></tr>
<tr><td width="70%">それ以外</td><td width="30%">&quot;other&quot;</td></tr>
</table>
<p>例:
</p><div class="example">
<pre class="example">getftype(&quot;/home&quot;)
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
&quot;link&quot; などの種別はそれをサポートしてゐるシステムでのみ返される。&quot;dir&quot; と &quot;file&quot; しか返らないシステムもある。MS-Windows では、ディレクトリへのシンボリックリンクは &quot;link&quot; の代はりに &quot;dir&quot; を返す。
</p></blockquote>

<a name="getjumplist_0028_0029"></a><a name="index-getjumplist_0028_0029"></a>
</dd>
<dt>getjumplist([{winnr} [, {tabnr}]])</dt>
<dd><p>指定されたウィンドウのジャンプリスト |<a href="motion_002etxt.html#jumplist">jumplist</a>| を返す。
</p>
<p>引數なしの場合、カレントウィンドウを使用する。{winnr} のみの場合、現在のタブページのこのウィンドウを使用する。{winnr} には |<a href="windows_002etxt.html#window_002dID">window-ID</a>| も使用できる。{winnr} と {tabnr} 兩方の場合、指定されたタブページのウィンドウを使ふ。
</p>
<p>返されるリストは 2 つのエントリを含む: ジャンプ位置リストと、リスト內の最後に使はれたジャンプ位置番號。ジャンプ位置リスト內のそれぞれの項目は、以下の項目を含む辭書になつてゐる:
</p><table>
<tr><td width="30%">bufnr</td><td width="70%">バッファ番號</td></tr>
<tr><td width="30%">col</td><td width="70%">列番號</td></tr>
<tr><td width="30%">coladd</td><td width="70%">&rsquo;<samp>virtualedit</samp>&rsquo; 用の列のオフセット</td></tr>
<tr><td width="30%">filename</td><td width="70%">利用可能ならばファイル名</td></tr>
<tr><td width="30%">lnum</td><td width="70%">行番號</td></tr>
</table>

<a name="getline_0028_0029"></a><a name="index-getline_0028_0029"></a>
</dd>
<dt>getline({lnum} [, {end}])</dt>
<dd><p>{end} が指定されない場合は、カレントバッファの {lnum} 行目の內容を文字列にして返す。例:
</p><div class="example">
<pre class="example">getline(1)
</pre></div>
<p>{lnum} が數字ではない文字で始まる文字列であつた場合、|<a href="#line_0028_0029">line()</a>| によつてその文字列が數字に變換される。よつて、カーソルのある行の文字列を取得するには:
</p><div class="example">
<pre class="example">getline(&quot;.&quot;)
</pre></div>
<p>{lnum} が 1 より小さいかバッファの行數よりも大きい數値の場合、空文字列が返される。
</p>
<p>{end} が指定された場合は、カレントバッファの {lnum} 行目から {end} 行目までを要素とするリスト |<a href="#List">List</a>| を返す。{end} は {lnum} と同樣に解釋される。
</p>
<p>存在しない行は省略され、エラーメッセージは表示されない。
</p>
<p>{end} が {lnum} より前になる場合は空リスト |<a href="#List">List</a>| を返す。
例:
</p><div class="example">
<pre class="example">:let start = line('.')
:let end = search(&quot;^$&quot;) - 1
:let lines = getline(start, end)
</pre></div>

<p>他のバッファの行を取得するには |<a href="#getbufline_0028_0029">getbufline()</a>| を參照。
</p>
<a name="getloclist_0028_0029"></a><a name="index-getloclist_0028_0029"></a>
</dd>
<dt>getloclist({nr} [, {what}])</dt>
<dd><p>ウィンドウ {nr} のロケーションリストの全項目からなるリストを返す。{nr} にはウィンドウ番號または |<a href="windows_002etxt.html#window_002dID">window-ID</a>| が使へる。{nr} に 0 を指定するとカレントウィンドウになる。
</p>
<p>ロケーションリストウィンドウに對して使用すると、そこに表示されてゐるロケーションリストが返る。ウィンドウ番號 {nr} が無效な場合は、空リストが返る。それ以外は |<a href="#getqflist_0028_0029">getqflist()</a>| と同じ。
</p>
<p>オプションの {what} 辭書引數が指定されてゐる場合、{what} にリストされてゐる項目を辭書として返す。{what} のサポートされてゐる項目については、|<a href="#getqflist_0028_0029">getqflist()</a>| を參照。
</p>
<p>|<a href="#getqflist_0028_0029">getqflist()</a>| の {what} でサポートされてゐる項目に加へ、|<a href="#getloclist_0028_0029">getloclist()</a>| では次の項目もサポートされてゐる:
</p>
<table>
<tr><td width="30%">filewinid</td><td width="70%">ロケーションリストからファイルを表示するのに使はれてゐるウィンドウの ID。このフィールドはロケーションリストウィンドウから呼び出されたときのみ適用される。詳細は |<a href="quickfix_002etxt.html#location_002dlist_002dfile_002dwindow">location-list-file-window</a>| を參照。</td></tr>
</table>

<a name="getmatches_0028_0029"></a><a name="index-getmatches_0028_0029"></a>
</dd>
<dt>getmatches([{win}])</dt>
<dd><p>|<a href="#matchadd_0028_0029">matchadd()</a>| と |<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| によりカレントウィンドウに定義された全てのマッチの |<a href="#List">List</a>| を返す。|<a href="#setmatches_0028_0029">setmatches()</a>| は |<a href="#getmatches_0028_0029">getmatches()</a>| で保存されたマッチのリストを復元できるので、|<a href="#getmatches_0028_0029">getmatches()</a>| と |<a href="#setmatches_0028_0029">setmatches()</a>| は組み合はせて使ふと便利である。
例:
</p><div class="example">
<pre class="example">:echo getmatches()
[{'group': 'MyGroup1', 'pattern': 'TODO',
'priority': 10, 'id': 1}, {'group': 'MyGroup2',
'pattern': 'FIXME', 'priority': 10, 'id': 2}]
:let m = getmatches()
:call clearmatches()
:echo getmatches()
[]
:call setmatches(m)
:echo getmatches()
[{'group': 'MyGroup1', 'pattern': 'TODO',
'priority': 10, 'id': 1}, {'group': 'MyGroup2',
'pattern': 'FIXME', 'priority': 10, 'id': 2}]
:unlet m
</pre></div>
<a name="getpid_0028_0029"></a><a name="index-getpid_0028_0029"></a>
</dd>
<dt>getpid()</dt>
<dd><p>Vim のプロセス ID を數値で返す。Unix と MS-Windows では Vim が終了するまでこれは一意な數値である。MS-DOS では常にゼロである。
</p>
<a name="getpos_0028_0029"></a><a name="index-getpos_0028_0029"></a>
</dd>
<dt>getpos({expr})</dt>
<dd><p>{expr} の位置を返す。{expr} として指定できる値については |<a href="#line_0028_0029">line()</a>| を參照。カーソル位置を得るには |<a href="#getcurpos_0028_0029">getcurpos()</a>| を參照。
結果は次の 4 個の要素を持つリスト |<a href="#List">List</a>|:
</p><div class="example">
<pre class="example">[bufnum, lnum, col, off]
</pre></div>
<p>&quot;bufnum&quot; は、&rsquo;0 や &rsquo;A のやうなマークが指定されたときは、そのマークのバッファ番號となる。それ以外では 0 となる。
</p>
<p>&quot;lnum&quot; と &quot;col&quot; はバッファ中の位置。桁番號は 1 から始まる。
</p>
<p>&quot;off&quot; の値は、&rsquo;<samp>virtualedit</samp>&rsquo; がオフのときは常に 0 で、オンのときはその文字の始點からの畫面上の桁のオフセットである。つまり、カーソルが &lt;Tab&gt; の中や、その行の最後の文字より後にあるとき意味を持つ。
</p><blockquote>
<p><strong>Note:</strong> <br>
ビジュアルモードの &rsquo;&lt; と &rsquo;&gt; について: ビジュアルモードが &quot;V&quot; (行選擇モード) のとき、&rsquo;&lt; の桁番號はゼロ、&rsquo;&gt; の桁番號は大きな値になる。
</p>
<p>この函數はマークの位置を保存し、復元するために使はれる:
</p><div class="example">
<pre class="example">let save_a_mark = getpos(&quot;'a&quot;)
...
call setpos(&quot;'a&quot;, save_a_mark)
</pre></div>
<p>|<a href="#getcurpos_0028_0029">getcurpos()</a>| と |<a href="#setpos_0028_0029">setpos()</a>|も參照。
</p></blockquote>


<a name="getqflist_0028_0029"></a><a name="index-getqflist_0028_0029"></a>
</dd>
<dt>getqflist([{what}])</dt>
<dd><p>現在の全 quickfix エラーのリストを返す。リストの各要素は辭書で、以下の要素を持つ:
</p><table>
<tr><td width="20%">bufnr</td><td width="80%">ファイル名を持つバッファの番號。その名前を取得するには bufname() を使ふ。</td></tr>
<tr><td width="20%">module</td><td width="80%">モジュール名</td></tr>
<tr><td width="20%">lnum</td><td width="80%">バッファ中の行番號 (最初の行は 1)</td></tr>
<tr><td width="20%">col</td><td width="80%">桁番號 (最初の桁は 1)</td></tr>
<tr><td width="20%">vcol</td><td width="80%">|<a href="#TRUE">TRUE</a>|: &quot;col&quot; は畫面上の桁 <br> |<a href="#FALSE">FALSE</a>|: &quot;col&quot; はバイトインデックス</td></tr>
<tr><td width="20%">nr</td><td width="80%">エラー番號</td></tr>
<tr><td width="20%">pattern</td><td width="80%">エラーの位置を特定するために使ふ檢索パターン</td></tr>
<tr><td width="20%">text</td><td width="80%">エラーの說明</td></tr>
<tr><td width="20%">type</td><td width="80%">エラーメッセージの種類。&rsquo;E&rsquo;, &rsquo;1&rsquo; など。</td></tr>
<tr><td width="20%">valid</td><td width="80%">|<a href="#TRUE">TRUE</a>|: エラーメッセージが認識されてゐる</td></tr>
</table>

<p>エラーリストがまつたくないか、空であるときは空リストを返す。存在しないバッファ番號を持つ quickfix リストの項目は &quot;bufnr&quot; を 0 にして返される。
</p>
<p>役に立つ應用例: 複數のファイルから正規表現檢索を行ひ、見つかつたものに對してなんらかの操作をする:
</p><div class="example">
<pre class="example">:vimgrep /theword/jg *.c
:for d in getqflist()
:   echo bufname(d.bufnr) ':' d.lnum '=' d.text
:endfor
</pre></div>
<p>オプションの {what} 辭書引數が指定されてゐる場合は、{what} にリストされてゐる項目のみを辭書として返す。{what} では、以下の文字列項目がサポートされてゐる:
</p><table>
<tr><td width="20%">changedtick</td><td width="80%">リストに行はれた變更の總數を取得 |<a href="quickfix_002etxt.html#quickfix_002dchangedtick">quickfix-changedtick</a>|</td></tr>
<tr><td width="20%">context</td><td width="80%">|<a href="quickfix_002etxt.html#quickfix_002dcontext">quickfix-context</a>| を取得</td></tr>
<tr><td width="20%">efm</td><td width="80%">&quot;lines&quot; をパースするときに使はれるエラーフォーマット。存在しない場合はオプション &rsquo;<samp>errorformat</samp>&rsquo; の値が使用される。</td></tr>
<tr><td width="20%">id</td><td width="80%">|<a href="quickfix_002etxt.html#quickfix_002dID">quickfix-ID</a>| に對應する quickfix リストの情報を取得。0 は現在のリストもしくは &quot;nr&quot; で指定されたリストの id を意味する</td></tr>
<tr><td width="20%">idx</td><td width="80%">&rsquo;<samp>id</samp>&rsquo; または &rsquo;<samp>nr</samp>&rsquo; で指定された quickfix リスト內の現在のエントリのインデックス。|<a href="quickfix_002etxt.html#quickfix_002dindex">quickfix-index</a>| を參照</td></tr>
<tr><td width="20%">items</td><td width="80%">quickfix リストのエントリ</td></tr>
<tr><td width="20%">lines</td><td width="80%">&rsquo;<samp>efm</samp>&rsquo; を使用して行のリストをパースし、結果のエントリを返す。|<a href="#List">List</a>| 型のみを受け付ける。現在の quickfix リストは變更を受けない。|<a href="quickfix_002etxt.html#quickfix_002dparse">quickfix-parse</a>| を參照。</td></tr>
<tr><td width="20%">nr</td><td width="80%">この quickfix リストの情報を取得。0 は現在の quickfix リストを意味し、&quot;$&quot; は 最後の quickfix リストを意味する</td></tr>
<tr><td width="20%">qfbufnr</td><td width="80%">quickfix ウィンドウに表示されてゐるバッファの番號。quickfix バッファが存在しないなら 0 が返る。|<a href="quickfix_002etxt.html#quickfix_002dbuffer">quickfix-buffer</a>| を參照。</td></tr>
<tr><td width="20%">size</td><td width="80%">quickfix リスト內のエントリの數</td></tr>
<tr><td width="20%">title</td><td width="80%">|<a href="quickfix_002etxt.html#quickfix_002dtitle">quickfix-title</a>| のリストタイトルを取得</td></tr>
<tr><td width="20%">winid</td><td width="80%">quickfix の |<a href="windows_002etxt.html#window_002dID">window-ID</a>| を取得</td></tr>
<tr><td width="20%">all</td><td width="80%">上記の quickfix のすべてのプロパティ</td></tr>
</table>
<p>{what} の文字列以外の項目は無視される。特別の項目の値を取得するには 0 を設定する。
</p>
<p>&quot;nr&quot; が存在しない場合、現在の quickfix リストが使用される。
</p>
<p>&quot;nr&quot; と 0 でない &quot;id&quot; が兩方とも指定されてゐた場合、&quot;id&quot; で指定されたリストが使用される。
</p>
<p>quickfix スタック內のリストの數を取得するには、{what} 內で &quot;nr&quot; に &quot;$&quot; を設定する。返される辭書內の &quot;nr&quot; の値が quickfix スタックのサイズである。
</p>
<p>&quot;lines&quot; が指定された場合、&quot;efm&quot; を除くその他すべての項目は無視される。返される辭書は、エントリのリストからなるエントリ &quot;items&quot; を含む。
</p>
<p>返される辭書には、次のエントリが含まれる:
</p><table>
<tr><td width="20%">changedtick</td><td width="80%">リストに行はれた變更の總數。|<a href="quickfix_002etxt.html#quickfix_002dchangedtick">quickfix-changedtick</a>| を參照。</td></tr>
<tr><td width="20%">context</td><td width="80%">quickfix リストコンテキスト。|<a href="quickfix_002etxt.html#quickfix_002dcontext">quickfix-context</a>| を參照。存在しない場合、&quot;&quot; に設定される。</td></tr>
<tr><td width="20%">id</td><td width="80%">quickfix リスト ID |<a href="quickfix_002etxt.html#quickfix_002dID">quickfix-ID</a>|。存在しない場合、0 に設定される。</td></tr>
<tr><td width="20%">idx</td><td width="80%">リスト內の現在のエントリのインデックス。存在しない場合、0 に設定される。</td></tr>
<tr><td width="20%">items</td><td width="80%">quickfix リストのエントリ。存在しない場合、空リストに設定される。</td></tr>
<tr><td width="20%">nr</td><td width="80%">quickfix リスト番號。存在しない場合、0 に設定される。</td></tr>
<tr><td width="20%">qfbufnr</td><td width="80%">quickfix ウィンドウに表示されてゐるバッファの番號。存在しない場合、0 に設定される。</td></tr>
<tr><td width="20%">size</td><td width="80%">quickfix リスト內のエントリの數。存在しない場合、0 に設定される。</td></tr>
<tr><td width="20%">title</td><td width="80%">quickfix リストのタイトルテキスト。存在しない場合、&quot;&quot; に設定される。</td></tr>
<tr><td width="20%">winid</td><td width="80%">quickfix の |<a href="windows_002etxt.html#window_002dID">window-ID</a>|。存在しない場合、0 に設定される。</td></tr>
</table>

<p>例 (|<a href="quickfix_002etxt.html#getqflist_002dexamples">getqflist-examples</a>| も參照):
</p><div class="example">
<pre class="example">:echo getqflist({'all': 1})
:echo getqflist({'nr': 2, 'title': 1})
:echo getqflist({'lines' : [&quot;F1:10:L10&quot;]})
</pre></div>

<a name="getreg_0028_0029"></a><a name="index-getreg_0028_0029"></a>
</dd>
<dt>getreg([{regname} [, 1 [, {list}]]])</dt>
<dd><p>レジスタ {regname} の中身を文字列にして返す。例:
</p><div class="example">
<pre class="example">:let cliptext = getreg('*')
</pre></div>
<p>{regname} がセットされてゐないときは、結果は空文字列となる。
</p>
<p>getreg(&rsquo;=&rsquo;) は最後に評價した式レジスタの値を返す。(マップの中で使用する)。
</p>
<p>getreg(&rsquo;=&rsquo;, 1) はその式そのものを返す。これを使つて |<a href="#setreg_0028_0029">setreg()</a>| で復元することができる。他のレジスタの場合は、この引數は無視されるので、常に指定してゐても害はない。
</p>
<p>{list} が指定され、その値が |<a href="#TRUE">TRUE</a>| のときは、戾り値はリスト (|<a href="#List">List</a>|) になる。リストの各要素はテキスト 1 行である。これはレジスタの中に値ゼロのバイトが含まれる場合に使用する。{list} を指定しなかつた場合は NL 文字と値ゼロのバイトは兩方とも NL 文字として扱はれる (|<a href="pattern_002etxt.html#NL_002dused_002dfor_002dNul">NL-used-for-Nul</a>| 參照)。
</p>
<p>指定したレジスタがセットされてゐないときは、空のリストが返される。
</p>
<p>{regname} を指定しないときは |<a href="#v_003aregister">v:register</a>| が使はれる。
</p>

<a name="getregtype_0028_0029"></a><a name="index-getregtype_0028_0029"></a>
</dd>
<dt>getregtype([{regname}])</dt>
<dd><p>レジスタ {regname} の種類を表す文字列を返す。戾り値は次のいづれかとなる:
</p><table>
<tr><td width="40%">&quot;v&quot;</td><td width="60%">文字單位 |<a href="motion_002etxt.html#characterwise">characterwise</a>| の場合</td></tr>
<tr><td width="40%">&quot;V&quot;</td><td width="60%">行單位 |<a href="motion_002etxt.html#linewise">linewise</a>| の場合</td></tr>
<tr><td width="40%">&quot;&lt;CTRL-V&gt;{width}&quot;</td><td width="60%">矩形 |<a href="visual_002etxt.html#blockwise_002dvisual">blockwise-visual</a>| の場合</td></tr>
<tr><td width="40%">&quot;&quot;</td><td width="60%">空、または未知のレジスタの場合</td></tr>
</table>
<p><kbd>&lt;CTRL-V&gt;</kbd> は値 0x16 の 1 文字である。
</p>
<p>{regname} を指定しないときは |<a href="#v_003aregister">v:register</a>| が使はれる。
</p>
<a name="gettabinfo_0028_0029"></a><a name="index-gettabinfo_0028_0029"></a>
</dd>
<dt>gettabinfo([{arg}])</dt>
<dd><p>{arg} を指定しないと、すべてのタブページに關する情報がリストとして返される。各リスト項目は辭書である。それ以外の場合、{arg} はタブページ番號を指定し、それに關する情報が返される。タブページが存在しない場合、空のリストが返される。
</p>
<p>各リストアイテムは、次のエントリを持つ辭書である:
</p><table>
<tr><td width="20%">tabnr</td><td width="80%">タブページ番號。</td></tr>
<tr><td width="20%">variables</td><td width="80%">タブページローカル變數の辭書への參照。</td></tr>
<tr><td width="20%">windows</td><td width="80%">タブページの |<a href="windows_002etxt.html#window_002dID">window-ID</a>| のリスト。</td></tr>
</table>

<a name="gettabvar_0028_0029"></a><a name="index-gettabvar_0028_0029"></a>
</dd>
<dt>gettabvar({tabnr}, {varname} [, {def}])</dt>
<dd><p>タブページ {tabnr} のタブローカル變數 {varname} を取得する。|<a href="#t_003avar">t:var</a>|
</p>
<p>タブの番號は 1 から始まる。
</p>
<p>{varname} が空のときは全タブローカル變數からなる辭書を返す。
</p><blockquote>
<p><strong>Note:</strong> <br>
指定する變數名は &quot;t:&quot; を除いた名前。タブや變數が存在しないときは {def} または空文字列を返し、エラーメッセージは表示されない。
</p></blockquote>

<a name="gettabwinvar_0028_0029"></a><a name="index-gettabwinvar_0028_0029"></a>
</dd>
<dt>gettabwinvar({tabnr}, {winnr}, {varname} [, {def}])</dt>
<dd><p>タブページ {tabnr} 內のウィンドウ {winnr} のウィンドウローカル變數 {varname} の値を取得する。
</p>
<p>{varname} が空のときは全ウィンドウローカル變數からなる辭書を返す。
{varname} が &quot;&amp;&quot; と等しい場合はすべてのウィンドウローカルオプションの値を辭書に入れて返す。
</p>
<p>{varname} が文字 &quot;&amp;&quot; で始まるときはウィンドウローカルオプションの値を取得する。
</p><blockquote>
<p><strong>Note:</strong> <br>
{varname} は &quot;w:&quot; をつけずに指定しなければならない。タブページ番號は 1 から始まる。カレントタブページを指定するには |<a href="#getwinvar_0028_0029">getwinvar()</a>| を指定する。
</p></blockquote>
<p>{winnr} にはウィンドウ番號または |<a href="windows_002etxt.html#window_002dID">window-ID</a>| が使へる。
</p>
<p>{winnr} が 0 のときはカレントウィンドウとなる。
</p>
<p>グローバルオプション、バッファローカルオプション、ウィンドウローカルオプションに對しても動作するが、グローバル變數やバッファローカル變數に對しては動作しない。
ウィンドウやタブや變數が存在しないときは {def} または空文字列を返し、エラーメッセージは表示されない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let list_is_on = gettabwinvar(1, 2, '&amp;list')
:echo &quot;myvar = &quot; . gettabwinvar(3, 1, 'myvar')
</pre></div>
<p>すべてのウィンドウローカル變數を取得するには:
</p><div class="example">
<pre class="example">gettabwinvar({tabnr}, {winnr}, '&amp;')
</pre></div>

<a name="gettagstack_0028_0029"></a><a name="index-gettagstack_0028_0029"></a>
</dd>
<dt>gettagstack([{nr}])</dt>
<dd><p>結果は辭書で、ウィンドウ {nr} のタグスタック。{nr} はウィンドウ番號か |<a href="windows_002etxt.html#window_002dID">window-ID</a>| が可能。{nr} が指定されてゐない場合は現在のウィンドウが使はれる。ウィンドウ {nr} が存在しない場合は空の辭書が返される。
</p>
<p>返される辭書には次の內容が含まれてゐる:
</p><table>
<tr><td width="30%">curidx</td><td width="70%">スタック中の現在のインデックス。スタックの一番上にある場合、(length + 1) を設定するスタックの一番下のインデックスは 1。</td></tr>
<tr><td width="30%">items</td><td width="70%">スタック中の項目リスト。それぞれの項目は下記に說明するエントリを含む辭書。</td></tr>
<tr><td width="30%">length</td><td width="70%">スタック中のエントリの番號。</td></tr>
</table>

<p>スタック中のそれぞれの項目は次のやうな內容を持つ辭書になつてゐる:
</p><table>
<tr><td width="30%">bufnr</td><td width="70%">現在のジャンプのバッファ番號</td></tr>
<tr><td width="30%">from</td><td width="70%">タグジャンプ前のカーソル位置。返されたリストのフォーマットについては |<a href="#getpos_0028_0029">getpos()</a>| を參照。</td></tr>
<tr><td width="30%">matchnr</td><td width="70%">現在マッチしてゐるタグ番號。タグのマッチが複數ある場合は、名前が使はれる。</td></tr>
<tr><td width="30%">tagname</td><td width="70%">タグの名前</td></tr>
</table>

<p>タグスタックについての詳細は |<a href="tagsrch_002etxt.html#tagstack">tagstack</a>| を參照。
</p>
<a name="getwininfo_0028_0029"></a><a name="index-getwininfo_0028_0029"></a>
</dd>
<dt>getwininfo([{winid}])</dt>
<dd><p>ウィンドウに關する情報を、辭書のリストとして返す。
</p>
<p>{winid} が與へられた場合、その ID を持つウィンドウに關する情報が返される。ウィンドウが存在しない場合、結果は空のリストになる。
</p>
<p>{winid} がなければすべてのタブページのすべてのウィンドウに關する情報が返される。
</p>
<p>各 List アイテムは次のエントリを持つ辭書である:
</p><table>
<tr><td width="20%">botline</td><td width="80%">最後に表示されたバッファ行</td></tr>
<tr><td width="20%">bufnr</td><td width="80%">ウィンドウ內のバッファ數</td></tr>
<tr><td width="20%">height</td><td width="80%">ウィンドウの高さ (winbar を除く)</td></tr>
<tr><td width="20%">loclist</td><td width="80%">ロケーションリストを表示してる場合は 1

<p>{Vim が |<a href="various_002etxt.html#g_t_002bquickfix">+quickfix</a>| 機能付きでコンパイルされたときのみ有效}
</p></td></tr>
<tr><td width="20%">quickfix</td><td width="80%">quickfix またはロケーションリストウィンドウの場合は 1

<p>{Vim が |<a href="various_002etxt.html#g_t_002bquickfix">+quickfix</a>| 機能付きでコンパイルされたときのみ有效}
</p></td></tr>
<tr><td width="20%">terminal</td><td width="80%">端末ウィンドウの場合は 1

<p>{Vim が |<a href="various_002etxt.html#g_t_002bterminal">+terminal</a>| 機能付きでコンパイルされたときのみ有效}
</p></td></tr>
<tr><td width="20%">tabnr</td><td width="80%">タブページ番號</td></tr>
<tr><td width="20%">topline</td><td width="80%">最初に表示されたバッファ行</td></tr>
<tr><td width="20%">variables</td><td width="80%">ウィンドウローカル變數の辭書への參照</td></tr>
<tr><td width="20%">width</td><td width="80%">ウィンドウ幅</td></tr>
<tr><td width="20%">winbar</td><td width="80%">ウィンドウがツールバーを持つてゐれば 1、さうでなければ 0</td></tr>
<tr><td width="20%">wincol</td><td width="80%">ウィンドウの最も左のスクリーン列、|<a href="#win_005fscreenpos_0028_0029">win_screenpos()</a>| の列</td></tr>
<tr><td width="20%">winid</td><td width="80%">|<a href="windows_002etxt.html#window_002dID">window-ID</a>|</td></tr>
<tr><td width="20%">winnr</td><td width="80%">ウィンドウ番號</td></tr>
<tr><td width="20%">winrow</td><td width="80%">ウィンドウの最も上のスクリーン行、|<a href="#win_005fscreenpos_0028_0029">win_screenpos()</a>| の行</td></tr>
</table>

<a name="getwinpos_0028_0029"></a><a name="index-getwinpos_0028_0029"></a>
</dd>
<dt>getwinpos([{timeout}])</dt>
<dd><p>結果は、getwinposx() と getwinposy() の結果が組み合はされた 2 つの數字のリスト:
</p><div class="example">
<pre class="example">[x-pos, y-pos]
</pre></div>
<p>{timeout} は端末からの應答をどれくらゐ待つかを、ミリ秒單位で指定するのに使はれる。省略された場合は 100 ミリ秒が使用される。
</p>
<p>リモート端末にはより長い時閒を指定すること。
</p>
<p>10 より小さい値が使用され、かつその時閒內に應答を受け取らなかつた場合、利用可能であれば前に報告された位置が返される。これは位置をポーリングし、同時に何かを行ふ場合に使用することができる:
</p><pre class="verbatim">while 1
  let res = getwinpos(1)
  if res[0] &gt;= 0
    break
  endif
  &quot; Do some work here
endwhile
</pre><a name="getwinposx_0028_0029"></a><a name="index-getwinposx_0028_0029"></a>
</dd>
<dt>getwinposx()</dt>
<dd><p>結果は GUI の Vim ウィンドウの左端の、デスクトップ上での X 座標値 (數値)。xterm でも動作する (タイムアウトは 100 ミリ秒が使はれる)。情報が存在しない (コンソールの) 場合は -1 となる。&lsquo;:winpos&lsquo; の値が使へる。
</p>
<a name="getwinposy_0028_0029"></a><a name="index-getwinposy_0028_0029"></a>
</dd>
<dt>getwinposy()</dt>
<dd><p>結果は GUI の Vim ウィンドウの上端の、デスクトップ上での Y 座標値 (數値)。xterm でも動作する (タイムアウトは 100 ミリ秒が使はれる)。情報が存在しない (コンソールの) 場合は -1 となる。&lsquo;:winpos&lsquo; の値が使へる。
</p>
<a name="getwinvar_0028_0029"></a><a name="index-getwinvar_0028_0029"></a>
</dd>
<dt>getwinvar({winnr}, {varname} [, {def}])</dt>
<dd><p>カレントタブページに對する |<a href="#gettabwinvar_0028_0029">gettabwinvar()</a>| と同樣。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let list_is_on = getwinvar(2, '&amp;list')
:echo &quot;myvar = &quot; . getwinvar(1, 'myvar')
</pre></div>
<a name="glob_0028_0029"></a><a name="index-glob_0028_0029"></a>
</dd>
<dt>glob({expr} [, {nosuf} [, {list} [, {alllinks}]]])</dt>
<dd><p>{expr} 內のファイル名のワイルドカードを展開する。特殊文字については |<a href="editing_002etxt.html#wildcards">wildcards</a>| を參照。
</p>
<p>{nosuf} に |<a href="#TRUE">TRUE</a>| を指定しない限り、&rsquo;<samp>suffixes</samp>&rsquo; と &rsquo;<samp>wildignore</samp>&rsquo; が適用される。つまり &rsquo;<samp>wildignore</samp>&rsquo; のパターンにマッチする名前はスキップされ、&rsquo;<samp>suffixes</samp>&rsquo; がマッチの順番に影響を與へる。&rsquo;<samp>wildignorecase</samp>&rsquo; は常に適用される。
</p>
<p>{list} が指定されその値が |<a href="#TRUE">TRUE</a>| なら、マッチしたすべてのファイルがリストとして返される。リストを使ふことで、改行を含むファイル名があつても結果を正しく受け取ることができる。
</p>
<p>さうでない場合は結果は文字列で返される。その場合、複數のマッチがあるときはそれらは文字 &lt;NL&gt; で區切られる。
</p>
<p>展開が失敗した場合、空の文字列またはリストが返される。
</p>
<p>マッチの數を制限するなど、複雜なことをする必要がある場合にも |<a href="#readdir_0028_0029">readdir()</a>| を使用することができる。
</p>
<p>存在しないファイル名は結果に含まれない。シンボリックリンクは、それが存在するファイルを指す場合のみ含まれる。ただし、{alllinks} 引數が存在し、それが |<a href="#TRUE">TRUE</a>| である場合はすべてのシンボリックリンクが含まれる。
</p>
<p>多くのシステムではバッククォート (「&lsquo;」といふ文字のこと) を、外部コマンドの實行結果からファイル名を取得するために使用できる。例:
</p><div class="example">
<pre class="example">:let tagfiles = glob(&quot;`find . -name tags -print`&quot;)
:let &amp;tags = substitute(tagfiles, &quot;\n&quot;, &quot;,&quot;, &quot;g&quot;)
</pre></div>
<p>バッククォート內のプログラムの實行結果は、一行に 1 つずつの項目が含まれてなければならない。項目內のスペースは許容される。
</p>
<p>特殊な Vim の變數を展開するためには |<a href="#expand_0028_0029">expand()</a>| を參照。外部コマンドの生の出力を得るためには |<a href="#system_0028_0029">system()</a>| を參照。
</p>
<a name="glob2regpat_0028_0029"></a><a name="index-glob2regpat_0028_0029"></a>
</dd>
<dt>glob2regpat({expr})</dt>
<dd><p>glob() に使はれるファイルパターンを檢索パターンに變換する。結果はファイル名の文字列とのマッチに使用できる。例へば、
</p><div class="example">
<pre class="example">if filename =~ glob2regpat('Make*.mak')
</pre></div>
<p>上記は次と同じである:
</p><div class="example">
<pre class="example">if filename =~ '^Make.*\.mak$'
</pre></div>
<p>{expr} が空文字列の場合、結果は &quot;^$&quot; で、空文字列にマッチする。
</p><blockquote>
<p><strong>Note:</strong> <br>
結果はシステムによつて異なることに注意すること。MS-Windows では、バックスラッシュは通常、パス區切りを意味する。
</p></blockquote>

<a name="globpath_0028_0029"></a><a name="index-globpath_0028_0029"></a>
</dd>
<dt>globpath({path}, {expr} [, {nosuf} [, {list} [, {alllinks}]]])</dt>
<dd><p>{path} の中の全ディレクトリに對して |<a href="#glob_0028_0029">glob()</a>| を實行し、結果を連結する。例:
</p><div class="example">
<pre class="example">:echo globpath(&amp;rtp, &quot;syntax/c.vim&quot;)
</pre></div>
<p>{path} はコンマ區切りのディレクトリのリスト。各ディレクトリを {expr} の前に付加し、|<a href="#glob_0028_0029">glob()</a>| と同樣にそれを展開する。必要に應じてパスの區切り文字が插入される。
</p>
<p>ディレクトリ名の中にコンマを含めるには、バックスラッシュでエスケープすること。
</p><blockquote>
<p><strong>Note:</strong> <br>
MS-Windows ではディレクトリ名の末尾にバックスラッシュがつくことがある。その後に區切りのコンマを書くとエスケープと見なされてしまふので、バックスラッシュは削除すること。どれかのディレクトリに對して展開が失敗してもエラーメッセージは表示されない。
</p></blockquote>

<p>{nosuf} に |<a href="#TRUE">TRUE</a>| が指定されない限り、オプション &rsquo;<samp>wildignore</samp>&rsquo; が適用される。つまり、&rsquo;<samp>wildignore</samp>&rsquo; のパターンにマッチする名前はスキップされる。
</p>
<p>{list} が指定され、その値が |<a href="#TRUE">TRUE</a>| なら、マッチしたすべてのファイルがリストとして返る。リストとして受け取る利點は、改行文字を含んだファイル名も正しく扱へることである。{list} を指定しなかつた場合は、戾り値は文字列であり、マッチした複數のファイル名は &lt;NL&gt; 文字で連結されてしまふ。例:
</p><div class="example">
<pre class="example">:echo globpath(&amp;rtp, &quot;syntax/c.vim&quot;, 0, 1)
</pre></div>
<p>{alllinks} は |<a href="#glob_0028_0029">glob()</a>| の場合と同樣に扱はれる。
</p>
<p>&quot;**&quot; を使つてディレクトリツリーを再歸的に檢索することができる。例へば、&rsquo;<samp>runtimepath</samp>&rsquo; とそれ以下のディレクトリから全ての &quot;README.txt&quot; を探すには次のやうにする:
</p><div class="example">
<pre class="example">:echo globpath(&amp;rtp, &quot;**/README.txt&quot;)
</pre></div>
<p>上向き檢索と、&quot;**&quot; の深さの限界はサポートされてゐない。よつてオプション &rsquo;<samp>path</samp>&rsquo; の値をそのまま使ふとうまく動かないことがある。
</p>
<a name="has_0028_0029"></a><a name="index-has_0028_0029"></a>
</dd>
<dt>has({feature})</dt>
<dd><p>結果は機能 {feature} がサポートされる場合 1、されない場合 0 となる。引數 {feature} は文字列。下記の |<a href="#feature_002dlist">feature-list</a>| を參照。|<a href="#exists_0028_0029">exists()</a>| も參照。
</p>

<a name="has_005fkey_0028_0029"></a><a name="index-has_005fkey_0028_0029"></a>
</dd>
<dt>has_key({dict}, {key})</dt>
<dd><p>結果は數値で、辭書 |<a href="#Dictionary">Dictionary</a>| {dict} がキー {key} の要素を持つなら 1、持たないなら 0 となる。
</p>
<a name="haslocaldir_0028_0029"></a><a name="index-haslocaldir_0028_0029"></a>
</dd>
<dt>haslocaldir([{winnr} [, {tabnr}]])</dt>
<dd><p>結果は數値である:
</p><table>
<tr><td width="10%">1</td><td width="90%">ウィンドウが |<a href="editing_002etxt.html#g_t_003alcd">:lcd</a>| によつてローカルディレクトリを設定してゐる時</td></tr>
<tr><td width="10%">2</td><td width="90%">タブページが |<a href="editing_002etxt.html#g_t_003atcd">:tcd</a>| によつてローカルディレクトリを設定してゐる時</td></tr>
<tr><td width="10%">0</td><td width="90%">その他</td></tr>
</table>

<p>引數が指定されない場合、現在のウィンドウを對象とする。
</p>
<p>{winnr} が指定された場合、現在のタブページ內の {winnr} のウィンドウを對象とする。
{winnr} と {tabnr} が指定された場合、{tabnr} のタブページ內の {winnr} のウィンドウを對象とする。
</p>
<p>{winnr} にはウィンドウ番號または |<a href="windows_002etxt.html#window_002dID">window-ID</a>| が使へる。
</p>
<p>{winnr} が -1 の場合は無視され、タブページのみが使用される。
</p>
<p>もし引數が不正の場合、0  を返す。
例:
</p><pre class="verbatim">if haslocaldir() == 1
  &quot; window local directory case
elseif haslocaldir() == 2
  &quot; tab-local directory case
else
  &quot; global directory case
endif

&quot; current window
:echo haslocaldir()
:echo haslocaldir(0)
:echo haslocaldir(0, 0)
&quot; window n in current tab page
:echo haslocaldir(n)
:echo haslocaldir(n, 0)
&quot; window n in tab page m
:echo haslocaldir(n, m)
&quot; tab page m
:echo haslocaldir(-1, m)
</pre><a name="hasmapto_0028_0029"></a><a name="index-hasmapto_0028_0029"></a>
</dd>
<dt>hasmapto({what} [, {mode} [, {abbr}]])</dt>
<dd><p>結果は數値。右邊側 (マップした先) の一部分に {what} を含むマッピングが存在し、それが {mode} で指定されたモードのいづれかで定義されてゐるなら 1 を返す。
{abbr} が指定されてゐて |<a href="#TRUE">TRUE</a>| のときはマッピングでなく短縮入力の存在を判定する。插入モードまたはコマンドモードを指定することを忘れないやうに。
</p>
<p>グローバルマップとバッファローカルマップの兩方をチェックする。
</p>
<p>マッピングが 1 個も見つからなかつたときは 0 を返す。
{mode} に對しては以下の文字が利用できる:
</p><table>
<tr><td width="10%">n</td><td width="90%">ノーマルモード</td></tr>
<tr><td width="10%">v</td><td width="90%">ビジュアルモード</td></tr>
<tr><td width="10%">o</td><td width="90%">オペレータ待機モード (Operator-pending)</td></tr>
<tr><td width="10%">i</td><td width="90%">插入モード</td></tr>
<tr><td width="10%">l</td><td width="90%">Language-Argument モード (&quot;r&quot;, &quot;f&quot;, &quot;t&quot; など)</td></tr>
<tr><td width="10%">c</td><td width="90%">コマンドラインモード</td></tr>
</table>
<p>{mode} が省略されたときは &quot;nvo&quot; となる。
</p>
<p>この函數は Vim script の中で、ある函數へのマッピングが既に存在するか判定するために有用である。例:
</p><div class="example">
<pre class="example">:if !hasmapto('\ABCdoit')
:   map &lt;Leader&gt;d \ABCdoit
:endif
</pre></div>
<p>この例は、&quot;\ABCdoit&quot; へのマッピングが存在しないときだけ &quot;\ABCdoit&quot; へのマッピングを作成する。
</p>
<a name="histadd_0028_0029"></a><a name="index-histadd_0028_0029"></a>
</dd>
<dt>histadd({history}, {item})</dt>
<dd><p>文字列 {item} を履歷 {history} に追加する。履歷 {history} は以下のうちどれか 1 つから選擇:
<a name="hist_002dnames"></a><a name="index-hist_002dnames"></a>
</p><table>
<tr><td width="10%">&quot;cmd&quot; or &quot;:&quot;</td><td width="90%">コマンドライン履歷</td></tr>
<tr><td width="10%">&quot;search&quot; or &quot;/&quot;</td><td width="90%">檢索パターン履歷</td></tr>
<tr><td width="10%">&quot;expr&quot; or &quot;=&quot;</td><td width="90%">タイプされた式の履歷</td></tr>
<tr><td width="10%">&quot;input&quot; or &quot;@&quot;</td><td width="90%">input() の履歷</td></tr>
<tr><td width="10%">&quot;debug&quot; or &quot;&gt;&quot;</td><td width="90%">デバッグコマンドの履歷</td></tr>
<tr><td width="10%">empty</td><td width="90%">最新もしくは最後に使はれた履歷</td></tr>
</table>
<p>{history} 文字列はフルネームで指定する必要はありません。頭文字だけでも構ひません。
</p>
<p>{item} が履歷內に既に存在する場合、それが最新の項目の位置へシフトされる。
</p>
<p>結果は數値: 操作が成功した場合 1、さうでなければ 0
</p>
<p>例:
</p><div class="example">
<pre class="example">:call histadd(&quot;input&quot;, strftime(&quot;%Y %b %d&quot;))
:let date=input(&quot;Enter date: &quot;)
</pre></div>
<p>サンドボックス |<a href="#sandbox">sandbox</a>| の中では利用できない。
</p>
<a name="histdel_0028_0029"></a><a name="index-histdel_0028_0029"></a>
</dd>
<dt>histdel({history} [, {item}])</dt>
<dd><p>{history} の內容を削除する。例へば全てのエントリを消すこともできる。{history} の部分に可能な値は |<a href="#hist_002dnames">hist-names</a>| を參照。
</p>
<p>パラメーター {item} が文字列に評價される場合、これは正規表現として扱はれる。その表現にマッチする全てのエントリが history から削除される (複數あつても)。
</p>
<p>&quot;\c&quot; をつけない場合、大文字・小文字が一致しなければならない。|<a href="pattern_002etxt.html#g_t_002f_005cc">/\c</a>|。
</p>
<p>{item} が數値に評價される場合、インデックスとして解釋される。インデックスについては |<a href="cmdline_002etxt.html#g_t_003ahistory_002dindexing">:history-indexing</a>| を參照。
</p>
<p>關聯するエントリ {譯注: The respective entry} も 、存在すれば削除される。
</p>
<p>結果は數値: 削除に成功すれば 1 を、さうでなければ 0 が返る。
</p>
<p>例:
</p>
<p>式レジスタの履歷を削除する:
</p><div class="example">
<pre class="example">:call histdel(&quot;expr&quot;)
</pre></div>
<p>檢索履歷から、&quot;*&quot; で始まるエントリを全て削除する:
</p><div class="example">
<pre class="example">:call histdel(&quot;/&quot;, '^\*')
</pre></div>
<p>次の 3 つは等價である:
</p><div class="example">
<pre class="example">:call histdel(&quot;search&quot;, histnr(&quot;search&quot;))
:call histdel(&quot;search&quot;, -1)
:call histdel(&quot;search&quot;, '^'.histget(&quot;search&quot;, -1).'$')
</pre></div>
<p>最後の檢索パターンを削除し、1 つ前のパターンを &quot;n&quot; コマンド (次のマッチへ移動) と &rsquo;<samp>hlsearch</samp>&rsquo; の爲に設定する:
</p><div class="example">
<pre class="example">:call histdel(&quot;search&quot;, -1)
:let @/ = histget(&quot;search&quot;, -1) 
</pre></div>

<a name="histget_0028_0029"></a><a name="index-histget_0028_0029"></a>
</dd>
<dt>histget({history} [, {index}])</dt>
<dd><p>結果は {history} の第 {index} エントリを表はす文字列。{history} の部分に可能な値は |<a href="#hist_002dnames">hist-names</a>| を、{index} については |<a href="cmdline_002etxt.html#g_t_003ahistory_002dindexing">:history-indexing</a>| を參照。指定されたエントリが存在しない場合は空文字列が返される。{index} が省略された場合には、履歷中の最新のエントリが戾り値として使用される。
</p>
<p>例:
</p>
<p>2 つ前に行はれた檢索をやり直す:
</p><div class="example">
<pre class="example">:execute '/' . histget(&quot;search&quot;, -2)
</pre></div>

<p>|<a href="cmdline_002etxt.html#g_t_003ahistory">:history</a>| によつて出力される {num} 番目のエントリを、再度實行するための &quot;:H {num}&quot; といふコマンドを定義する。
</p><div class="example">
<pre class="example">:command -nargs=1 H execute histget(&quot;cmd&quot;,0+&lt;args&gt;)
</pre></div>
<a name="histnr_0028_0029"></a><a name="index-histnr_0028_0029"></a>
</dd>
<dt>histnr({history})</dt>
<dd><p>結果は數値で {history} の現在のエントリ數。{history} の部分に可能な値は |<a href="#hist_002dnames">hist-names</a>| を參照。エラーが起こつた場合、-1 が返される。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let inp_index = histnr(&quot;expr&quot;)
</pre></div>
<a name="hlexists_0028_0029"></a><a name="index-hlexists_0028_0029"></a>
</dd>
<dt>hlexists({name})</dt>
<dd><p>結果は數値で、{name} といふ名のハイライトグループが存在すれば、非ゼロの値が返される。これはなんらかの方法でそのグループが既に定義されてゐる時にのみ起こる。これの爲に實際に何らかのハイライティングアイテムが設定されてゐる必要はなく、單に構文アイテムとしても使はれるだらう。
<a name="highlight_005fexists_0028_0029"></a><a name="index-highlight_005fexists_0028_0029"></a>
以前の名前: highlight_exists().
</p>
<a name="hlID_0028_0029"></a><a name="index-hlID_0028_0029"></a>
</dd>
<dt>hlID({name})</dt>
<dd><p>結果は數値で、{name} といふ名前のハイライトグループの ID 番號。そのハイライトグループが存在しない場合は 0 が返される。これはハイライトグループについての情報を獲得するために使用される。例へば &quot;Comment&quot; グループの背景色を取得するにはこのやうにする:
</p><div class="example">
<pre class="example">:echo synIDattr(synIDtrans(hlID(&quot;Comment&quot;)), &quot;bg&quot;)
</pre></div>
<a name="highlightID_0028_0029"></a><a name="index-highlightID_0028_0029"></a>
<p>以前の名前: highlightID()
</p>
<a name="hostname_0028_0029"></a><a name="index-hostname_0028_0029"></a>
</dd>
<dt>hostname()</dt>
<dd><p>結果は文字列で、現在 Vim が實行されてゐるマシンの名前。名前が 256 文字を超える場合、超えた部分は切り捨てられる。
</p>
<a name="iconv_0028_0029"></a><a name="index-iconv_0028_0029"></a>
</dd>
<dt>iconv({expr}, {from}, {to})</dt>
<dd><p>文字列 {expr} をエンコーディング {from} からエンコーディング {to} に變換した文字列を返す。
</p>
<p>變換が完全に失敗したときは空文字列を返す。一部の文字が變換できなかつた場合、その文字は &quot;?&quot; に置き換はる。
</p>
<p>エンコーディング名はライブラリ函數 iconv() が受け付けるものならなんでもよい。&quot;:!man 3 iconv&quot; を參照。
</p>
<p>ほとんどの變換は、Vim が |<a href="various_002etxt.html#g_t_002biconv">+iconv</a>| 機能つきでコンパイルされてゐるときのみ利用可能。|<a href="various_002etxt.html#g_t_002biconv">+iconv</a>| つきでないときも UTF-8 から latin1 への變換とその逆は行へる。
</p>
<p>オプション &rsquo;<samp>encoding</samp>&rsquo; の値に關係なく、特殊な文字を含むメッセージを表示するために使へる。UTF-8 でエンコードされたメッセージを表示するには次のやうにする:
</p><div class="example">
<pre class="example">echo iconv(utf8_str, &quot;utf-8&quot;, &amp;enc)
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
Vim は全ての Unicode エンコーディングに對して UTF-8 を使ふ。UCS-2 との變換を行はうとしても、自動的に UTF-8 との變換に變更される。いづれにせよ、UCS-2 は NUL バイトを含むため、文字列に UCS-2 を使ふことはできない。
</p></blockquote>

<a name="indent_0028_0029"></a><a name="index-indent_0028_0029"></a>
</dd>
<dt>indent({lnum})</dt>
<dd><p>カレントバッファの {lnum} 行目のインデント量を數値で返す。このインデント量はスペース單位で數へられ、&rsquo;<samp>tabstop</samp>&rsquo; の値が關係する。{lnum} は |<a href="#getline_0028_0029">getline()</a>| の場合と同樣に扱はれる。
</p>
<p>{lnum} が無效なときは -1 を返す。
</p>

<a name="index_0028_0029"></a><a name="index-index_0028_0029"></a>
</dd>
<dt>index({list}, {expr} [, {start} [, {ic}]])</dt>
<dd><p>{object} が |<a href="#List">List</a>| の場合は、{expr} に等しい要素の最小のインデックスを返す。自動的な變換は行はれないので、文字列の &quot;4&quot; は數値の 4 とは異なると判定される。そして數値の 4 は浮動小數點數の 4.0 とも異なる。&rsquo;<samp>ignorecase</samp>&rsquo; はここでは適用されず、常に大文字・小文字は區別される。
</p>
<p>{object} が |<a href="#Blob">Blob</a>| の場合は、{expr} に等しいバイト値の最小のインデックスを返す。
</p>
<p>{start} が指定された場合はインデックス {start} から要素の檢索を始める (負數を指定すると末尾からの相對位置となる)。
{ic} に |<a href="#TRUE">TRUE</a>| が指定された場合、大文字・小文字は區別されない。さうでない場合は區別される。
</p>
<p>{object} の中に {expr} が見つからない場合は -1 を返す。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let idx = index(words, &quot;the&quot;)
:if index(numbers, 123) &gt;= 0
</pre></div>


</dd>
<dt>input({prompt} [, {text} [, {completion}]])</dt>
<dd><a name="input_0028_0029"></a><a name="index-input_0028_0029"></a>
<p>結果は文字列で、ユーザーがコマンドラインに入力したものが返される。引數 {prompt} にはプロンプト文字列か空文字列を指定する。空文字列の場合はプロンプトなしになる。&rsquo;\n&rsquo; を使つてプロンプトに改行を含めることができる。
|<a href="#g_t_003aechohl">:echohl</a>| によるハイライトの設定がプロンプトに適用される。入力はコマンドラインと同樣に行え、同じ編輯コマンドやキーマップが使用できる。input() に入力された文字列には、他の履歷とは獨立した履歷が與へられる。
例:
</p><div class="example">
<pre class="example">:if input(&quot;Coffee or beer? &quot;) == &quot;beer&quot;
:  echo &quot;Cheers!&quot;
:endif
</pre></div>
<p>省略可能な引數 {text} が與へられ、空でないならば、それが入力の初期値として、ユーザーが入力したのと同じ樣に表示される。例:
</p><div class="example">
<pre class="example">:let color = input(&quot;Color? &quot;, &quot;white&quot;)
</pre></div>

<p>省略可能な引數 {completion} はこの入力において利用できる補完の種類を指定する。この引數がないときは補完は行はれない。對應してゐる補完の種類は、ユーザー定義コマンドにおいて引數 &quot;-complete=&quot; で指定するものと同じである。詳しくは |<a href="map_002etxt.html#g_t_003acommand_002dcompletion">:command-completion</a>| を參照。
</p>
<p>例:
</p><div class="example">
<pre class="example">let fname = input(&quot;File: &quot;, &quot;&quot;, &quot;file&quot;)
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
この函數は GUI モードしか持たないバージョン (例、Win32 GUI) の Vim では、スタートアップファイルの中で使用することはできない。
</p></blockquote>
<blockquote>
<p><strong>Note:</strong> <br>
マッピングの中から input() を呼ぶと、そのマッピングの殘りの文字が消費される。マッピングは、その文字が入力されたときと同じやうに處理されるためである。
</p>
<p>これを避けるには、input() の前に |<a href="#inputsave_0028_0029">inputsave()</a>| を呼び、input() の後に |<a href="#inputrestore_0028_0029">inputrestore()</a>| を呼ぶ。もう 1 つの對策は、|<a href="#g_t_003aexecute">:execute</a>| や |<a href="various_002etxt.html#g_t_003anormal">:normal</a>| を使ふなどして、そのマッピングでそれ以上文字を續けないやうにすることである。
</p></blockquote>

<p>マッピングと同時に使ふ例:
</p><pre class="verbatim">:nmap \x :call GetFoo()&lt;CR&gt;:exe &quot;/&quot; . Foo&lt;CR&gt;
:function GetFoo()
:  call inputsave()
:  let g:Foo = input(&quot;enter search pattern: &quot;)
:  call inputrestore()
:endfunction
</pre>
</dd>
<dt>inputdialog({prompt} [, {text} [, {cancelreturn}]])</dt>
<dd><a name="inputdialog_0028_0029"></a><a name="index-inputdialog_0028_0029"></a>
<p>|<a href="#input_0028_0029">input()</a>| と同樣。GUI で動作してゐて、テキストダイアログがサポートされてゐる場合はダイアログを表示してテキストを入力させる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let n = inputdialog(&quot;value for shiftwidth&quot;, shiftwidth())
:if n != &quot;&quot;
:  let &amp;sw = n
:endif
</pre></div>
<p>ダイアログがキャンセルされたときは {cancelreturn} を返す。{cancelreturn} が省略されてゐるときは空文字列を返す。<code class="tt-key">&lt;Enter&gt;</code> を押すと OK ボタンを押すのと同じ動作になる。<code class="tt-key">&lt;Esc&gt;</code> を押すとキャンセルボタンを押すのと同じ動作になる。
</p><blockquote>
<p><strong>Note:</strong> <br>
コマンドライン補完は對應してゐない。
</p></blockquote>

<a name="inputlist_0028_0029"></a><a name="index-inputlist_0028_0029"></a>
</dd>
<dt>inputlist({textlist})</dt>
<dd><p>{textlist} は文字列のリスト |<a href="#List">List</a>| でなければならない。1 行につきリストの要素を 1 個表示し、ユーザーに數字を入力するやう促す。入力された數字を返す。
</p>
<p>ユーザーはマウスで文字列をクリックすることでも選擇できる。最初の文字列を選擇すると 0 が返る。最初の文字列より上をクリックすると負數が返る。プロンプト自身をクリックすると {textlist} の長さ +1 が返る。
</p>
<p>{textlist} の要素數はオプション &rsquo;<samp>lines</samp>&rsquo; の値より少なくなければならない。さうでないと動作しない。最初の要素にメッセージを書き、各文字列の先頭に番號をつけておくとよい。
</p>
<p>例:
</p><div class="example">
<pre class="example">let color = inputlist(['Select color:', '1. red',
        \ '2. green', '3. blue'])
</pre></div>

<a name="inputrestore_0028_0029"></a><a name="index-inputrestore_0028_0029"></a>
</dd>
<dt>inputrestore()</dt>
<dd><p>前囘の |<a href="#inputsave_0028_0029">inputsave()</a>| で保存しておいた先行入力を復元する。inputsave() と同じ回數だけ呼ぶようにしなければならない。しかし多く呼びすぎても害はない。復元するものがなければ 1 を、さうでなければ 0 を返す。
</p>
<a name="inputsave_0028_0029"></a><a name="index-inputsave_0028_0029"></a>
</dd>
<dt>inputsave()</dt>
<dd><p>先行入力 (マッピングにより入力された文字も含む) を保存し、クリアすることにより、これ以降のプロンプトがユーザーからの入力を得るやうにする。プロンプトの後で、對應する inputrestore() を呼び出さねばならない。複數回呼ぶこともできる。ただしその場合は同じ回數だけ inputrestore() を呼ばなくてはならない。メモリ不足のときは 1 を、さうでなければ 0 を返す。
</p>
<a name="inputsecret_0028_0029"></a><a name="index-inputsecret_0028_0029"></a>
</dd>
<dt>inputsecret({prompt} [, {text}])</dt>
<dd><p>|<a href="#input_0028_0029">input()</a>| とほぼ同じだが、以下の 2 點が異なる:
</p><table>
<tr><td width="5%">a)</td><td width="95%">ユーザーの入力をアスタリスク (&quot;*&quot;) の列として表示し、入力內容を讀めないやうにする。</td></tr>
<tr><td width="5%">b)</td><td width="95%">ユーザーの入力が入力履歷 |<a href="cmdline_002etxt.html#history">history</a>| に殘らない。</td></tr>
</table>
<p>ユーザーの入力內容を文字列として返す。
</p><blockquote>
<p><strong>Note:</strong> <br>
コマンドライン補完には對應してゐない。
</p></blockquote>

</dd>
<dt>insert({list}, {item} [, {idx}])</dt>
<dd><a name="insert_0028_0029"></a><a name="index-insert_0028_0029"></a>
<p>{object} が |<a href="#List">List</a>| か |<a href="#Blob">Blob</a>| の場合、それの先頭に {item} を插入する。
</p>
<p>{idx} が指定されたときはインデックス {idx} の要素の前に {item} を插入する。{idx} が 0 のときは {idx} を省略した場合と同じ樣に最初の要素の前に插入する。{idx} は負數でもよい (|<a href="#list_002dindex">list-index</a>| 參照)。-1 を指定すると最後の要素の前に插入する。
</p>
<p>插入した結果のリスト |List| や |Blob| を返す。例:
</p><div class="example">
<pre class="example">:let mylist = insert([2, 3, 5], 1)
:call insert(mylist, 4, -1)
:call insert(mylist, 6, len(mylist))
</pre></div>
<p>最後の例は |<a href="#add_0028_0029">add()</a>| を使ふともつと簡單に書ける。
</p><blockquote>
<p><strong>Note:</strong> <br>
{item} がリスト |<a href="#List">List</a>| の場合は、1個の要素として追加される。リスト |<a href="#Lists">Lists</a>| を連結するには |<a href="#extend_0028_0029">extend()</a>| を使ふこと。
</p></blockquote>

</dd>
<dt>invert({expr})</dt>
<dd><a name="invert_0028_0029"></a><a name="index-invert_0028_0029"></a>
<p>ビット反轉。引數は數値に變換される。リスト、辭書、浮動小數點數を指定するとエラーになる。例:
</p><div class="example">
<pre class="example">:let bits = invert(bits)
</pre></div>

</dd>
<dt>isdirectory({directory})</dt>
<dd><a name="isdirectory_0028_0029"></a><a name="index-isdirectory_0028_0029"></a>
<p>結果は數値で、{directory} といふ名前のディレクトリが存在すれば |<a href="#TRUE">TRUE</a>| となる。{directory} が存在しないか、存在したとしてもディレクトリではなかつた場合には、|<a href="#FALSE">FALSE</a>| が返される。文字列として解釋できるのならば {directory} の表現はどのやうなものであつてもかまはない。
</p>
<a name="isinf_0028_0029"></a><a name="index-isinf_0028_0029"></a>
</dd>
<dt>isinf({expr})</dt>
<dd><p>{expr} が正の無限大の場合は 1、負の無限大の場合は -1 を返し、それ以外の場合は 0 を返す。
</p><pre class="verbatim">:echo isinf(1.0 / 0.0)
1
:echo isinf(-1.0 / 0.0)
-1
</pre>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>
<a name="islocked_0028_0029"></a><a name="E786"></a><a name="index-islocked_0028_0029"></a>
<a name="index-E786"></a>
</dd>
<dt>islocked({expr})</dt>
<dd><p>結果は數値で、{expr} がロックされてゐる變數の名前ならば |<a href="#TRUE">TRUE</a>| を返す。
</p>
<p>{expr} は變數の名前、リスト |<a href="#List">List</a>| の要素、辭書 |<a href="#Dictionary">Dictionary</a>| の要素のいづれかでなければならない。變數そのものを指定しないやうに注意。例:
</p><div class="example">
<pre class="example">:let alist = [0, ['a', 'b'], 2, 3]
:lockvar 1 alist
:echo islocked('alist')		&quot; 1
:echo islocked('alist[1]')	&quot; 0
</pre></div>

<p>{expr} が存在しない變數のときはエラーメッセージが表示される。變數の存在を確認するには |<a href="#exists_0028_0029">exists()</a>| を使ふ。
</p>
</dd>
<dt>isnan({expr})</dt>
<dd><a name="isnan_0028_0029"></a><a name="index-isnan_0028_0029"></a>
<p>{expr} が NaN の値を持つ浮動小數點數ならば |<a href="#TRUE">TRUE</a>| を返す。
</p><div class="example">
<pre class="example">echo isnan(0.0 / 0.0)
1
</pre></div>

<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>
<a name="items_0028_0029"></a><a name="index-items_0028_0029"></a>
</dd>
<dt>items({dict})</dt>
<dd><p>{dict} の全要素のキー・値のペアからなるリスト |<a href="#List">List</a>| を返す。戾り値の各要素はリスト |<a href="#List">List</a>| であり、キーと値の 2 個の要素を持つ。戾り値のリスト |<a href="#List">List</a>| の要素の順序は不定である。|<a href="#keys_0028_0029">keys()</a>| と |<a href="#values_0028_0029">values()</a>| も參照。
</p>
<p>例:
</p><pre class="verbatim">for [key, value] in items(mydict)
   echo key . ': ' . value
endfor
</pre>
<a name="job_005fgetchannel_0028_0029"></a><a name="index-job_005fgetchannel_0028_0029"></a>
</dd>
<dt>job_getchannel({job})</dt>
<dd><p>{job} が使用してゐるチャネルハンドルを取得する。ジョブにチャネルがないかどうかを確認するには:
</p><div class="example">
<pre class="example">if string(job_getchannel()) == 'channel fail'
</pre></div>

<p>{Vim が |<a href="various_002etxt.html#g_t_002bjob">+job</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="job_005finfo_0028_0029"></a><a name="index-job_005finfo_0028_0029"></a>
</dd>
<dt>job_info([{job}])</dt>
<dd><p>{job} に關する情報を持つ辭書を返す:
</p><table>
<tr><td width="30%">&quot;status&quot;</td><td width="70%">|<a href="#job_005fstatus_0028_0029">job_status()</a>| が返すもの</td></tr>
<tr><td width="30%">&quot;channel&quot;</td><td width="70%">|<a href="#job_005fgetchannel_0028_0029">job_getchannel()</a>| が返すもの</td></tr>
<tr><td width="30%">&quot;cmd&quot;</td><td width="70%">ジョブをスタートするために使はれたコマンド引數のリスト</td></tr>
<tr><td width="30%">&quot;process&quot;</td><td width="70%">プロセス ID</td></tr>
<tr><td width="30%">&quot;tty_in&quot;</td><td width="70%">ターミナルの入力名。なければ空</td></tr>
<tr><td width="30%">&quot;tty_out&quot;</td><td width="70%">ターミナルの出力名。なければ空</td></tr>
<tr><td width="30%">&quot;exitval&quot;</td><td width="70%">&quot;status&quot; が &quot;dead&quot; のときのみ有效</td></tr>
<tr><td width="30%">&quot;exit_cb&quot;</td><td width="70%">終了時に呼び出される函數</td></tr>
<tr><td width="30%">&quot;stoponexit&quot;</td><td width="70%">|<a href="channel_002etxt.html#job_002dstoponexit">job-stoponexit</a>|</td></tr>
</table>

<p>Unix のみ:
</p><table>
<tr><td width="30%">&quot;termsig&quot;</td><td width="70%">プロセスを終了させたシグナル (値については |<a href="#job_005fstop_0028_0029">job_stop()</a>| を參照)。&quot;status&quot; が &quot;dead&quot; の場合にのみ有效である</td></tr>
</table>

<p>MS-Windows のみ:
</p><table>
<tr><td width="30%">&quot;tty_type&quot;</td><td width="70%">使用してゐる假想コンソールのタイプ。値は &quot;winpty&quot; または &quot;conpty&quot;。&rsquo;<samp>termwintype</samp>&rsquo; を參照。</td></tr>
</table>

<p>引數なしでは、すべてのジョブオブジェクトのリストを返す。
</p>
</dd>
<dt>job_setoptions({job}, {options})</dt>
<dd><a name="job_005fsetoptions_0028_0029"></a><a name="index-job_005fsetoptions_0028_0029"></a>
<p>{job} のオプションを變更する。サポートされてゐるものは:
</p><table>
<tr><td width="20%">&quot;stoponexit&quot;</td><td width="80%">|<a href="channel_002etxt.html#job_002dstoponexit">job-stoponexit</a>|</td></tr>
<tr><td width="20%">&quot;exit_cb&quot;</td><td width="80%">|<a href="channel_002etxt.html#job_002dexit_005fcb">job-exit_cb</a>|</td></tr>
</table>

<a name="job_005fstart_0028_0029"></a><a name="index-job_005fstart_0028_0029"></a>
</dd>
<dt>job_start({command} [, {options}])</dt>
<dd><p>ジョブを開始し、ジョブオブジェクトを返す。|<a href="#system_0028_0029">system()</a>| と |<a href="various_002etxt.html#g_t_003a_0021cmd">:!cmd</a>| とは異なり、これはジョブが終了するのを待つことはない。
</p>
<p>ターミナルウィンドウでジョブを開始するには |<a href="terminal_002etxt.html#term_005fstart_0028_0029">term_start()</a>| を參照。
</p>
<p>ジョブが起動に失敗した場合、返されたジョブオブジェクトの |<a href="#job_005fstatus_0028_0029">job_status()</a>| は &quot;fail&quot; となり、どのコールバックも呼び出されない。
</p>
<p>{command} は文字列にできる。これは MS-Windows で最も效果的である。Unix では、それは execvp() に渡すために空白で區切られたパーツに分割される。二重引用符で圍まれた引數には空白を含められる。
</p>
<p>{command} はリストにでき、最初の項目は實行可能ファイルであり、殘りの項目は引數である。すべての項目は文字列に變換される。これは Unix で最も效果的である。
</p>
<p>MS-Windows では、|<a href="#job_005fstart_0028_0029">job_start()</a>| は GUI アプリケーションを隱す。それを表示したい場合は、|<a href="os_005fwin32_002etxt.html#g_t_003a_0021start">:!start</a>| を代はりに使用すること。
</p>
<p>コマンドはシェルではなく直接實行され、&rsquo;<samp>shell</samp>&rsquo; オプションは使用されない。シェルを使用するには:
</p><div class="example">
<pre class="example">let job = job_start([&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;echo hello&quot;])
</pre></div>
<p>または:
</p><div class="example">
<pre class="example">let job = job_start('/bin/sh -c &quot;echo hello&quot;')
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
これは 2 つのプロセス、シェルとそれが實行するコマンドを開始することに注意すること。これを望まない場合は、&quot;exec&quot; シェルコマンドを使用する。
</p></blockquote>

<p>Unix では $PATH は、コマンドにスラッシュが含まれてゐない場合にのみ實行可能ファイルを檢索するために使用される。
</p>
<p>ジョブは Vim と同じ端末を使用する。ジョブが stdin を讀む場合、ジョブと Vim が入力を奪ひ合ふことになるのでうまく動作しない。問題を避けるために stdin と stdout をリダイレクトする:
</p><div class="example">
<pre class="example">let job = job_start(['sh', '-c', &quot;myserver &lt;/dev/null &gt;/dev/null&quot;])
</pre></div>
<p>返されたジョブオブジェクトを使用して、|<a href="#job_005fstatus_0028_0029">job_status()</a>| でステータスを取得し、|<a href="#job_005fstop_0028_0029">job_stop()</a>| でジョブを停止することができる。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
ジョブオブジェクトはそれに對する參照がなくなると、削除されるだらうことに注意。これはジョブがエラーを引き起す失敗を生ずる、標準入力と標準エラーを閉ぢる。これを囘避するためにはジョブを參照し續ける。それゆゑ、次の代はりに：
</p><div class="example">
<pre class="example">call job_start('my-command')
</pre></div>
<p>こちらを使ふ:
</p><div class="example">
<pre class="example">let myjob = job_start('my-command')
</pre></div>
<p>ひとたびジョブが不要になつたり、失敗するやうな過去のもの (例へばスタートアップ時にメッセージを指す時) になつたら &quot;myjob&quot; を削除する。もしも函數が返るなら、函數へのローカル變數は存在しなくなるだらうことに留意すること。もしも必要であればスクリプトローカル變數を使ふ:
</p><div class="example">
<pre class="example">let s:myjob = job_start('my-command')
</pre></div>
</blockquote>
<p>{options} は辭書でなければならない。多くのオプション項目を含めることができる。|<a href="channel_002etxt.html#job_002doptions">job-options</a>| 參照。
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bjob">+job</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="job_005fstatus_0028_0029"></a><a name="E916"></a><a name="index-job_005fstatus_0028_0029"></a>
<a name="index-E916"></a>
</dd>
<dt>job_status({job})</dt>
<dd><p>{job} のステータスを String で返す:
</p><table>
<tr><td width="10%">&quot;run&quot;</td><td width="90%">ジョブが實行中</td></tr>
<tr><td width="10%">&quot;fail&quot;</td><td width="90%">ジョブを開始できなかつた</td></tr>
<tr><td width="10%">&quot;dead&quot;</td><td width="90%">ジョブが死んだか實行後にジョブが停止した</td></tr>
</table>

<p>Unix では存在しないコマンドは、失敗が檢出される前にフォークが發生するため、&quot;fail&quot; ではなく &quot;dead&quot; になる。
</p>
<p>exit コールバックが &quot;exit_cb&quot; オプションで設定され、ジョブが &quot;dead&quot; と檢出された場合、コールバックが呼び出される。
</p>
<p>詳細は |<a href="#job_005finfo_0028_0029">job_info()</a>| を參照。
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bjob">+job</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="job_005fstop_0028_0029"></a><a name="index-job_005fstop_0028_0029"></a>
</dd>
<dt>job_stop({job} [, {how}])</dt>
<dd><p>{job} を停止する。これはジョブを通知するためにも使用できる。
</p>
<p>{how} が省略されたり、&quot;term&quot; の場合、ジョブは終了する。Unix では SIGTERM が送信される。MS-Windows では、ジョブは强制的に終了する (&quot;優しい&quot;方法は存在しない)。これはプロセスグループに行くので、子供たちも影響を受けるかもしれない。
</p>
<p>UNIX への影響:
</p><table>
<tr><td width="10%">&quot;term&quot;</td><td width="90%">SIGTERM (既定)</td></tr>
<tr><td width="10%">&quot;hup&quot;</td><td width="90%">SIGHUP</td></tr>
<tr><td width="10%">&quot;quit&quot;</td><td width="90%">SIGQUIT</td></tr>
<tr><td width="10%">&quot;int&quot;</td><td width="90%">SIGINT</td></tr>
<tr><td width="10%">&quot;kill&quot;</td><td width="90%">SIGKILL (停止するための最も强い方法)</td></tr>
<tr><td width="10%">number</td><td width="90%">その番號の信號</td></tr>
</table>

<p>MS-Windows への影響:
</p><table>
<tr><td width="10%">&quot;term&quot;</td><td width="90%">プロセスを强制終了 (既定)</td></tr>
<tr><td width="10%">&quot;hup&quot;</td><td width="90%">CTRL_BREAK</td></tr>
<tr><td width="10%">&quot;quit&quot;</td><td width="90%">CTRL_BREAK</td></tr>
<tr><td width="10%">&quot;int&quot;</td><td width="90%">CTRL_C</td></tr>
<tr><td width="10%">&quot;kill&quot;</td><td width="90%">プロセスを强制終了</td></tr>
<tr><td width="10%">Others</td><td width="90%">CTRL_BREAK</td></tr>
</table>

<p>Unix では、シグナルはプロセスグループに送られる。これは、ジョブが &quot;sh -c command&quot; であるときにシェルとコマンドの兩方に影響を與へることを意味する。
</p>
<p>結果は數値で、操作が實行できる場合は1、システムでは &quot;how&quot; がサポートされてゐない場合は 0。
</p><blockquote>
<p><strong>Note:</strong> <br>
ジョブが實際に停止したかどうかは、操作が實行された場合でも、|<a href="#job_005fstatus_0028_0029">job_status()</a>| でチェックする必要があることに注意すること。
</p></blockquote>

<p>もしもジョブのステータスが &quot;dead&quot; ならシグナルは送信されない。これは (プロセス番號が再利用されるやうな Unix では特に) 誤つたジョブを停止するのを防ぐため。
</p>
<p>When using &quot;kill&quot; Vim will assume the job will die and close the channel.
</p>
<p>{Vim が |<a href="various_002etxt.html#g_t_002bjob">+job</a>| 機能付きでコンパイルされたときのみ有效}
</p>
<a name="join_0028_0029"></a><a name="index-join_0028_0029"></a>
</dd>
<dt>join({list} [, {sep}])</dt>
<dd><p>リスト {list} の要素を連結し、1個の文字列にして返す。
</p>
<p>{sep} が指定されたときは、要素の閒にそれを插入する。{sep} が指定されなかつたときは 1 個のスペースが使はれる。
</p><blockquote>
<p><strong>Note:</strong> <br>
末尾には {sep} がつかない。末尾にもつけたければ以下のやうにする:
</p><div class="example">
<pre class="example">let lines = join(mylist, &quot;\n&quot;) . &quot;\n&quot;
</pre></div>
</blockquote>
<p>{list} の要素が文字列なら、そのまま使はれる。リスト |<a href="#Lists">Lists</a>| と辭書 |<a href="#Dictionaries">Dictionaries</a>| は |<a href="#string_0028_0029">string()</a>| を使つたときと同じやうにして文字列に變換される。この逆を行ふ函數は |<a href="#split_0028_0029">split()</a>| である。
</p>
<a name="js_005fdecode_0028_0029"></a><a name="index-js_005fdecode_0028_0029"></a>
</dd>
<dt>js_decode({string})</dt>
<dd><p>|<a href="#json_005fdecode_0028_0029">json_decode()</a>| に似てゐるが以下が異なる:
</p><ul>
<li> オブジェクトのキー名はクォートされてなくてもよい。
</li><li> 文字列はシングルクォートでくくることができる。
</li><li> 排列內の (2 つのコンマで區切られた) 空アイテムが許可され結果として v:none のアイテムとなる。
</li></ul>

</dd>
<dt>js_encode({expr})</dt>
<dd><a name="js_005fencode_0028_0029"></a><a name="index-js_005fencode_0028_0029"></a>
<p>|<a href="#json_005fencode_0028_0029">json_encode()</a>| に似てゐるが以下が異なる:
</p><ul>
<li> オブジェクトのキー名がクォートされない
</li><li> 排列の中のアイテム v:none はコンマで區切られた空のアイテムになる。
</li></ul>
<p>例へば Vim オブジェクト:
</p><div class="example">
<pre class="example">[1,v:none,{&quot;one&quot;:1},v:none]
</pre></div>
<p>は以下にエンコードされ:
</p><div class="example">
<pre class="example">[1,,{one:1},,]
</pre></div>
<p>json_encode() であれば以下にエンコードされる:
</p><div class="example">
<pre class="example">[1,null,{&quot;one&quot;:1},null]
</pre></div>
<p>このエンコードは JavaScript では妥當である。特に排列內でオプショナルアイテムを扱ふ場合には JSON より能率的である。
</p>

<a name="json_005fdecode_0028_0029"></a><a name="index-json_005fdecode_0028_0029"></a>
</dd>
<dt>json_decode({string})</dt>
<dd><p>これは JSON フォーマットの文字列を解析し、それと同等の Vim の値を返す。JSON と Vim の値の關係は |<a href="#json_005fencode_0028_0029">json_encode()</a>| を參照。
デコードは寬容である:
</p><ul>
<li> 排列やオブジェクトの末尾コンマは無視される。例へば &quot;[1, 2, ]&quot; は &quot;[1, 2]&quot; と同じ。
</li><li> 整數のキーはオブジェクト內で受け入れられる。例へば、{1:2} は {&quot;1&quot;:2} と同じである。
</li><li> 多くの浮動小數點數を認識する。例へば &quot;1.&quot; は &quot;1.0&quot; となり、&quot;001.2&quot; は &quot;1.2&quot; となる。特別な浮動小數點の値、&quot;Infinity&quot;, &quot;-Infinity&quot; および &quot;NaN&quot; (大文字は無視 {譯注: &quot;nan&quot; や &quot;NAN&quot; も OK} される) は受け付けられる。
</li><li> 整數の先頭の 0 は無視される。例へば &quot;012&quot; は &quot;12&quot;、&quot;-012&quot; は &quot;-12&quot; となる。
</li><li> リテラルの名前、null, true や false の大文字は無視される。例へば &quot;NULL&quot; は &quot;null&quot;、&quot;True&quot; は &quot;true&quot; となる。
</li><li> 文字列中のエスケープされてゐない U+0000 から U+001F までのコントロールキャラクターは受け取られる。例へば &quot;	&quot; (文字列中のタブ文字) は &quot;\t&quot; となる。
</li><li> 空の JSON 式、またはスペースのみで構成されてゐるものは受け入れられ、v:none になる。
</li><li> 不正な 2 文字のエスケープ文字中のバックスラッシュは無視される。例へば &quot;\a&quot; は  &quot;a&quot; にデコードされる。
</li><li> JSON 文字列中の正しいサロゲートペアは、通常は &quot;\uD834\uDD1E&quot; のやうに 12 文字の列であるべきだが、json_decode() は &quot;\uD834&quot; や &quot;\uD834\u&quot; のやうに分斷されたサロゲートペアを默つて受け取る。
</li></ul>
<a name="E938"></a><a name="index-E938"></a>
<p>オブジェクトの重複するキー (rfc7159 では妥當だが) は、正しい Vim タイプの結果でなければならないので、json_decode() によつて受け入れられない。例へば、次のものは失敗する: {&quot;a&quot;:&quot;b&quot;, &quot;a&quot;:&quot;c&quot;}
</p>

<a name="json_005fencode_0028_0029"></a><a name="index-json_005fencode_0028_0029"></a>
</dd>
<dt>json_encode({expr})</dt>
<dd><p>{expr} を JSON フォーマットの文字列にエンコードし、この文字列を返す。
</p>
<p>このエンコード方式の詳細はここに記載されてゐる:
</p>
<p><a href="https://tools.ietf.org/html/rfc7159.html">https://tools.ietf.org/html/rfc7159.html</a>
</p>
<p>Vim の値は以下の通りに變換される:
</p><table>
<tr><td width="30%">數値 |<a href="#Number">Number</a>|</td><td width="70%">10 進數</td></tr>
<tr><td width="30%">浮動小數點數 |<a href="#Float">Float</a>|</td><td width="70%">浮動小數點數</td></tr>
<tr><td width="30%">浮動小數點數 nan</td><td width="70%">&quot;NaN&quot;</td></tr>
<tr><td width="30%">浮動小數點數 inf</td><td width="70%">&quot;Infinity&quot;</td></tr>
<tr><td width="30%">浮動小數點數 -inf</td><td width="70%">&quot;-Infinity&quot;</td></tr>
<tr><td width="30%">文字列 |<a href="#String">String</a>|</td><td width="70%">ダブルクォートで括られた文字列 (null 可)</td></tr>
<tr><td width="30%">|<a href="#Funcref">Funcref</a>|</td><td width="70%">不可、エラー</td></tr>
<tr><td width="30%">リスト |<a href="#List">List</a>|</td><td width="70%">排列 (null可) 再歸的に使用された場合: []</td></tr>
<tr><td width="30%">辭書 |<a href="#Dict">Dict</a>|</td><td width="70%">オブジェクト (null可) 再歸的に使用された場合: {}</td></tr>
<tr><td width="30%">|<a href="#Blob">Blob</a>|</td><td width="70%">個々のバイト排列</td></tr>
<tr><td width="30%">v:false</td><td width="70%">&quot;false&quot;</td></tr>
<tr><td width="30%">v:true</td><td width="70%">&quot;true&quot;</td></tr>
<tr><td width="30%">v:none</td><td width="70%">&quot;null&quot;</td></tr>
<tr><td width="30%">v:null</td><td width="70%">&quot;null&quot;</td></tr>
</table>
<blockquote>
<p><strong>Note:</strong> <br>
NaN と Infinity は値として渡されることに注意すること。これは JSON 標準には存在しないが、いくつかの實裝でそれが可能である。さうでない場合、エラーが發生する。
</p></blockquote>

<a name="keys_0028_0029"></a><a name="index-keys_0028_0029"></a>
</dd>
<dt>keys({dict})</dt>
<dd><p>{dict} の全キーからなるリスト |<a href="#List">List</a>| を返す。リスト |<a href="#List">List</a>| の順序は不定である。|<a href="#items_0028_0029">items()</a>| と |<a href="#values_0028_0029">values()</a>| も參照。
</p>
<a name="len_0028_0029"></a><a name="E701"></a><a name="index-len_0028_0029"></a>
<a name="index-E701"></a>
</dd>
<dt>len({expr})</dt>
<dd><p>結果は數値で、引數 {expr} の長さ。{expr} が文字列または數値のときは |<a href="#strlen_0028_0029">strlen()</a>| と同じやうにバイト單位での長さを返す。
</p>
<p>{expr} がリスト |<a href="#List">List</a>| のときは要素數を返す。
</p>
<p>{expr} が |<a href="#Blob">Blob</a>| の場合、バイト數を返す。
</p>
<p>{expr} が辭書 |<a href="#Dictionary">Dictionary</a>| のときは要素數を返す。
</p>
<p>それ以外のときはエラーとなる。
</p>
<a name="libcall_0028_0029"></a><a name="E364"></a><a name="E368"></a><a name="index-libcall_0028_0029"></a>
<a name="index-E364"></a>
<a name="index-E368"></a>
</dd>
<dt>libcall({libname}, {funcname}, {argument})</dt>
<dd><p>ランタイムライブラリ {libname} の函數 {funcname} を、單一の引數 {argument} で呼び出す。
</p>
<p>Vim で使ふやうに特別に作つたライブラリの函數を呼ぶために使はれる。引數は 1 個しか指定できないため、普通のライブラリ函數を呼ぶにはかなり制限がある。
</p>
<p>結果には、呼び出した函數から返された文字列が返される。呼び出した函數が NULL を返した場合には、Vim には空文字列 &quot;&quot; が戾される。
</p>
<p>函數の戾り値が數値である場合には |<a href="#libcallnr_0028_0029">libcallnr()</a>| を使ふこと！
</p>
<p>もしも引數が數値ならば、函數には int 型の引數が 1 つ渡される。引數が文字列の場合には、函數にはヌル終端記號を持つ文字列が引數として渡される。
</p>
<p>|<a href="starting_002etxt.html#restricted_002dmode">restricted-mode</a>| の中で呼ぶと失敗する。
</p>
<p>libcall() によつて Vim を再コンパイルすることなく &rsquo;plug-in&rsquo; と呼ばれる獨自の擴張を行ふことができるやうになる。それは (直接) システムの函數を呼ぶ、といふことではない。システム函數を呼ぶとおそらく Vim がクラッシュするだらう。
</p>
<p>Win32 では、あなたが書いた函數を DLL に置かなければならず、また通常の C 呼出し規約を使用しなければならない (Windows のシステム DLL が使ふ Pascal ではない)。函數は正確に 1 つのパラメーター、char 型ポインタもしくは int 型を取らなければならず、戾り値として char 型ポインタか NULL を返さなければならない。
</p>
<p>返される char 型ポインタは、函數終了後も有效なポインタ (例へば DLL 內の靜的なデータ) を指さなければならない。(malloc 等で) 割り當てられたメモリを保持してゐた場合、それはリークしてしまふ。DLL 內のスタティックバッファを用ゐる方法は動くかもしれないが、使用濟み DLL がメモリから削除されると同時に解放されてしまふ。
</p>
<blockquote>
<p><strong>警告:</strong> <br>
もしも函數が有效ではないポインタを返すと、Vim はクラッシュしてしまふ。函數が數値を返してしまつた場合、Vim はそれをポインタとして扱つてしまふので、やはりクラッシュが起こる。
</p></blockquote>
<p>Win32 のシステムでは、{libname} は DLL のファイル名の擴張子 &quot;.DLL&quot; を付けてはならない。通常の (パスの通つた) 場所に DLL がない場合には、フルパスで指定する必要がある。
</p>
<p>Unix では、獨自のプラグインをコンパイルするときはオブジェクトコードを位置獨立 (&rsquo;PIC&rsquo;) としてコンパイルしなければならない。
</p>
<p>{Win32 といくつかの Unix で |<a href="various_002etxt.html#g_t_002blibcall">+libcall</a>| 機能が有效になつてゐるときのみ利用可能}
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo libcall(&quot;libc.so&quot;, &quot;getenv&quot;, &quot;HOME&quot;)
</pre></div>
<a name="libcallnr_0028_0029"></a><a name="index-libcallnr_0028_0029"></a>
</dd>
<dt>libcallnr({libname}, {funcname}, {argument})</dt>
<dd><p>|<a href="#libcall_0028_0029">libcall()</a>| とほぼ同樣だが、文字列でなく int を返す函數に使ふ。{Win32と |<a href="various_002etxt.html#g_t_002blibcall">+libcall</a>| 機能が有效になつてゐる Unix でのみ利用可能}
例:
</p><div class="example">
<pre class="example">:echo libcallnr(&quot;/usr/lib/libc.so&quot;, &quot;getpid&quot;, &quot;&quot;)
:call libcallnr(&quot;libc.so&quot;, &quot;printf&quot;, &quot;Hello World!\n&quot;)
:call libcallnr(&quot;libc.so&quot;, &quot;sleep&quot;, 10)
</pre></div>
<a name="line_0028_0029"></a><a name="index-line_0028_0029"></a>
</dd>
<dt>line({expr})</dt>
<dd><p>結果は數値で、{expr} で與へられた位置のファイル內での行番號。受け付けられる位置指定は次の通り:
</p><table>
<tr><td width="10%">.</td><td width="90%">カーソルの位置</td></tr>
<tr><td width="10%">$</td><td width="90%">現在のバッファの最後の位置</td></tr>
<tr><td width="10%">&rsquo;x</td><td width="90%">マーク x の位置 (マークが設定されてゐない場合、0 が返る)</td></tr>
<tr><td width="10%">w0</td><td width="90%">カレントウィンドウの最上行 (ディスプレイがアップデートされてゐない場合は最上行。例へば silent Ex モード中)</td></tr>
<tr><td width="10%">w$</td><td width="90%">カレントウィンドウの最下行 (行が見えなければ、これは &quot;w0&quot; 未滿の最下行)</td></tr>
<tr><td width="10%">v</td><td width="90%">ビジュアルモードでは: ビジュアル選擇領域の開始行 (カーソルがその端)。ビジュアルモード以外ではカーソル位置を返す。すぐに更新される點が |<a href="motion_002etxt.html#g_t_0027_003c">'&lt;</a>| と違ふ。</td></tr>
</table>
<blockquote>
<p><strong>Note:</strong> <br>
他のファイルのマークも使へる。その場合、戾り値はそのファイルの行番號となる。桁番號を取得するには |<a href="#col_0028_0029">col()</a>| を使ふ。兩方を取得するには |<a href="#getpos_0028_0029">getpos()</a>| を使ふ。
</p>
<p>例:
</p><table>
<tr><td width="40%">line(&quot;.&quot;)</td><td width="60%">カーソルの行番號</td></tr>
<tr><td width="40%">line(&quot;&rsquo;t&quot;)</td><td width="60%">マーク t の位置の行番號</td></tr>
<tr><td width="40%">line(&quot;&rsquo;&quot; . marker)</td><td width="60%">マーク marker の位置の行番號</td></tr>
</table>
</blockquote>
<p>ファイルを開くときに最後の既知の位置にジャンプするには、|<a href="usr_005f05_002etxt.html#last_002dposition_002djump">last-position-jump</a>| を參照。
</p>
<a name="line2byte_0028_0029"></a><a name="index-line2byte_0028_0029"></a>
</dd>
<dt>line2byte({lnum})</dt>
<dd><p>バッファの先頭から、{lnum} 行目までのバイト數を返す。これには現在のバッファのオプション &rsquo;<samp>fileformat</samp>&rsquo; に從つた、end-of-line (行終端) 文字も含まれてゐる。最初の行においては 1 が返る。バイト數は &rsquo;<samp>encoding</samp>&rsquo; に基づく。&rsquo;<samp>fileencoding</samp>&rsquo; は無視される。次のやうにすることで最終行を含むバイトサイズを獲得することができる:
</p><div class="example">
<pre class="example">line2byte(line(&quot;$&quot;) + 1)
</pre></div>
<p>これはバッファの大きさプラス1になる。もし &rsquo;<samp>fileencoding</samp>&rsquo; が空ならその値はファイルの大きさプラス 1 に等しい。
</p>
<p>{lnum} が無效であるか、|<a href="various_002etxt.html#g_t_002bbyte_005foffset">+byte_offset</a>| 機能がコンパイル時に無效にされてゐる場合、-1 が返される。
</p>
<p>|<a href="#byte2line_0028_0029">byte2line()</a>|、|<a href="motion_002etxt.html#go">go</a>| 及び |<a href="motion_002etxt.html#g_t_003agoto">:goto</a>| も參照。
</p>
<a name="lispindent_0028_0029"></a><a name="index-lispindent_0028_0029"></a>
</dd>
<dt>lispindent({lnum})</dt>
<dd><p>&rsquo;<samp>lisp</samp>&rsquo; をオンにしたときと同じ lisp 用のインデント規則に從つた場合の {lnum} 行目のインデント量を返す。
</p>
<p>インデント量はスペースで數へられ、&rsquo;<samp>tabstop</samp>&rsquo; の値は關係ない。{lnum} は |<a href="#getline_0028_0029">getline()</a>| の場合と同樣に扱はれる。{lnum} が無效な値のときや |<a href="various_002etxt.html#g_t_002blispindent">+lispindent</a>| 機能なしでコンパイルされてゐるときは -1 を返す。
</p>
<a name="list2str_0028_0029"></a><a name="index-list2str_0028_0029"></a>
</dd>
<dt>list2str({list} [, {utf8}])</dt>
<dd><p>{list} の各數値を文字列に變換し、それらすべてを連結する。例:
</p><div class="example">
<pre class="example">list2str([32])          returns &quot; &quot;
list2str([65, 66, 67])  returns &quot;ABC&quot;
</pre></div>
<p>以下で同樣のことが(遲く)おこなへる:
</p><pre class="verbatim">join(map(list, {nr, val -&gt; nr2char(val)}), '')
</pre><p>|<a href="#str2list_0028_0029">str2list()</a>| は反對のことをする。
</p>
<p>{utf8} が省略されてゐるかゼロの場合、現在の &rsquo;<samp>encoding</samp>&rsquo;が使用される。{utf8} が 1 の場合は、常に UTF-8 文字列を返す。utf-8 の合成文字は期待通りに動作する:
</p><div class="example">
<pre class="example">list2str([97, 769])     returns &quot;á&quot;
</pre></div>
<a name="listener_005fadd_0028_0029"></a><a name="index-listener_005fadd_0028_0029"></a>
</dd>
<dt>listener_add({callback} [, {buf}])</dt>
<dd><p>バッファ {buf} に變更が加へられたときに呼び出されるコールバック函數を追加する。
</p>
<p>{buf} はバッファ名またはバッファ番號を參照する。許容値については、|<a href="#bufname_0028_0029">bufname()</a>| を參照。{buf} を省略すると、現在のバッファが使用される。
</p>
<p>|<a href="#listener_005fremove_0028_0029">listener_remove()</a>| に渡すことができる一意の ID を返す。
</p>
<p>{callback} は 4 つの引數で呼び出される:
</p><table>
<tr><td width="30%">a:bufnr</td><td width="70%">變更されたバッファ</td></tr>
<tr><td width="30%">a:start</td><td width="70%">最初に變更された行番號</td></tr>
<tr><td width="30%">a:end</td><td width="70%">變更された下の最初の行番號</td></tr>
<tr><td width="30%">a:added</td><td width="70%">追加された行の合計數。行が削除された場合は負値</td></tr>
<tr><td width="30%">a:changes</td><td width="70%">變更についての詳細を含む項目のリスト</td></tr>
</table>

<p>例:
</p><div class="example">
<pre class="example">func Listener(bufnr, start, end, added, changes)
  echo 'lines ' .. a:start .. ' until ' .. a:end .. ' changed'
endfunc
call listener_add('Listener', bufnr)
</pre></div>

<p>リストは變更できない。各リスト項目は、次のエントリを持つ辭書である:
</p><table>
<tr><td width="30%">lnum</td><td width="70%">變更の最初の行番號</td></tr>
<tr><td width="30%">end</td><td width="70%">變更された行の下の行</td></tr>
<tr><td width="30%">added</td><td width="70%">追加された行數。行が削除された場合は負値</td></tr>
<tr><td width="30%">col</td><td width="70%">變更の影響を受けた &quot;lnum&quot; の最初の桁。不明な場合、または行全體が影響を受けた場合は 1。これはバイトインデックスである。最初の文字の値は 1 である。</td></tr>
</table>
<p>行が插入されたときの値は次のとほり:
</p><table>
<tr><td width="30%">lnum</td><td width="70%">上に新しい行が追加される行番號</td></tr>
<tr><td width="30%">end</td><td width="70%">&quot;lnum&quot; と同じ</td></tr>
<tr><td width="30%">added</td><td width="70%">插入された行數</td></tr>
<tr><td width="30%">col</td><td width="70%">1</td></tr>
</table>
<p>行が削除されたときの値は次のとほり:
</p><table>
<tr><td width="30%">lnum</td><td width="70%">最初に削除された行番號</td></tr>
<tr><td width="30%">end</td><td width="70%">削除が行はれる前の、最初に削除された行の下の行</td></tr>
<tr><td width="30%">added</td><td width="70%">負値。削除された行數</td></tr>
<tr><td width="30%">col</td><td width="70%">1</td></tr>
</table>
<p>行が變更されたときの値は次のとほり:
</p><table>
<tr><td width="30%">lnum</td><td width="70%">最初の變更行</td></tr>
<tr><td width="30%">end</td><td width="70%">最後に變更された行の下の行</td></tr>
<tr><td width="30%">added</td><td width="70%">0</td></tr>
<tr><td width="30%">col</td><td width="70%">變更した最初の桁または 1</td></tr>
</table>

<p>エントリは變更が行はれた順になつてゐるため、最新の變更は最後になる。行番號はコールバックが呼び出されたときに有效だが、後の變更はそれらを無效にするかもしれない。したがつて、後のためにコピーを保持しても機能しないかもしれない。
</p>
<p>{callback} は、|<a href="#listener_005fflush_0028_0029">listener_flush()</a>| が呼び出されたとき、または、行數を變更するやうな變更が行はれ、變更リストの行番號が無效になつたときに、畫面が更新される直前に呼び出される。
</p>
<p>{callback} はテキストをロックした狀態で呼び出される。|<a href="#textlock">textlock</a>| を參照。バッファを變更する必要がある場合は、後でこれを實行するためのタイマー |<a href="#timer_005fstart_0028_0029">timer_start()</a>| を使用すること。
</p>
<p>バッファが最初にロードされた時には {callback} は呼び出されない。|<a href="autocmd_002etxt.html#BufReadPost">BufReadPost</a>| オートコマンドイベントを使用して、バッファの初期テキストを處理する。
</p>
<p>{callback} はバッファがアンロードされたときにも呼び出されない。そのためには |<a href="autocmd_002etxt.html#BufUnload">BufUnload</a>| オートコマンドイベントを使用すること。
</p>
<a name="listener_005fflush_0028_0029"></a><a name="index-listener_005fflush_0028_0029"></a>
</dd>
<dt>listener_flush([{buf}])</dt>
<dd><p>バッファ {buf} のリスナーコールバックを呼び出す。保留中の變更がない場合は、コールバックは呼び出されない。
</p>
<p>{buf} はバッファ名またはバッファ番號を表す。許容値については、|<a href="#bufname_0028_0029">bufname()</a>| を參照。{buf} を省略すると、カレントバッファが使用される。
</p>
<a name="listener_005fremove_0028_0029"></a><a name="index-listener_005fremove_0028_0029"></a>
</dd>
<dt>listener_remove({id})</dt>
<dd><p>以前に listener_add() で追加されたリスナーを削除します。{id} が見つからないときはゼロを、{id} が削除されたときは 1 を返します。
</p>
<a name="localtime_0028_0029"></a><a name="index-localtime_0028_0029"></a>
</dd>
<dt>localtime()</dt>
<dd><p>現在の時刻、1970 年 1 月 1 日からの經過秒數を返す。|<a href="#strftime_0028_0029">strftime()</a>| と |<a href="#getftime_0028_0029">getftime()</a>| も參照。
</p>

<a name="log_0028_0029"></a><a name="index-log_0028_0029"></a>
</dd>
<dt>log({expr})</dt>
<dd><p>{expr} の自然對數 (底 e) を浮動小數點數 (|<a href="#Float">Float</a>|) で返す。{expr} は (0, inf] の範圍の浮動小數點數 (|<a href="#Float">Float</a>|) か數値 (|<a href="#Number">Number</a>|) でなければならない。
例:
</p><div class="example">
<pre class="example">:echo log(10)
2.302585
:echo log(exp(5))
5.0
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>

<a name="log10_0028_0029"></a><a name="index-log10_0028_0029"></a>
</dd>
<dt>log10({expr})</dt>
<dd><p>浮動小數點數 {expr} の 10 を底とする對數を |<a href="#Float">Float</a>| で返す。{expr} は |<a href="#Float">Float</a>| または |<a href="#Number">Number</a>| に評價されなければならない。
例:
</p><div class="example">
<pre class="example">:echo log10(1000)
3.0
:echo log10(0.01)
-2.0
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="luaeval_0028_0029"></a><a name="index-luaeval_0028_0029"></a>
</dd>
<dt>luaeval({expr} [, {expr}])</dt>
<dd><p>Lua の式 {expr} を評價し、その結果を Vim のデータ構造に變換したものを返す。2 番目の {expr} は、最初の {expr} の中では _A としてアクセスできる追加の引數を保持する。
</p>
<p>文字列はそのまま返される。
</p>
<p>ブーリアンオブジェクトは數値に變換される。
數値は、vim が |<a href="various_002etxt.html#g_t_002bfloat">+float</a>| つきでコンパイルされたときは |<a href="#Float">Float</a>| 値に變換され、さうでなければ數値に變換される。
</p>
<p>vim.eval() で取得される辭書とリストはそのまま返される。それ以外のオブジェクトは 0 が返され、エラーにはならない。詳細は |<a href="if_005flua_002etxt.html#lua_002dluaeval">lua-luaeval</a>| を參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002blua">+lua</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="map_0028_0029"></a><a name="index-map_0028_0029"></a>
</dd>
<dt>map({expr1}, {expr2})</dt>
<dd><p>{expr1} はリスト |<a href="#List">List</a>| または辭書 |<a href="#Dictionary">Dictionary</a>|。
</p>
<p>{expr1} の各要素を、{expr2} を評價した結果で置き換へる。{expr2} は文字列 |<a href="#string">string</a>| または函數參照 |<a href="#Funcref">Funcref</a>| でなければならない。
</p>
<p>{expr2} が文字列 |<a href="#string">string</a>| の場合、{expr2} の內部では |<a href="#v_003aval">v:val</a>| が現在の要素の値を保持してゐる。辭書の場合は |<a href="#v_003akey">v:key</a>| が現在の要素のキーを保持してゐる。リスト |<a href="#List">List</a>| の場合は |<a href="#v_003akey">v:key</a>| が現在の要素のインデックスを保持してゐる。
例:
</p><div class="example">
<pre class="example">:call map(mylist, '&quot;&gt; &quot; . v:val . &quot; &lt;&quot;')
</pre></div>
<p>これは &quot;mylist&quot; の各要素の前に &quot;&gt; &quot; をつけ、後に &quot; &lt;&quot; をつける。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
{expr2} は式を表す文字列である。バックスラッシュを二重にしなくても濟むやうに |<a href="#literal_002dstring">literal-string</a>| を使ふとよいだらう。ただしその場合はシングルクォートを二重にしなければならない。
</p></blockquote>

<p>{expr2} が |<a href="#Funcref">Funcref</a>| の場合は、2 つの引數で呼び出される:
</p><ol>
<li> 現在の要素のキーまたはインデックス。
</li><li> 現在の要素の値。
</li></ol>
<p>函數は、その要素の新しい値を返さなければならない。それぞれの値を &quot;key-value&quot; に置き換へる例:
</p><pre class="verbatim">func KeyValue(key, val)
  return a:key . '-' . a:val
endfunc
call map(myDict, function('KeyValue'))
</pre><p>|<a href="#lambda">lambda</a>| を使へばより短く書ける:
</p><div class="example">
<pre class="example">call map(myDict, {key, val -&gt; key . '-' . val})
</pre></div>
<p>&quot;val&quot; を使はない場合は省略できる:
</p><div class="example">
<pre class="example">call map(myDict, {key -&gt; 'item: ' . key})
</pre></div>
<p>この操作はその場で (in-place) 行はれる。リスト |<a href="#List">List</a>| や辭書 |<a href="#Dictionary">Dictionary</a>| を變更したくない場合は最初にコピーを作ること:
</p><div class="example">
<pre class="example">:let tlist = map(copy(mylist), ' v:val . &quot;\t&quot;')
</pre></div>

<p>{expr1} のリスト |<a href="#List">List</a>| または辭書 |<a href="#Dictionary">Dictionary</a>| に式を適用した結果を返す。{expr2} を評價してゐる最中にエラーが發生した場合は、{expr1} 內のそれ以降の要素の處理は行はれない。{expr2} が函數參照の場合、函數が &quot;abort&quot; フラグつきで定義されてゐない限り、函數內のエラーは無視される。
</p>

<a name="maparg_0028_0029"></a><a name="index-maparg_0028_0029"></a>
</dd>
<dt>maparg({name} [, {mode} [, {abbr} [, {dict}]]])</dt>
<dd><p>{dict} が省略されたかゼロのとき: モード {mode} におけるキーマップ {name} の rhs を返す。結果の文字列內の特殊文字は、&quot;<code>:map</code>&quot; コマンドでリスト表示した時のやうに變換される。
</p>
<p>{name} といふキーマップが存在しない場合、空文字列が返される。{name} のマッピングが空の場合、&quot;&lt;Nop&gt;&quot; が返される。
</p>
<p>{name} には &quot;<code>:map</code>&quot; コマンドで使用可能な、特殊なキー名が指定できる。
</p>
<p>{mode} には次の文字が使用可能:
</p><table>
<tr><td width="10%">&quot;n&quot;</td><td width="90%">ノーマル</td></tr>
<tr><td width="10%">&quot;v&quot;</td><td width="90%">ビジュアル (選擇含む)</td></tr>
<tr><td width="10%">&quot;o&quot;</td><td width="90%">オペレータ待機 (Operator-pending)</td></tr>
<tr><td width="10%">&quot;i&quot;</td><td width="90%">插入</td></tr>
<tr><td width="10%">&quot;c&quot;</td><td width="90%">コマンドライン</td></tr>
<tr><td width="10%">&quot;s&quot;</td><td width="90%">選擇</td></tr>
<tr><td width="10%">&quot;x&quot;</td><td width="90%">ビジュアル</td></tr>
<tr><td width="10%">&quot;l&quot;</td><td width="90%">langmap |<a href="map_002etxt.html#language_002dmapping">language-mapping</a>|</td></tr>
<tr><td width="10%">&quot;t&quot;</td><td width="90%">Terminal-Job</td></tr>
<tr><td width="10%">&quot;&quot;</td><td width="90%">ノーマル、ビジュアル、及びオペレータ待機</td></tr>
</table>
<p>{mode} が省略された場合、&quot;&quot; が使用される。
</p>
<p>{abbr} が指定され、|<a href="#TRUE">TRUE</a>| の場合はマッピングでなく短縮入力を對象とする。
</p>
<p>{dict} に |<a href="#TRUE">TRUE</a>| が指定されたときはマッピングのすべての情報を含んだ辭書が返る:
</p><table>
<tr><td width="20%">&quot;lhs&quot;</td><td width="80%">マッピングの {lhs}</td></tr>
<tr><td width="20%">&quot;rhs&quot;</td><td width="80%">マッピングの {rhs} (入力されたまま)</td></tr>
<tr><td width="20%">&quot;silent&quot;</td><td width="80%">|<a href="map_002etxt.html#g_t_003amap_002dsilent">:map-silent</a>| マッピングなら 1。さうでなければ 0。</td></tr>
<tr><td width="20%">&quot;noremap&quot;</td><td width="80%">マッピングの {rhs} が再マップ可能なら 1。</td></tr>
<tr><td width="20%">&quot;expr&quot;</td><td width="80%">式マッピング (|<a href="map_002etxt.html#g_t_003amap_002d_003cexpr_003e">:map-&lt;expr&gt;</a>|) なら 1。</td></tr>
<tr><td width="20%">&quot;buffer&quot;</td><td width="80%">バッファローカルマッピング (|<a href="map_002etxt.html#g_t_003amap_002dlocal">:map-local</a>|) なら 1。</td></tr>
<tr><td width="20%">&quot;mode&quot;</td><td width="80%">マッピングが定義されてゐるモード。上述のモードに加へ、次の文字が使用される:
<table>
<tr><td width="10%">&quot; &quot;</td><td width="90%">ノーマル、ビジュアル、オペレータ待機</td></tr>
<tr><td width="10%">&quot;!&quot;</td><td width="90%">插入、コマンドラインモード (|<a href="map_002etxt.html#mapmode_002dic">mapmode-ic</a>|)</td></tr>
</table></td></tr>
<tr><td width="20%">&quot;sid&quot;</td><td width="80%">&lt;sid&gt; マッピングで使用されるスクリプトローカル ID (|<a href="map_002etxt.html#g_t_003cSID_003e">&lt;SID&gt;</a>|)。</td></tr>
<tr><td width="20%">&quot;lnum&quot;</td><td width="80%">&quot;sid&quot; 內の行番號。もしも不明ならば 0</td></tr>
<tr><td width="20%">&quot;nowait&quot;</td><td width="80%">他の長いマッピングを待たない。(|<a href="map_002etxt.html#g_t_003amap_002d_003cnowait_003e">:map-&lt;nowait&gt;</a>|)。</td></tr>
</table>

<p>まずカレントバッファにローカルなマッピングを探し、次のグローバルマッピングを探す。
</p>
<p>この函數を使ふと、あるキーに對して既にマップがされてゐるとき、その動作を行ひつつ、再マップすることができる。槪要:
</p><div class="example">
<pre class="example">exe 'nnoremap &lt;Tab&gt; ==' . maparg('&lt;Tab&gt;', 'n')
</pre></div>


<a name="mapcheck_0028_0029"></a><a name="index-mapcheck_0028_0029"></a>
</dd>
<dt>mapcheck({name} [, {mode} [, {abbr}]])</dt>
<dd><p>モード {mode} におけるキーマップ {name} が存在するかチェックする。{name} に指定できる特殊文字は |<a href="#maparg_0028_0029">maparg()</a>| を參照。
</p>
<p>{abbr} が指定され、|<a href="#TRUE">TRUE</a>| の場合はマッピングでなく短縮入力を對象とする。
</p>
<p>マッピングが {name} で始まるとき、またはマッピングが {name} のはじめに等しいときマッチすると見なされる。
</p>
<table>
<thead><tr><th width="40%">マッチするか</th><th width="20%">&quot;a&quot;</th><th width="20%">&quot;ab&quot;</th><th width="20%">&quot;abc&quot;</th></tr></thead>
<tr><td width="40%">mapcheck(&quot;a&quot;)</td><td width="20%">yes</td><td width="20%">yes</td><td width="20%">yes</td></tr>
<tr><td width="40%">mapcheck(&quot;abc&quot;)</td><td width="20%">yes</td><td width="20%">yes</td><td width="20%">yes</td></tr>
<tr><td width="40%">mapcheck(&quot;ax&quot;)</td><td width="20%">yes</td><td width="20%">no</td><td width="20%">no</td></tr>
<tr><td width="40%">mapcheck(&quot;b&quot;)</td><td width="20%">no</td><td width="20%">no</td><td width="20%">no</td></tr>
</table>

<p>maparg() との違ひは、mapcheck() は {name} にマッチするマップを見つけるが、maparg() はぴつたり {name} に一致するマッピングのみを見つける。
</p>
<p>{name} にマッチするキーマップが存在しない時には、空文字列が返される。結果が 1 つならばマップされた RHS が返される。複數見つかつた場合には、それらのうちどれか 1 つの RHS が返される。RHS が空ならば &quot;&lt;Nop&gt;&quot; になるだらう。
</p>
<p>まずカレントバッファにローカルなマッピングを探し、次のグローバルマッピングを探す。
</p>
<p>この函數はマッピングが曖昧にならないかチェックするために使ふことができる。例:
</p><div class="example">
<pre class="example">:if mapcheck(&quot;_vv&quot;) == &quot;&quot;
:   map _vv :set guifont=7x13&lt;CR&gt;
:endif
</pre></div>
<p>これは、&quot;_vv&quot; といふマッピングが &quot;_v&quot; とか &quot;_vvv&quot; といつたマッピングと衝突しないやうに事前にチェックしてゐる。
</p>
<a name="match_0028_0029"></a><a name="index-match_0028_0029"></a>
</dd>
<dt>match({expr}, {pat} [, {start} [, {count}]])</dt>
<dd><p>{expr} がリスト |<a href="#List">List</a>| の場合は、{pat} にマッチする最初の要素のインデックスを返す。各要素は文字列として扱はれる。リスト |<a href="#Lists">Lists</a>| と辭書 |<a href="#Dictionaries">Dictionaries</a>| は echo したときと同じやうに文字列表現に變換される。
</p>
<p>それ以外の場合は、{expr} は文字列として扱はれる。{expr} の中で {pat} にマッチするインデックス (バイト單位のオフセット) を表す數値を返す。
</p>
<p>最初の文字またはリスト |<a href="#List">List</a>| の最初の要素にマッチしたときは 0 を返す。マッチがないときは -1 を返す。サブマッチを取得するには |<a href="#matchlist_0028_0029">matchlist()</a>| を參照。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo match(&quot;testing&quot;, &quot;ing&quot;)	&quot; 結果は 4
:echo match([1, 'x'], '\a')	&quot; 結果は 1
</pre></div>
<p>{pat} の扱はれ方については |<a href="#string_002dmatch">string-match</a>| を參照。
</p>
<a name="strpbrk_0028_0029"></a><a name="index-strpbrk_0028_0029"></a>
<p>strpbrk() に相當する函數は Vim に存在しない。しかし同じことを次のやうにしてできる:
</p><div class="example">
<pre class="example">:let sepidx = match(line, '[.,;: \t]')
</pre></div>

<a name="strcasestr_0028_0029"></a><a name="index-strcasestr_0028_0029"></a>
<p>strcasestr() に相當する函數はVimに存在しない。しかし正規表現に &quot;\c&quot; をつければ大文字・小文字の違ひを無視できる:
</p><div class="example">
<pre class="example">:let idx = match(haystack, '\cneedle')
</pre></div>
<p>{start} が指定されたときは、文字列のバイトインデックス {start} の位置、またはリスト |<a href="#List">List</a>| の {start} の要素から檢索を始める。その場合も戾り値は最初の文字/要素から數へたインデックスであることに注意。例:
</p><div class="example">
<pre class="example">:echo match(&quot;testing&quot;, &quot;ing&quot;, 2)
</pre></div>
<p>の結果は &quot;4&quot;。
</p><div class="example">
<pre class="example">:echo match(&quot;testing&quot;, &quot;ing&quot;, 4)
</pre></div>
<p>の結果は &quot;4&quot;。
</p><div class="example">
<pre class="example">:echo match(&quot;testing&quot;, &quot;t&quot;, 2)
</pre></div>
<p>の結果は &quot;3&quot;。
</p>
<p>文字列の場合、{start} &gt; 0 のときは、その文字列が {start} バイト後から始まるかのやうに扱はれる。そのため、&quot;^&quot; は {start} の位置にマッチする。ただし {count} が指定されたときは、{start} より前におけるマッチを無視してゐるかのやうに振る舞ふ (これは後方互換性を保つのを少々複雜にしてゐる)。
</p>
<p>文字列の場合、{start} &lt; 0 のときは {start} に 0 をセットする。リストの場合は、末尾からインデックスを數へるといふ意味になる。{start} が範圍外の場合 (文字列で {start} &gt; strlen({expr}) となつた場合、リスト |<a href="#List">List</a>| で {start} &gt; len({expr}) となつた場合) は -1 を返す。
</p>
<p>{count} が指定されたときは {count} 番目のマッチ位置を返す。文字列でマッチが見つかつたとき、次のマッチングは 1 文字先から行はれる。よつて次の例は 1 を返す:
</p><div class="example">
<pre class="example">echo match(&quot;testing&quot;, &quot;..&quot;, 0, 2)
</pre></div>
<p>リスト |<a href="#List">List</a>| の場合は次の要素から檢索を續ける。
</p><blockquote>
<p><strong>Note:</strong> <br>
{count} を指定すると、{start} の扱ひ方が變はつてしまふ。前の段落を參照。
</p></blockquote>

<p>受け付ける正規表現については |<a href="pattern_002etxt.html#pattern">pattern</a>| を參照。オプション &rsquo;<samp>ignorecase</samp>&rsquo; により、大文字・小文字を區別するかどうかを設定できる。&rsquo;<samp>smartcase</samp>&rsquo; は適用されない。マッチングは常に &rsquo;<samp>magic</samp>&rsquo; をオン、&rsquo;<samp>cpoptions</samp>&rsquo; を空にした狀態で行はれる。
</p>
<a name="matchadd_0028_0029"></a><a name="E798"></a><a name="E799"></a><a name="E801"></a><a name="E957"></a><a name="index-matchadd_0028_0029"></a>
<a name="index-E798"></a>
<a name="index-E799"></a>
<a name="index-E801"></a>
<a name="index-E957"></a>
</dd>
<dt>matchadd({group}, {pattern} [, {priority} [, {id} [, {dict}]]])</dt>
<dd><p>カレントウィンドウで强調表示するパターンを定義する。このパターンのことを「マッチ」と呼ぶ。構文グループ {group} で强調する。戾り値は、マッチを識別する ID である。|<a href="#matchdelete_0028_0029">matchdelete()</a>| でこの ID を指定してマッチを削除することができる。この ID はウィンドウに紐付けられてゐる。
</p>
<p>パターンは大文字小文字を區別し、magic (|<a href="pattern_002etxt.html#g_t_002fmagic">/magic</a>|) として解釋される ({pattern} の中で明示的に變更しない限り)。オプションの &rsquo;<samp>magic</samp>&rsquo;, &rsquo;<samp>smartcase</samp>&rsquo;, &rsquo;<samp>ignorecase</samp>&rsquo; は使用されない。Conceal は特別であり、マッチを隱す作用がある。
</p>
<p>省略可能な引數 {priority} はマッチの優先度を指定する。優先度が高いマッチは、より低いマッチの强調を上書きする。
</p>
<p>優先度は整數で指定する (負の數も可能)。{priority} が指定されない場合は既定の優先度 10 となる。&rsquo;<samp>hlsearch</samp>&rsquo; の優先度はゼロで、したがつてゼロより大きい優先度のマッチはすべてそれを上書きする。構文ハイライト (&rsquo;<samp>syntax</samp>&rsquo; を參照) は獨立したメカニズムであり、優先度がいくつであらうとマッチは構文ハイライトより優先する。
</p>
<p>{id} は特定のマッチ ID を返すことを要求する。指定された ID がすでに使はれてゐたら、エラーメッセージが表示され、そのマッチは登錄されない。ID は正の整數を指定する (ゼロは除く)。ID 1, 2, 3 は |<a href="pattern_002etxt.html#g_t_003amatch">:match</a>|, |<a href="pattern_002etxt.html#g_t_003a2match">:2match</a>|, |<a href="pattern_002etxt.html#g_t_003a3match">:3match</a>| 用に豫約されてゐる。{id} が指定されないか -1 のときは、|<a href="#matchadd_0028_0029">matchadd()</a>| が自動的に空いてゐる ID を取得する。
</p>
<p>省略可能な引數 {dict} はより一層カスタマイズ可能な値を許す。現在、これは |<a href="syntax_002etxt.html#hl_002dConceal">hl-Conceal</a>| でハイライトされたマッチを conceal 文字で表示されるのを明示するために使はれる。この辭書は下記のメンバを持つことができる:
</p>
<dl compact="compact">
<dt>conceal</dt>
<dd><p>マッチ (|<a href="syntax_002etxt.html#hl_002dConceal">hl-Conceal</a>| のためだけにハイライトされたマッチ、|<a href="syntax_002etxt.html#g_t_003asyn_002dcchar">:syn-cchar</a>| を參照) の代はりに表示する特別な文字
</p></dd>
<dt>window</dt>
<dd><p>現在のウィンドウの代はりに、この番號もしくはウィンドウ ID のウィンドウを使用する
</p></dd>
</dl>

<p>コマンド |<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| と異なり、マッチの個數に上限はない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:highlight MyGroup ctermbg=green guibg=green
:let m = matchadd(&quot;MyGroup&quot;, &quot;TODO&quot;)
</pre></div>
<p>このパターンを削除するには:
</p><div class="example">
<pre class="example">:call matchdelete(m)
</pre></div>

<p>|<a href="#matchadd_0028_0029">matchadd()</a>| と |<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| で定義したマッチのリストは |<a href="#getmatches_0028_0029">getmatches()</a>| で取得できる。全てのマッチを削除するのは |<a href="#clearmatches_0028_0029">clearmatches()</a>| 一發でできる。
</p>
<a name="matchaddpos_0028_0029"></a><a name="index-matchaddpos_0028_0029"></a>
</dd>
<dt>matchaddpos({group}, {pos} [, {priority} [, {id} [, {dict}]]])</dt>
<dd><p>|<a href="#matchadd_0028_0029">matchadd()</a>| と同じだが、パターンを指定するのではなく、位置のリスト {pos} を指定する。このコマンドは正規表現を扱ふ必要もなく、畫面更新のためにバッファ行の境界を設定するため、|<a href="#matchadd_0028_0029">matchadd()</a>| よりも速い。これは、例へば括弧の對應を强調表示するやうな、マッチの追加と削除を高速に實行したい狀況を想定してゐる。
</p>
<p>リスト {pos} は以下のいづれかの値を要素として持つことができる:
</p><ul>
<li> 數値。指定した行全體が强調表示される。最初の行の行番號は 1 である。
</li><li> 數値を 1 つ持つたリスト。例 [23]。指定した行全體が强調表示される。
</li><li> 數値を 2 つ持つたリスト。例 [23, 11]。最初の數値は行番號、2 番目の數値は列番號である (最初の列は 1 である。値は |<a href="#col_0028_0029">col()</a>| の戾り値と同じやうにバイト單位である)。指定した位置の文字が强調表示される。
</li><li> 數値を 3 つ持つたリスト。例 [23, 11, 3]。數値 2 つの場合と同じだが、3 つ目に强調表示する文字の長さ (バイト單位) を指定する。
</li></ul>

<p>指定できる位置は最大で 8 個である。
</p>
<p>例:
</p><div class="example">
<pre class="example">:highlight MyGroup ctermbg=green guibg=green
:let m = matchaddpos(&quot;MyGroup&quot;, [[23, 24], 34])
</pre></div>
<p>パターンの削除:
</p><div class="example">
<pre class="example">:call matchdelete(m)
</pre></div>

<p>|<a href="#matchaddpos_0028_0029">matchaddpos()</a>| で追加されたマッチは |<a href="#getmatches_0028_0029">getmatches()</a>| で取得する際には &quot;pos1&quot;, &quot;pos2&quot;, ... といふ項目を持つ。それぞれの値は {pos} で指定された値である。
</p>
<a name="matcharg_0028_0029"></a><a name="index-matcharg_0028_0029"></a>
</dd>
<dt>matcharg({nr})</dt>
<dd><p>|<a href="pattern_002etxt.html#g_t_003amatch">:match</a>|, |<a href="pattern_002etxt.html#g_t_003a2match">:2match</a>|, |<a href="pattern_002etxt.html#g_t_003a3match">:3match</a>| によつて設定されてゐるマッチパターンの情報を返す。{nr} が 1 のときは |<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| の情報、2 のときは |<a href="pattern_002etxt.html#g_t_003a2match">:2match</a>| の情報、3 のときは |<a href="pattern_002etxt.html#g_t_003a3match">:3match</a>| の情報を返す。
</p>
<p>戾り値は次の 2 個の要素を持つリスト |<a href="#List">List</a>| である:
</p><ul>
<li> 引數で指定したハイライトグループ名
</li><li> 引數で指定した檢索パターン
</li></ul>
<p>{nr} が 1、2、3 のどれでもないときは空リスト |<a href="#List">List</a>| を返す。マッチパターンがセットされてゐないときは [&rdquo;, &rdquo;] を返す。|<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| を保存し、復元するのに便利である。|<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| を使つた强調は 3 個までに限られてゐる。|<a href="#matchadd_0028_0029">matchadd()</a>| にはこの制限はない。
</p>
<a name="matchdelete_0028_0029"></a><a name="E802"></a><a name="E803"></a><a name="index-matchdelete_0028_0029"></a>
<a name="index-E802"></a>
<a name="index-E803"></a>
</dd>
<dt>matchdelete({id} [, {win})</dt>
<dd><p>|<a href="#matchadd_0028_0029">matchadd()</a>| または |<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| で定義したマッチの中で ID が {id} であるものを削除する。成功したときは 0、失敗したときは -1 を返す。|<a href="#matchadd_0028_0029">matchadd()</a>| の例を參照。すべてのマッチを削除するのは |<a href="#clearmatches_0028_0029">clearmatches()</a>| 一發でできる。
{win} が指定されれば、カレントウィンドウではなく指定されたウィンドウあるいはウィンドウ ID を對象にする。
</p>
<a name="matchend_0028_0029"></a><a name="index-matchend_0028_0029"></a>
</dd>
<dt>matchend({expr}, {pat} [, {start} [, {count}]])</dt>
<dd><p>|<a href="#match_0028_0029">match()</a>| と同じだが、返されるのはマッチした部分文字列の終了後のインデックスである。例:
</p><div class="example">
<pre class="example">:echo matchend(&quot;testing&quot;, &quot;ing&quot;)
</pre></div>
<p>結果は &quot;7&quot;。
</p>
<a name="strspn_0028_0029"></a><a name="strcspn_0028_0029"></a><a name="index-strspn_0028_0029"></a>
<a name="index-strcspn_0028_0029"></a>
<p>Vim には strspn() や strcspn() に相當する函數はないが、matchend() を使へば同じことができる:
</p><div class="example">
<pre class="example">:let span = matchend(line, '[a-zA-Z]')
:let span = matchend(line, '[^a-zA-Z]')
</pre></div>
<p>ただしマッチがないときには -1 を返すところが異なる。
</p>
<p>{start} は |<a href="#match_0028_0029">match()</a>| の場合と同じ意味を持つ。
</p><div class="example">
<pre class="example">:echo matchend(&quot;testing&quot;, &quot;ing&quot;, 2)
</pre></div>
<p>結果は &quot;7&quot;。
</p><div class="example">
<pre class="example">:echo matchend(&quot;testing&quot;, &quot;ing&quot;, 5)
</pre></div>
<p>結果は &quot;-1&quot;。
</p>
<p>{expr} がリスト |<a href="#List">List</a>| の場合、戾り値は |<a href="#match_0028_0029">match()</a>| と等しくなる。
</p>
<a name="matchlist_0028_0029"></a><a name="index-matchlist_0028_0029"></a>
</dd>
<dt>matchlist({expr}, {pat} [, {start} [, {count}]])</dt>
<dd><p>|<a href="#match_0028_0029">match()</a>| と同じだがリスト |<a href="#List">List</a>| を返す。リストの最初の要素は、matchstr() が返すのと同じマッチした文字列。それ以降の要素は |<a href="change_002etxt.html#g_t_003asubstitute">:substitute</a>| における &quot;\1&quot;, &quot;\2&quot; のやうなサブマッチである。\1 から \9 までの閒で、指定されなかつたものは空文字列となる。例:
</p><div class="example">
<pre class="example">echo matchlist('acd', '\(a\)\?\(b\)\?\(c\)\?\(.*\)')
</pre></div>
<p>結果は [&rsquo;acd&rsquo;, &rsquo;a&rsquo;, &rdquo;, &rsquo;c&rsquo;, &rsquo;d&rsquo;, &rdquo;, &rdquo;, &rdquo;, &rdquo;, &rdquo;] となる。マッチしなかつたときは空リストを返す。
</p>
<a name="matchstr_0028_0029"></a><a name="index-matchstr_0028_0029"></a>
</dd>
<dt>matchstr({expr}, {pat} [, {start} [, {count}]])</dt>
<dd><p>|<a href="#match_0028_0029">match()</a>| と同じだが、マッチした文字列を返す。例:
</p><div class="example">
<pre class="example">:echo matchstr(&quot;testing&quot;, &quot;ing&quot;)
</pre></div>
<p>結果は &quot;ing&quot;。
</p>
<p>マッチしなかつたときは &quot;&quot; を返す。
{start} の意味は |<a href="#match_0028_0029">match()</a>| の場合と同じ。
</p><div class="example">
<pre class="example">:echo matchstr(&quot;testing&quot;, &quot;ing&quot;, 2)
</pre></div>
<p>結果は &quot;ing&quot;。
</p><div class="example">
<pre class="example">:echo matchstr(&quot;testing&quot;, &quot;ing&quot;, 5)
</pre></div>
<p>結果は &quot;&quot;。
</p>
<p>{expr} がリスト |<a href="#List">List</a>| のときはマッチした要素を返す。その要素の型は變換されないため、必ずしも文字列であるとは限らない。
</p>
<a name="matchstrpos_0028_0029"></a><a name="index-matchstrpos_0028_0029"></a>
</dd>
<dt>matchstrpos({expr}, {pat} [, {start} [, {count}]])</dt>
<dd><p>|<a href="#matchstr_0028_0029">matchstr()</a>| と同じだがマッチした文字列とマッチした開始位置と終了位置を返す。例:
</p><div class="example">
<pre class="example">:echo matchstrpos(&quot;testing&quot;, &quot;ing&quot;)
</pre></div>
<p>結果は [&quot;ing&quot;, 4, 7] である。
</p>
<p>マッチが無い場合は [&quot;&quot;, -1, -1] が返る。
{start} が指定されてゐる場合は |<a href="#match_0028_0029">match()</a>| と同じ意味になる。
</p><div class="example">
<pre class="example">:echo matchstrpos(&quot;testing&quot;, &quot;ing&quot;, 2)
</pre></div>
<p>結果は [&quot;ing&quot;, 4, 7] である。 &gt;
</p><div class="example">
<pre class="example">:echo matchstrpos(&quot;testing&quot;, &quot;ing&quot;, 5)
</pre></div>
<p>結果は [&quot;&quot;, -1, -1] である。
</p>
<p>{expr} が リスト |<a href="#List">List</a>| の場合、マッチしたアイテム、{pat} でマッチした最初のインデックス、マッチの開始位置と終了位置が返る。
</p><div class="example">
<pre class="example">:echo matchstrpos([1, '__x'], '\a')
</pre></div>
<p>結果は [&quot;x&quot;, 1, 2, 3] である。
</p>
<p>型は變更されない。必ずしも文字列である必要はない。
</p>
<a name="max_0028_0029"></a><a name="index-max_0028_0029"></a>
</dd>
<dt>max({expr})</dt>
<dd><p>{expr} の全要素の値の最大値を返す。{expr} はリストか辭書である。辭書の場合、辭書に含まれるすべての値の最大値を返す。{expr} がリストでも辭書でもなかつたり、要素のどれかが數値に變換できない場合はエラーとなる。空のリスト |<a href="#List">List</a>| または辭書 |<a href="#Dictionary">Dictionary</a>| の場合は 0 を返す。
</p>
<a name="min_0028_0029"></a><a name="index-min_0028_0029"></a>
</dd>
<dt>min({expr})</dt>
<dd><p>{expr} の全要素の値の最小値を返す。{expr} はリストか辭書である。辭書の場合、辭書に含まれるすべての値の最小値を返す。{expr} がリストでも辭書でもなかつたり、要素のどれかが數値に變換できない場合はエラーとなる。空のリスト |<a href="#List">List</a>| または辭書 |<a href="#Dictionary">Dictionary</a>| の場合は 0 を返す。
</p>
<a name="mkdir_0028_0029"></a><a name="E739"></a><a name="index-mkdir_0028_0029"></a>
<a name="index-E739"></a>
</dd>
<dt>mkdir({name} [, {path} [, {prot}]])</dt>
<dd><p>ディレクトリ {name} を作成する。
</p>
<p>{path} が &quot;p&quot; のときは必要に應じて途中のディレクトリも作成される。さうでないときは &quot;&quot; にすること。
</p>
<p>{prot} は作成するディレクトリの保護ビット。デフォルトは 0755 (rwxr-xr-x: 所有者は讀み書き可能、他の人は讀み込み可能)。
</p>
<p>他の人が讀み込めないやうにするには0700とすること。{prot} は {name} の最後の部分にのみ適用される。なので、/tmp/foo/bar を作成すると /tmp/foo は 0755 で作成される。
</p>
<p>例:
</p><div class="example">
<pre class="example">:call mkdir($HOME . &quot;/tmp/foo/bar&quot;, &quot;p&quot;, 0700)
</pre></div>

<p>|<a href="#sandbox">sandbox</a>| の中ではこの函數は使用できない。
</p>
<p>もしもディレクトリがすでに存在し、&quot;p&quot; フラグが渡されてゐるなら、エラーは生じない (patch 8.0.1708 以降)。ただし、&quot;p&quot; オプション未指定だと、呼び出しは失敗する。
</p>
<p>函數の結果は數値である。呼び出しが成功した場合は1、ディレクトリの作成に失敗したか部分的に失敗した場合は 0 である。
</p>
<p>システムによつては利用できない場合がある。これを確認するには次のやうにする:
</p><div class="example">
<pre class="example">:if exists(&quot;*mkdir&quot;)
</pre></div>

<a name="mode_0028_0029"></a><a name="index-mode_0028_0029"></a>
</dd>
<dt>mode([expr])</dt>
<dd><p>現在のモードを示す文字列を返す。
</p>
<p>[expr] に 0 でない數値か空でない文字列 (|<a href="#non_002dzero_002darg">non-zero-arg</a>|) を指定した場合、フルモードが返される。それ以外の場合は最初の 1 文字だけが返される。
</p>
<table>
<tr><td width="30%">n</td><td width="70%">ノーマル、Terminal-Normal</td></tr>
<tr><td width="30%">no</td><td width="70%">オペレータ待機</td></tr>
<tr><td width="30%">nov</td><td width="70%">オペレータ待機 (强制文字單位 |<a href="motion_002etxt.html#o_005fv">o_v</a>|)</td></tr>
<tr><td width="30%">noV</td><td width="70%">オペレータ待機 (强制行單位 |<a href="motion_002etxt.html#o_005fV">o_V</a>|)</td></tr>
<tr><td width="30%">no<kbd>CTRL-V</kbd></td><td width="70%">オペレータ待機 (强制ブロック單位 |<a href="motion_002etxt.html#o_005fCTRL_002dV">o_CTRL-V</a>|); CTRL-V は 1 文字である</td></tr>
<tr><td width="30%">niI</td><td width="70%">|<a href="insert_002etxt.html#Insert_002dmode">Insert-mode</a>| で |<a href="insert_002etxt.html#i_005fCTRL_002dO">i_CTRL-O</a>| を使用してゐるノーマル</td></tr>
<tr><td width="30%">niR</td><td width="70%">|<a href="insert_002etxt.html#Replace_002dmode">Replace-mode</a>| で |<a href="insert_002etxt.html#i_005fCTRL_002dO">i_CTRL-O</a>| を使用してゐるノーマル</td></tr>
<tr><td width="30%">niV</td><td width="70%">|<a href="insert_002etxt.html#Virtual_002dReplace_002dmode">Virtual-Replace-mode</a>| で |<a href="insert_002etxt.html#i_005fCTRL_002dO">i_CTRL-O</a>| を使用してゐるノーマル</td></tr>
<tr><td width="30%">v</td><td width="70%">文字單位ビジュアル</td></tr>
<tr><td width="30%">V</td><td width="70%">行單位ビジュアル</td></tr>
<tr><td width="30%"><kbd>CTRL-V</kbd></td><td width="70%">矩形ビジュアル</td></tr>
<tr><td width="30%">s</td><td width="70%">文字單位選擇</td></tr>
<tr><td width="30%">S</td><td width="70%">行單位選擇</td></tr>
<tr><td width="30%"><kbd>CTRL-S</kbd></td><td width="70%">矩形選擇</td></tr>
<tr><td width="30%">i</td><td width="70%">插入</td></tr>
<tr><td width="30%">ic</td><td width="70%">插入モード補完 |<a href="insert_002etxt.html#compl_002dgeneric">compl-generic</a>|</td></tr>
<tr><td width="30%">ix</td><td width="70%">插入モード |<a href="insert_002etxt.html#i_005fCTRL_002dX">i_CTRL-X</a>| 補完</td></tr>
<tr><td width="30%">R</td><td width="70%">置換 |<a href="change_002etxt.html#R">R</a>|</td></tr>
<tr><td width="30%">Rc</td><td width="70%">置換モード補完 |<a href="insert_002etxt.html#compl_002dgeneric">compl-generic</a>|</td></tr>
<tr><td width="30%">Rv</td><td width="70%">假想置換 |<a href="change_002etxt.html#gR">gR</a>|</td></tr>
<tr><td width="30%">Rx</td><td width="70%">置換モード |<a href="insert_002etxt.html#i_005fCTRL_002dX">i_CTRL-X</a>| 補完</td></tr>
<tr><td width="30%">c</td><td width="70%">コマンドライン編輯</td></tr>
<tr><td width="30%">cv</td><td width="70%">Vim Ex モード |<a href="intro_002etxt.html#gQ">gQ</a>|</td></tr>
<tr><td width="30%">ce</td><td width="70%">ノーマル Ex モード |<a href="intro_002etxt.html#Q">Q</a>|</td></tr>
<tr><td width="30%">r</td><td width="70%">Hit-enter プロンプト</td></tr>
<tr><td width="30%">rm</td><td width="70%">&lsquo;<samp>-- more --</samp>&rsquo; プロンプト</td></tr>
<tr><td width="30%">r?</td><td width="70%">ある種の |<a href="editing_002etxt.html#g_t_003aconfirm">:confirm</a>| 問ひ合はせ</td></tr>
<tr><td width="30%">!</td><td width="70%">シェルまたは外部コマンド實行中</td></tr>
<tr><td width="30%">t</td><td width="70%">Terminal-Job モード: ジョブに渡るキー</td></tr>
</table>
<p>これらはオプション &rsquo;<samp>statusline</samp>&rsquo; の中や、|<a href="#remote_005fexpr_0028_0029">remote_expr()</a>| といつしよに使ふと便利である。他のほとんどの場所では &quot;c&quot; または &quot;n&quot; しか返さない。
</p><blockquote>
<p><strong>Note:</strong> <br>
將來的にはより多くのモードとより多くの特殊なモードが追加されるであらうことに注意。文字列全體を比較することよりも文字列を讀み込むことのみの方が良い。
</p></blockquote>
<p>|<a href="#visualmode_0028_0029">visualmode()</a>| も參照。
</p>
<a name="mzeval_0028_0029"></a><a name="index-mzeval_0028_0029"></a>
</dd>
<dt>mzeval({expr})</dt>
<dd><p>MzScheme の式 {expr} を評價してその結果を Vim の變數に變換した結果を返す。
</p>
<p>數値と文字列はそのまま返る。
</p>
<p>ペア (リストと不適切なリスト (improper list) を含む) とベクタは Vim のリスト (|<a href="#Lists">Lists</a>|) に變換される。
ハッシュテーブルは Vim の辭書 (|<a href="#Dictionary">Dictionary</a>|) に變換され、そのキーは文字列に變換される。
</p>
<p>その他のすべての型は display 函數を使つて文字列に變換される。
</p>
<p>例:
</p><div class="example">
<pre class="example">:mz (define l (list 1 2 3))
:mz (define h (make-hash)) (hash-set! h &quot;list&quot; l)
:echo mzeval(&quot;l&quot;)
:echo mzeval(&quot;h&quot;)
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bmzscheme">+mzscheme</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>
<a name="nextnonblank_0028_0029"></a><a name="index-nextnonblank_0028_0029"></a>
</dd>
<dt>nextnonblank({lnum})</dt>
<dd><p>{lnum} 行以降 ({lnum} 行を含む) の最初の非空行の行番號を返す。例:
</p><div class="example">
<pre class="example">if getline(nextnonblank(1)) =~ &quot;Java&quot;
</pre></div>
<p>{lnum} が無效なときや、それ以降に非空行がないときは 0 を返す。|<a href="#prevnonblank_0028_0029">prevnonblank()</a>| も參照。
</p>
<a name="nr2char_0028_0029"></a><a name="index-nr2char_0028_0029"></a>
</dd>
<dt>nr2char({expr} [, {utf8}])</dt>
<dd><p>コード {expr} で表される1文字からなる文字列を返す。例:
</p><table>
<tr><td width="50%">nr2char(64)</td><td width="50%">&quot;を"返す</td></tr>
<tr><td width="50%">nr2char(32)</td><td width="50%">&quot; &quot;を返す</td></tr>
</table>
<p>{utf8} を省略、またはゼロを指定すると、現在の &rsquo;<samp>encoding</samp>&rsquo; が適用される。&quot;<var>utf-8</var>&quot; の場合の例:
</p><table>
<tr><td width="50%">nr2char(300)</td><td width="50%">短音記號つきの I を返す</td></tr>
</table>
<p>{utf8} に 1 を指定すると、常に utf-8 文字が返る。
</p><blockquote>
<p><strong>Note:</strong> <br>
Vim 內部では、ファイル中の NUL 文字を改行文字 (0x0A) に變換して保持してゐる。そのため、nr2char(10) とすれば NUL 文字を指定できる。nr2char(0) は眞の NUL 文字 (文字列の終端) となるので、空文字列を返す。
</p></blockquote>
<p>文字の數値のリストを文字列に變換するには:
</p><pre class="verbatim">let list = [65, 66, 67]
let str = join(map(list, {_, val -&gt; nr2char(val)}), '')
</pre><p>結果: &quot;ABC&quot;
</p>
<a name="or_0028_0029"></a><a name="index-or_0028_0029"></a>
</dd>
<dt>or({expr}, {expr})</dt>
<dd><p>2 つの引數のビット論理和。引數は數値に變換される。リスト、辭書、浮動小數點數を指定するとエラーになる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let bits = or(bits, 0x80)
</pre></div>


<a name="pathshorten_0028_0029"></a><a name="index-pathshorten_0028_0029"></a>
</dd>
<dt>pathshorten({expr})</dt>
<dd><p>パス {expr} におけるディレクトリ名を短縮して返す。擴張子、ファイル名はそのまま保たれる。パスのその他の構成要素は1文字に縮められる。1 文字目の &rsquo;~&rsquo; と &rsquo;.&rsquo; はそのまま保たれる。例:
</p><div class="example">
<pre class="example">:echo pathshorten('~/.vim/autoload/myfile.vim')
~/.v/a/myfile.vim
</pre></div>
<p>パスが實際に存在するかどうかは關係ない。
</p>
<a name="perleval_0028_0029"></a><a name="index-perleval_0028_0029"></a>
</dd>
<dt>perleval({expr})</dt>
<dd><p>Perl の式 {expr} をスカラーコンテキストで評價して、結果を Vim のデータ形式にして返す。もし値が變換できない場合、Perl における文字列として返される。
</p><blockquote>
<p><strong>Note:</strong> <br>
もし排列かハッシュが必要ならば、{expr} ではそれらへの參照を返す必要がある。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo perleval('[1 .. 4]')
[1, 2, 3, 4]
</pre></div>
</blockquote>

<p>{|<a href="various_002etxt.html#g_t_002bperl">+perl</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>

<p>popup_ 函數については次に說明されてゐます: |<a href="popup_002etxt.html#popup_002dfunctions">popup-functions</a>|
</p>

<a name="pow_0028_0029"></a><a name="index-pow_0028_0029"></a>
</dd>
<dt>pow({x}, {y})</dt>
<dd><p>{x} の {y} 乘を |<a href="#Float">Float</a>| で返す。{x} と {y} は |<a href="#Float">Float</a>| または |<a href="#Number">Number</a>| に評價されなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo pow(3, 3)
27.0
:echo pow(2, 16)
65536.0
:echo pow(32, 0.20)
2.0
</pre></div>

<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="prevnonblank_0028_0029"></a><a name="index-prevnonblank_0028_0029"></a>
</dd>
<dt>prevnonblank({lnum})</dt>
<dd><p>{lnum} 行以前 ({lnum} 行を含む) の最初の非空行の行番號を返す。例:
</p><div class="example">
<pre class="example">let ind = indent(prevnonblank(v:lnum - 1))
</pre></div>
<p>{lnum} が無效なときや、それ以前に非空行がないときは 0 を返す。|<a href="#nextnonblank_0028_0029">nextnonblank()</a>| も參照。
</p>

<a name="printf_0028_0029"></a><a name="index-printf_0028_0029"></a>
</dd>
<dt>printf({fmt}, {expr1} ...)</dt>
<dd><p>{fmt} にしたがつて組み立てた文字列を返す。{fmt} 中の &quot;%&quot; 變換指示子は、對應する引數の値で置き換へられる。例:
</p><div class="example">
<pre class="example">printf(&quot;%4d: E%d %.30s&quot;, lnum, errno, msg)
</pre></div>
<p>結果は次のやうな形になる:
</p><div class="example">
<pre class="example">&quot;  99: E42 asdfasdfasdfasdfasdfasdfasdfas&quot;
</pre></div>

<p>よく使はれる變換指示子は次の通り:
</p><table>
<tr><td width="10%">%s</td><td width="90%">文字列</td></tr>
<tr><td width="10%">%6S</td><td width="90%">6 表示幅で右揃へした文字列</td></tr>
<tr><td width="10%">%6s</td><td width="90%">6 バイトで右揃へした文字列</td></tr>
<tr><td width="10%">%.9s</td><td width="90%">9 バイトに切り詰めた文字列</td></tr>
<tr><td width="10%">%c</td><td width="90%">1 バイト</td></tr>
<tr><td width="10%">%d</td><td width="90%">10 進數値</td></tr>
<tr><td width="10%">%5d</td><td width="90%">スペースで埋めて 5 文字にした 10 進數値</td></tr>
<tr><td width="10%">%x</td><td width="90%">16 進數値</td></tr>
<tr><td width="10%">%04x</td><td width="90%">0 で埋めて少なくとも 4 文字にした 16 進數値</td></tr>
<tr><td width="10%">%X</td><td width="90%">16 進數値 (大文字)</td></tr>
<tr><td width="10%">%o</td><td width="90%">8 進數値</td></tr>
<tr><td width="10%">%08b</td><td width="90%">最低 8 文字の 0 埋めされた 2 進數</td></tr>
<tr><td width="10%">%f</td><td width="90%">浮動小數點數。12.23, inf, -inf, nan</td></tr>
<tr><td width="10%">%F</td><td width="90%">浮動小數點數。12.23, INF, -INF, NAN</td></tr>
<tr><td width="10%">%e</td><td width="90%">浮動小數點數。1.23e3, inf, -inf, nan</td></tr>
<tr><td width="10%">%E</td><td width="90%">浮動小數點數。1.23E3, INF, -INF, NAN</td></tr>
<tr><td width="10%">%g</td><td width="90%">浮動小數點數。値によつて %f または %e となる</td></tr>
<tr><td width="10%">%G</td><td width="90%">浮動小數點數。値によつて %F または %E となる</td></tr>
<tr><td width="10%">%%</td><td width="90%">文字 % そのもの</td></tr>
</table>

<p>變換指示子は &rsquo;%&rsquo; で始まり、變換文字で終はる。それ以外の全ての文字はそのままになる。
</p>
<p>&quot;%&quot; は變換指示子の開始を意味する。以下の順序で引數を指定できる:
</p>
<p>%  [flags]  [field-width]  [.precision]  type
</p>
<dl compact="compact">
<dt>フラグ</dt>
<dd><p>0 個以上の以下のフラグを指定できる
</p>
<table>
<tr><td width="20%">#</td><td width="80%">値を「代替形式」に變換する。變換指示子 c, d, s に對してはこのオプションは效果を持たない。變換指示子 o に對しては數値の精度を上げ、出力文字列の最初の文字が 0 になる。(明示的な精度0で値0が表示されるときを除く)

<p>變換指示子 b と B に對しては、値が 0 でない場合、文字列 &quot;0b&quot; (變換子 B の場合は &quot;0B&quot;) を前につける。
</p>
<p>變換指示子 x と X に對しては、値が 0 でない場合、文字列 &quot;0x&quot; (變換子 X の場合は &quot;0X&quot;) を前につける。
</p></td></tr>
<tr><td width="20%">0 (zero)</td><td width="80%">ゼロパディングする。全ての變換に對し、變換された値の左側を空白でなく 0 で埋める。數値變換 (d, b, B, o, x, X) に對して精度が指定されてゐる場合はフラグ 0 は無視される。</td></tr>
<tr><td width="20%">-</td><td width="80%">負のフィールド幅を示す。變換値がフィールド境界に左揃へされる。變換値の左に空白や 0 がつくのではなく、變換値の右に空白がつく。- と 0 を兩方指定した場合は - が有效になる。</td></tr>
<tr><td width="20%">&rsquo; &rsquo; (space)</td><td width="80%">空白。符號付き變換 (d) で作成される正の數値の前に空白が殘る。</td></tr>
<tr><td width="20%">+</td><td width="80%">+ 文字。符號付き變換で作成される數値の前に常に符號を付ける。+ と&rsquo; &rsquo;(space) を兩方指定した場合は + が有效になる。</td></tr>
</table>

</dd>
<dt>フィールド幅</dt>
<dd><p>10 進數文字列 (省略可)。最低フィールド幅を指定する。變換値のバイト數がこのフィールド幅より少ない場合、左に空白がついて (左揃へフラグを指定した場合は右に空白がついて) フィールドの幅に合はせられる。
</p>
</dd>
<dt>.精度</dt>
<dd><p>ピリオド &rsquo;.&rsquo; の次に數字文字列がつづく形式の精度 (省略可)。數字文字列を省略した場合、精度は 0 になる。d, o, x, X 變換における最低桁數を指定する。また、s 變換における最大バイト數を指定する。浮動小數點數の場合は小數點以下の桁數。
</p>
</dd>
<dt>型</dt>
<dd><p>變換の型を指定する 1 文字。下記を參照。
</p></dd>
</dl>

<p>フィールド幅と精度には、數字文字列の代はりにアスタリスク &rsquo;*&rsquo; を指定できる。その場合、對應する數値の引數がフィールド幅または精度となる。負のフィールド幅を指定すると、絕對値がフィールド幅となり、左揃へフラグがオンになる。負の精度を指定すると、完全に無視される。例:
</p><div class="example">
<pre class="example">:echo printf(&quot;%d: %.*s&quot;, nr, width, line)
</pre></div>
<p>この例は、テキスト &quot;line&quot; の長さを &quot;width&quot; バイトに制限する。
</p>
<p>變換指示子の意味は以下の通り:
</p>
<a name="printf_002dd"></a><a name="printf_002db"></a><a name="printf_002dB"></a><a name="printf_002do"></a><a name="printf_002dx"></a><a name="printf_002dX"></a><a name="index-printf_002dd"></a>
<a name="index-printf_002db"></a>
<a name="index-printf_002dB"></a>
<a name="index-printf_002do"></a>
<a name="index-printf_002dx"></a>
<a name="index-printf_002dX"></a>
<table>
<tr><td width="20%">dbBoxX</td><td width="80%">數値の引數を符號付き 10 進數 (d)、符號なし 2 進數 (b または B)、符號なし 8 進數 (o)、符號なし 16 進數 (x または X) の書式に變換する。x の場合は &quot;abcdef&quot; と小文字を使ひ、X の場合は &quot;ABCDEF&quot; と大文字を使ふ。

<p>精度が指定されてゐれば出力する最小桁數を意味する。變換された値を出力するのにそれ以下しか必要としない場合は、左側にゼロを加へて埋める。
</p>
<p>フィールド幅が存在しない場合や小さすぎる場合でも、數値の幅を切り詰めることは決してない。變換結果がフィールド幅より多くの桁を必要とする場合は、十分な幅に廣げられる。
</p>
<p>モディファイア &rsquo;h&rsquo; は引數が 16 ビット引數である事を示す。
</p>
<p>モディファイア &rsquo;l&rsquo; は引數が 32 ビット引數である事を示す。
</p>
<p>モディファイア &rsquo;L&rsquo; は引數が 64 ビット引數である事を示す。
</p>
<p>一般的にモディファイアは便利ではない。引數から型が分かる時には無視されてしまふ。
</p></td></tr>
<tr><td width="20%">i</td><td width="80%">d のエイリアス</td></tr>
<tr><td width="20%">D</td><td width="80%">ld のエイリアス</td></tr>
<tr><td width="20%">U</td><td width="80%">lu のエイリアス</td></tr>
<tr><td width="20%">O</td><td width="80%">lo のエイリアス

<a name="printf_002dc"></a><a name="index-printf_002dc"></a></td></tr>
<tr><td width="20%">c</td><td width="80%">引數の數値を1バイトに變換し、結果の文字列を書き出す。

<a name="printf_002ds"></a><a name="index-printf_002ds"></a></td></tr>
<tr><td width="20%">s</td><td width="80%">引數の文字列を出力する。精度を指定した場合、その數値以下のバイト數のみを書き出す。

<p>引數が文字列型ではない場合、&quot;<code>:echo</code>&quot; と同じ形式のテキストに自動的に變換される。
<a name="printf_002dS"></a><a name="index-printf_002dS"></a>
</p></td></tr>
<tr><td width="20%">S</td><td width="80%">引數の文字列を出力する。精度を指定した場合、その數値以下の表示幅のみを書き出す。

<a name="printf_002df"></a><a name="E807"></a><a name="index-printf_002df"></a>
<a name="index-E807"></a></td></tr>
<tr><td width="20%">f F</td><td width="80%">Float の引數を 123.456 の形式の文字列に變換する。精度は小數點以下の桁數を指定する。精度が 0 のときは小數點以下は省略される。精度を指定しないときは 6 桁となる。とてつもなく大きい數 (範圍外またはゼロによる除算) のときは %f の場合 &quot;inf&quot; または &quot;-inf&quot; となる (%F の場合は &quot;INF&quot; または &quot;-INF&quot;)。&quot;0.0 / 0.0&quot; は %f の場合 &quot;nan&quot; になる (%F の場合は &quot;NAN&quot;)。
例:
<div class="example">
<pre class="example">echo printf(&quot;%.2f&quot;, 12.115)
12.12
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
丸めはシステムのライブラリに依存する。心配なときは |<a href="#round_0028_0029">round()</a>| を使ふこと。
</p></blockquote>

<a name="printf_002de"></a><a name="printf_002dE"></a><a name="index-printf_002de"></a>
<a name="index-printf_002dE"></a></td></tr>
<tr><td width="20%">e E</td><td width="80%">Float の引數を 1.234e+03 といふ形式 (&rsquo;E&rsquo; のときは 1.234E+03) の文字列に變換する。精度は &rsquo;f&rsquo; の場合と同じく小數點以下の桁數を指定する。

<a name="printf_002dg"></a><a name="printf_002dG"></a><a name="index-printf_002dg"></a>
<a name="index-printf_002dG"></a></td></tr>
<tr><td width="20%">g G</td><td width="80%">0.001 (を含む) から 10000000.0 (を除く) の閒の場合は &rsquo;f&rsquo; の形式で變換し、この閒にない場合は &rsquo;g&rsquo; は &rsquo;e&rsquo;、&rsquo;G&rsquo; は &rsquo;E&rsquo; の形式によつて變換する。精度が指定されないときは餘分なゼロ (小數點の直後のゼロ以外) と &rsquo;+&rsquo; 記號は省かれる。よつて 10000000.0 は 1.0e7 になる。

<a name="printf_002d_0025"></a><a name="index-printf_002d_0025"></a></td></tr>
<tr><td width="20%">%</td><td width="80%">單一の &rsquo;%&rsquo; を書き出す。引數は變換しない。完全な變換指定は &quot;%%&quot; となる。</td></tr>
</table>

<p>數値の引數を受け取る變換指示子には文字列を與へることもできる。變換は自動的に行はれる。
</p>
<p>浮動小數點數または文字列の引數を受け取る變換指示子には、數値を與へることもできる。變換は自動的に行はれる。
</p>
<p>それ以外の型の引數を與へるとエラーメッセージが表示される。
</p>
<a name="E766"></a><a name="E767"></a><a name="index-E766"></a>
<a name="index-E767"></a>
<p>{expr1} 以降の引數の數と &quot;%&quot; 變換指示子の個數がちやうど一致しなければならない。さうでない場合はエラーとなる。引數は最大 18 個まで使へる。
</p>

<a name="prompt_005fsetcallback_0028_0029"></a><a name="index-prompt_005fsetcallback_0028_0029"></a>
</dd>
<dt>prompt_setcallback({buf}, {expr})</dt>
<dd><p>{buf} バッファのためのプロンプトコールバックを {expr} に設定する。{expr} が空文字のとき、コールバックは削除される。{buf} の &rsquo;<samp>buftype</samp>&rsquo; が &quot;<var>prompt</var>&quot; に設定されてゐるときのみ效果がある。
</p>

<p>コールバックは Enter を押した時に呼び出される。カレントバッファは常にプロンプトバッファになる。プロンプトのための改行は、コールバックが發動する前に追加される。したつて、コールバックが呼び出されてゐるプロンプトは、1 行ではない最後になるだらう。
</p>
<p>もしもコールバックがバッファにテキストを追加しようとするなら、最終行の手前に插入されなければならない。そこがカレントプロンプトだから。非同期的に行なへる。
</p>
<p>コールバックは 1 つの引數で呼び出される。この引數はプロンプトで入力されたテキストだ。ユーザーが Enter だけを押した時は、空の文字列になる。
例:
</p><pre class="verbatim">call prompt_setcallback(bufnr(''), function('s:TextEntered'))
func s:TextEntered(text)
  if a:text == 'exit' || a:text == 'quit'
    stopinsert
    close
  else
    call append(line('$') - 1, 'Entered: &quot;' . a:text . '&quot;')
    &quot; Reset 'modified' to allow the buffer to be closed.
    set nomodified
  endif
endfunc
</pre>
<a name="prompt_005fsetinterrupt_0028_0029"></a><a name="index-prompt_005fsetinterrupt_0028_0029"></a>
</dd>
<dt>prompt_setinterrupt({buf}, {expr})</dt>
<dd><p>{expr} するためにバッファ {buf} のコールバックを設定する。{expr} が空文字のときはコールバックは削除される。これは {buf} の &rsquo;<samp>buftype</samp>&rsquo; に &quot;<var>prompt</var>&quot; が設定されてゐるときのみ效果がある。
</p>
<p>このコールバックは插入モードで <kbd>CTRL-C</kbd> を押すことで呼び出される。コールバックの設定がないと、Vim はどのやうなバッファであつても、插入モードを拔けるだらう。
</p>
<a name="prompt_005fsetprompt_0028_0029"></a><a name="index-prompt_005fsetprompt_0028_0029"></a>
</dd>
<dt>prompt_setprompt({buf}, {text})</dt>
<dd><p>{buf} バッファのためのプロンプトを {text} に設定する。{text} の終はりは 1 つのスペースにしたいに違ひない。
</p>
<p>もしも {buf} の &rsquo;<samp>buftype</samp>&rsquo; が &quot;<var>prompt</var>&quot; に設定されてゐるなら、結果は可視のものだけである。例:
</p><div class="example">
<pre class="example">call prompt_setprompt(bufnr(''), 'command: ')
</pre></div>


<a name="prop_005fadd_0028_0029"></a><a name="E965"></a><a name="index-prop_005fadd_0028_0029"></a>
<a name="index-E965"></a>
</dd>
<dt>prop_add({lnum}, {col}, {props})</dt>
<dd><p>{lnum} 行 {col} 桁の位置にテキストプロパティを付加する。{col} はバイト數でカウントされる。最初の桁は 1 を使用する。
</p>
<a name="E966"></a><a name="index-E966"></a>
<p>{lnum} が無效な場合、エラーが發生する。
</p>
<a name="E964"></a><a name="index-E964"></a>
<p>{col} が無效な場合、エラーが發生する。
</p>
<p>{props} は次のフィールドを持つ辭書である:
</p><table>
<tr><td width="30%">length</td><td width="70%">テキストの長さ(バイト)。別の行に續かないプロパティに對してのみ使用できる。0 指定可能。</td></tr>
<tr><td width="30%">end_lnum</td><td width="70%">テキスト終端の行番號</td></tr>
<tr><td width="30%">end_col</td><td width="70%">テキストの直後の桁。&quot;length&quot; が與へられた場合は使用されない。{col} と &quot;end_col&quot; が等しい場合、および &quot;end_lnum&quot; が省略されるか {lnum} と等しい場合、これは幅ゼロのテキストプロパティである。</td></tr>
<tr><td width="30%">bufnr</td><td width="70%">プロパティを追加するバッファ。省略された場合、カレントバッファが使用される</td></tr>
<tr><td width="30%">id</td><td width="70%">プロパティのユーザー定義 ID。省略時は 0 が使はれる</td></tr>
<tr><td width="30%">type</td><td width="70%">テキストプロパティ名</td></tr>
</table>
<p>&quot;type&quot; を除くすべてのフィールドは任意である。
</p>
<p>&quot;length&quot; と &quot;end_lnum&quot; または &quot;end_col&quot; の兩方が與へられるとエラーになる。1 行內のプロパティに &quot;length&quot; または &quot;end_col&quot; を使用するか、複數の行にまたがるプロパティに對して &quot;end_lnum&quot; と&quot;end_col&quot; を使用する。
</p>
<p>&quot;length&quot; または &quot;end_col&quot; のどちらも與へられない場合、プロパティは幅ゼロになる。これは、强調表示されないが、テキストと共にマークのやうに移動することを意味する。
プロパティは、テキストの最後の文字、またはその直後で終はらせることができる。最後のケースでは、テキストが行に追加されると、プロパティタイプに &quot;end_incl&quot; が設定されてゐない場合にも、テキストプロパティのサイズが增える。
</p>
<p>プロパティが追加されたバッファで、&quot;type&quot; が最初に檢索される。見つからない場合は、グローバルプロパティタイプが使用される。見つからなければエラーになる。
</p>
<p>テキストプロパティについては、|<a href="textprop_002etxt.html#text_002dproperties">text-properties</a>| を參照。
</p>

<a name="prop_005fclear_0028_0029"></a><a name="index-prop_005fclear_0028_0029"></a>
</dd>
<dt>prop_clear({lnum} [, {lnum-end} [, {props}]])</dt>
<dd><p>{lnum} 行からすべてのテキストプロパティを削除する。{lnum-end} が指定された場合、{lnum} 行から {lnum-end} (その行を含む) 行までのすべてのテキストプロパティを削除する。
</p>
<p>{props} に &quot;bufnr&quot; 項目が含まれてゐる場合はこのバッファを使用し、さうでない場合はカレントバッファを使用する。
</p>
<p>テキストプロパティについては、|<a href="textprop_002etxt.html#text_002dproperties">text-properties</a>| を參照。
</p>
<a name="prop_005ffind_0028_0029"></a><a name="index-prop_005ffind_0028_0029"></a>
</dd>
<dt>prop_find({props} [, {direction}])</dt>
<dd><div class="display">
<pre class="display">まだ實裝されてゐない。
</pre></div>
<p>{props} で指定されたテキストプロパティを檢索する:
</p><table>
<tr><td width="30%">id</td><td width="70%">プロパティ ID</td></tr>
<tr><td width="30%">type</td><td width="70%">プロパティタイプ名</td></tr>
<tr><td width="30%">bufnr</td><td width="70%">檢索するバッファ。指定時は &quot;lnum&quot; と&quot;col&quot; を指定して開始位置を指定する必要がある。省略された場合、カレントバッファが使用される</td></tr>
<tr><td width="30%">lnum</td><td width="70%">この行から開始する (省略時はカーソル位置で開始)</td></tr>
<tr><td width="30%">col</td><td width="70%">この桁から開始する (省略され &quot;lnum&quot; が指定された場合: 列 1 を使用する。さうでない場合はカーソル位置で開始する)</td></tr>
<tr><td width="30%">skipstart</td><td width="70%">開始位置の一致を見ない</td></tr>
</table>

<p>{direction} は、前方の場合は &quot;f&quot;、後方の場合は &quot;b&quot; となる。省略すると前方檢索が行はれる。
</p>
<p>一致するものが見つかつた場合は、prop_list() と同樣のエントリと &quot;lnum&quot; エントリを倂せた辭書が返される。一致するものが見つからなければ、空の辭書が返される。
</p>
<p>テキストプロパティについては、|<a href="textprop_002etxt.html#text_002dproperties">text-properties</a>| を參照。
</p>

<a name="prop_005flist_0028_0029"></a><a name="index-prop_005flist_0028_0029"></a>
</dd>
<dt>prop_list({lnum} [, {props}])</dt>
<dd><p>{lnum} 行のすべてのテキストプロパティを持つリストを返す。
</p>
<p>{props} に &quot;bufnr&quot; 項目が含まれてゐる場合は、カレントバッファの代はりにこのバッファを使用する。
</p>
<p>プロパティは、開始桁と優先順位によつて順序付けられる。各プロパティは、次のエントリを持つ辭書である:
</p><table>
<tr><td width="30%">col</td><td width="70%">開始桁</td></tr>
<tr><td width="30%">length</td><td width="70%">バイト長。改行が含まれる場合は 1 以上。</td></tr>
<tr><td width="30%">id</td><td width="70%">プロパティ ID</td></tr>
<tr><td width="30%">type</td><td width="70%">プロパティタイプ名。タイプが削除された場合は省略される</td></tr>
<tr><td width="30%">start</td><td width="70%">TRUE の時はプロパティはこの行から始まる</td></tr>
<tr><td width="30%">end</td><td width="70%">TRUE の時はプロパティはこの行で終はる</td></tr>
</table>

<p>&quot;start&quot; が 0 の場合、プロパティは以前の行で開始され、現在行は續きである。
</p>
<p>&quot;end&quot; が 0 の場合、プロパティは次の行に續く。この行の後に改行が含まれる。
</p>
<p>テキストプロパティについては、|<a href="textprop_002etxt.html#text_002dproperties">text-properties</a>| を參照。
</p>

<a name="prop_005fremove_0028_0029"></a><a name="E968"></a><a name="index-prop_005fremove_0028_0029"></a>
<a name="index-E968"></a>
</dd>
<dt>prop_remove({props} [, {lnum} [, {lnum-end}]])</dt>
<dd><p>{lnum} 行から一致するテキストプロパティを削除する。{lnum-end} が指定された場合、{lnum} 行から {lnum-end} (その行を含む) までの一致するテキストプロパティを削除する。{lnum} を省略した場合、一致するテキストプロパティをすべての行から削除する。
</p>
<p>{props} は次のフィールドを持つ辭書である:
</p><table>
<tr><td width="30%">id</td><td width="70%">この ID を持つテキストプロパティを削除する</td></tr>
<tr><td width="30%">type</td><td width="70%">このタイプ名を持つテキストプロパティを削除する</td></tr>
<tr><td width="30%">bufnr</td><td width="70%">カレントバッファの代はりにこのバッファを使ふ</td></tr>
<tr><td width="30%">all</td><td width="70%">TRUE の場合、最初のテキストプロパティだけでなく、一致するテキストプロパティをすべて削除する。</td></tr>
</table>
<p>&quot;id&quot; または &quot;type&quot; のどちらかが一致するとプロパティが一致する。バッファ &quot;bufnr&quot; が存在しない場合はエラーメッセージが表示される。バッファ &quot;bufnr&quot; がロードされてゐなければ、何も起こらない。
</p>
<p>削除されたプロパティの數を返す。
</p>
<p>テキストプロパティについては、|<a href="textprop_002etxt.html#text_002dproperties">text-properties</a>| を參照。
</p>

</dd>
<dt>prop_type_add({name}, {props})</dt>
<dd><a name="prop_005ftype_005fadd_0028_0029"></a><a name="E969"></a><a name="E970"></a><a name="index-prop_005ftype_005fadd_0028_0029"></a>
<a name="index-E969"></a>
<a name="index-E970"></a>
<p>テキストプロパティタイプ {name} を追加する。この名前のプロパティタイプがすでに存在する場合、エラーが發生する。
{props} は、次のオプションフィールドを持つ辭書である:
</p><table>
<tr><td width="30%">bufnr</td><td width="70%">このバッファに對してのみプロパティを定義する。バッファが削除されたときに、名前の衝突を防ぎ、かつ、自動的にプロパティタイプをクリアする</td></tr>
<tr><td width="30%">highlight</td><td width="70%">使用するハイライトグループ名</td></tr>
<tr><td width="30%">priority</td><td width="70%">文字に複數のテキストプロパティがある場合は、優先度が最も高いものが使用される。負の値を使用できる。デフォルトの優先順位は 0 である</td></tr>
<tr><td width="30%">combine</td><td width="70%">TRUE の場合、ハイライトを任意の構文ハイライトと結び付ける。省略するか FALSE の場合は構文ハイライトは使用されない</td></tr>
<tr><td width="30%">start_incl</td><td width="70%">TRUE の場合、開始位置の插入はテキストプロパティに含まれる</td></tr>
<tr><td width="30%">end_incl</td><td width="70%">TRUE の場合、終了位置の插入はテキストプロパティに含まれる</td></tr>
</table>

<p>テキストプロパティについては、|<a href="textprop_002etxt.html#text_002dproperties">text-properties</a>| を參照。
</p>

<a name="prop_005ftype_005fchange_0028_0029"></a><a name="index-prop_005ftype_005fchange_0028_0029"></a>
</dd>
<dt>prop_type_change({name}, {props})</dt>
<dd><p>既存のテキストプロパティタイプのプロパティを變更する。この名前のプロパティが存在しない場合、エラーが發生する。{props} 引數は |<a href="#prop_005ftype_005fadd_0028_0029">prop_type_add()</a>| と似てゐる。
</p>
<p>テキストプロパティについては、|<a href="textprop_002etxt.html#text_002dproperties">text-properties</a>| を參照。
</p>

<a name="prop_005ftype_005fdelete_0028_0029"></a><a name="index-prop_005ftype_005fdelete_0028_0029"></a>
</dd>
<dt>prop_type_delete({name} [, {props}])</dt>
<dd><p>テキストプロパティタイプ {name} を削除する。{name} 型を使用するテキストプロパティがまだ存在する場合、それらは效果を持たず、もはや名前で削除できなくなる。
</p>
<p>{props} には &quot;bufnr&quot; 項目を含めることができる。指定すると、グローバルプロパティタイプではなく、このバッファからプロパティタイプを削除する。
</p>
<p>テキストプロパティタイプ {name} が見つからなくてもエラーにならない。
</p>
<p>テキストプロパティについては、|<a href="textprop_002etxt.html#text_002dproperties">text-properties</a>| を參照。
</p>

<a name="prop_005ftype_005fget_0028_0029"></a><a name="index-prop_005ftype_005fget_0028_0029"></a>
</dd>
<dt>prop_type_get([{name} [, {props}])</dt>
<dd><p>プロパティタイプ {name} のプロパティを返す。これは、prop_type_add() に與へられたものと同じフィールドを持つ辭書である。
</p>
<p>プロパティタイプ {name} が存在しない場合、空の辭書が返される。
</p>
<p>{props} には &quot;bufnr&quot; 項目を含めることができる。指定すると、グローバルプロパティタイプの代はりにこのバッファを使用する。
</p>
<p>テキストプロパティについては、|<a href="textprop_002etxt.html#text_002dproperties">text-properties</a>| を參照。
</p>

<a name="prop_005ftype_005flist_0028_0029"></a><a name="index-prop_005ftype_005flist_0028_0029"></a>
</dd>
<dt>prop_type_list([{props}])</dt>
<dd><p>すべてのプロパティタイプ名のリストを返す。
</p>
<p>{props} には &quot;bufnr&quot; 項目を含めることができる。指定すると、グローバルプロパティタイプの代はりにこのバッファを使用する。
</p>
<p>テキストプロパティについては、|<a href="textprop_002etxt.html#text_002dproperties">text-properties</a>| を參照。
</p>

<a name="pumvisible_0028_0029"></a><a name="index-pumvisible_0028_0029"></a>
</dd>
<dt>pumvisible()</dt>
<dd><p>ポップアップメニューが表示されてゐるときには非 0 を返す。表示されてゐないときは 0 を返す。|<a href="insert_002etxt.html#ins_002dcompletion_002dmenu">ins-completion-menu</a>| を參照。ポップアップメニューを消してしまふやうな操作を避けるために使はれる。
</p>
<a name="py3eval_0028_0029"></a><a name="index-py3eval_0028_0029"></a>
</dd>
<dt>py3eval({expr})</dt>
<dd><p>Python の式 {expr} を評價して、結果を Vim のデータ形式にして返す。
</p>
<p>數値と文字列はそのまま返る (ただし文字列はコピーされ、Unicode から &rsquo;<samp>encoding</samp>&rsquo; に變換される)。
</p>
<p>リストは Vim の |<a href="#List">List</a>| 型に變換される。
</p>
<p>辭書は Vim の |<a href="#Dictionary">Dictionary</a>| 型に變換される。辭書のキーは文字列に變換される。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bpython3">+python3</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<a name="E858"></a><a name="E859"></a><a name="pyeval_0028_0029"></a><a name="index-E858"></a>
<a name="index-E859"></a>
<a name="index-pyeval_0028_0029"></a>
</dd>
<dt>pyeval({expr})</dt>
<dd><p>Python の式 {expr} を評價して、結果を Vim のデータ形式にして返す。
</p>
<p>數値と文字列はそのまま返る (ただし文字列はコピーされる)。
</p>
<p>リストは Vim の |<a href="#List">List</a>| 型に變換される。
</p>
<p>辭書は Vim の |<a href="#Dictionary">Dictionary</a>| 型に變換される。文字列ではない辭書のキーはエラーになる。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bpython">+python</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<a name="pyxeval_0028_0029"></a><a name="index-pyxeval_0028_0029"></a>
</dd>
<dt>pyxeval({expr})</dt>
<dd><p>Python の式 {expr} を評價して、結果を Vim のデータ形式にして返す。
</p>
<p>Python 2 または 3 を使用する。|<a href="if_005fpyth_002etxt.html#python_005fx">python_x</a>| と &rsquo;<samp>pyxversion</samp>&rsquo; を參照。
</p>
<p>|<a href="#pyeval_0028_0029">pyeval()</a>|, |<a href="#py3eval_0028_0029">py3eval()</a>| も參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bpython">+python</a>| または |<a href="various_002etxt.html#g_t_002bpython3">+python3</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<a name="E726"></a><a name="E727"></a><a name="range_0028_0029"></a><a name="index-E726"></a>
<a name="index-E727"></a>
<a name="index-range_0028_0029"></a>
</dd>
<dt>range({expr} [, {max} [, {stride}]])</dt>
<dd><p>以下のやうな數値のリスト |<a href="#List">List</a>| を返す。
</p><ul>
<li> {expr} のみを指定したときは: [0, 1, ..., {expr} - 1]
</li><li> {max} を指定したときは: [{expr}, {expr} + 1, ..., {max}]
</li><li> {stride} を指定したときは: [{expr}, {expr} + {stride}, ..., {max}] ({max} を超えないやうに {expr} を {stride} ずつ增加させる)
</li></ul>
<p>最大値が開始位置より 1 だけ前のときは空リストを返す。最大値が開始位置より 1 以上前のときはエラーになる。
</p>
<p>例:
</p><pre class="verbatim">range(4)                &quot; [0, 1, 2, 3]
range(2, 4)             &quot; [2, 3, 4]
range(2, 9, 3)          &quot; [2, 5, 8]
range(2, -2, -1)        &quot; [2, 1, 0, -1, -2]
range(0)                &quot; []
range(2, 0)             &quot; エラー！
</pre><a name="readdir_0028_0029"></a><a name="index-readdir_0028_0029"></a>
</dd>
<dt>readdir({directory} [, {expr}])</dt>
<dd><p>{directory} 內のファイル名とディレクトリ名のリストを返す。一致數を制限するなど、複雜なことをする必要がない場合は、|<a href="#glob_0028_0029">glob()</a>| を使用することもできる。
</p>
<p>{expr} が省略されるとすべてのエントリが含まれる。
{expr} が與へられると、それは何をすべきかをチェックするために評價される:
</p><ul>
<li> {expr} の結果が -1 の場合、それ以上のエントリは處理されない。
</li><li> {expr} の結果が 0 の場合、このエントリはリストに追加されない。
</li><li> {expr} の結果が 1 の場合、このエントリはリストに追加される。
</li></ul>
<p>{expr} が評價されるたびに &quot;v:val&quot; がエントリ名に設定される。
{expr} が函數の場合、名前は引數として渡される。例へば、&quot;.txt&quot; で終はるファイルのリストを取得するには、次のやうにする:
</p><pre class="verbatim">readdir(dirname, {n -&gt; n =~ '.txt$'})
</pre><p>隱しファイルとバックアップファイルをスキップするには:
</p><pre class="verbatim">readdir(dirname, {n -&gt; n !~ '^\.\|\~$'})
</pre>
<p>ディレクトリツリーを取得したい場合は:
</p><pre class="verbatim">function! s:tree(dir)
    return {a:dir : map(readdir(a:dir),
    \ {_, x -&gt; isdirectory(x) ?
    \          {x : s:tree(a:dir . '/' . x)} : x})}
endfunction
echo s:tree(&quot;.&quot;)
</pre><a name="readfile_0028_0029"></a><a name="index-readfile_0028_0029"></a>
</dd>
<dt>readfile({fname} [, {type} [, {max}]])</dt>
<dd><p>ファイル {fname} を讀み込み、各行を要素とするリスト |<a href="#List">List</a>| を返す。行は NL 文字で終はるものとする。改行文字が CR である Macintosh のファイルは單一の長い行となる (どこかに NL が現れない限り)。
すべての NUL 文字は NL 文字に置換される。{type} が &quot;b&quot; を含む場合、次のやうにバイナリモードになる:
</p><ul>
<li> 最後の行が NLで終はるときは、リストの末尾に餘分な空文字列が追加される。
</li><li> CR 文字を除去しない。
</li></ul>
<p>{type} が &quot;B&quot; を含む場合、ファイルのバイナリデータは變更せずに |<a href="#Blob">Blob</a>| が返される。
バイナリモードでない場合:
</p><ul>
<li> NL の前に現れる CR 文字を除去する。
</li><li> 最後の行が NL で終はるかどうかは關係ない。
</li><li> &rsquo;<samp>encoding</samp>&rsquo; が Unicode のときは UTF-8 のバイトオーダーマークは取り除かれる。
</li></ul>
<p>{max} を指定すると、讀み込む行數の最大値となる。ファイルの最初の 10 行をチェックするときに役に立つ:
</p><div class="example">
<pre class="example">:for line in readfile(fname, '', 10)
:  if line =~ 'Date' | echo line | endif
:endfor
</pre></div>
<p>{max} が負の場合は、ファイルの最後から -{max} 行を讀み込んで返す。ファイルが {max} 行以下の場合は全行を返す。{max} が 0 の場合は空リストを返す。
</p><blockquote>
<p><strong>Note:</strong> <br>
{max} を指定しない場合はファイル全體をメモリに讀み込む。エンコーディング判定も行はないことに注意。必要ならバッファに讀み込むこと。
</p></blockquote>
<p>ファイルを開けないときはエラーメッセージを表示し、空リストを返す。|<a href="#writefile_0028_0029">writefile()</a>| も參照。
</p>
<a name="reg_005fexecuting_0028_0029"></a><a name="index-reg_005fexecuting_0028_0029"></a>
</dd>
<dt>reg_executing()</dt>
<dd><p>實行されてゐるレジスタ名の一文字を返す。實行されてゐるレジスタが無ければ空文字を返す。|<a href="repeat_002etxt.html#g_t_0040">@</a>| を參照。
<a name="reg_005frecording_0028_0029"></a><a name="index-reg_005frecording_0028_0029"></a>
</p></dd>
<dt>reg_recording()</dt>
<dd><p>記錄されてゐるレジスタ名の一文字を返す。記錄が無ければ空文字を返す。|<a href="repeat_002etxt.html#q">q</a>| を參照。
</p>
<a name="reltime_0028_0029"></a><a name="index-reltime_0028_0029"></a>
</dd>
<dt>reltime([{start} [, {end}]])</dt>
<dd><p>時刻値を表す値を返す。値の形式はシステムに依存する。この値を |<a href="#reltimestr_0028_0029">reltimestr()</a>| に渡すと文字列に變換でき、|<a href="#reltimefloat_0028_0029">reltimefloat()</a>| に渡すと浮動小數點數に變換できる。
</p>
<p>引數を指定しないと現在時刻を返す。1 個の引數を指定すると、その引數で指定された時刻からの經過時閒を返す。2 個の引數を指定すると、{start} と {end} の閒の經過時閒を返す。{start} と {end} は reltime() で返される値でなければならない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002breltime">+reltime</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<a name="reltimefloat_0028_0029"></a><a name="index-reltimefloat_0028_0029"></a>
</dd>
<dt>reltimefloat({time})</dt>
<dd><p>{time} の値を代はりに浮動小數點で返す。
</p>
<p>例:
</p><div class="example">
<pre class="example">let start = reltime()
call MyFunction()
let seconds = reltimefloat(reltime(start))
</pre></div>
<p>オーバーヘッドについては reltimestr() の note を參照。|<a href="repeat_002etxt.html#profiling">profiling</a>| も參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002breltime">+reltime</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<a name="reltimestr_0028_0029"></a><a name="index-reltimestr_0028_0029"></a>
</dd>
<dt>reltimestr({time})</dt>
<dd><p>時刻値 {time} を表現する文字列を返す。秒、ドット、マイクロ秒といふ形式になる。例:
</p><div class="example">
<pre class="example">let start = reltime()
call MyFunction()
echo reltimestr(reltime(start))
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
このコマンドにかかるオーバーヘッドがこの時閒に加算される。精度はシステムに依存する。
</p></blockquote>
<p>文字列をきれいに揃へるために、先頭にスペースが插入される。このスペースを取り除くには split() を使へばよい。
</p><div class="example">
<pre class="example">echo split(reltimestr(reltime(start)))[0]
</pre></div>
<p>|<a href="repeat_002etxt.html#profiling">profiling</a>| も參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002breltime">+reltime</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<a name="remote_005fexpr_0028_0029"></a><a name="E449"></a><a name="index-remote_005fexpr_0028_0029"></a>
<a name="index-E449"></a>
</dd>
<dt>remote_expr({server}, {string} [, {idvar} [, {timeout}]])</dt>
<dd><p>{string} を {server} に送信する。{string} は式と見なされ、評價した結果が返つてくる。
戾り値は文字列かリスト |<a href="#List">List</a>| でなければならない。リスト |<a href="#List">List</a>| の場合は要素を連結して文字列に變換される。要素閒の區切りは改行文字となる (join(expr, &quot;\n&quot;) と同樣)。
</p>
<p>もしも {idvar} が存在して空でなければ、それは變數名として受け取られれ、後で |<a href="#remote_005fread_0028_0029">remote_read()</a>| で使はれる {serverid} がその變數に保存される。
</p>
<p>もしも {timeout} が與へられてゐるなら、讀み込み時閒はその秒數まで待つ。さうでなければ、タイムアウトの時閒は 600 秒になる。
</p>
<p>|<a href="remote_002etxt.html#clientserver">clientserver</a>| と |<a href="autocmd_002etxt.html#RemoteReply">RemoteReply</a>| も參照。
|<a href="#sandbox">sandbox</a>| の中ではこの函數は利用できない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bclientserver">+clientserver</a>| 機能付きでコンパイルされたときのみ利用可能}
</p><blockquote>
<p><strong>Note:</strong> <br>
なんらかのエラーが發生した場合は、ローカルでエラーメッセージが表示され、戾り値は空文字列となる。
</p></blockquote>

<p>函數が現在アクティブであるのとは無關係に、變數はグローバルなスコープで評價されるだらう。デバッグモードを除き、ローカル函數の變數と引數は評價されうる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo remote_expr(&quot;gvim&quot;, &quot;2+2&quot;)
:echo remote_expr(&quot;gvim1&quot;, &quot;b:current_syntax&quot;)
</pre></div>

<a name="remote_005fforeground_0028_0029"></a><a name="index-remote_005fforeground_0028_0029"></a>
</dd>
<dt>remote_foreground({server})</dt>
<dd><p>サーバー名 {server} の Vim をフォアグラウンドに移動させる。次を實行するのと同樣である:
</p><div class="example">
<pre class="example">remote_expr({server}, &quot;foreground()&quot;)
</pre></div>
<p>ただし、次の點が異なる: Win32 では、OS が必ずしもサーバーが自分自身をフォアグラウンドにすることを許可しないので、對應策としてクライアントが仕事を行ふ。
</p><blockquote>
<p><strong>Note:</strong> <br>
foreground() と違ひ、最小化されてゐたウィンドウを復元しない。
</p></blockquote>
<p>|<a href="#sandbox">sandbox</a>| の中ではこの函數は利用できない。
</p>
<p>{Win32, Athena, Motif, GTK の GUI 版と Win32 コンソール版でのみ利用可能}
</p>

<a name="remote_005fpeek_0028_0029"></a><a name="index-remote_005fpeek_0028_0029"></a>
</dd>
<dt>remote_peek({serverid} [, {retvar}])</dt>
<dd><p>{serverid} から文字列を取得可能ならば正の數値を返す。變數 {retvar} に返信文字列をコピーする。{retvar} は變數の名前を示す文字列でなければならない。
取得できないならば 0 を返す。なんらかの異狀のときは -1 を返す。|<a href="remote_002etxt.html#clientserver">clientserver</a>| も參照。
</p>
<p>|<a href="#sandbox">sandbox</a>| の中ではこの函數は利用できない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bclientserver">+clientserver</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<p>例:
</p><div class="example">
<pre class="example">:let repl = &quot;&quot;
:echo &quot;PEEK: &quot;.remote_peek(id, &quot;repl&quot;).&quot;: &quot;.repl
</pre></div>

<a name="remote_005fread_0028_0029"></a><a name="index-remote_005fread_0028_0029"></a>
</dd>
<dt>remote_read({serverid}, [{timeout}])</dt>
<dd><p>{serverid} からの返信の中で最も古いものを取り出して返す。取り出した返信はキューから取り除かれる。{timeout} が與へられてゐなければ、返信を取り出せるやうになるまで待機する。|<a href="remote_002etxt.html#clientserver">clientserver</a>| も參照。
</p>
<p>|<a href="#sandbox">sandbox</a>| の中ではこの函數は利用できない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bclientserver">+clientserver</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo remote_read(id)
</pre></div>
<a name="remote_005fsend_0028_0029"></a><a name="E241"></a><a name="index-remote_005fsend_0028_0029"></a>
<a name="index-E241"></a>
</dd>
<dt>remote_send({server}, {string} [, {idvar}])</dt>
<dd><p>{string} を {server} に送信する。{string} はキー入力として解釋され、この函數の呼び出しは卽座に戾つてくる。Vim サーバーにおいて、受け取つたキー入力はマッピング展開されない。|<a href="map_002etxt.html#g_t_003amap">:map</a>|
{idvar} には變數名を指定する。後で remote_read() で使はれる {serverid} がその變數に保存される。|<a href="remote_002etxt.html#clientserver">clientserver</a>| と |<a href="autocmd_002etxt.html#RemoteReply">RemoteReply</a>| も參照。
</p>
<p>|<a href="#sandbox">sandbox</a>| の中ではこの函數は利用できない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bclientserver">+clientserver</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<blockquote>
<p><strong>Note:</strong> <br>
なんらかのエラーが發生すると、サーバー側で報告され、表示が亂れてしまふかもしれない。
</p>
<p>例:
</p><pre class="verbatim">:echo remote_send(&quot;gvim&quot;, &quot;:DropAndReply &quot;.file, &quot;serverid&quot;).
 \ remote_read(serverid)

:autocmd NONE RemoteReply *
 \ echo remote_read(expand(&quot;&lt;amatch&gt;&quot;))
:echo remote_send(&quot;gvim&quot;, &quot;:sleep 10 | echo &quot;.
 \ 'server2client(expand(&quot;&lt;client&gt;&quot;), &quot;HELLO&quot;)&lt;CR&gt;')
</pre></blockquote>
<a name="remote_005fstartserver_0028_0029"></a><a name="E941"></a><a name="E942"></a><a name="index-remote_005fstartserver_0028_0029"></a>
<a name="index-E941"></a>
<a name="index-E942"></a>
</dd>
<dt>remote_startserver({name})</dt>
<dd><p>サーバー {name} になる。|<a href="#v_003aservername">v:servername</a>| が空でないときに、すでにサーバーとして動作してゐるのであれば失敗する。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bclientserver">+clientserver</a>| 機能付きでコンパイルされたときのみ利用可能}
</p>
<a name="remove_0028_0029"></a><a name="index-remove_0028_0029"></a>
</dd>
<dt>remove({list}, {idx} [, {end}])</dt>
<dd><p>{end} を指定しなかつた場合: リスト |<a href="#List">List</a>| {list} から {idx} 位置の要素を削除し、その要素を返す。
</p>
<p>{end} を指定した場合: {idx} から {end} まで (兩端を含む) の要素を削除し、それらの要素からなるリストを返す。
</p>
<p>{idx} と {end} が同じ要素を指す場合、1 個の要素からなるリストが返る。{end} が {idx} より前になる場合、エラーとなる。
</p>
<p>{idx} と {end} として指定できる値については |<a href="#list_002dindex">list-index</a>| を參照。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo &quot;last item: &quot; . remove(mylist, -1)
:call remove(mylist, 0, 9)
</pre></div>
<p>ファイルを削除するには |<a href="#delete_0028_0029">delete()</a>| を使ふ。
</p>
</dd>
<dt>remove({blob}, {idx} [, {end}])</dt>
<dd><p>{end} を指定しなかつた場合: |<a href="#Blob">Blob</a>| {blob} から {idx} 位置のバイトを削除し、そのバイトを返す。
</p>
<p>{end} を指定した場合: {idx} から {end} まで (兩端を含む) のバイトを削除し、それらのバイトを |<a href="#Blob">Blob</a>| で返す。{idx} と {end} が同じバイトを指す場合、1個のバイトからなる |<a href="#Blob">Blob</a>| が返る。{end} が {idx} より前になる場合、エラーとなる。
</p>
<p>例:
</p><pre class="verbatim">:echo &quot;last byte: &quot; . remove(myblob, -1)
:call remove(mylist, 0, 9)
</pre>
</dd>
<dt>remove({dict}, {key})</dt>
<dd><p>{dict} からキー {key} を持つ要素を削除する。例:
</p><div class="example">
<pre class="example">:echo &quot;removed &quot; . remove(dict, &quot;one&quot;)
</pre></div>
<p>{dict} に {key} がない場合はエラーになる。
</p>
<a name="rename_0028_0029"></a><a name="index-rename_0028_0029"></a>
</dd>
<dt>rename({from}, {to})</dt>
<dd><p>ファイルの名前を {from} から {to} へ變へる。ファイルシステムを越えてファイルを移動するのにも使用できる。結果は數値で、成功すれば 0、失敗すれば非ゼロになる。
</p><blockquote>
<p><strong>Note:</strong> <br>
ファイル {to} がすでに存在する場合、警告なしに上書きされる。|<a href="#sandbox">sandbox</a>| の中ではこの函數は利用できない。
</p></blockquote>

<a name="repeat_0028_0029"></a><a name="index-repeat_0028_0029"></a>
</dd>
<dt>repeat({expr}, {count})</dt>
<dd><p>{expr} を {count} 回繰り返し、連結して返す。例:
</p><div class="example">
<pre class="example">:let separator = repeat('-', 80)
</pre></div>
<p>{count} が 0 または負のときは空文字列を返す。{expr} がリスト |<a href="#List">List</a>| のときは {count} 回連結した結果を返す。例:
</p><div class="example">
<pre class="example">:let longlist = repeat(['a', 'b'], 3)
</pre></div>
<p>結果は [&rsquo;a&rsquo;, &rsquo;b&rsquo;, &rsquo;a&rsquo;, &rsquo;b&rsquo;, &rsquo;a&rsquo;, &rsquo;b&rsquo;] となる。
</p>

<a name="resolve_0028_0029"></a><a name="E655"></a><a name="index-resolve_0028_0029"></a>
<a name="index-E655"></a>
</dd>
<dt>resolve({filename})</dt>
<dd><p>MS-Windows では {filename} がショートカット (.lnkファイル) ならばその指す先を單純化した形式で返す。
</p>
<p>{filename} がシンボリックリンクまたはジャンクションポイントの場合は、ターゲットへのフルパスを返す。ジャンクションのターゲットが削除されたら、{filename} を返す。
</p>
<p>Unix ではパス {filename} の中の全てのシンボリックリンクを解決し、單純化して返す。循環リンクがある場合に備へて、シンボリックリンクの解決は 100 回までに制限されてゐる。
</p>
<p>その他のシステムでは {filename} を單純化して返す。單純化の手順は |<a href="#simplify_0028_0029">simplify()</a>| と同じである。resolve() は (結果も相對パスであるならば) カレントディレクトリを表す先頭のパスコンポーネントと、末尾のパス區切り文字をそのままにする。
</p>
<a name="reverse_0028_0029"></a><a name="index-reverse_0028_0029"></a>
</dd>
<dt>reverse({object})</dt>
<dd><p>{object} の要素の順序をその場で (in-place) 反轉させる。{object} は |<a href="#List">List</a>| または |<a href="#Blob">Blob</a>| である。{object} そのものを返す。
</p>
<p>オブジェクトを變更させないでおくには、最初にコピーを作る:
</p><div class="example">
<pre class="example">:let revlist = reverse(copy(mylist))
</pre></div>

</dd>
<dt>round({expr})</dt>
<dd><a name="round_0028_0029"></a><a name="index-round_0028_0029"></a>
<p>{expr} を最も近い整數に丸め、|<a href="#Float">Float</a>| を返す。{expr} が 2 つの整數の眞ん中にある場合、大きい方 (0 から遠い方) になる。{譯注: つまり四捨五入になる}
</p>
<p>{expr} は |<a href="#Float">Float</a>| または |<a href="#Number">Number</a>| に評價されなければならない。
例:
</p><div class="example">
<pre class="example">echo round(0.456)
0.0
echo round(4.5)
5.0
echo round(-4.5)
-5.0
</pre></div>

<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="rubyeval_0028_0029"></a><a name="index-rubyeval_0028_0029"></a>
</dd>
<dt>rubyeval({expr})</dt>
<dd><p>Ruby の式 {expr} を評價し、その結果を Vim のデータ構造に變換したものを返す。
</p>
<p>數値、浮動小數點數、文字列はそのまま返される (文字列はコピーされる)。
排列は Vim の |<a href="#List">List</a>| 型に變換される。
</p>
<p>ハッシュは Vim の |<a href="#Dictionary">Dictionary</a>| 型に變換される。
</p>
<p>それ以外のオブジェクトは &quot;Object#to_s&quot; メソッドの結果の文字列として表現される。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bruby">+ruby</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="screenattr_0028_0029"></a><a name="index-screenattr_0028_0029"></a>
</dd>
<dt>screenattr({row}, {col})</dt>
<dd><p>|<a href="#screenchar_0028_0029">screenchar()</a>| と同樣だが、屬性を返す。これは他の位置の屬性と比較するのに利用できるだけの適當な數値である。
</p>
<a name="screenchar_0028_0029"></a><a name="index-screenchar_0028_0029"></a>
</dd>
<dt>screenchar({row}, {col})</dt>
<dd><p>スクリーン上の位置 [row, col] の文字を數値で返す。これは全てのスクリーン位置、ステータスライン、ウィンドウセパレータ、コマンドラインで機能する。左上の位置は行番號が 1、列番號が 1 である。文字は合成文字を除く。2 バイトのエンコーディングでは最初のバイトだけであるかもしれない。
</p>
<p>この函數は主にテスト用に使はれる。row か col が範圍外である場合は -1 を返す。
</p>
<a name="screenchars_0028_0029"></a><a name="index-screenchars_0028_0029"></a>
</dd>
<dt>screenchars({row}, {col})</dt>
<dd><p>結果は數値のリスト。最初の數値は |<a href="#screenchar_0028_0029">screenchar()</a>| が返す數値と同一。それ以降の數値は基底文字に續く合成文字の數値。
</p>
<p>この函數は主にテスト用。
</p>
<p>row や col が範圍外である場合は空のリストを返す。
</p>
<a name="screencol_0028_0029"></a><a name="index-screencol_0028_0029"></a>
</dd>
<dt>screencol()</dt>
<dd><p>現在のカーソルのスクリーン列を數値で返す。一番左の列番號は 1。この函數は主にテスト用。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
常に現在のスクリーン列を返す。したがつて、コマンドで使はれた場合 (例へば &quot;:echo screencol()&quot;) は、コマンドライン內の列を返す (つまりコマンドが實行されたときその値は 1)。ファイル內でのカーソル位置を取得するには次のやうなマップを使用する:
</p><div class="example">
<pre class="example">nnoremap &lt;expr&gt; GG &quot;:echom &quot;.screencol().&quot;\n&quot;
nnoremap &lt;silent&gt; GG :echom screencol()&lt;CR&gt;
</pre></div>
</blockquote>
<a name="screenpos_0028_0029"></a><a name="index-screenpos_0028_0029"></a>
</dd>
<dt>screenpos({winid}, {lnum}, {col})</dt>
<dd><p>結果は辭書です。バッファの {lnum} 行 と {col} 桁における、{winid} ウィンドウ內のテキスト文字のスクリーンの位置です。{col} は 1 からはじまるバイトのインデックスです。
辭書の內容は次のものです:
</p><table>
<tr><td width="30%">row</td><td width="70%">スクリーン行</td></tr>
<tr><td width="30%">col</td><td width="70%">最初のスクリーン桁</td></tr>
<tr><td width="30%">endcol</td><td width="70%">最後のスクリーン桁</td></tr>
<tr><td width="30%">curscol</td><td width="70%">カーソルのスクリン桁</td></tr>
</table>
<p>もしも指定された位置が不可視なら、すべての値はゼロです。文字が 1 つのスクリーンセルよりも大きいときは、&quot;<var>endcol</var>&quot; の値は &quot;<var>col</var>&quot; とは異なります。例: 1 つのタブ &quot;<var>col</var>&quot; は 1 になり、&quot;<var>endcol</var>&quot; は 8 になります。
&quot;<var>curscol</var>&quot; の値はカーソルが置かれる場所です。1 つのタブは &quot;<var>endcol</var>&quot; と同じになります。一方でダブル幅文字については &quot;<var>col</var>&quot; と同じになります。
</p>
<a name="screenrow_0028_0029"></a><a name="index-screenrow_0028_0029"></a>
</dd>
<dt>screenrow()</dt>
<dd><p>現在のカーソルのスクリーン行を數値で返す。一番上の行番號は 1。この函數は主にテスト用。代用として |<a href="#winline_0028_0029">winline()</a>| を使ふ事ができる。
</p><blockquote>
<p><strong>Note:</strong> <br>
|<a href="#screencol_0028_0029">screencol()</a>| と同樣の制約あり。
</p></blockquote>

<a name="screenstring_0028_0029"></a><a name="index-screenstring_0028_0029"></a>
</dd>
<dt>screenstring({row}, {col})</dt>
<dd><p>結果は文字列で、スクリーンの位置 [row, col] の基底文字と合成文字全てを含む。|<a href="#screenchars_0028_0029">screenchars()</a>| と似てゐるが文字を文字列として返す。
</p>
<p>この函數は主にテスト用。
</p>
<p>row や col が範圍外である場合は空文字列を返す。
</p>
<a name="search_0028_0029"></a><a name="index-search_0028_0029"></a>
</dd>
<dt>search({pattern} [, {flags} [, {stopline} [, {timeout}]]])</dt>
<dd><p>正規表現パターン {pattern} を檢索する。檢索はカーソル位置から開始する (檢索位置を指定するには |<a href="#cursor_0028_0029">cursor()</a>| を使へばよい)。
</p>
<p>マッチが見つかつた場合はその行番號を返す。マッチがない場合は 0 を返し、カーソルは移動しない。エラーメッセージは表示されない。
</p>
<p>{flags} は以下のフラグ文字からなる文字列:
</p><table>
<tr><td width="10%">&rsquo;b&rsquo;</td><td width="90%">後方 (上方) に檢索する</td></tr>
<tr><td width="10%">&rsquo;c&rsquo;</td><td width="90%">カーソル位置のマッチを受け入れる</td></tr>
<tr><td width="10%">&rsquo;e&rsquo;</td><td width="90%">マッチの末尾へ移動する</td></tr>
<tr><td width="10%">&rsquo;n&rsquo;</td><td width="90%">カーソルを移動させない</td></tr>
<tr><td width="10%">&rsquo;p&rsquo;</td><td width="90%">部分パターン (後述) のマッチの番號を返す</td></tr>
<tr><td width="10%">&rsquo;s&rsquo;</td><td width="90%">以前のカーソル位置をマーク &rsquo; に記錄する</td></tr>
<tr><td width="10%">&rsquo;w&rsquo;</td><td width="90%">ファイルの末尾で循環する</td></tr>
<tr><td width="10%">&rsquo;W&rsquo;</td><td width="90%">ファイルの末尾で循環しない</td></tr>
<tr><td width="10%">&rsquo;z&rsquo;</td><td width="90%">0桁目からではなく、カーソル位置の桁から檢索を開始する</td></tr>
</table>
<p>&rsquo;w&rsquo; と &rsquo;W&rsquo; の兩方とも指定されない場合は &rsquo;<samp>wrapscan</samp>&rsquo; が適用される。
</p>
<p>フラグ &rsquo;s&rsquo; が指定された場合、カーソルが移動したときのみマーク &rsquo; が設定される。フラグ &rsquo;s&rsquo; は &rsquo;n&rsquo; と組み合はせることはできない。
</p>
<p>&rsquo;<samp>ignorecase</samp>&rsquo;, &rsquo;<samp>smartcase</samp>&rsquo;, &rsquo;<samp>magic</samp>&rsquo; が適用される。
</p>
<p>フラグ &rsquo;z&rsquo; が指定されない場合、常に0列目から開始して檢索する。そして、カーソルの前にあるマッチはスキップされる。&rsquo;cpo&rsquo; 內に &rsquo;c&rsquo; フラグが存在する場合、次の檢索はそのマッチの後から始まる。&rsquo;cpo&rsquo; 內に &rsquo;c&rsquo; フラグが存在しない場合、次の檢索は現在のカーソル位置から 1 桁進んで始まる。
</p>
<p>引數 {stopline} が指定されたときはこの行を檢索した後で檢索を停止する。これは檢索する行を制限するために有用である。例:
</p><div class="example">
<pre class="example">let match = search('(', 'b', line(&quot;w0&quot;))
let end = search('END', '', line(&quot;w$&quot;))
</pre></div>
<p>{stopline} に 0 でない値が指定されたときは、暗默にファイルの末尾で循環しなくなる。
</p>
<p>0 の値は、引數を省略したときと同じになる。
</p>
<p>{timeout} が指定された場合、そのミリ秒が經過したところで檢索が停止する。つまり、{timeout} が 500 なら檢索は 500 ミリ秒で停止する。この値は負であつてはならない。0 の値は、引數を省略したときと同じになる。
</p>
<p>{|<a href="various_002etxt.html#g_t_002breltime">+reltime</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="search_0028_0029_002dsub_002dmatch"></a><a name="index-search_0028_0029_002dsub_002dmatch"></a>
<p>フラグ &rsquo;p&rsquo; を指定すると、戾り値は \(\) によるグループ化のうち最初にマッチしたものの番號プラス 1 となる。パターン全體はマッチしたがどのグループもマッチしなかつたときは 1 を返す。桁番號を取得するには |<a href="#searchpos_0028_0029">searchpos()</a>| を使ふ。
</p>
<p>フラグ &rsquo;n&rsquo; が指定されてゐない場合、マッチ位置にカーソルが移動する。
</p>
<p>例 (引數リストの全ファイルにわたつて檢索して置換する):
</p><pre class="verbatim">:let n = 1
:while n &lt;= argc()   &quot; arglist中の全ファイルに對してループ
:  exe &quot;argument &quot; . n
:  &quot; ファイルの最後の文字から開始し、循環してファイルの
:  &quot; 最初から檢索する
:  normal G$
:  let flags = &quot;w&quot;
:  while search(&quot;foo&quot;, flags) &gt; 0
:    s/foo/bar/g
:        let flags = &quot;W&quot;
:  endwhile
:  update           &quot; 修正されてゐればファイルを保存する
:  let n = n + 1
:endwhile
</pre><p>フラグの使ひ方の例:
</p><div class="example">
<pre class="example">:echo search('\&lt;if\|\(else\)\|\(endif\)', 'ncpe')
</pre></div>
<p>このコマンドは、カーソル下の文字以降からキーワード &quot;if&quot;, &quot;else&quot;, &quot;endif&quot; のいづれかを檢索する。フラグ &rsquo;p&rsquo; により、どのキーワードが見つかつたかに應じて 1, 2, 3 を返す。見つからなかつたときは 0 を返す。次の行の最初の單語にカーソルをおいて上のコマンドを實行すると:
</p><div class="example">
<pre class="example">if (foo == 0) | let foo = foo + 1 | endif
</pre></div>
<p>1 が返る。フラグ &rsquo;c&rsquo; を外すと &quot;endif&quot; にマッチし 3 を返すやうになる。カーソルを &quot;if&quot; の &quot;f&quot; の上におき、フラグ &rsquo;e&rsquo; を外して實行しても同じく3が返る。フラグ &rsquo;n&rsquo; によりカーソルは移動しない。
</p>

<a name="searchdecl_0028_0029"></a><a name="index-searchdecl_0028_0029"></a>
</dd>
<dt>searchdecl({name} [, {global} [, {thisblock}]])</dt>
<dd><p>{name} の宣言を檢索する。
</p>
<p>{global} が 0 でないときは |<a href="pattern_002etxt.html#gD">gD</a>| と同じやうにファイル中の最初のマッチを探す。さうでないときは |<a href="pattern_002etxt.html#gd">gd</a>| と同じ動作になり、現在の函數內から最初のマッチを探す。
</p>
<p>{thisblock} が 0 でないときはカーソル位置より前の位置で閉ぢてゐる {} ブロックを無視し、そのスコープ內でだけ有效な變數宣言にマッチしないやうになる。
</p>
<p>マッチを見つけるとその位置へカーソルを移動する。成功すると0を返し、失敗すると非0を返す。
</p>
<p>例:
</p><div class="example">
<pre class="example">if searchdecl('myvar') == 0
   echo getline('.')
endif
</pre></div>
<a name="searchpair_0028_0029"></a><a name="index-searchpair_0028_0029"></a>
</dd>
<dt>searchpair({start}, {middle}, {end} [, {flags} [, {skip} [, {stopline} [, {timeout}]]]])</dt>
<dd><p>ネストした start・end のペアを檢索する。これを使ふと、&quot;if&quot; に對應する &quot;endif&quot; を見つけることができる。それらの閒にある他の if・endif のペアは無視される。
</p>
<p>檢索はカーソル位置から開始する。デフォルトでは下方に檢索する。
</p>
<p>{flags} に &rsquo;b&rsquo; が含まれてゐると上方に檢索する。マッチが見つかると、その位置へカーソルを移動し、行番號を返す。マッチが見つからなかつたときは 0 または -1 を返し、カーソルは移動しない。エラーメッセージは表示されない。
</p>
<p>{start}、{middle}、{end} は正規表現である。|<a href="pattern_002etxt.html#pattern">pattern</a>| を參照。この正規表現に \( \) のペアを含めてはならない。\%( \) は含めてもよい。{middle} はネストした start・end ペアの中にないときのみマッチする。典型的な使用例:
</p><div class="example">
<pre class="example">searchpair('\&lt;if\&gt;', '\&lt;else\&gt;', '\&lt;endif\&gt;')
</pre></div>
<p>ここで {middle} を空にすると &quot;else&quot; をスキップするやうになる。
</p>
<p>{flags} には |<a href="#search_0028_0029">search()</a>| と同樣に &rsquo;b&rsquo;, &rsquo;c&rsquo;, &rsquo;n&rsquo;, &rsquo;s&rsquo;, &rsquo;w&rsquo;, &rsquo;W&rsquo; が使へる。それに加へて以下のフラグが利用できる。
</p><table>
<tr><td width="10%">&rsquo;r&rsquo;</td><td width="90%">それ以上マッチが見つからなくなるまで繰り返す。つまり最も外側のペアを探す。&rsquo;W&rsquo; も自動的にオンになる。</td></tr>
<tr><td width="10%">&rsquo;m&rsquo;</td><td width="90%">マッチ位置の行番號でなくマッチの個數を返す。&rsquo;r&rsquo; を使つてゐるときは &gt; 1 となる。</td></tr>
</table>
<blockquote>
<p><strong>Note:</strong> <br>
ほとんど常に &rsquo;W&rsquo; を使つてファイルの末尾で循環しないやうにするのがよい考へである。
</p></blockquote>

<p>{start}、{middle}、{end} のマッチが見つかると、マッチの開始位置にカーソルを移動し、式 {skip} を評價する。このマッチがコメントや文字列の內側にある場合など、無視したいものであれば式 {skip} が非 0 を返すやうにする。
</p>
<p>{skip} を省略した、または空のときはどのマッチも無視しない。
</p>
<p>{skip} を評價してゐる最中にエラーが發生すると、檢索は異常終了し -1 を返す。
</p>
<p>{skip} は文字列、ラムダ、函數參照、部分適用になることができる。
</p>
<p>他のものでは函數が失敗する。
</p>
<p>{stopline} と {timeout} については |<a href="#search_0028_0029">search()</a>| を參照。
</p>
<p>&rsquo;<samp>ignorecase</samp>&rsquo; の値が適用される。&rsquo;<samp>magic</samp>&rsquo; の値は無視され、オンのときと同じ樣に動作する。
</p>
<p>檢索はカーソル位置から開始する。檢索方向の次の文字における {start}、{middle}、{end} のマッチが最初に見つかる。例:
</p><div class="example">
<pre class="example">if 1
  if 2
  endif 2
endif 1
</pre></div>
<p>カーソルが &quot;if 2&quot; の &quot;i&quot; の上にある狀態から下方に檢索を開始すると &quot;endif 2&quot; にマッチする。&quot;if 2&quot; の直前の文字の上から檢索を開始すると &quot;endif 1&quot; にマッチする。これは、&quot;if 2&quot; が最初に見つかり、&quot;if 2&quot; から &quot;endif 2&quot; までがネストしたペアと見なされるためである。
</p>
<p>上方檢索で、{end} が 2 文字以上であるときはパターンの最後に &quot;\zs&quot; をつけるとよいかもしれない。するとカーソルが end のマッチの內側にあるとき、對應する start を見つけるやうになる。
</p>
<p>例: Vim script の &quot;endif&quot; コマンドを見つけるには:
</p><div class="example">
<pre class="example">:echo searchpair('\&lt;if\&gt;', '\&lt;el\%[seif]\&gt;', '\&lt;en\%[dif]\&gt;', 'W',
                \ 'getline(&quot;.&quot;) =~ &quot;^\\s*\&quot;&quot;')
</pre></div>

<p>これを使ふには、マッチを見つけたい &quot;if&quot; の上、またはそれ以降にカーソルを置くこと。
</p><blockquote>
<p><strong>Note:</strong> <br>
バックスラッシュを二重にしなくてもよいやうにシングルクォート文字列を使つてゐる。式 skip により、コメントだけの行を無視するやうにしてゐる。コマンドの後のコメントは無視してゐない。また、行の途中の &quot;en&quot; や &quot;if&quot; といふ單語にマッチしてしまふ。
</p></blockquote>

<p>もう 1 つの例: &quot;}&quot; に對應する &quot;{&quot; を檢索する:
</p><div class="example">
<pre class="example">:echo searchpair('{', '', '}', 'bW')
</pre></div>

<p>これを使ふには、マッチを見つけたい &quot;}&quot; の上、または前にカーソルを置くこと。構文ハイライトにより文字列と見なされるマッチを無視するには次のやうにする:
</p><div class="example">
<pre class="example">:echo searchpair('{', '', '}', 'bW',
     \ 'synIDattr(synID(line(&quot;.&quot;), col(&quot;.&quot;), 0), &quot;name&quot;) =~? &quot;string&quot;')
</pre></div>
<a name="searchpairpos_0028_0029"></a><a name="index-searchpairpos_0028_0029"></a>
</dd>
<dt>searchpairpos({start}, {middle}, {end} [, {flags} [, {skip} [, {stopline} [, {timeout}]]]])</dt>
<dd><p>|<a href="#searchpair_0028_0029">searchpair()</a>| と同樣だが、マッチの行番號と桁番號からなるリスト |<a href="#List">List</a>| を返す。このリスト |<a href="#List">List</a>| の最初の要素は行番號で、次の要素はマッチの桁位置のバイトインデックスである。マッチが見つからなかつた場合は [0, 0] を返す。
</p><div class="example">
<pre class="example">:let [lnum,col] = searchpairpos('{', '', '}', 'n')
</pre></div>
<p>より大規模で役に立つ例に關しては |<a href="tips_002etxt.html#match_002dparens">match-parens</a>| を參照。
</p>
<a name="searchpos_0028_0029"></a><a name="index-searchpos_0028_0029"></a>
</dd>
<dt>searchpos({pattern} [, {flags} [, {stopline} [, {timeout}]]])</dt>
<dd><p>|<a href="#search_0028_0029">search()</a>| と同樣だが、マッチの行番號と桁番號からなるリスト |<a href="#List">List</a>| を返す。このリスト |<a href="#List">List</a>| の最初の要素は行番號で、次の要素はマッチの桁位置のバイトインデックスである。マッチが見つからなかつた場合は [0, 0] を返す。
例:
</p><div class="example">
<pre class="example">:let [lnum, col] = searchpos('mypattern', 'n')
</pre></div>

<p>フラグ &rsquo;p&rsquo; を指定すると、戾り値にサブパターンのマッチ番號を示す要素が加はる |<a href="#search_0028_0029_002dsub_002dmatch">search()-sub-match</a>|。例:
</p><div class="example">
<pre class="example">:let [lnum, col, submatch] = searchpos('\(\l\)\|\(\u\)', 'np')
</pre></div>
<p>この例において、&quot;submatch&quot; は小文字 |<a href="pattern_002etxt.html#g_t_002f_005cl">/\l</a>| が見つかつたとき2となり、大文字 |<a href="pattern_002etxt.html#g_t_002f_005cu">/\u</a>| が見つかつたとき 3 となる。
</p>
<a name="server2client_0028_0029"></a><a name="index-server2client_0028_0029"></a>
</dd>
<dt>server2client({clientid}, {string})</dt>
<dd><p>{clientid} に返信文字列を送る。最後に文字列を送つた {clientid} は expand(&quot;&lt;client&gt;&quot;) で取得できる。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bclientserver">+clientserver</a>| 機能付きでコンパイルしたときのみ利用可能}
</p><blockquote>
<p><strong>Note:</strong> <br>
この ID は次のコマンドを受け取る前に取得しなければならない。つまり、受け取つたコマンドから戾る前で、入力を待つコマンドを呼ぶ前。|<a href="remote_002etxt.html#clientserver">clientserver</a>| も參照。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo server2client(expand(&quot;&lt;client&gt;&quot;), &quot;HELLO&quot;)
</pre></div>
</blockquote>
<a name="serverlist_0028_0029"></a><a name="index-serverlist_0028_0029"></a>
</dd>
<dt>serverlist()</dt>
<dd><p>利用可能なサーバー名のリストを返す。1 行に 1 つの形式。サーバーが 1 つもないとき、または情報を取得できないときは空文字列を返す。|<a href="remote_002etxt.html#clientserver">clientserver</a>| も參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bclientserver">+clientserver</a>| 機能付きでコンパイルしたときのみ利用可能}
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo serverlist()
</pre></div>
<a name="setbufline_0028_0029"></a><a name="index-setbufline_0028_0029"></a>
</dd>
<dt>setbufline({expr}, {lnum}, {text})</dt>
<dd><p>バッファ {expr} の {text} に行 {lnum} を設定する。行を插入するには |<a href="#append_0028_0029">append()</a>| を使ふ。{lnum} 內のテキストプロパティはすべて消去される。
</p>
<p>{expr} の使ひ方については、上記の |<a href="#bufname_0028_0029">bufname()</a>| を參照。
</p>
<p>{lnum} は |<a href="#setline_0028_0029">setline()</a>| と同じやうに使はれる。明示されたバッファへの |<a href="#setline_0028_0029">setline()</a>| と同じやうに働く。
</p>
<p>{expr} が有效なバッファでないか、{lnum} が無效な場合は 1 が返される。成功すると 0 が返される。
</p>
<a name="setbufvar_0028_0029"></a><a name="index-setbufvar_0028_0029"></a>
</dd>
<dt>setbufvar({expr}, {varname}, {val})</dt>
<dd><p>バッファ {expr} のオプションまたはローカル變數 {varname} に {val} を代入する。
グローバル・ウィンドウローカルオプションに對しても動作するが、グローバル・ウィンドウローカル變數に對しては動作しない。ウィンドウローカルオプションの場合、グローバルな値は變更されない。{expr} の解釋の仕方については |<a href="#bufname_0028_0029">bufname()</a>| を參照。
</p><blockquote>
<p><strong>Note:</strong> <br>
變數名には &quot;b:&quot; をつけてはならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:call setbufvar(1, &quot;&amp;mod&quot;, 1)
:call setbufvar(&quot;todo&quot;, &quot;myvar&quot;, &quot;foobar&quot;)
</pre></div>
<p>サンドボックス |<a href="#sandbox">sandbox</a>| の中ではこの函數は使用できない。
</p></blockquote>

<a name="setcharsearch_0028_0029"></a><a name="index-setcharsearch_0028_0029"></a>
</dd>
<dt>setcharsearch({dict})</dt>
<dd><p>現在の文字檢索の情報を {dict} に設定する。この辭書は下記のエントリを 1 以上持つ:
</p>
<table>
<tr><td width="20%">char</td><td width="80%">續いて起こる |<a href="motion_002etxt.html#g_t_002c">,</a>| や |<a href="motion_002etxt.html#g_t_003b">;</a>| コマンドで使はれる文字。空文字列の場合、文字檢索を解除する。</td></tr>
<tr><td width="20%">forward</td><td width="80%">文字檢索の方向。1 は前方、0 は後方。</td></tr>
<tr><td width="20%">until</td><td width="80%">文字檢索の種類。1 は |<a href="motion_002etxt.html#t">t</a>| もしくは |<a href="motion_002etxt.html#T">T</a>| の文字檢索、0 は |<a href="motion_002etxt.html#f">f</a>| もしくは |<a href="motion_002etxt.html#F">F</a>| の文字檢索。</td></tr>
</table>

<p>これはユーザーの文字檢索のセーブ/リストアを使ふことができる:
</p><div class="example">
<pre class="example">:let prevsearch = getcharsearch()
:&quot; ユーザーの檢索に影響を與へるコマンドを實行する。
:call setcharsearch(prevsearch)
</pre></div>
<p>|<a href="#getcharsearch_0028_0029">getcharsearch()</a>| も參照。
</p>
<a name="setcmdpos_0028_0029"></a><a name="index-setcmdpos_0028_0029"></a>
</dd>
<dt>setcmdpos({pos})</dt>
<dd><p>コマンドラインの {pos} バイトの位置へカーソルを移動する。{pos} は 1 から始まる。現在の位置を取得するには |<a href="#getcmdpos_0028_0029">getcmdpos()</a>| を使ふ。
</p>
<p>コマンドラインを編輯してゐる最中のみ機能する。よつて、|<a href="cmdline_002etxt.html#c_005fCTRL_002d_005c_005fe">c_CTRL-\_e</a>|, |<a href="cmdline_002etxt.html#c_005fCTRL_002dR_005f_003d">c_CTRL-R_=</a>|, |<a href="cmdline_002etxt.html#c_005fCTRL_002dR_005fCTRL_002dR">c_CTRL-R_CTRL-R</a>| ＋ &rsquo;=&rsquo; と組み合はせて使ふときだけ意味がある。
</p>
<p>|<a href="cmdline_002etxt.html#c_005fCTRL_002d_005c_005fe">c_CTRL-\_e</a>| と |<a href="cmdline_002etxt.html#c_005fCTRL_002dR_005fCTRL_002dR">c_CTRL-R_CTRL-R</a>| ＋ &rsquo;=&rsquo; の場合、コマンドラインにその式をセットした後でカーソルを移動する。
</p>
<p>|<a href="cmdline_002etxt.html#c_005fCTRL_002dR_005f_003d">c_CTRL-R_=</a>| の場合、式を評價した後、結果のテキストを插入する前にカーソルを移動する。
</p>
<p>{pos} が大きすぎるときは行末にカーソルを移動する。{pos} が 1 より小さいときの結果は未定義である。成功なら 0、コマンドラインを編輯してゐるとき以外には 1 を返す。
</p>
<a name="setenv_0028_0029"></a><a name="index-setenv_0028_0029"></a>
</dd>
<dt>setenv({name}, {val})</dt>
<dd><p>環境變數 {name} に {val} を設定する。
</p>
<p>{val} が |<a href="#v_003anull">v:null</a>| の場合は、環境變數は削除される。
</p>
<p>|<a href="#expr_002denv">expr-env</a>| も參照。
</p>
<a name="setfperm_0028_0029"></a><a name="chmod"></a><a name="index-setfperm_0028_0029"></a>
<a name="index-chmod"></a>
</dd>
<dt>setfperm({fname}, {mode})</dt>
<dd><p>{fname} のファイル許可屬性を {mode} に設定する。
{mode} は 9 文字の文字列でなければならない。形式は &quot;rwxrwxrwx&quot; であり、それぞれはファイルの所有者權限、グループ權限、その他のユーザーを表す &quot;rwx&quot; といふフラグのグループである。文字 &quot;-&quot; は許可屬性がオフであり、その他の文字はオンである。マルチバイト文字はサポートされない。
</p>
<p>例へば &quot;&lsquo;<samp>rw-r-----</samp>&rsquo;&quot; はそのユーザーの讀み書き、グループでは讀み取り專用、その他のユーザーはアクセス不可である。&quot;&lsquo;<samp>xx-x-----</samp>&rsquo;&quot; は同じ意味となる。
</p>
<p>成功するとゼロ以外を返し、失敗するとゼロを返す。
</p>
<p>許可屬性の讀み取りについては |<a href="#getfperm_0028_0029">getfperm()</a>| を參照。
</p>

<a name="setline_0028_0029"></a><a name="index-setline_0028_0029"></a>
</dd>
<dt>setline({lnum}, {text})</dt>
<dd><p>カレントバッファの {lnum} 行目を {text} にする。行を插入したい場合は |<a href="#append_0028_0029">append()</a>| を使ふ。他のバッファの行を設定するには |<a href="#setbufline_0028_0029">setbufline()</a>| を使ふ。{lnum} 內のテキストプロパティはすべて消去される。
</p>
<p>{lnum} は |<a href="#getline_0028_0029">getline()</a>| のときと同じやうに解釋される。
</p>
<p>{lnum} が最後の行の次の行の場合、新規行として {text} を追加する。
</p>
<p>成功したら 0 を返す。失敗したら (大抵 {lnum} が無效な値のとき) 1 を返す。
</p>
<p>例:
</p><div class="example">
<pre class="example">:call setline(5, strftime(&quot;%c&quot;))
</pre></div>

<p>{text} がリスト |<a href="#List">List</a>| の場合、{lnum} 行目とそれ以降の行にリストの要素をセットする。例:
</p><div class="example">
<pre class="example">:call setline(5, ['aaa', 'bbb', 'ccc'])
</pre></div>
<p>上の例は次と同値である:
</p><div class="example">
<pre class="example">:for [n, l] in [[5, 'aaa'], [6, 'bbb'], [7, 'ccc']]
:  call setline(n, l)
:endfor
</pre></div>

<blockquote>
<p><strong>Note:</strong> <br>
マーク &rsquo;[ と &rsquo;] はセットされない。
</p></blockquote>

<a name="setloclist_0028_0029"></a><a name="index-setloclist_0028_0029"></a>
</dd>
<dt>setloclist({nr}, {list} [, {action} [, {what}]])</dt>
<dd><p>ウィンドウ {nr} のロケーションリストを作成・置き換へ・追加する。{nr} にはウィンドウ番號または |<a href="windows_002etxt.html#window_002dID">window-ID</a>| が使へる。{nr} が 0 のときはカレントウィンドウを對象にする。
</p>
<p>ロケーションリストウィンドウの場合、そこに表示してゐるロケーションリストが修正される。ウィンドウ番號 {nr} が無效な場合、-1 を返す。それ以外は |<a href="#setqflist_0028_0029">setqflist()</a>| と同じ。
</p>
<p>|<a href="quickfix_002etxt.html#location_002dlist">location-list</a>| も參照。
</p>
<p>オプショナル引數の辭書 {what} が提供される場合、{what} で指定されるアイテムのみが設定される。サポートされる {what} の一覽は |<a href="#setqflist_0028_0029">setqflist()</a>| を參照。
</p>
<a name="setmatches_0028_0029"></a><a name="index-setmatches_0028_0029"></a>
</dd>
<dt>setmatches({list} [, {win}])</dt>
<dd><p>|<a href="#getmatches_0028_0029">getmatches()</a>| で取得したマッチのリストを復元する。成功なら 0、失敗なら -1 を返す。リストを復元するに先立つて、現在のマッチはすべて消去される。|<a href="#getmatches_0028_0029">getmatches()</a>| の例を參照。
</p>
<p>{win} が指定されれば、カレントウィンドウではなく指定されたウィンドウあるいはウィンドウ ID を對象にする。
</p>
<a name="setpos_0028_0029"></a><a name="index-setpos_0028_0029"></a>
</dd>
<dt>setpos({expr}, {list})</dt>
<dd><p>{expr} の位置を設定する。{expr} として有效な値は次の通り:
</p><table>
<tr><td width="10%">.</td><td width="90%">カーソル位置</td></tr>
<tr><td width="10%">&rsquo;x</td><td width="90%">マーク x</td></tr>
</table>

<p>{list} は 4 個か 5 個の要素を持つリスト |<a href="#List">List</a>| である:
</p>
<p>[bufnum, lnum, col, off]
</p>
<p>[bufnum, lnum, col, off, curswant]
</p>
<p>&quot;bufnum&quot; はバッファ番號。0 にするとカレントバッファを表す。大文字のマークを設定するとき、&quot;bufnum&quot; はマーク位置として用ゐられる。それ以外のマークの場合、&quot;bufnum&quot; はマークを設定するバッファを指定する。函數 |<a href="#bufnr_0028_0029">bufnr()</a>| を使つてファイル名をバッファ番號に變換することができる。
</p>
<p>カーソルと &rsquo; マークを設定する場合、バッファ番號は無視される。なぜならそれらはバッファではなくウィンドウに關聯付けられてゐるからである。ジャンプリストは變更されない。
</p>
<p>&quot;lnum&quot; と &quot;col&quot; はバッファ內の位置。桁番號は1から始まる。&quot;lnum&quot; を 0 にするとそのマークを削除する。&quot;col&quot; が 1 より小さいときは 1 が使はれる。
</p>
<p>數値 &quot;off&quot; は &rsquo;<samp>virtualedit</samp>&rsquo; がオンのときのみ使はれ、その文字の開始位置からの畫面上の桁のオフセットとなる。例へば、&lt;Tab&gt; の中、または最後の文字より後に設定したいときに使ふ。
</p>
<p>&quot;curswant&quot; はカーソル位置を設定するときのみ使はれる。これは縱方向移動の優先的列番號である。&quot;curswant&quot; を指定しなかつた場合は優先値は設定されない。マークの位置を設定するときに &quot;curswant&quot; を指定した場合はその値は使用されない。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
&rsquo;&lt; と &rsquo;&gt; の行番號を變更した場合は &rsquo;&lt; が &rsquo;&gt; の手前にくるやうに位置が交換される。
</p></blockquote>

<p>位置をセットできたときは 0 を、さうでなければ -1 を返す。{expr} が無效なときはエラーメッセージが出る。
</p>
<p>|<a href="#getpos_0028_0029">getpos()</a>| と |<a href="#getcurpos_0028_0029">getcurpos()</a>| も參照。
</p>
<p>縱方向移動の優先的列番號は復元されない。しかしカーソル位置を設定するときにこの値を設定した場合は、|<a href="motion_002etxt.html#j">j</a>| や |<a href="motion_002etxt.html#k">k</a>| で移動すると以前の列にジャンプやうになるだらう。優先的列番號の設定については |<a href="#cursor_0028_0029">cursor()</a>| も參照。|<a href="#winrestview_0028_0029">winrestview()</a>| の &quot;curswant&quot; キーも參照。
</p>
<a name="setqflist_0028_0029"></a><a name="index-setqflist_0028_0029"></a>
</dd>
<dt>setqflist({list} [, {action} [, {what}]])</dt>
<dd><p>{list} の要素により QuickFix リストを作成・置き換へ・追加する。
</p>

<p>{what} が存在しないときは {list} の要素が使はれる。{list} の各要素は辭書であること。辭書でない {list} の要素は無視される。各辭書は以下の要素を持つ:
</p>
<table>
<tr><td width="20%">bufnr</td><td width="80%">バッファ番號。有效なバッファ番號でなければならない。</td></tr>
<tr><td width="20%">filename</td><td width="80%">ファイル名。&quot;bufnr&quot; がないとき、または無效であるときのみ使はれる。</td></tr>
<tr><td width="20%">module</td><td width="80%">モジュールの名前; もしも與へられてゐるなら、ファイル名の代はりに quickfix エラーウィンドウで使はれる</td></tr>
<tr><td width="20%">lnum</td><td width="80%">ファイル中の行番號</td></tr>
<tr><td width="20%">pattern</td><td width="80%">エラーの位置を特定するための檢索パターン</td></tr>
<tr><td width="20%">col</td><td width="80%">桁番號</td></tr>
<tr><td width="20%">vcol</td><td width="80%">0 でない場合: &quot;col&quot; は表示上の桁 <br> 0 の場合: &quot;col&quot; はバイトインデックス</td></tr>
<tr><td width="20%">nr</td><td width="80%">エラー番號</td></tr>
<tr><td width="20%">text</td><td width="80%">エラーの說明</td></tr>
<tr><td width="20%">type</td><td width="80%">エラータイプを示す 1 文字。&rsquo;E&rsquo;, &rsquo;W&rsquo; など。</td></tr>
<tr><td width="20%">valid</td><td width="80%">認識されたエラーメッセージ</td></tr>
</table>

<p>辭書の要素 &quot;col&quot;, &quot;vcol&quot;, &quot;nr&quot;, &quot;type&quot;, &quot;text&quot; は省略可能である。&quot;lnum&quot; か &quot;pattern&quot; のどちらか一方のみがエラー行を特定するために使はれる。&quot;filename&quot; と &quot;bufnr&quot; の兩方ともない場合、または &quot;lnum&quot; と &quot;pattern&quot; の兩方ともない場合、その要素はエラー行として扱はれない。
&quot;pattern&quot; と &quot;lnum&quot; の兩方があるときは &quot;pattern&quot; が使はれる。
</p>
<p>&quot;valid&quot; なエントリが與へられてゐないと、&quot;bufnr&quot; が正しいバッファであるか &quot;filename&quot; が存在した時に、正しいフラグを設定する。
</p>
<p>{list} に空のリストを指定すると QuickFix リストはクリアされる。
</p><blockquote>
<p><strong>Note:</strong> <br>
このリストは |<a href="#getqflist_0028_0029">getqflist()</a>| が返すものと正確に同じではないことに注意。
</p></blockquote>

<a name="E927"></a><a name="index-E927"></a>
<p>{action} の値:
</p><table>
<tr><td width="10%">&rsquo;a&rsquo;</td><td width="90%">{list} の要素を既存の quickfix リストに追加する。quickfix リストがまだ存在しない場合は新規に作成される。</td></tr>
<tr><td width="10%">&rsquo;r&rsquo;</td><td width="90%">{list} の要素で現在の quickFix リストを置き換へる。これはリストをクリアするのにも使へる:
<div class="example">
<pre class="example">:call setqflist([], 'r')
</pre></div></td></tr>
<tr><td width="10%">&rsquo;f&rsquo;</td><td width="90%">quickfix スタックのすべての quickfix リストは解放される。</td></tr>
</table>

<p>{action} が指定されないとき、または &rsquo; &rsquo; のときは新しい quickfix リストを作成する。新しい quickfix リストはスタックの現在の quickfix リストのうしろに追加され、すべての續くリストは解放される。quickfix リストをスタックの最後に 追加するためには、{what} の &quot;nr&quot; に &quot;$&quot; を設定する。
</p>
<p>オプショナル引數の辭書 {what} が提供される場合、{what} で指定されるアイテムのみが設定される。最初の {list} は無視される。{what} では以下のアイテムを指定する事ができる:
</p><table>
<tr><td width="20%">context</td><td width="80%">quickfix リストのコンテキスト。|<a href="quickfix_002etxt.html#quickfix_002dcontext">quickfix-context</a>| を參照</td></tr>
<tr><td width="20%">efm</td><td width="80%">&quot;lines&quot; からテキストをパースする時に使はれる errorformat。もしも存在しなければ &rsquo;<samp>errorformat</samp>&rsquo; オプションの値が使はれる。|<a href="quickfix_002etxt.html#quickfix_002dindex">quickfix-index</a>| を參照</td></tr>
<tr><td width="20%">id</td><td width="80%">quickfix リストの識別子 |<a href="quickfix_002etxt.html#quickfix_002dID">quickfix-ID</a>|</td></tr>
<tr><td width="20%">idx</td><td width="80%">&rsquo;<samp>id</samp>&rsquo; または &rsquo;<samp>nr</samp>&rsquo; で指定された quickfix リスト內の現在のエントリのインデックス。&rsquo;$&rsquo; に設定すると、リストの最後のエントリが現在のエントリとして設定される。|<a href="quickfix_002etxt.html#quickfix_002dindex">quickfix-index</a>| を參照</td></tr>
<tr><td width="20%">items</td><td width="80%">quickfix エントリのリスト。{list} 引數と同じ</td></tr>
<tr><td width="20%">lines</td><td width="80%">行のリストをパースするために &rsquo;<samp>errorformat</samp>&rsquo; を使ふ。その結果は quickfix リスト {nr} もしくは {id} に追加する。リスト |<a href="#List">List</a>| の値だけがサポートされる。|<a href="quickfix_002etxt.html#quickfix_002dparse">quickfix-parse</a>| を參照</td></tr>
<tr><td width="20%">nr</td><td width="80%">quickfix スタックでのリスト番號。ゼロは現在の quickfix リストを意味し、&quot;$&quot; は直前の quickfix リストを意味する</td></tr>
<tr><td width="20%">title</td><td width="80%">quickfix リストのタイトルテキスト。|<a href="quickfix_002etxt.html#quickfix_002dtitle">quickfix-title</a>| を參照</td></tr>
</table>
<p>{what} 內でのサポートされてゐないキーは無視される。&quot;nr&quot; 番目のアイテムが提供されてゐない場合は現在の quickfix リストが變更される。新しく quickfix リストを作成すると、&quot;nr&quot; は quickfix のスタックサイズよりも大きい値に設定される。quickfix リストが變更されると、リストは正しく變更されることが保證され、リストを特定するために &quot;nr&quot; の代はりに &quot;id&quot; が使はれる。
</p>
<p>例 (|<a href="quickfix_002etxt.html#setqflist_002dexamples">setqflist-examples</a>| も參照):
</p><div class="example">
<pre class="example">:call setqflist([], 'r', {'title': 'My search'})
:call setqflist([], 'r', {'nr': 2, 'title': 'Errors'})
:call setqflist([], 'a', {'id':qfid, 'lines':[&quot;F1:10:L10&quot;]})
</pre></div>
<p>成功なら 0、失敗なら -1 を返す。
</p>
<p>この函數は &rsquo;<samp>errorformat</samp>&rsquo; の設定とは無關係に QuickFix リストを作るために使へる。その最初のエラーへジャンプするには &lsquo;<code>:cc 1</code>&lsquo; などのコマンドを使ふ。
</p>

<a name="setreg_0028_0029"></a><a name="index-setreg_0028_0029"></a>
</dd>
<dt>setreg({regname}, {value} [, {options}])</dt>
<dd><p>レジスタ {regname} に {value} をセットする。
{value} には |<a href="#getreg_0028_0029">getreg()</a>| の戾り値ならどんな値でも (リスト |<a href="#List">List</a>| でも) 指定できる。
{options} が &quot;a&quot; を含んでゐるとき、または {regname} が大文字のときは、その値に追加する。
{options} は以下のレジスタの種類指定を含んでもよい:
</p><table>
<tr><td width="50%">&quot;c&quot; または &quot;v&quot;</td><td width="50%">|<a href="motion_002etxt.html#characterwise">characterwise</a>| モード</td></tr>
<tr><td width="50%">&quot;l&quot; または &quot;V&quot;</td><td width="50%">|<a href="motion_002etxt.html#linewise">linewise</a>| モード</td></tr>
<tr><td width="50%">&quot;b&quot; または &quot;&lt;CTRL-V&gt;&quot;</td><td width="50%">|<a href="visual_002etxt.html#blockwise_002dvisual">blockwise-visual</a>| モード</td></tr>
</table>
<p>&quot;b&quot; または &quot;&lt;CTRL-V&gt;&quot; の直後に數値を續けると、それが選擇範圍の幅となる。これを指定しない場合、選擇範圍の幅は一番長い行の文字數となる (&lt;Tab&gt; は 1 文字と數へられる)。
</p>
<p>{options} にレジスタの設定が何も含まれてゐないときのデフォルト値は文字モードである。ただし、{value} が文字列で末尾が &lt;NL&gt; の場合や {value} がリストの場合は行モードになる。矩形モードは明示的に指定しない限り選擇されない。
成功なら 0、失敗なら非 0 を返す。
</p>
<a name="E883"></a><a name="index-E883"></a>
<blockquote>
<p><strong>Note:</strong> <br>
檢索レジスタや式レジスタを設定するときは複數の要素を含んだリスト (|<a href="#List">List</a>|) を指定することはできない。空のリストは空文字列と同樣に扱はれる。
</p></blockquote>

<p>例:
</p><div class="example">
<pre class="example">:call setreg(v:register, @*)
:call setreg('*', @%, 'ac')
:call setreg('a', &quot;1\n2\n3&quot;, 'b5')
</pre></div>

<p>次の例は、この函數を使つてレジスタを退避・復元する例である:
</p><div class="example">
<pre class="example">:let var_a = getreg('a', 1, 1)
:let var_amode = getregtype('a')
    ....
:call setreg('a', var_a, var_amode)
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
|<a href="#getreg_0028_0029">getreg()</a>| の 3 番目の引數を使用せずにレジスタの內容を完全に復元することはできない。改行文字と Nul 文字がどちらも改行文字として表現されてしまふため。|<a href="pattern_002etxt.html#NL_002dused_002dfor_002dNul">NL-used-for-Nul</a>| 參照。
</p></blockquote>

<p>空文字列を追加すると、レジスタの種類を變更することができる:
</p><div class="example">
<pre class="example">:call setreg('a', '', 'al')
</pre></div>

<a name="settabvar_0028_0029"></a><a name="index-settabvar_0028_0029"></a>
</dd>
<dt>settabvar({tabnr}, {varname}, {val})</dt>
<dd><p>タブページ {tabnr} のタブローカル變數 {varname} を {val} に設定する。|<a href="#t_003avar">t:var</a>|
</p><blockquote>
<p><strong>Note:</strong> <br>
オートコマンドがブロックされ、副作用が發生しない可能性があることに注意。例へば、&rsquo;<samp>filetype</samp>&rsquo; を設定する時。
</p></blockquote>
<blockquote>
<p><strong>Note:</strong> <br>
指定する變數名は &quot;t:&quot; を除いた名前。
</p></blockquote>
<p>タブの番號は 1 から始まる。
この函數はサンドボックス |<a href="#sandbox">sandbox</a>| の中では使へない。
</p>
<a name="settabwinvar_0028_0029"></a><a name="index-settabwinvar_0028_0029"></a>
</dd>
<dt>settabwinvar({tabnr}, {winnr}, {varname}, {val})</dt>
<dd><p>ウィンドウ {winnr} のオプションやローカル變數 {varname} の値を {val} にセットする。
</p>
<p>タブ番號は 1 から始まる。カレントタブページを對象とする場合は |<a href="#setwinvar_0028_0029">setwinvar()</a>| を使ふ。
{winnr} にはウィンドウ番號または |<a href="windows_002etxt.html#window_002dID">window-ID</a>| が使へる。
</p>
<p>{winnr} が 0 のときはカレントウィンドウが對象となる。
</p><blockquote>
<p><strong>Note:</strong> <br>
オートコマンドがブロックされ、副作用が發生しない可能性があることに注意。例へば、&rsquo;<samp>filetype</samp>&rsquo; または &rsquo;<samp>syntax</samp>&rsquo; を設定する時。
</p></blockquote>
<p>グローバルオプションやバッファローカルオプションを設定することもできるが、グローバル變數やバッファローカル變數を設定することはできない。
</p>
<p>バッファローカルオプションを設定した場合、グローバル値は變更されない。
</p><blockquote>
<p><strong>Note:</strong> <br>
變數名には &quot;w:&quot; をつけてはならない。
</p></blockquote>
<p>例:
</p><div class="example">
<pre class="example">:call settabwinvar(1, 1, &quot;&amp;list&quot;, 0)
:call settabwinvar(3, 2, &quot;myvar&quot;, &quot;foobar&quot;)
</pre></div>
<p>この函數は |<a href="#sandbox">sandbox</a>| の中では使用できない。
</p>
<a name="settagstack_0028_0029"></a><a name="index-settagstack_0028_0029"></a>
</dd>
<dt>settagstack({nr}, {dict} [, {action}])</dt>
<dd><p>{dict} を使用してゐるウィンドウ {nr} のタグスタックを變更する。{nr} はウィンドウ番號か |<a href="windows_002etxt.html#window_002dID">window-ID</a>| になる。
</p>
<p>{dict} でサポートされてゐる項目のリストのために |<a href="#gettagstack_0028_0029">gettagstack()</a>| を參照する。
<a name="E962"></a><a name="index-E962"></a>
{action}
もしも {action} が存在しないか &rsquo;<var>r</var>&rsquo; に設定されてゐる場合、タグスタックは置き換へられる。{action} が &rsquo;<var>a</var>&rsquo; に設定されてゐる場合、{dict} からの新しい項目はタグスタックの上に積まれる。
</p>
<p>成功した場合は 0、失敗した場合は -1 を返す。
</p>
<p>例:
タグスタックの現在のインデックスを 4 に設定する:
</p><pre class="verbatim">call settagstack(1005, {'curidx' : 4})
</pre>
<p>ウィンドウ 3 のタグスタックを空にする:
</p><pre class="verbatim">call settagstack(3, {'items' : []})
</pre>
<p>新規項目をタグスタックの上に積む:
</p><pre class="verbatim">let pos = [bufnr('myfile.txt'), 10, 1, 0]
let newtag = [{'tagname' : 'mytag', 'from' : pos}]
call settagstack(2, {'items' : newtag}, 'a')
</pre>
<p>タグスタックを保存し復元する:
</p><pre class="verbatim">let stack = gettagstack(1003)
&quot; do something else
call settagstack(1003, stack)
unlet stack
</pre><a name="setwinvar_0028_0029"></a><a name="index-setwinvar_0028_0029"></a>
</dd>
<dt>setwinvar({nr}, {varname}, {val})</dt>
<dd><p>|<a href="#settabwinvar_0028_0029">settabwinvar()</a>| と同樣。カレントタブページを對象とする。
</p>
<p>例:
</p><div class="example">
<pre class="example">:call setwinvar(1, &quot;&amp;list&quot;, 0)
:call setwinvar(2, &quot;myvar&quot;, &quot;foobar&quot;)
</pre></div>

<a name="sha256_0028_0029"></a><a name="index-sha256_0028_0029"></a>
</dd>
<dt>sha256({string})</dt>
<dd><p>{string} の SHA256 チェックサムを 64 文字の 16 進文字列で返す。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bcryptv">+cryptv</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="shellescape_0028_0029"></a><a name="index-shellescape_0028_0029"></a>
</dd>
<dt>shellescape({string} [, {special}])</dt>
<dd><p>シェルコマンドの引數として利用できるやうに {string} をエスケープする。
MS-Windows と MS-DOS では、&rsquo;<samp>shellslash</samp>&rsquo; が設定されてゐない場合、{string} をダブルクォートで圍み、{string} の中のダブルクォートを全て二重にする。
さうでなければ、{string} をシングルクォートで圍み、&quot;&rsquo;&quot; を &quot;&rsquo;\&rdquo;&quot; で置き換へる。
</p>
<p>{special} が指定され、0 でない數値または空でない文字列の場合 (|<a href="#non_002dzero_002darg">non-zero-arg</a>|)、&quot;!&quot;, &quot;%&quot;, &quot;#&quot;, &quot;&lt;cword&gt;&quot; などの特殊なアイテムの前にはバックスラッシュがつく。コマンド |<a href="various_002etxt.html#g_t_003a_0021">:!</a>| によつてそのバックスラッシュは再び除かれる。
</p>
<p>&rsquo;<samp>shell</samp>&rsquo; の値の末尾が &quot;csh&quot; である場合、{special} が |<a href="#non_002dzero_002darg">non-zero-arg</a>| ならば &quot;!&quot; の文字もエスケープされる。これは、csh と tcsh は シングルクォートの中であつても &quot;!&quot; を履歷置換と解釋するためである。
</p>
<p>{special} が |<a href="#non_002dzero_002darg">non-zero-arg</a>| である &lt;NL&gt; 文字もエスケープされる。&rsquo;<samp>shell</samp>&rsquo; の末尾が &quot;csh&quot; である場合、これは 2 回エスケープされる。
</p>
<p>|<a href="various_002etxt.html#g_t_003a_0021">:!</a>| コマンドを使ふ場合の例:
</p><div class="example">
<pre class="example">:exe '!dir ' . shellescape(expand('&lt;cfile&gt;'), 1)
</pre></div>
<p>これはカーソル下のファイルを dir コマンドで表示する。|<a href="#system_0028_0029">system()</a>| を使ふ場合の例:
</p><div class="example">
<pre class="example">:call system(&quot;chmod +w -- &quot; . shellescape(expand(&quot;%&quot;)))
</pre></div>
<p>|<a href="cmdline_002etxt.html#g_t_003a_003aS">::S</a>| も參照のこと。
</p>

<a name="shiftwidth_0028_0029"></a><a name="index-shiftwidth_0028_0029"></a>
</dd>
<dt>shiftwidth([{col}])</dt>
<dd><p>實際に使用される &rsquo;<samp>shiftwidth</samp>&rsquo; の値を返す。&rsquo;<samp>shiftwidth</samp>&rsquo; がゼロ以外の場合はその値が返る。ゼロの場合は &rsquo;<samp>tabstop</samp>&rsquo; の値が返る。この函數は 2012 年のパッチ 7.3.694 で導入されたので、現在では皆使へるやうになつてゐるに違ひない (しかしながらこれは 8.1.542 まで、オプションの {col} 引數のためには許されてゐない)。
</p>
<p>引數に 1 つの {col} がある場合、これは &rsquo;<samp>shiftwidth</samp>&rsquo; の値を返すための桁番號として使はれる。これは &rsquo;<samp>vartabstop</samp>&rsquo; 機能のためのものである。{list} 引數のためには |<a href="#cursor_0028_0029">cursor()</a>| 函數を參照のこと。もしも &rsquo;<samp>vartabstop</samp>&rsquo; 設定が有效になつてゐて、引數 {col} が與へられてゐない場合は、1 桁目と假定する。
</p>
<a name="sign_005fdefine_0028_0029"></a><a name="index-sign_005fdefine_0028_0029"></a>
</dd>
<dt>sign_define({name} [, {dict}])</dt>
<dt>sign_define({list})</dt>
<dd><p>{name} といふ名前の新しい目印を定義するか、既存の目印の屬性を變更する。これは |<a href="sign_002etxt.html#g_t_003asign_002ddefine">:sign-define</a>| コマンドに似てゐる。
</p>
<p>名前の衝突を避けるために、{name} に一意のテキストを付けること。目印を設置するやうな {group} はない。
</p>
<p>{name} は文字列または數値である。任意の {dict} 引數は目印屬性を指定する。以下の値がサポートされてゐる:
</p><table>
<tr><td width="30%">icon</td><td width="70%">目印用のビットマップファイルへのフルパス。</td></tr>
<tr><td width="30%">linehl</td><td width="70%">目印が設置されてゐる行全體に使用されるハイライトグループ。</td></tr>
<tr><td width="30%">text</td><td width="70%">アイコンがない場合、または GUI が使用されてゐない場合に表示されるテキスト。</td></tr>
<tr><td width="30%">texthl</td><td width="70%">text 項目に使用されるハイライトグループ</td></tr>
</table>

<p>{name} といふ名前の目印がすでに存在する場合は、その目印の屬性が更新される。
</p>
<p>1 つの引數 {list} は目印のリストを定義するのに使ふことができます。リストの項目はそれぞれ上記 {dict} 內の項目をもつ辭書です。&rsquo;name&rsquo; 項目は目印の名前です。
</p>
<p>成功のときは 0、失敗のときは -1 を返します。1 つの引數 {list} が使用されたときは、それぞれに定義された目印の値のリストを返します。
</p>
<p>例:
</p><pre class="verbatim">call sign_define(&quot;mySign&quot;, {
        \ &quot;text&quot; : &quot;=&gt;&quot;,
        \ &quot;texthl&quot; : &quot;Error&quot;,
        \ &quot;linehl&quot; : &quot;Search&quot;})
call sign_define([
        \ {'name' : 'sign1',
        \  'text' : '=&gt;'},
        \ {'name' : 'sign2',
        \  'text' : '!!'}
        \ ])
</pre><a name="sign_005fgetdefined_0028_0029"></a><a name="index-sign_005fgetdefined_0028_0029"></a>
</dd>
<dt>sign_getdefined([{name}])</dt>
<dd><p>定義濟みの目印とその屬性のリストを取得する。これは |<a href="sign_002etxt.html#g_t_003asign_002dlist">:sign-list</a>| コマンドに似てゐる。
</p>
<p>{name} が指定されてゐない場合は、定義されてゐるすべての目印のリストが返される。さうでなければ、指定された目印の屬性が返される。
</p>
<p>戾り値の各リスト項目は、次のエントリを持つ辭書である:
</p><table>
<tr><td width="30%">icon</td><td width="70%">目印用のビットマップファイルへのフルパス。</td></tr>
<tr><td width="30%">linehl</td><td width="70%">目印が設置されてゐる行全體に使用されるハイライトグループ。</td></tr>
<tr><td width="30%">name</td><td width="70%">目印の名前</td></tr>
<tr><td width="30%">text</td><td width="70%">アイコンがない場合、または GUI が使用されてゐない場合に表示されるテキスト。</td></tr>
<tr><td width="30%">texthl</td><td width="70%">text 項目に使用されるハイライトグループ</td></tr>
</table>

<p>目印がなく、{name} が見つからない場合は、空の List を返す。
</p>
<p>例:
</p><pre class="verbatim">&quot; すべての定義濟み目印のリストを取得する
echo sign_getdefined()

&quot; mySignといふ名前の目印の屬性を取得する
echo sign_getdefined(&quot;mySign&quot;)
</pre><a name="sign_005fgetplaced_0028_0029"></a><a name="index-sign_005fgetplaced_0028_0029"></a>
</dd>
<dt>sign_getplaced([{expr} [, {dict}]])</dt>
<dd><p>バッファまたはすべてのバッファに設置されてゐる目印のリストを返す。これは |<a href="sign_002etxt.html#g_t_003asign_002dplace_002dlist">:sign-place-list</a>| コマンドに似てゐる。
</p>
<p>任意のバッファ名 {expr} が指定されてゐる場合、そのバッファに設置されてゐる目印のリストだけが返される。{expr} の使ひ方については |<a href="#bufname_0028_0029">bufname()</a>| を參照。任意の {dict} には、以下のエントリを含めることができる。
</p><table>
<tr><td width="30%">group</td><td width="70%">このグループの目印のみを選擇する</td></tr>
<tr><td width="30%">id</td><td width="70%">この識別子を持つ目印を選擇する</td></tr>
<tr><td width="30%">lnum</td><td width="70%">この行に設置されてゐる目印を選擇する。{lnum} の使ひ方については |<a href="#line_0028_0029">line()</a>| を參照。</td></tr>
</table>
<p>{group} が &rsquo;*&rsquo; の場合、グローバルグループを含むすべてのグループの目印が返される。{group} が指定されてゐないか、空の文字列の場合は、グローバルグループ內の目印のみが返される。引數が指定されてゐない場合は、すべてのバッファに設置されてゐるグローバルグループ內の目印が返される。
</p>
<p>|<a href="sign_002etxt.html#sign_002dgroup">sign-group</a>| を參照。
</p>
<p>戾り値の各リスト項目は、次のエントリを持つ辭書である:
</p><table>
<tr><td width="30%">bufnr</td><td width="70%">目印付きバッファの番號</td></tr>
<tr><td width="30%">signs</td><td width="70%">{bufnr} に設置されてゐる目印のリスト。各リスト項目は、以下の項目を含む辭書である。</td></tr>
</table>

<p>各目印の辭書には、次のエントリが含まれてゐる:
</p><table>
<tr><td width="30%">group</td><td width="70%">目印グループ。グローバルグループの場合は &rdquo; に設定する。</td></tr>
<tr><td width="30%">id</td><td width="70%">目印 ID</td></tr>
<tr><td width="30%">lnum</td><td width="70%">目印が設置されてゐる行番號</td></tr>
<tr><td width="30%">name</td><td width="70%">定義されてゐる目印の名前</td></tr>
<tr><td width="30%">priority</td><td width="70%">目印の優先度</td></tr>
</table>

<p>返されるバッファ內の目印は、行番號および優先度で竝べられる。
</p>
<p>失敗した場合、または設置された目印がない場合は、空のリストを返す。
</p>
<p>例:
</p><pre class="verbatim">&quot; eval.c に設置されてゐるグローバルグループの目印のリ
&quot; ストを取得する
echo sign_getplaced(&quot;eval.c&quot;)

&quot; eval.c の 'g1' グループに設置されてゐる目印のリスト
&quot; を取得する
echo sign_getplaced(&quot;eval.c&quot;, {'group' : 'g1'})

&quot; eval.c の 10行目に設置されてゐる目印のリストを取得す
&quot; る
echo sign_getplaced(&quot;eval.c&quot;, {'lnum' : 10})

&quot; a.py に設置されてゐる識別子 10 の目印を取得する
echo sign_getplaced(&quot;a.py&quot;, {'id' : 10'})

&quot; a.py の 'g1' グループ 'g1' に設置されてゐる識別子 20
&quot; の目印を取得する
echo sign_getplaced(&quot;a.py&quot;, {'group' : 'g1',
                                \  'id' : 20'})

&quot; 設置されてゐるすべての目印のリストを取得する
echo sign_getplaced()
</pre><a name="sign_005fjump_0028_0029"></a><a name="index-sign_005fjump_0028_0029"></a>
</dd>
<dt>sign_jump({id}, {group}, {expr})</dt>
<dd><p>バッファ {expr} を開くか、{expr} を含むウィンドウに移動して、グループ {group} の目印 {id} にカーソルを置く。これは |<a href="sign_002etxt.html#g_t_003asign_002djump">:sign-jump</a>| コマンドに似てゐる。
</p>
<p>{expr} の使ひ方については |<a href="#bufname_0028_0029">bufname()</a>| を參照。
</p>
<p>目印の行番號を返す。引數が無效な場合は -1 を返す。
</p>
<p>例:
</p><pre class="verbatim">&quot; 現在のバッファの目印 ID 10 へ移動する
call sign_jump(10, '', '')
</pre><a name="sign_005fplace_0028_0029"></a><a name="index-sign_005fplace_0028_0029"></a>
</dd>
<dt>sign_place({id}, {group}, {name}, {expr} [, {dict}])</dt>
<dd><p>{name} として定義された目印をファイル {expr} の行 {lnum} または {expr} バッファに設置し、目印に {id} と {group} を割り當てる。
これは |<a href="sign_002etxt.html#g_t_003asign_002dplace">:sign-place</a>| コマンドに似てゐる。
</p>
<p>目印 ID {id} がゼロの場合は、新しい識別子が割り當てられる。それ以外の場合は、指定された番號が使用される。{group} は目印グループ名である。グローバルサイングループを使用するには、空の文字列を使用する。{group} は {id} の名前空閒として機能するため、2 つのグループが同じ ID を使用できる。詳細については |<a href="sign_002etxt.html#sign_002didentifier">sign-identifier</a>|と |<a href="sign_002etxt.html#sign_002dgroup">sign-group</a>| を參照。
</p>
<p>{name} は定義濟みの目印を參照する。{expr} はバッファの名前か番號を參照する。許容値については、|<a href="#bufname_0028_0029">bufname()</a>| を參照。
</p>
<p>任意の {dict} 引數は、以下のエントリをサポートする:
</p><table>
<tr><td width="30%">lnum</td><td width="70%">目印が設置されるファイルやバッファ {expr} の行番號。許容値については、|<a href="#line_0028_0029">line()</a>| を參照。</td></tr>
<tr><td width="30%">priority</td><td width="70%">目印の優先順位。詳細については |<a href="sign_002etxt.html#sign_002dpriority">sign-priority</a>| を參照。</td></tr>
</table>

<p>任意の {dict} が指定されてゐない場合は、定義されてゐる目印 {name} を使用するやうにグループ {group} 內の設置された目印 ID {id} を變更します。
</p>
<p>成功した場合は目印 ID、失敗した場合は -1 を返す。
</p>
<p>例:
</p><pre class="verbatim">&quot; バッファ json.c の 20 行目に識別子 5 で sign1 といふ名前
&quot; の目印を設置する
call sign_place(5, '', 'sign1', 'json.c',
                                \ {'lnum' : 20})

&quot; バッファ json.c の識別子 5 が目印 sign2 を使用するやう
&quot; に更新する
call sign_place(5, '', 'sign2', 'json.c')

&quot; バッファ json.c の 30 行目に sign3 といふ名前の目印を
&quot; 新しい識別子で設置する
let id = sign_place(0, '', 'sign3', 'json.c',
                                \ {'lnum' : 30})

&quot; バッファ json.c の 40 行目に 'g3' グループで識別子 10 の
&quot; sign4 といふ名前の目印を優先順位 90 で設置する
call sign_place(10, 'g3', 'sign4', 'json.c',
                \ {'lnum' : 40, 'priority' : 90})
</pre><a name="sign_005fplacelist_0028_0029"></a><a name="index-sign_005fplacelist_0028_0029"></a>
</dd>
<dt>sign_placelist({list})</dt>
<dd><p>1 つもしくはそれ以上の目印を置きます。これは |<a href="#sign_005fplace_0028_0029">sign_place()</a>| 函數と似てゐます。{list} 引數は目印のリストの場所を指定します。それぞれのリスト項目は以下の目印特性をもつ辭書です:
</p><table>
<tr><td width="30%">buffer</td><td width="70%">バッファ名もしくは番號。受け取ることのできる値については |<a href="#bufname_0028_0029">bufname()</a> を參照してください。</td></tr>
<tr><td width="30%">group</td><td width="70%">目印のグループ。{group} は {id} の名前空閒として機能します。そのため、2 つのグループは同じ ID に使ふことができます。もしも指定されてゐないか空文字が設定されてゐるのなら、グーローバルグープが使はれます。より多くの情報は |<a href="sign_002etxt.html#sign_002dgroup">sign-group</a>| を參照してください。</td></tr>
<tr><td width="30%">id</td><td width="70%">目印の識別子。もしも指定されてゐないかゼロなら、新しいユニークな識別子が割り當てられます。さうでなければ指定された番號が使はれます。より多くの情報は |<a href="sign_002etxt.html#sign_002didentifier">sign-identifier</a>| を參照してください。</td></tr>
<tr><td width="30%">lnum</td><td width="70%">目印を置くことのできるバッファ {expr} 內の 行番號。受け取ることのできる値については |<a href="#line_0028_0029">line()</a>| を參照してください。</td></tr>
<tr><td width="30%">name</td><td width="70%">配置するための目印の名前。より多くの情報については |<a href="#sign_005fdefine_0028_0029">sign_define()</a>| を參照してください。</td></tr>
<tr><td width="30%">priority</td><td width="70%">目印の優先順位。複數の目印が 1 行に置かれたときに、もつとも高い優先順位をもつ目印が使はれます。もしも指定されてゐなければ、既定の値 10 が使はれます。より多くの情報については |<a href="sign_002etxt.html#sign_002dpriority">sign-priority</a>| を參照してください。</td></tr>
</table>

<p>もしも {id} が存在する目印を參照してゐるなら、その存在してゐる目印は指定された {name} かつ/または {priority} を使ふために變更されます。
</p>
<p>目印の識別子のリストを返します。もしも目印を置くのに失敗したなら、對應するリスト項目は -1 に設定されます。
</p>
<p>例:
</p><pre class="verbatim">&quot; バッファ a.c の 20 行目に id を 5 として、
&quot; また、30 行目に id を 10 として 目印 s1 を置きます
let [n1, n2] = sign_placelist([
        \ {'id' : 5,
        \  'name' : 's1',
        \  'buffer' : 'a.c',
        \  'lnum' : 20},
        \ {'id' : 10,
        \  'name' : 's1',
        \  'buffer' : 'a.c',
        \  'lnum' : 30}
        \ ])

&quot; バッファ a.c の 40 行目と 50 行目に、
&quot; 自動的に生成された識別子をつけて目印 s1 を置きます
let [n1, n2] = sign_placelist([
        \ {'name' : 's1',
        \  'buffer' : 'a.c',
        \  'lnum' : 40},
        \ {'name' : 's1',
        \  'buffer' : 'a.c',
        \  'lnum' : 50}
        \ ])
</pre><a name="sign_005fundefine_0028_0029"></a><a name="index-sign_005fundefine_0028_0029"></a>
</dd>
<dt>sign_undefine([{name}])</dt>
<dt>sign_undefine({list})</dt>
<dd><p>定義濟みの目印 {name} を削除する。これは |<a href="sign_002etxt.html#g_t_003asign_002dundefine">:sign-undefine</a>| コマンドに似てゐる。{name} が指定されてゐない場合は、定義されてゐるすべての目印を削除する。
</p>
<p>1 つの引數 {list} は目印のリストを未定義にするために使ふことができます。リスト項目のそれぞれは、目印の番號です。
</p>
<p>成功すると 0 を返し、失敗すると -1 を返します。1 つの引數 {list} を呼ぶために、未定義にされた目印の値のリストを返します。
</p>
<p>例:
</p><pre class="verbatim">&quot; mySign といふ名前の目印を削除します
call sign_undefine(&quot;mySign&quot;)

&quot; 目印 'sign1' と 'sign2' を削除します
call sign_undefine([&quot;sign1&quot;, &quot;sign2&quot;])

&quot; すべての目印を削除します
call sign_undefine()
</pre><a name="sign_005funplace_0028_0029"></a><a name="index-sign_005funplace_0028_0029"></a>
</dd>
<dt>sign_unplace({group} [, {dict}])</dt>
<dd><p>設置濟みの 1 つ以上のバッファ內の目印を解除する。これは |<a href="sign_002etxt.html#g_t_003asign_002dunplace">:sign-unplace</a>| コマンドに似てゐる。
</p>
<p>{group} は目印グループ名である。グローバルサイングループを使用するには、空の文字列を使用する。{group} が &rsquo;*&rsquo; に設定されてゐる場合、グローバルグループを含むすべてのグループが使用される。
{group} 內の目印は、{dict} 內のエントリに基づいて選擇される。{dict} の以下の任意のエントリがサポートされてゐる:
</p><table>
<tr><td width="30%">buffer</td><td width="70%">バッファの名前または番號。|<a href="#bufname_0028_0029">bufname()</a>| を參照。</td></tr>
<tr><td width="30%">id</td><td width="70%">目印 ID</td></tr>
</table>
<p>{dict} が指定されてゐない場合は、{group} 內のすべての目印が解除される。
</p>
<p>成功すると 0 を返し、失敗すると -1 を返す。
</p>
<p>例:
</p><pre class="verbatim">&quot; バッファ a.vim から識別子10の目印を解除する
call sign_unplace('', {'buffer' : &quot;a.vim&quot;, 'id' : 10})

&quot; バッファ番號3から 'g1' グループの識別子20の目印を解
&quot; 除する
call sign_unplace('g1', {'buffer' : 3, 'id' : 20})

&quot; バッファ番號10から 'g2' グループのすべての目印を解除
&quot; する
call sign_unplace('g2', {'buffer' : 10})

&quot; すべてのバッファから 'g3' グループの識別子30の目印を
&quot; 解除する
call sign_unplace('g3', {'id' : 30})

&quot; バッファ番號5 のすべての目印を解除する
call sign_unplace('*', {'buffer' : 5})

&quot; すべてのバッファから 'g4' グループの目印を解除する
call sign_unplace('g4')

&quot; すべてのバッファから識別子40の目印を解除する
call sign_unplace('*', {'id' : 40})

&quot; すべてのバッファからすべての目印を解除する
call sign_unplace('*')
</pre><a name="sign_005funplacelist_0028_0029"></a><a name="index-sign_005funplacelist_0028_0029"></a>
</dd>
<dt>sign_unplacelist({list})</dt>
<dd><p>1 つもしくはそれ以上のバッファから以前に置かれた目印を削除します。これは |<a href="#sign_005funplace_0028_0029">sign_unplace()</a>| 函數と似てゐます。
</p>
<p>{list} 引數は削除する目印のリスト指定します。それぞれのリスト項目は次の目印屬性を持つ辭書です:
</p><table>
<tr><td width="30%">buffer</td><td width="70%">バッファ名もしくは番號。受け取ることのできる値については |<a href="#bufname_0028_0029">bufname()</a>| を參照してください。もしも {譯注: バッファ名もしくは番號が} 指定されてゐなければ、指定された目印はすべてのバッファから削除されます。</td></tr>
<tr><td width="30%">group</td><td width="70%">目印のグループ名。もしも指定されてゐない、もしくは空文字の場合は、グローバルな目印グループが使はれます。もしも &rsquo;*&rsquo; が設定されてゐなければ、グローバルグループを含むすべてのグループが使はれます。</td></tr>
<tr><td width="30%">id</td><td width="70%">目印の識別子。もしも {譯注: 目印の識別子が} 指定されてゐなければ、指定されたグループのすべての目印が削除されます。</td></tr>
</table>

<p>もしも對應する目印の削除が成功した場合は 0 を、失敗した場合は -1 を設定されたエントリのリストを返します。
</p>
<p>例:
</p><pre class="verbatim">&quot; バッファ a.vim から id が 10 の目印を、
&quot; バッファ b.vim から id が 20 の目印を削除します
call sign_unplacelist([
        \ {'id' : 10, 'buffer' : &quot;a.vim&quot;},
        \ {'id' : 20, 'buffer' : 'b.vim'},
        \ ])
</pre><a name="simplify_0028_0029"></a><a name="index-simplify_0028_0029"></a>
</dd>
<dt>simplify({filename})</dt>
<dd><p>ファイル名を、意味を變へずにできるだけ簡略化する。MS-Windows でのショートカットや Unix でのシンボリックリンクは解決される。{filename} の最初のパスコンポーネントがカレントディレクトリを指す場合、結果にそのまま殘される。末尾のパス區切り文字も取り除かれない。
</p>
<p>例:
</p><div class="example">
<pre class="example">simplify(&quot;./dir/.././/file/&quot;) == &quot;./file/&quot;
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
&quot;dir/..&quot; の組み合はせは、&quot;dir&quot; が檢索可能なディレクトリであるか、存在しないときのみ取り除かれる。Unix では、&quot;dir&quot; が同じディレクトリ內にあるシンボリックリンクであるときも取り除かれる。パス名を簡略化する前に全てのシンボリックリンクを解決させるには |<a href="#resolve_0028_0029">resolve()</a>| を使ふ。
</p></blockquote>


<a name="sin_0028_0029"></a><a name="index-sin_0028_0029"></a>
</dd>
<dt>sin({expr})</dt>
<dd><p>{expr} の正弦 (サイン) をラジアンで |<a href="#Float">Float</a>| で返す。{expr} は |<a href="#Float">Float</a>| または |<a href="#Number">Number</a>| に評價されなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo sin(100)
-0.506366
:echo sin(-4.01)
0.763301
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>

<a name="sinh_0028_0029"></a><a name="index-sinh_0028_0029"></a>
</dd>
<dt>sinh({expr})</dt>
<dd><p>{expr} の雙曲線正弦 (ハイパボリックサイン) を返す。値は [-inf, inf] の範圍の浮動小數點數 (|<a href="#Float">Float</a>|)。
</p>
<p>{expr} は浮動小數點數 (|<a href="#Float">Float</a>|) か數値 (|<a href="#Number">Number</a>|) でなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo sinh(0.5)
0.521095
:echo sinh(-0.9)
-1.026517
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>

<a name="sort_0028_0029"></a><a name="E702"></a><a name="index-sort_0028_0029"></a>
<a name="index-E702"></a>
</dd>
<dt>sort({list} [, {func} [, {dict}]])</dt>
<dd><p>{list} の要素をその場で (in-place) ソートする。{list} を返す。
</p>
<p>リストを變更したくない場合は、最初にコピーを作つておくこと:
</p><div class="example">
<pre class="example">:let sortedlist = sort(copy(mylist))
</pre></div>

<p>{func} が省略されたか空かゼロの場合は、各項目の文字列表現を使つてソートする。數値は文字列より後になり、リスト |<a href="#Lists">Lists</a>| は數値より後になる。カレントバッファのテキストをソートするには |<a href="change_002etxt.html#g_t_003asort">:sort</a>| を使ふ。
</p>
<p>{func} が &rsquo;1&rsquo; か &rsquo;i&rsquo; なら大文字小文字は區別されない。
</p>
<p>{func} が &rsquo;n&rsquo; ならすべての要素は數値順にソートされる (實裝詳細: 數値の讀み込みには strtod() 函數が使はれる。文字列、リスト、辭書、函數參照は 0 として扱はれる)。
</p>
<p>{func} が &rsquo;N&rsquo; ならすべての要素は數値順にソートされる。これは &rsquo;n&rsquo; に似てゐるが、數値を含む文字列はその文字列が表す數値として扱はれる。
</p>
<p>{func} が &rsquo;f&rsquo; ならすべての要素は數値順にソートされる。すべての値は數値か浮動小數點數でなければならない。
</p>
<p>{func} に |<a href="#Funcref">Funcref</a>| または函數名を指定すると、その函數を使つて要素を比較する。その函數は 2 つの要素を引數として受け取り、それらが等しいときは 0、1 番目の引數を 2 番目より後にするなら 1 以上、1 番目の方を前にするなら -1 以下を返す。
</p>
<p>{dict} は &quot;dict&quot; 屬性付きの函數と一緖に使ふ。値はローカル變數 &quot;self&quot; として使はれる。|<a href="#Dictionary_002dfunction">Dictionary-function</a>|
</p>
<p>ソートは安定である。(數値または文字列として) 等價な要素は元の順序關係が保持される。例へば數値としてソートした場合、文字列は元の順番通りに隣り合つて竝ぶ。
</p>
<p>|<a href="#uniq_0028_0029">uniq()</a>| も參照のこと。
</p>
<p>例:
</p><div class="example">
<pre class="example">func MyCompare(i1, i2)
   return a:i1 == a:i2 ? 0 : a:i1 &gt; a:i2 ? 1 : -1
endfunc
let sortedlist = sort(mylist, &quot;MyCompare&quot;)
</pre></div>
<p>この例の場合、より短く次のやうに書くことができる。ただしオーバーフローは無視される:
</p><div class="example">
<pre class="example">func MyCompare(i1, i2)
   return a:i1 - a:i2
endfunc
</pre></div>
</dd>
<dt>sound_clear()</dt>
<dd><a name="sound_005fclear_0028_0029"></a><a name="index-sound_005fclear_0028_0029"></a>
<p>すべてのサウンドの再生を停止する。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bsound">+sound</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="sound_005fplayevent_0028_0029"></a><a name="index-sound_005fplayevent_0028_0029"></a>
</dd>
<dt>sound_playevent({name} [, {callback}])</dt>
<dd><p>{name} で識別されるサウンドを再生する。サポートされてゐるイベント名はシステムによつて異なる。XDG のサウンド名がよく使はれる。Ubuntu では、それらは /usr/share/sounds/freedesktop/stereo に見つかるだらう。例:
</p><div class="example">
<pre class="example">call sound_playevent('bell')
</pre></div>
<p>MS-Windows では、{name} は SystemAsterisk, SystemDefault, SystemExclamation, SystemExit, SystemHand, SystemQuestion, SystemStart, SystemWelcome 等になる。
</p>
<p>{callback} が指定されてゐる場合は、サウンドが終了したときに呼び出される。最初の引數はサウンド ID、2 番目の引數はステータスである:
</p><table>
<tr><td width="10%">0</td><td width="90%">最後までサウンドが再生された</td></tr>
<tr><td width="10%">1</td><td width="90%">サウンドは中斷された</td></tr>
<tr><td width="10%">2</td><td width="90%">サウンド開始後にエラーが發生した</td></tr>
</table>
<p>例:
</p><pre class="verbatim">func Callback(id, status)
  echomsg &quot;sound &quot; .. a:id .. &quot; finished with &quot; .. a:status
endfunc
call sound_playevent('bell', 'Callback')
</pre>
<p>MS-Windows: {callback} はこの函數では動作しない。
</p>
<p>&lsquo;<code>sound_stop()</code>&lsquo; に渡すことができるサウンド ID を返す。サウンドを再生できなかつた場合はゼロを返す。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bsound">+sound</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="sound_005fplayfile_0028_0029"></a><a name="index-sound_005fplayfile_0028_0029"></a>
</dd>
<dt>sound_playfile({path} [, {callback}])</dt>
<dd><p>&lsquo;<code>sound_playevent()</code>&lsquo; と似てゐるが、サウンドファイル {name} を再生する。{name} はフルパスでなければならない。Ubuntu では、このコマンドで再生するファイルが見つかるかもしれない:
</p><pre class="verbatim">:!find /usr/share/sounds -type f | grep -v index.theme
</pre><p>{|<a href="various_002etxt.html#g_t_002bsound">+sound</a>| 機能つきでコンパイルされたときのみ有效}
</p>

<a name="sound_005fstop_0028_0029"></a><a name="index-sound_005fstop_0028_0029"></a>
</dd>
<dt>sound_stop({id})</dt>
<dd><p>サウンド {id} の再生を停止する。{id} は、事前に &lsquo;<code>sound_playevent()</code>&lsquo; または &lsquo;<code>sound_playfile()</code>&lsquo; によつて返されたものでなければならない。
</p>
<p>MS-Windows では、これは &lsquo;<code>sound_playevent()</code>&lsquo; によつて開始されるイベントサウンドに對しては機能しない。イベントのサウンドを止めるには &lsquo;<code>sound_clear()</code>&lsquo; を使用する。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bsound">+sound</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="soundfold_0028_0029"></a><a name="index-soundfold_0028_0029"></a>
</dd>
<dt>soundfold({word})</dt>
<dd><p>{word} の soundfold 値を返す。カレントウィンドウの &rsquo;<samp>spelllang</samp>&rsquo; で設定された言語のうち、soundfold に對應してゐる最初の言語が使用される。&rsquo;<samp>spell</samp>&rsquo; がオンでなければならない。soundfold ができない場合は {word} がそのまま返される。
</p>
<p>この函數はスペル修正候補の作成に使へる。
</p><blockquote>
<p><strong>Note:</strong> <br>
この方法はとても遲くなる可能性がある。
</p></blockquote>
<p>{譯注: phonetic algorithm の一種}
</p>
<a name="spellbadword_0028_0029"></a><a name="index-spellbadword_0028_0029"></a>
</dd>
<dt>spellbadword([{sentence}])</dt>
<dd><p>引數なしの場合: カーソル下またはカーソル以降のスペルミスした單語を返す。その單語の先頭へカーソルを移動する。カレント行にスペルミスした單語が見つからない場合は空文字列を返し、カーソルは移動しない。
</p>
<p>引數ありの場合: {sentence} の中のスペルミスしてゐる最初の單語を返す。スペルミスしてゐる單語がない場合は空文字列を返す。
</p>
<p>戾り値は、次の 2 個の要素を持つリスト:
</p><ul>
<li> スペルミスした單語または空文字列
</li><li> スペルミスの種類:
<table>
<tr><td width="30%">&quot;bad&quot;</td><td width="70%">スペルミス</td></tr>
<tr><td width="30%">&quot;rare&quot;</td><td width="70%">頻度の低い單語</td></tr>
<tr><td width="30%">&quot;local&quot;</td><td width="70%">他の地域でのみ有效な單語</td></tr>
<tr><td width="30%">&quot;caps&quot;</td><td width="70%">大文字で始めるべき單語</td></tr>
</table>
</li></ul>
<p>例:
</p><div class="example">
<pre class="example">echo spellbadword(&quot;the quik brown fox&quot;)
['quik', 'bad']
</pre></div>

<p>カレントウィンドウに對するスペリング情報が適用される。オプション &rsquo;<samp>spell</samp>&rsquo; がオンでなければならない。&rsquo;<samp>spelllang</samp>&rsquo; の値が使用される。
</p>
<a name="spellsuggest_0028_0029"></a><a name="index-spellsuggest_0028_0029"></a>
</dd>
<dt>spellsuggest({word} [, {max} [, {capital}]])</dt>
<dd><p>{word} の正しいスペルの候補のリスト |<a href="#List">List</a>| を返す。{max} を指定すると、候補の數の最大値となる。{max} を指定しないと、25 個までの候補を返す。
</p>
<p>{capital} に 0 でない値を指定すると、先頭が大文字の候補だけを返す。これは &rsquo;<samp>spellcapcheck</samp>&rsquo; とのマッチの後に使ふ。
</p>
<p>{word} はスペルの閒違つた單語で、後に他のテキストが續いてもよい。これにより、分割された 2 つの單語を連結することができる。候補もまた續きのテキストを含んでゐるので、これによつて行を置き換へることができる。
</p>
<p>{word} は正しい單語でもよい。すると似た單語が返つてくるだらう。{word} 自身は候補に含まれないが、大文字化されたものが含まれてゐることはある。
</p>
<p>カレントウィンドウのスペリング情報が使はれる。オプション &rsquo;<samp>spell</samp>&rsquo; がオンでなければならず、&rsquo;<samp>spelllang</samp>&rsquo; と &rsquo;<samp>spellsuggest</samp>&rsquo; の値が適用される。
</p>

<a name="split_0028_0029"></a><a name="index-split_0028_0029"></a>
</dd>
<dt>split({expr} [, {pattern} [, {keepempty}]])</dt>
<dd><p>{expr} を分割して |<a href="#List">List</a>| にする。{pattern} を省略した場合、または {pattern} が空文字列の場合は、{expr} を空白文字で區切つた各文字列が要素となる。
{pattern} を指定すると、{pattern} がマッチする位置で文字列を分割する。マッチした文字列は削除される。&rsquo;<samp>ignorecase</samp>&rsquo; はここでは適用されないので大文字小文字を無視するには \c を使ふ。|<a href="pattern_002etxt.html#g_t_002f_005cc">/\c</a>|
</p>
<p>{keepempty} に非 0 を指定しない限り、最初または最後の要素が空文字列ならばリストから取り除かれる。それ以外の空文字列は、{pattern} が 1 文字以上にマッチすれば、または {keepempty} が非 0 ならばそのままリストの要素となる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let words = split(getline('.'), '\W\+')
</pre></div>
<p>文字列を各文字に分割するには:
</p><div class="example">
<pre class="example">:for c in split(mystring, '\zs')
</pre></div>
<p>區切り文字を削除せず、そのままにしておきたい場合は、&rsquo;\zs&rsquo; をパターンの最後で使ふ:
</p><div class="example">
<pre class="example">:echo split('abc:def:ghi', ':\zs')
['abc:', 'def:', 'ghi']
</pre></div>
<p>最初の要素が空であるかもしれないテーブルを分割するには:
</p><div class="example">
<pre class="example">:let items = split(line, ':', 1)
</pre></div>
<p>これの逆を行ふ函數は |<a href="#join_0028_0029">join()</a>| である。
</p>

<a name="sqrt_0028_0029"></a><a name="index-sqrt_0028_0029"></a>
</dd>
<dt>sqrt({expr})</dt>
<dd><p>浮動小數點數 {expr} の非負平方根を |<a href="#Float">Float</a>| で返す。{expr} は |<a href="#Float">Float</a>| または |<a href="#Number">Number</a>| に評價されなければならない。{expr} が負の場合、結果は NaN (Not a Number) になる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo sqrt(100)
10.0
:echo sqrt(-4.01)
nan
</pre></div>
<p>&quot;nan&quot; はシステムのライブラリに依存するので、異なるかもしれない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>

<a name="str2float_0028_0029"></a><a name="index-str2float_0028_0029"></a>
</dd>
<dt>str2float({expr})</dt>
<dd><p>文字列 {expr} を浮動小數點數に變換する。これは式の中で浮動小數點數を使つてゐるときと同じやうに働く (|<a href="#floating_002dpoint_002dformat">floating-point-format</a>| を參照)。しかしこちらの方がゆるやかである。例へばこちらでは &quot;1e40&quot; も許されるが、式の中では &quot;1.0e+40&quot; と書かなければならない。16 進形式の &quot;0x123&quot; も許されるが、バイナリや 8 進數のやうなものは許されない。
</p>
<p>數値の後ろにある文字列は默つて無視される。
</p>
<p>小數點數はロケールの設定にかかはらず常に &rsquo;.&rsquo; である。コンマを發見すると、そこで數値は終はりになる。つまり &quot;12,345.67&quot; は 12.0 に變換される。3 桁ごとのコンマ區切りを取り除くには |<a href="#substitute_0028_0029">substitute()</a>| が使へる:
</p><div class="example">
<pre class="example">let f = str2float(substitute(text, ',', '', 'g'))
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="str2list_0028_0029"></a><a name="index-str2list_0028_0029"></a>
</dd>
<dt>str2list({expr} [, {utf8}])</dt>
<dd><p>文字列 {expr} の各文字を表す數値を含むリストを返す。例:
</p><div class="example">
<pre class="example">str2list(&quot; &quot;)           returns [32]
str2list(&quot;ABC&quot;)         returns [65, 66, 67]
</pre></div>
<p>|<a href="#list2str_0028_0029">list2str()</a>| は反對のことをする。
</p>
<p>{utf8} が省略されてゐるかゼロの場合、現在の &rsquo;<samp>encoding</samp>&rsquo; が使用される。{utf8} が 1 の場合は、常に utf-8 文字列を返す。utf-8 の合成文字は正しく處理される:
</p><div class="example">
<pre class="example">str2list(&quot;á&quot;)           returns [97, 769]
</pre></div>

<a name="str2nr_0028_0029"></a><a name="index-str2nr_0028_0029"></a>
</dd>
<dt>str2nr({expr} [, {base}])</dt>
<dd><p>文字列 {expr} を數値に變換する。{base} は變換の底。2, 8, 10, 16 のいづれか。
</p>
<p>{base} を省略すると 10 となる。そのため、文字列の先頭に 0 があるとき、デフォルトの文字列・數値變換とは異なり、8 進數とは解釋されない。
</p>
<p>{base} が 16 のとき、文字列の先頭の &quot;0x&quot; と &quot;0X&quot; は無視される。それ以外の底の場合は 0 となる。同樣に、{base} が 8 のとき、文字列の先頭の &quot;0&quot; は無視される。そして、{base} が 2 のとき、文字列の先頭の &quot;0b&quot; と &quot;0B&quot; は無視される。
</p>
<p>數値の後のテキストは暗默に無視される。
</p>

<a name="strchars_0028_0029"></a><a name="index-strchars_0028_0029"></a>
</dd>
<dt>strchars({expr} [, {skipcc}])</dt>
<dd><p>結果は數値で、文字列 {expr} の文字の數を返す。
</p>
<p>{skipcc} を省略またはゼロを指定すると、合成文字は別々にカウントされる。
</p>
<p>{skipcc} に 1 を指定すると、合成文字は無視される。
</p>
<p>{譯注: 基底文字と結合文字をまとめて 1 としてカウントする}
</p>
<p>|<a href="#strlen_0028_0029">strlen()</a>|, |<a href="#strdisplaywidth_0028_0029">strdisplaywidth()</a>|, |<a href="#strwidth_0028_0029">strwidth()</a>| も參照。
</p>
<p>{skipcc} は 7.4.755 以降でのみ有效である。それ以前では、ラッパー函數を定義すればよい:
</p><pre class="verbatim">if has(&quot;patch-7.4.755&quot;)
  function s:strchars(str, skipcc)
    return strchars(a:str, a:skipcc)
  endfunction
else
  function s:strchars(str, skipcc)
    if a:skipcc
      return strlen(substitute(a:str, &quot;.&quot;, &quot;x&quot;, &quot;g&quot;))
    else
      return strchars(a:str)
    endif
  endfunction
endif
</pre><a name="strcharpart_0028_0029"></a><a name="index-strcharpart_0028_0029"></a>
</dd>
<dt>strcharpart({src}, {start} [, {len}])</dt>
<dd><p>|<a href="#strpart_0028_0029">strpart()</a>| と同樣だがバイトのインデックスおよび長さではなく文字のインデックスおよび長さを使用する。
</p>
<p>文字インデックスが存在しない文字を指す場合、それは 1 文字であるとして扱はれる。例:
</p><div class="example">
<pre class="example">strcharpart('abc', -1, 2)
</pre></div>
<p>結果は &quot;a&quot; である。
</p>
<a name="strdisplaywidth_0028_0029"></a><a name="index-strdisplaywidth_0028_0029"></a>
</dd>
<dt>strdisplaywidth({expr} [, {col}])</dt>
<dd><p>結果は數値で、文字列 {expr} が {col} (最初の桁はゼロ) で始まる時のスクリーン上での表示セル幅を返す (first column is zero)。
</p>
<p>{col} が省略されたときはゼロが使はれる。{col} には計算を開始するスクリーン上の列の位置を指定する。これはタブ文字の幅の計算に影響する。
計算にはカレントウィンドウのオプションが使用される。&rsquo;<samp>tabstop</samp>&rsquo; や &rsquo;<samp>display</samp>&rsquo; のやうな表示を變更するやうなオプションが影響する。
</p>
<p>{expr} に幅が曖昧 (Ambiguous) な東アジアの文字が含まれてゐるときは、文字幅は &rsquo;<samp>ambiwidth</samp>&rsquo; の設定に依存する。
</p>
<p>|<a href="#strlen_0028_0029">strlen()</a>|, |<a href="#strwidth_0028_0029">strwidth()</a>|, |<a href="#strchars_0028_0029">strchars()</a>| も參照。
</p>
<a name="strftime_0028_0029"></a><a name="index-strftime_0028_0029"></a>
</dd>
<dt>strftime({format} [, {time}])</dt>
<dd><p>結果は文字列で、{format} に從つて日附や時閒がフォーマットされたものになる。{time} が與へられた場合にはそれを使ふが、省略された場合には現在時刻を使用する。受け付け可能な文字列 {format} は使用するシステムに依存するので、ポータブルとは言へない！
フォーマットについては C の函數 strftime() のマニュアルを參照。結果は最大 80 文字に制限される。|<a href="#localtime_0028_0029">localtime()</a>| と |<a href="#getftime_0028_0029">getftime()</a>| も參照。
</p>
<p>ここで使はれる言語はコマンド |<a href="mlang_002etxt.html#g_t_003alanguage">:language</a>| で變更できる。
例:
</p><pre class="verbatim">:echo strftime(&quot;%c&quot;)             Sun Apr 27 11:49:23 1997
:echo strftime(&quot;%Y %b %d %X&quot;)    1997 Apr 27 11:53:25
:echo strftime(&quot;%y%m%d %T&quot;)      970427 11:53:55
:echo strftime(&quot;%H:%M&quot;)          11:55
:echo strftime(&quot;%c&quot;, getftime(&quot;file.c&quot;))
                                 file.cの更新時刻を表示
</pre><p>この函數はどのシステムでも利用できるとは限らない。利用できるかチェックするには次のやうにする:
</p><div class="example">
<pre class="example">:if exists(&quot;*strftime&quot;)
</pre></div>

<a name="strgetchar_0028_0029"></a><a name="index-strgetchar_0028_0029"></a>
</dd>
<dt>strgetchar({str}, {index})</dt>
<dd><p>{str} 內の {index} 番目の文字インデックスを得る。これは文字のインデックスでありバイトのインデックスではない。合成文字は分割された文字として考慮される。
</p>
<p>|<a href="#strcharpart_0028_0029">strcharpart()</a>| と |<a href="#strchars_0028_0029">strchars()</a>| も參照。
</p>
<a name="stridx_0028_0029"></a><a name="index-stridx_0028_0029"></a>
</dd>
<dt>stridx({haystack}, {needle} [, {start}])</dt>
<dd><p>結果は數値で、{heystack} の中で文字列 {needle} が最初に現れる位置のバイトインデックスを表す。{start} を指定すると、インデックス {start} の位置から檢索を開始する。
2 番目のマッチを探すには次のやうにする:
</p><div class="example">
<pre class="example">:let colon1 = stridx(line, &quot;:&quot;)
:let colon2 = stridx(line, &quot;:&quot;, colon1 + 1)
</pre></div>
<p>檢索は大文字・小文字を區別する。檢索パターンについては |<a href="#match_0028_0029">match()</a>| を使ふ。{haystack} の中に {needle} がないときは-1を返す。|<a href="#strridx_0028_0029">strridx()</a>| も參照。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo stridx(&quot;An Example&quot;, &quot;Example&quot;)      3
:echo stridx(&quot;Starting point&quot;, &quot;Start&quot;)    0
:echo stridx(&quot;Starting point&quot;, &quot;start&quot;)   -1
</pre></div>
<a name="strstr_0028_0029"></a><a name="strchr_0028_0029"></a><a name="index-strstr_0028_0029"></a>
<a name="index-strchr_0028_0029"></a>
<p>stridx() は C の函數 strstr() と同じやうに動作する。{needle} が 1 文字のときは strchr() と同じやうに動作する。
</p>
<a name="string_0028_0029"></a><a name="index-string_0028_0029"></a>
</dd>
<dt>string({expr})</dt>
<dd><p>{expr} を文字列に變換して返す。{expr} が數値、浮動小數點數、文字列、Blob、それらの複合の場合は、この戾り値を |<a href="#eval_0028_0029">eval()</a>| でパースして復元できる。
</p><table>
<thead><tr><th width="30%">{expr} 型</th><th width="70%">結果</th></tr></thead>
<tr><td width="30%">文字列</td><td width="70%">&rsquo;<samp>string</samp>&rsquo; (シングルクォートは二重化される)</td></tr>
<tr><td width="30%">數値</td><td width="70%">123</td></tr>
<tr><td width="30%">浮動小數點數</td><td width="70%">123.123456 or 1.123456e8</td></tr>
<tr><td width="30%">Funcref</td><td width="70%">function(&rsquo;name&rsquo;)</td></tr>
<tr><td width="30%">Blob</td><td width="70%">0z00112233.44556677.8899</td></tr>
<tr><td width="30%">リスト</td><td width="70%">[item, item]</td></tr>
<tr><td width="30%">辭書</td><td width="70%">{key: value, key: value}</td></tr>
</table>

<p>リストや辭書に循環參照がある場合、それらは &quot;[...]&quot; や &quot;{...}&quot; に置き換へられる。その結果に對して eval() を使用すると失敗する。
</p>
<p>|<a href="#strtrans_0028_0029">strtrans()</a>|も參照。
</p>
<a name="strlen_0028_0029"></a><a name="index-strlen_0028_0029"></a>
</dd>
<dt>strlen({expr})</dt>
<dd><p>結果は數値で、文字列 {expr} のバイト單位での長さ。引數が數値の場合は、まづ文字列に變換される。それ以外の型の場合はエラーとなる。マルチバイト文字の數を數へる場合は |<a href="#strchars_0028_0029">strchars()</a>| を使用する。
</p>
<p>|<a href="#len_0028_0029">len()</a>|, |<a href="#strdisplaywidth_0028_0029">strdisplaywidth()</a>|, |<a href="#strwidth_0028_0029">strwidth()</a>| も參照。
</p>
<a name="strpart_0028_0029"></a><a name="index-strpart_0028_0029"></a>
</dd>
<dt>strpart({src}, {start} [, {len}])</dt>
<dd><p>結果は文字列で、{src} の {start} 番目の文字から始まる、長さ {len} の部分文字列。バイト數ではなく文字數で數へるには |<a href="#strcharpart_0028_0029">strcharpart()</a>| を用ゐる。
</p>
<p>存在しない文字を含むやうに範圍を指定しても、エラーにはならない。單に文字が省略されるだけである。{len} を省略すると、{start} から {src} の末尾までの部分文字列を返す。
</p><pre class="verbatim">strpart(&quot;abcdefg&quot;, 3, 2)    == &quot;de&quot;
strpart(&quot;abcdefg&quot;, -2, 4)   == &quot;ab&quot;
strpart(&quot;abcdefg&quot;, 5, 4)    == &quot;fg&quot;
strpart(&quot;abcdefg&quot;, 3)       == &quot;defg&quot;
</pre>
<blockquote>
<p><strong>Note:</strong> <br>
文字列の最初の文字を指定するためには、{start} は 0 でなければならない。カーソルのある位置から3文字を取得する例:
</p><div class="example">
<pre class="example">strpart(getline(&quot;.&quot;), col(&quot;.&quot;) - 1, 3)
</pre></div>
</blockquote>
<a name="strridx_0028_0029"></a><a name="index-strridx_0028_0029"></a>
</dd>
<dt>strridx({haystack}, {needle} [, {start}])</dt>
<dd><p>結果は數値で、{haystack} の中で文字列 {needle} が最後に現れる位置のバイトインデックスとなる。
{start} を指定すると、そのインデックス以降でのマッチは無視される。前のマッチより前にあるものを見つけるには次のやうにする:
</p><div class="example">
<pre class="example">:let lastcomma = strridx(line, &quot;,&quot;)
:let comma2 = strridx(line, &quot;,&quot;, lastcomma - 1)
</pre></div>
<p>檢索は大文字・小文字を區別する。檢索パターンについては |<a href="#match_0028_0029">match()</a>| を使ふ。
</p>
<p>{haystack} の中に {needle} がないときは -1 を返す。{needle} が空文字列のときは {haystack} の長さを返す。|<a href="#stridx_0028_0029">stridx()</a>| も參照。例:
</p><div class="example">
<pre class="example">:echo strridx(&quot;an angry armadillo&quot;, &quot;an&quot;)            3
</pre></div>
<a name="strrchr_0028_0029"></a><a name="index-strrchr_0028_0029"></a>
<p>{needle} が 1 文字の場合は C の函數 strrchr() と同じやうに動作する。
</p>
<a name="strtrans_0028_0029"></a><a name="index-strtrans_0028_0029"></a>
</dd>
<dt>strtrans({expr})</dt>
<dd><p>結果は文字列で、{expr} 內の表示不可能な文字を |<a href="options_002etxt.html#g_t_0027isprint_0027">'isprint'</a>| で指定される、表示可能な文字に變換したもの。ウィンドウに表示することができるやうになる。例:
</p><div class="example">
<pre class="example">echo strtrans(@a)
</pre></div>
<p>これはレジスタの中の改行を、改行として表示する代はりに &quot;^@&quot; と表示する。
</p>
<a name="strwidth_0028_0029"></a><a name="index-strwidth_0028_0029"></a>
</dd>
<dt>strwidth({expr})</dt>
<dd><p>結果は數値で、文字列 {expr} のスクリーン上での表示セル幅を返す。タブ文字の幅は 1 として數へられる (タブ文字の幅も考慮したい場合は |<a href="#strdisplaywidth_0028_0029">strdisplaywidth()</a>| を使ふこと)。
</p>
<p>{expr} に幅が曖昧 (Ambiguous) な東アジアの文字が含まれてゐるときは、文字幅は &rsquo;<samp>ambiwidth</samp>&rsquo; の設定に依存する。
</p>
<p>|<a href="#strlen_0028_0029">strlen()</a>|, |<a href="#strdisplaywidth_0028_0029">strdisplaywidth()</a>|, |<a href="#strchars_0028_0029">strchars()</a>| も參照。
</p>
<a name="submatch_0028_0029"></a><a name="E935"></a><a name="index-submatch_0028_0029"></a>
<a name="index-E935"></a>
</dd>
<dt>submatch({nr} [, {list}])</dt>
<dd><p>|<a href="change_002etxt.html#g_t_003asubstitute">:substitute</a>| コマンドや substitute() 函數の中の式でのみ使はれる。
</p>
<p>マッチしたテキストの {nr} 番目の部分マッチを返す。{nr} が 0 のときはマッチしたテキスト全體を返す。
</p><blockquote>
<p><strong>Note:</strong> <br>
文字列中の NL 文字は複數行マッチにおける改行文字か、NUL 文字のどちらかである。
</p></blockquote>
<p>|<a href="change_002etxt.html#sub_002dreplace_002dexpression">sub-replace-expression</a>| も參照。
</p>
<p>{list} に非ゼロの値が指定されたときは submatch() は文字列のリストを返す。|<a href="#getline_0028_0029">getline()</a>| に 2 つの引數を指定したときの戾り値と同じである。テキスト中の NL 文字は NUL 文字を表す。
</p>
<p>|<a href="change_002etxt.html#g_t_003asubstitute">:substitute</a>| で使はれたときのみ複數要素のリストを返す。|<a href="#substitute_0028_0029">substitute()</a>| では、實際の改行はそこにはないので、リストは常に 0 または 1 つの要素である。
</p>
<p>substitute() が再歸的に使用された場合、現在の（最も深い）サブマッチのみが取得できる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:s/\d\+/\=submatch(0) + 1/
:echo substitute(text, '\d\+', '\=submatch(0) + 1', '')
</pre></div>
<p>この例は、行の中で最初の數値を檢索し、それに 1 を加へる。改行は改行文字として含まれる。
</p>
<a name="substitute_0028_0029"></a><a name="index-substitute_0028_0029"></a>
</dd>
<dt>substitute({expr}, {pat}, {sub}, {flags})</dt>
<dd><p>結果は文字列で、{expr} 內で最初に {pat} にマッチした部分を {sub} に置換へたコピーになる。
</p>
<p>{flags} が &quot;g&quot; なら、{expr} 內の {pat} にマッチした部分をすべて置換する。さうしたくない場合は {flags} は &quot;&quot; にすべきである。
</p>
<p>これはコマンド &quot;<code>:substitute</code>&quot; (一切のフラグ無し) のやうに働く。しかしマッチングは常にオプション &rsquo;<samp>magic</samp>&rsquo; が設定され、オプション &rsquo;<samp>cpoptions</samp>&rsquo; は空にして實行される (スクリプトをポータブルにするため)。
</p>
<p>&rsquo;<samp>ignorecase</samp>&rsquo; は適用される。&rsquo;<samp>ignorecase</samp>&rsquo; の設定にかかはらず大文字小文字を區別するかしないか固定するには |<a href="pattern_002etxt.html#g_t_002f_005cc">/\c</a>| か |<a href="pattern_002etxt.html#g_t_002f_005cC">/\C</a>| を使ふ。&rsquo;<samp>smartcase</samp>&rsquo; は適用されない。{pat} がどう扱はれるかについては |<a href="#string_002dmatch">string-match</a>| を參照。
</p>
<p>また、{sub} 內の &quot;~&quot; は前囘の {sub} に置換されない。
</p>
<p>{sub} 內の幾つかのコードには |<a href="change_002etxt.html#sub_002dreplace_002dspecial">sub-replace-special</a>| の特殊な意味があることに注意。例へば、何かの文字列をリテラルの &quot;\n&quot; に置換へるためには、&quot;\\\\n&quot; か &rsquo;\\n&rsquo; を使ふ必要がある。
</p>
<p>{pat} が {expr} の何處にもマッチしなければ、{expr} が何の變更も受けずに返される。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let &amp;path = substitute(&amp;path, &quot;,\\=[^,]*$&quot;, &quot;&quot;, &quot;&quot;)
</pre></div>
<p>これはオプション &rsquo;<samp>path</samp>&rsquo; の最後のコンポーネントを削除する。
</p><div class="example">
<pre class="example">:echo substitute(&quot;testing&quot;, &quot;.*&quot;, &quot;\\U\\0&quot;, &quot;&quot;)
</pre></div>
<p>結果は &quot;TESTING&quot; となる。
</p>
<p>{sub} が &quot;\=&quot; で開始してゐる場合は、その後ろの文字列は式として解釋される。|<a href="change_002etxt.html#sub_002dreplace_002dexpression">sub-replace-expression</a>| 參照。例:
</p><div class="example">
<pre class="example">:echo substitute(s, '%\(\x\x\)',
        \ '\=nr2char(&quot;0x&quot; . submatch(1))', 'g')
</pre></div>

<p>{sub} が函數リファレンスの場合、1 個のオプショナル引數と共にその函數が呼び出される。例:
</p><div class="example">
<pre class="example">:echo substitute(s, '%\(\x\x\)', SubNr, 'g')
</pre></div>
<p>オプショナル引數はマッチ文字列全體と9個のサブマッチが含まれる以下の |<a href="#submatch_0028_0029">submatch()</a>| が返す樣なリストである。例:
</p><div class="example">
<pre class="example">:echo substitute(s, '%\(\x\x\)', {m -&gt; '0x' . m[1]}, 'g')
</pre></div>

<a name="swapinfo_0028_0029"></a><a name="index-swapinfo_0028_0029"></a>
</dd>
<dt>swapinfo({fname})</dt>
<dd><p>結果は辭書で、スワップファイル {fname} に關する情報を保持してゐる。フィールドには次のやうなものがある:
</p><table>
<tr><td width="30%">version</td><td width="70%">Vim のバージョン</td></tr>
<tr><td width="30%">user</td><td width="70%">ユーザー名</td></tr>
<tr><td width="30%">host</td><td width="70%">ホスト名</td></tr>
<tr><td width="30%">fname</td><td width="70%">オリジナルのファイル名</td></tr>
<tr><td width="30%">pid</td><td width="70%">スワップファイルを生成した Vim プロセスの PID</td></tr>
<tr><td width="30%">mtime</td><td width="70%">秒單位の最終修正時刻</td></tr>
<tr><td width="30%">inode</td><td width="70%">オプション: ファイルの INODE 番號</td></tr>
<tr><td width="30%">dirty</td><td width="70%">もしも變更されてゐたなら 1、さうでなければ 0</td></tr>
</table>
<blockquote>
<p><strong>Note:</strong> <br>
&quot;user&quot; と &quot;host&quot; は 多くても 39 バイトまで切り詰められることに注意。
</p></blockquote>
<p>失敗する場合、根據に &quot;エラー&quot; 項目が追加される:
</p><table>
<tr><td width="30%">Cannot open file:</td><td width="70%">ファイルが見つからないかアクセスができない</td></tr>
<tr><td width="30%">Cannot read file:</td><td width="70%">最初のブロックを讀み込むことができない</td></tr>
<tr><td width="30%">Not a swap file:</td><td width="70%">正しいブロック ID が含まれてゐない</td></tr>
<tr><td width="30%">Magic number mismatch:</td><td width="70%">無效な最初のブロックの情報</td></tr>
</table>

<a name="swapname_0028_0029"></a><a name="index-swapname_0028_0029"></a>
</dd>
<dt>swapname({expr})</dt>
<dd><p>結果はバッファ {expr} のスワップファイルへのパス。{expr} の使ひ方は上記の |<a href="#bufname_0028_0029">bufname()</a>| を參照。もしもバッファ {expr} が現在のバッファなら、結果は |<a href="recover_002etxt.html#g_t_003aswapname">:swapname</a>| (スワップファイルがあるのであれば) と同じ。もしもバッファ {expr} がスワップファイルを持たないのであれば、空文字が返される。
</p>
<a name="synID_0028_0029"></a><a name="index-synID_0028_0029"></a>
</dd>
<dt>synID({lnum}, {col}, {trans})</dt>
<dd><p>結果は數値で、現在のウィンドウ內での位置 {lnum} と {col} の位置の構文 ID。
</p>
<p>構文 ID は |<a href="#synIDattr_0028_0029">synIDattr()</a>| と |<a href="#synIDtrans_0028_0029">synIDtrans()</a>| に渡すことで、テキストについての構文情報を取得するのに使用できる。
</p>
<p>最左のカラムを指定するには {col} に 1 を、最初の行を指定するには {line} に 1 を指定する。&rsquo;<samp>synmaxcol</samp>&rsquo; が適用され、長すぎる行では 0 が返つてくる。
</p><blockquote>
<p><strong>Note:</strong> <br>
插入モードでカーソル位置を最後の文字より後ろにした場合、synID() は 0 を返す。
</p></blockquote>

<p>{trans} が |<a href="#TRUE">TRUE</a>| ならば、透過屬性のアイテムは省略され、實際に表示されてゐるアイテムが評價對象になる。これは實際に有效になつてゐるカラーを知りたい時に役に立つ。
</p>
<p>{trans} が |<a href="#FALSE">FALSE</a>| ならば、透過屬性のアイテムが返される。これはどの構文アイテムが有效になつてゐるかを知りたい時に役に立つ (例:カッコの中とか)。
</p><blockquote>
<p><strong>警告:</strong> <br>
この函數は非常に遲い。ファイルを順方向に走査する時にだけベストなスピードが得られる。
</p></blockquote>

<p>例 (カーソルの下の構文アイテムの名前を表示する):
</p><div class="example">
<pre class="example">:echo synIDattr(synID(line(&quot;.&quot;), col(&quot;.&quot;), 1), &quot;name&quot;)
</pre></div>

<a name="synIDattr_0028_0029"></a><a name="index-synIDattr_0028_0029"></a>
</dd>
<dt>synIDattr({synID}, {what} [, {mode}])</dt>
<dd><p>結果は文字列で、{synID} の屬性 {what} の內容を示す。これは構文アイテムの情報を取得するのに使用できる。
{mode} には取得したいモードの屬性に應じて、&quot;gui&quot; か &quot;cterm&quot; か &quot;term&quot; が指定できる。{mode} が省略されるか、無效な値が指定された場合、現在有效になつてゐるハイライトモードが使用される (GUI、cterm、term のどれか)。
</p>
<p>ハイライトグループにリンクされた屬性を取得するには synIDtrans() を使用する。
</p><table>
<thead><tr><th width="20%">{what}</th><th width="80%">結果</th></tr></thead>
<tr><td width="20%">&quot;name&quot;</td><td width="80%">構文アイテムの名前</td></tr>
<tr><td width="20%">&quot;fg&quot;</td><td width="80%">前景色 (GUI: カラー名、cterm: 文字列としてのカラー番號、term: 空文字列)</td></tr>
<tr><td width="20%">&quot;bg&quot;</td><td width="80%">背景色(&quot;fg&quot; 同樣)</td></tr>
<tr><td width="20%">&quot;font&quot;</td><td width="80%">フォント名 (GUI でのみ利用可) |<a href="syntax_002etxt.html#highlight_002dfont">highlight-font</a>|</td></tr>
<tr><td width="20%">&quot;sp&quot;</td><td width="80%">特殊な色 (&quot;fg&quot; 同樣) |<a href="syntax_002etxt.html#highlight_002dguisp">highlight-guisp</a>|</td></tr>
<tr><td width="20%">&quot;fg#&quot;</td><td width="80%">&quot;fg&quot; 同樣だが、&quot;#RRGGBB&quot; のフォーマットで</td></tr>
<tr><td width="20%">&quot;bg#&quot;</td><td width="80%">&quot;bg&quot; 同樣だが、&quot;#RRGGBB&quot; のフォーマットで</td></tr>
<tr><td width="20%">&quot;sp#&quot;</td><td width="80%">&quot;sp&quot; 同樣だが、&quot;#RRGGBB&quot; のフォーマットで</td></tr>
<tr><td width="20%">&quot;bold&quot;</td><td width="80%">太字なら &quot;1&quot;</td></tr>
<tr><td width="20%">&quot;italic&quot;</td><td width="80%">斜體なら &quot;1&quot;</td></tr>
<tr><td width="20%">&quot;reverse&quot;</td><td width="80%">反轉なら &quot;1&quot;</td></tr>
<tr><td width="20%">&quot;inverse&quot;</td><td width="80%">反轉 (原文 inverse) なら &quot;1&quot; (reverse と等價)</td></tr>
<tr><td width="20%">&quot;standout&quot;</td><td width="80%">强調 (standout) なら &quot;1&quot;</td></tr>
<tr><td width="20%">&quot;underline&quot;</td><td width="80%">下線付きなら &quot;1&quot;</td></tr>
<tr><td width="20%">&quot;undercurl&quot;</td><td width="80%">波線付きなら &quot;1&quot;</td></tr>
<tr><td width="20%">&quot;strike&quot;</td><td width="80%">取り消し線なら &quot;1&quot;</td></tr>
</table>

<p>例 (カーソルの下の構文アイテムのカラーを表示する):
</p><div class="example">
<pre class="example">:echo synIDattr(synIDtrans(synID(line(&quot;.&quot;), col(&quot;.&quot;), 1)), &quot;fg&quot;)
</pre></div>
<a name="synIDtrans_0028_0029"></a><a name="index-synIDtrans_0028_0029"></a>
</dd>
<dt>synIDtrans({synID})</dt>
<dd><p>結果は數値で、{synID} を構文 ID に變換したもの。キャラクタをハイライト表示してゐる構文グループの ID である。
</p>
<p>&quot;<code>:highlight link</code>&quot; によつて與へられるハイライトのリンクはこれに從つてゐる。
</p>
<a name="synconcealed_0028_0029"></a><a name="index-synconcealed_0028_0029"></a>
</dd>
<dt>synconcealed({lnum}, {col})</dt>
<dd><p>値は 3 つの項目を持つリスト。
</p><ol>
<li> リストの 1 番目のアイテムは、{lnum} と {col} の指す位置の文字が Conceal 可能リージョンの中にないなら 0、あるなら 1。
</li><li> リストの 2 番目のアイテムは文字列。最初のアイテムが 1 なら、Conceal されたテキストの場所に表示されるテキストを含む (實行時の &rsquo;<samp>conceallevel</samp>&rsquo; と &rsquo;<samp>listchars</samp>&rsquo; の設定に依存する)。
</li><li> リストの 3 番目と最後のアイテムは、行中でマッチした特有のシンタックスリージョンを表す番號。文字が Conceal されてゐないなら、値は 0。同じ置換文字を持つ 2 つの連續したリージョンがあるなら、新たな Conceal 可能なリージョンの始りを檢出を可能にする。ひとつの例として、テキストは &quot;123456&quot; で、&quot;23&quot; と &quot;45&quot; が Conceal されてゐて、文字 &quot;X&quot; で置き換へられてゐるとすると:
<table>
<thead><tr><th width="70%">呼び出し</th><th width="30%">戾り値</th></tr></thead>
<tr><td width="70%">synconcealed(lnum, 1)</td><td width="30%">[0, &rdquo;, 0]</td></tr>
<tr><td width="70%">synconcealed(lnum, 2)</td><td width="30%">[1, &rsquo;X&rsquo;, 1]</td></tr>
<tr><td width="70%">synconcealed(lnum, 3)</td><td width="30%">[1, &rsquo;X&rsquo;, 1]</td></tr>
<tr><td width="70%">synconcealed(lnum, 4)</td><td width="30%">[1, &rsquo;X&rsquo;, 2]</td></tr>
<tr><td width="70%">synconcealed(lnum, 5)</td><td width="30%">[1, &rsquo;X&rsquo;, 2]</td></tr>
<tr><td width="70%">synconcealed(lnum, 6)</td><td width="30%">[0, &rdquo;, 0]</td></tr>
</table>
</li></ol>


<a name="synstack_0028_0029"></a><a name="index-synstack_0028_0029"></a>
</dd>
<dt>synstack({lnum}, {col})</dt>
<dd><p>カレントウィンドウの {lnum}, {col} の位置の構文アイテムのスタックを |<a href="#List">List</a>| にして返す。このリストの要素は |<a href="#synID_0028_0029">synID()</a>| が返すのと同じ種類の ID である。
リストの最初の要素が一番外側の領域で、續く要素がその中に內包されてゐる。アイテム全體がハイライトされてゐる、または最後の要素が transparent なアイテムである場合を除き、最後の要素が |<a href="#synID_0028_0029">synID()</a>| が返すものである。
</p>
<p>この函數は構文ファイルをデバッグするのに役に立つ。
例 (カーソル下の構文スタックを表示する):
</p><div class="example">
<pre class="example">for id in synstack(line(&quot;.&quot;), col(&quot;.&quot;))
   echo synIDattr(id, &quot;name&quot;)
endfor
</pre></div>
<p>{lnum} と {col} が不正な場所を指してゐるときは戾り値なし。行の最後の文字の 1 つ後ろと空行の一番目の列は有效な位置である。
</p>
<a name="system_0028_0029"></a><a name="E677"></a><a name="index-system_0028_0029"></a>
<a name="index-E677"></a>
</dd>
<dt>system({expr} [, {input}])</dt>
<dd><p>シェルコマンド {expr} の實行結果を文字列として得る。リストとして受け取るには |<a href="#systemlist_0028_0029">systemlist()</a>| を參照。
</p>
<p>{input} に文字列が指定された場合、その文字列はファイルに書き出され、コマンドの標準入力として渡される。この文字列はそのまま (as-is) 書き出されるので、正しい改行文字を使ふよう自分自身で氣をつけなければならない。
</p>
<p>{input} にリスト |<a href="#List">List</a>| が指定された場合は、|<a href="#writefile_0028_0029">writefile()</a>| の {binary} に &quot;b&quot; を指定したのと同樣にファイルに書き出される (つまり、リストの各要素は改行文字で連結され、要素內の改行文字は NUL 文字に變換される)。
</p>
<p>{input} が指定され、それが數値で既存のバッファとして有效な id であるならば、そのバッファの內容が 1 行ずつファイルに書き出される。それぞれの行は NL で終端され、テキスト中の NL は NUL 文字に置き換へられる。
</p>
<p>パイプは使用されず、&rsquo;<samp>shelltemp</samp>&rsquo; オプションは使用されない。
</p>
<p>|<a href="various_002etxt.html#g_t_003asilent">:silent</a>| が前置されたときは、端末は cooked モードには設定されない。これはユーザー入力を必要としないコマンドを使用することを意味する。これは畫面に不要な文字が表示されるのを防ぐ (|<a href="various_002etxt.html#CTRL_002dL">CTRL-L</a>| でそれをクリアする必要がなくなる)。
</p><div class="example">
<pre class="example">:silent let f = system('ls *.vim')
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
コマンドの引數をエスケープするには、|<a href="#shellescape_0028_0029">shellescape()</a>|, |<a href="#expand_0028_0029">expand()</a>| の |<a href="cmdline_002etxt.html#g_t_003a_003aS">::S</a>| または |<a href="#fnamemodify_0028_0029">fnamemodify()</a>| を使用する。{expr} 內に改行文字があるとコマンドは失敗するだらう。&rsquo;<samp>shellquote</samp>&rsquo; や &rsquo;<samp>shellxquote</samp>&rsquo; 內にある文字も問題を起こすかもしれない。
</p>
<p>對話的なコマンドを使用することはできない。
</p></blockquote>

<p>戾り値は文字列。例:
</p><div class="example">
<pre class="example">:let files = system(&quot;ls &quot; .  shellescape(expand('%:h')))
:let files = system('ls ' . expand('%:h:S'))
</pre></div>

<p>システムに依存しないやうな戾り値にするために、シェルの出力をフィルタリングし、マッキントッシュにおいては &lt;CR&gt; を &lt;NL&gt; に變換し、DOS 系のシステムにおいては &lt;CR&gt;&lt;NL&gt; を &lt;NL&gt; に變換してゐる。
</p>
<p>文字列が NUL 文字で切れるのを防ぐため、すべての NUL 文字は SOH (0x01) に置換される。
</p>
<p>實行されるコマンドはいくつかのオプションを適用して構成される:
</p>
<p>&rsquo;<samp>shell</samp>&rsquo; &rsquo;<samp>shellcmdflag</samp>&rsquo; &rsquo;<samp>shellxquote</samp>&rsquo; {expr} &rsquo;<samp>shellredir</samp>&rsquo; {tmp} &rsquo;<samp>shellxquote</samp>&rsquo;
</p>
<p>({tmp} は自動的に生成されるファイル名)
</p>
<p>Unix と OS/2 ではコマンドの連結ができるやうに {expr} の兩側に波括弧が置かれる。
</p>
<p>コマンドは「cooked」モードで實行される。そのため <kbd>CTRL-C</kbd> でコマンドを中斷できる (少なくとも Unix では)。
</p>
<p>エラーコードは |<a href="#v_003ashell_005ferror">v:shell_error</a>| に格納される。
</p>
<p>この函數は |<a href="starting_002etxt.html#restricted_002dmode">restricted-mode</a>| では失敗する。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
上記のオプションに不正な値が入つてゐると、この函數の呼び出しが失敗する可能性がある。セキュリティエージェントアプリケーションを使つてゐると失敗することがあるとも報告されてゐる。
</p>
<p>&quot;<code>:!cmd</code>&quot; とは違ひ、ファイルが變更されてゐるかのチェックは行はない。
</p>
<p>明示的にチェックさせるには |<a href="editing_002etxt.html#g_t_003achecktime">:checktime</a>| を使ふ。
</p></blockquote>


<a name="systemlist_0028_0029"></a><a name="index-systemlist_0028_0029"></a>
</dd>
<dt>systemlist({expr} [, {input}])</dt>
<dd><p>|<a href="#system_0028_0029">system()</a>| と同じだが行のリスト |<a href="#List">List</a>| を返す。行は NL 文字で區切られ、NUL 文字は NL 文字に變換される。出力は |<a href="#readfile_0028_0029">readfile()</a>| の {binary} 引數に &quot;b&quot; を指定したのと同樣である。
</p><blockquote>
<p><strong>Note:</strong> <br>
MS-Windows では末尾の CR 文字がつくかもしれないことに注意。
</p></blockquote>
<p>エラー時には空文字列が返る。
</p>

<a name="tabpagebuflist_0028_0029"></a><a name="index-tabpagebuflist_0028_0029"></a>
</dd>
<dt>tabpagebuflist([{arg}])</dt>
<dd><p>カレントタブページ內の各ウィンドウに表示されてゐるバッファの番號を要素とするリスト |<a href="#List">List</a>| を返す。
</p>
<p>{arg} は對象とするタブページの番號を指定する。省略したときはカレントタブページを對象とする。
</p>
<p>{arg} が無效なときは數値 0 を返す。
</p>
<p>全タブページ中の全バッファのリストを得るには次のやうにする:
</p><pre class="verbatim">let buflist = []
for i in range(tabpagenr('$'))
   call extend(buflist, tabpagebuflist(i + 1))
endfor
</pre><blockquote>
<p><strong>Note:</strong> <br>
1 つのバッファが複數のウィンドウに表示されてゐる場合があることに注意。
</p></blockquote>


<a name="tabpagenr_0028_0029"></a><a name="index-tabpagenr_0028_0029"></a>
</dd>
<dt>tabpagenr([{arg}])</dt>
<dd><p>結果は數値で、カレントタブページの番號。最初のタブページの番號は 1 となる。
</p>
<p>省略可能な引數 {arg} に指定できる値は &quot;$&quot; のみであり、最後のタブページの番號 (つまりタブページの個數) を返す。
</p>
<p>この番號はコマンド |<a href="tabpage_002etxt.html#g_t_003atab">:tab</a>| で指定できるものと同じである。
</p>

<a name="tabpagewinnr_0028_0029"></a><a name="index-tabpagewinnr_0028_0029"></a>
</dd>
<dt>tabpagewinnr({tabarg} [, {arg}])</dt>
<dd><p>|<a href="#winnr_0028_0029">winnr()</a>| と同樣だが、タブページ {tabarg} を對象とする。
</p>
<p>{tabarg} は對象とするタブページの番號を指定する。
</p>
<p>{arg} は |<a href="#winnr_0028_0029">winnr()</a>| の場合と同じやうに扱はれる。すなはち:
</p><ul>
<li> 省略するとカレントウィンドウの番號を返す。これは、このタブページに入るとき使はれるウィンドウである。
</li><li> &quot;$&quot; とするとウィンドウの個數を返す。
</li><li> &quot;#&quot; とすると前のウィンドウ番號を返す。
</li></ul>
<p>役に立つ例:
</p><div class="example">
<pre class="example">tabpagewinnr(1)         &quot; タブページ 1 のカレントウィンドウ
tabpagewinnr(4, '$')    &quot; タブページ 4 內のウィンドウの個數
</pre></div>
<p>{tabarg} が無效なときは 0 を返す。
</p>
<a name="tagfiles_0028_0029"></a><a name="index-tagfiles_0028_0029"></a>
</dd>
<dt>tagfiles()</dt>
<dd><p>カレントバッファにおいて、タグを檢索するときに使ふファイルの名前からなるリスト |<a href="#List">List</a>| を返す。オプション &rsquo;<samp>tags</samp>&rsquo; を展開したものである。
</p>

<a name="taglist_0028_0029"></a><a name="index-taglist_0028_0029"></a>
</dd>
<dt>taglist({expr} [, {filename}])</dt>
<dd><p>正規表現 {expr} にマッチするタグのリストを返す。
</p>
<p>もし {filename} が省略されると、|<a href="tagsrch_002etxt.html#g_t_003atselect">:tselect</a>| がするのと同じ方法の結果が優先される。|<a href="tagsrch_002etxt.html#tag_002dpriority">tag-priority</a>| を參照。{filename} はファイルへのフルパスである必要がある。
</p>
<p>そのリストの各要素は辭書であり、少なくとも次の要素を持つ:
</p><table>
<thead><tr><th width="20%">name</th><th width="80%">タグの名前。</th></tr></thead>
<tr><td width="20%">filename</td><td width="80%">タグの定義があるファイルの名前。カレントディレクトリからの相對パス、またはフルパスである。</td></tr>
<tr><td width="20%">cmd</td><td width="80%">そのファイルの中でタグの位置を特定するために使ふ ex コマンド。</td></tr>
<tr><td width="20%">kind</td><td width="80%">タグの種類。種類は言語に依存する。この要素は、Exuberant ctags か hdrtag によつて生成されたタグファイルを使つてゐるときのみ使用できる。</td></tr>
<tr><td width="20%">static</td><td width="80%">ファイル固有のタグ。より詳しくは |<a href="tagsrch_002etxt.html#static_002dtag">static-tag</a>| を參照。</td></tr>
</table>
<p>タグファイルの內容によつてはこれ以上の要素が存在することもある。例: アクセス、實裝、繼承、シグネチャ。これらのフィールドについての情報は ctags のドキュメントを參照。C のソースにおいては、フィールド &quot;struct&quot;、&quot;class&quot;、&quot;enum&quot; が現れることがある。これらは、タグを含んでゐるものの名前を示す。
</p>
<p>ex コマンド &quot;cmd&quot; は檢索パターンか、行番號か、行番號とバイト番號のいづれかである。
</p>
<p>マッチするタグがない場合は空リストを返す。
</p>
<p>完全一致するタグを取得するには、{expr} にアンカー &rsquo;^&rsquo; と &rsquo;$&rsquo; をつけること。これは函數の動作を速くすることにもなる。タグ檢索の正規表現についてより詳しいことは |<a href="tagsrch_002etxt.html#tag_002dregexp">tag-regexp</a>| を參照。
</p>
<p>Vim が使用するタグファイルについては |<a href="options_002etxt.html#g_t_0027tags_0027">'tags'</a>| を參照。樣々な ctags によつて生成されるタグファイルのフォーマットについては |<a href="tagsrch_002etxt.html#tags_002dfile_002dformat">tags-file-format</a>| を參照。
</p>
<a name="tan_0028_0029"></a><a name="index-tan_0028_0029"></a>
</dd>
<dt>tan({expr})</dt>
<dd><p>{expr} の正接 (タンジェント) をラジアンで返す。値は [-inf, inf] の範圍の浮動小數點數 (|<a href="#Float">Float</a>|)。
</p>
<p>{expr} は浮動小數點數 (|<a href="#Float">Float</a>|) か數値 (|<a href="#Number">Number</a>|) でなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo tan(10)
0.648361
:echo tan(-4.01)
-1.181502
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>

<a name="tanh_0028_0029"></a><a name="index-tanh_0028_0029"></a>
</dd>
<dt>tanh({expr})</dt>
<dd><p>{expr} の雙曲線正接 (ハイパボリックタンジェント) を返す。値は [-1, 1] の範圍の浮動小數點數 (|<a href="#Float">Float</a>|)。
</p>
<p>{expr} は浮動小數點數 (|<a href="#Float">Float</a>|) か數値 (|<a href="#Number">Number</a>|) でなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo tanh(0.5)
0.462117
:echo tanh(-1)
-0.761594
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>


</dd>
<dt>term_ 函數群</dt>
<dd><p>これらの說明は次にあります: |<a href="terminal_002etxt.html#terminal_002dfunction_002ddetails">terminal-function-details</a>|
</p>
<a name="tempname_0028_0029"></a><a name="temp_002dfile_002dname"></a><a name="index-tempname_0028_0029"></a>
<a name="index-temp_002dfile_002dname"></a>
</dd>
<dt>tempname()</dt>
<dd><p>結果は文字列で、存在しないファイルのファイル名を示す。これはテンポラリファイルの名前として使用可能である。少なくとも連續 26 回の呼出しまでは違ふ名前を生成することが保證される。例:
</p><div class="example">
<pre class="example">:let tmpfile = tempname()
:exe &quot;redir &gt; &quot; . tmpfile
</pre></div>
<p>Unix では、ファイルはプライベートなディレクトリに置かれる。|<a href="change_002etxt.html#tempfile">tempfile</a>|
</p>
<p>MS-Windows では、&rsquo;<samp>shellslash</samp>&rsquo; がオンのときか &rsquo;<samp>shellcmdflag</samp>&rsquo; が &rsquo;-&rsquo; で始まるときはスラッシュが使はれる。
</p>
<a name="test_005falloc_005ffail_0028_0029"></a><a name="index-test_005falloc_005ffail_0028_0029"></a>
</dd>
<dt>test_alloc_fail({id}, {countdown}, {repeat})</dt>
<dd><p>この函數はテストのために使はれる: {id} のメモリ割り當てが行はれた際に {countdown} はデクリメントされ、それが 0 になれば {repeat} 回のメモリの割り當ての失敗を發生させる。{repeat} が 1 未滿の場合は、失敗を 1 回のみ發生させる。
</p>
<a name="test_005fautochdir_0028_0029"></a><a name="index-test_005fautochdir_0028_0029"></a>
</dd>
<dt>test_autochdir()</dt>
<dd><p>Vim の起動が完了する前に &rsquo;<samp>autochdir</samp>&rsquo; の效果を有效にするためのフラグをセットする。
</p>
<a name="test_005ffeedinput_0028_0029"></a><a name="index-test_005ffeedinput_0028_0029"></a>
</dd>
<dt>test_feedinput({string})</dt>
<dd><p>{string} 中の文字は、まるでユーザーによつて入力されたかのやうにプロセスに渡される。これは低レベルの入力バッファを使ふ。この函數は |<a href="#g_t_002bunix">+unix</a>| もしくは GUI の環境でのみ機能する。
</p>
<a name="test_005fgarbagecollect_005fnow_0028_0029"></a><a name="index-test_005fgarbagecollect_005fnow_0028_0029"></a>
</dd>
<dt>test_garbagecollect_now()</dt>
<dd><p>garbagecollect() とほぼ同じであるが、この函數はガーベッジコレクトを直ちに實行する。この函數を實行する場合は、構造體が內部に存在しないやうにするために直接呼び出す必要がある。また、この函數を呼び出す前に |<a href="#v_003atesting">v:testing</a>| を設定する必要がある。
</p>
<a name="test_005fgarbagecollect_005fsoon_0028_0029"></a><a name="index-test_005fgarbagecollect_005fsoon_0028_0029"></a>
</dd>
<dt>test_garbagecollect_soon()</dt>
<dd><p>あたかもメインループの中にゐるやうに、ガーベッジコレクトを呼び出すためのフラグを設定する。テストでのみ使用される。
</p>
<a name="test_005fgetvalue_0028_0029"></a><a name="index-test_005fgetvalue_0028_0029"></a>
</dd>
<dt>test_getvalue({name})</dt>
<dd><p>內部變數の値を取得する。{name} のこれらの値がサポートされてゐる:
</p><ul>
<li> need_fileinfo
</li></ul>

<a name="test_005fignore_005ferror_0028_0029"></a><a name="index-test_005fignore_005ferror_0028_0029"></a>
</dd>
<dt>test_ignore_error({expr})</dt>
<dd><p>{expr} を含むすべてのエラーを無視する。代はりに通常メッセージが表示される。
</p>
<p>これは、テストにおいて、try/catch を用ゐてエラーを捕捉できない (以降のコードをスキップするので) 場合のみに使ふことを意圖してゐる。
</p>
<p>{expr} は文字通り用ゐられ、パターンとしてではない。
</p>
<p>{expr} が文字列 &quot;RESET&quot; の場合、無視されるエラーのリストは空になる。
</p>
<a name="test_005fnull_005fblob_0028_0029"></a><a name="index-test_005fnull_005fblob_0028_0029"></a>
</dd>
<dt>test_null_blob()</dt>
<dd><p>null の |<a href="#Blob">Blob</a>| を返す。これはテストのみに使はれる。
</p>
<a name="test_005fnull_005fchannel_0028_0029"></a><a name="index-test_005fnull_005fchannel_0028_0029"></a>
</dd>
<dt>test_null_channel()</dt>
<dd><p>null の |<a href="#Channel">Channel</a>| を返す。これはテストのみに使はれる。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bchannel">+channel</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="test_005fnull_005fdict_0028_0029"></a><a name="index-test_005fnull_005fdict_0028_0029"></a>
</dd>
<dt>test_null_dict()</dt>
<dd><p>null の |<a href="#Dict">Dict</a>| を返す。これはテストのみに使はれる。
</p>
<a name="test_005fnull_005fjob_0028_0029"></a><a name="index-test_005fnull_005fjob_0028_0029"></a>
</dd>
<dt>test_null_job()</dt>
<dd><p>null の |<a href="#Job">Job</a>| を返す。これはテストのみに使はれる。
</p>
<p>{|<a href="various_002etxt.html#g_t_002bjob">+job</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="test_005fnull_005flist_0028_0029"></a><a name="index-test_005fnull_005flist_0028_0029"></a>
</dd>
<dt>test_null_list()</dt>
<dd><p>null の |<a href="#List">List</a>| を返す。これはテストのみに使はれる。
</p>
<a name="test_005fnull_005fpartial_0028_0029"></a><a name="index-test_005fnull_005fpartial_0028_0029"></a>
</dd>
<dt>test_null_partial()</dt>
<dd><p>null の |<a href="#Partial">Partial</a>| を返す。これはテストのみに使はれる。
</p>
<a name="test_005fnull_005fstring_0028_0029"></a><a name="index-test_005fnull_005fstring_0028_0029"></a>
</dd>
<dt>test_null_string()</dt>
<dd><p>null の |<a href="#String">String</a>| を返す。これはテストのみに使はれる。
</p>
<a name="test_005foption_005fnot_005fset_0028_0029"></a><a name="index-test_005foption_005fnot_005fset_0028_0029"></a>
</dd>
<dt>test_option_not_set({name})</dt>
<dd><p>オプション {name} が設定されてゐることを示すフラグをリセットする。そのため、既定値のままであるやうに見える。次のやうに使ふ:
</p><div class="example">
<pre class="example">set ambiwidth=double
call test_option_not_set('ambiwidth')
</pre></div>
<p>現在は、その値は &quot;double&quot; であるけれども、&rsquo;<samp>ambiwidth</samp>&rsquo; は決つして變更されてゐないかのやうに振る舞ふ。テストのみで使はれる！
</p>
<a name="test_005foverride_0028_0029"></a><a name="index-test_005foverride_0028_0029"></a>
</dd>
<dt>test_override({name}, {val})</dt>
<dd><p>テストを實行できるやうにするため、Vim の內部處理の特定の部分を置き換へる。Vim をテストするためだけに使用すること！
</p>
<p>置き換へは、{val} が非 0 のときに有效化され、{val} が 0 のときに取り除かれる。
現在、name に使へる値は:
</p>
<table>
<thead><tr><th width="20%">name</th><th width="80%">{val} が非 0 のときの效果</th></tr></thead>
<tr><td width="20%">redraw</td><td width="80%">redrawing() 函數を無效化する</td></tr>
<tr><td width="20%">redraw_flag</td><td width="80%">RedrawingDisabled フラグを無視する</td></tr>
<tr><td width="20%">char_avail</td><td width="80%">char_avail() 函數を無效化する</td></tr>
<tr><td width="20%">starting</td><td width="80%">&quot;starting&quot; の値をリセットする。以下を參照</td></tr>
<tr><td width="20%">nfa_fail</td><td width="80%">NFA 正規表現エンジンが失敗すると强制的に古いエンジンにフォールバックする</td></tr>
<tr><td width="20%">no_query_mouse</td><td width="80%">&quot;dec&quot; 端末のマウス位置を問ひ合はせない</td></tr>
<tr><td width="20%">no_wait_return</td><td width="80%">&quot;no_wait_return&quot; フラグを設定する。&quot;ALL&quot; では復元されない</td></tr>
<tr><td width="20%">ALL</td><td width="80%">すべての置き換へをクリアする ({val} は使はれない)</td></tr>
</table>

<p>Vim の起動が完了した時と同じ狀況としてテストをしたい場合に &quot;starting&quot; は使はれる。テストはスクリプトを讀み込んで實行されるので、&quot;starting&quot; の値は非ゼロ。このことは多くの場合で良いこと (テストの實行が速い) なのだが、テストがうまく動かない場合に擧動が變化するときがある。
</p>
<p>使用時:
</p><div class="example">
<pre class="example">call test_override('starting', 1)
</pre></div>
<p>&quot;starting&quot; の値は保存される。この値は次のやうにして復元できる:
</p><div class="example">
<pre class="example">call test_override('starting', 0)
</pre></div>

<a name="test_005frefcount_0028_0029"></a><a name="index-test_005frefcount_0028_0029"></a>
</dd>
<dt>test_refcount({expr})</dt>
<dd><p>{expr} の參照カウントを返す。{expr} が參照カウントを持たない型の場合は、-1 を返す。この函數はテスト用。
</p>
<a name="test_005fscrollbar_0028_0029"></a><a name="index-test_005fscrollbar_0028_0029"></a>
</dd>
<dt>test_scrollbar({which}, {value}, {dragging})</dt>
<dd><p>{which} のスクロールバーを使用し {value} 位置に移動してゐるかのやうに振る舞ふ。{which} の値は:
</p><table>
<tr><td width="30%">left</td><td width="70%">現在のウィンドウの左側のスクロールバー</td></tr>
<tr><td width="30%">right</td><td width="70%">現在のウィンドウの右側のスクロールバー</td></tr>
<tr><td width="30%">hor</td><td width="70%">水平のスクロールバー</td></tr>
</table>

<p>垂直スクロールバーのための {value} は、1 からバッファの行數になる。水平スクロールバーのための {value}は、1 と最大桁數となる。&rsquo;<samp>wrap</samp>&rsquo; は設定されてゐないと想定する。
</p>
<p>{dragging} が非ゼロの場合、スクロールバーをドラッグしてゐるかのやうになり、さうでなければ、スクロールバーをクリックしてゐるかのやうになる。{which} スクロールバーが確かに存在してゐる時にのみ動作する。明らかに GUI を使用してゐる時のみである。
</p>
<a name="test_005fsetmouse_0028_0029"></a><a name="index-test_005fsetmouse_0028_0029"></a>
</dd>
<dt>test_setmouse({row}, {col})</dt>
<dd><p>次のマウス操作に使用するマウス位置を設定する。{row} と {col} は 1 ベースである。例:
</p><div class="example">
<pre class="example">call test_setmouse(4, 20)
call feedkeys(&quot;\&lt;LeftMouse&gt;&quot;, &quot;xt&quot;)
</pre></div>

<a name="test_005fsettime_0028_0029"></a><a name="index-test_005fsettime_0028_0029"></a>
</dd>
<dt>test_settime({expr})</dt>
<dd><p>Vim が內部的に用ゐる時閒を設定する。現在は history のタイムスタンプ、viminfo のタイムスタンプ、undo に使用されてゐる。
</p>
<p>1 を渡せば、Vim は、警告やエラーメッセージの後、スリープしなくなる。
</p>
<p>{expr} は、數値として評價されなければならない。0 を渡せば、Vim の內部時閒は通常動作に戾る。
</p>
<a name="timer_005finfo_0028_0029"></a><a name="index-timer_005finfo_0028_0029"></a>
</dd>
<dt>timer_info([{id}])</dt>
<dd><p>タイマーに關する情報のリストを返す。
</p>
<p>{id} が指定された場合はそのタイマーに關する情報だけが返される。タイマー {id} が存在しない場合は空のリストが返される。
</p>
<p>{id} が省略された場合は全てのタイマーに關する情報が返される。
</p>
<p>各タイマーの情報は以下の項目を含んだ辭書で格納される:
</p><table>
<thead><tr><th width="20%">&quot;id&quot;</th><th width="80%">タイマーのID</th></tr></thead>
<tr><td width="20%">&quot;time&quot;</td><td width="80%">タイマーが開始してからの時閒</td></tr>
<tr><td width="20%">&quot;remaining&quot;</td><td width="80%">タイマーが發火するまでの時閒</td></tr>
<tr><td width="20%">&quot;repeat&quot;</td><td width="80%">何囘タイマーを發火させるかの回數; -1 は無限を意味する</td></tr>
<tr><td width="20%">&quot;callback&quot;</td><td width="80%">コールバック</td></tr>
<tr><td width="20%">&quot;paused&quot;</td><td width="80%">タイマーが一時停止中なら 1、それ以外は 0</td></tr>
</table>
<p>{|<a href="various_002etxt.html#g_t_002btimers">+timers</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>
<a name="timer_005fpause_0028_0029"></a><a name="index-timer_005fpause_0028_0029"></a>
</dd>
<dt>timer_pause({timer}, {paused})</dt>
<dd><p>タイマーを一時停止もしくは再開する。一時停止したタイマーは時閒が經過してもコールバックを呼び出さない。タイマーの再開は十分に時閒が經過してゐるなら、すぐさまコールバックが呼び出されるかもしれない。
</p>
<p>タイマーの停止は少しの閒、コールバックが呼び出されるのを避けるのに便利である。
</p>
<p>{paused} が 0 以外の數値、もしくは空でない文字列で評價される場合にタイマーが停止し、それ以外は再開する。|<a href="#non_002dzero_002darg">non-zero-arg</a>| を參照。
</p>
<p>{|<a href="various_002etxt.html#g_t_002btimers">+timers</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>
<a name="timer_005fstart_0028_0029"></a><a name="timer"></a><a name="timers"></a><a name="index-timer_005fstart_0028_0029"></a>
<a name="index-timer"></a>
<a name="index-timers"></a>
</dd>
<dt>timer_start({time}, {callback} [, {options}])</dt>
<dd><p>タイマーを作成しその ID を返す。
</p>
<p>{time} はミリ秒での待機時閒。これはコールバックが呼び出されるまでの最短の時閒である。システムがビジーもしくは Vim が入力待ちでない場合、これは長くなる。
</p>
<p>{callback} は呼び出す函數。函數の名前もしくは |<a href="#Funcref">Funcref</a>| であつても良い。引數にはタイマー ID の引數が 1 つだけ渡されて呼び出される。コールバックは Vim が入力待ちの場合だけ呼び出される。
</p>
<p>{options} は辭書。以下がサポートされてゐる:
</p><table>
<tr><td width="20%">&quot;repeat&quot;</td><td width="80%">コールバックを呼び出す繰り返し回數。-1 は無限を意味する。指定されない場合はコールバックは一度だけ呼び出される。

<p>タイマーが一行で 3 度エラーになつたら、繰り返しは取り消される。すべてはエラーメッセージなので、Vim が制禦不能になるのを防ぐ。
</p></td></tr>
</table>

<p>例:
</p><pre class="verbatim">func MyHandler(timer)
  echo 'Handler called'
endfunc
let timer = timer_start(500, 'MyHandler',
        \ {'repeat': 3})
</pre><p>これは MyHandler() を 500ms 閒隔で 3 回呼び出す。
</p>
<p>サンドボックス|<a href="#sandbox">sandbox</a>|の中では利用できない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002btimers">+timers</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>
<a name="timer_005fstop_0028_0029"></a><a name="index-timer_005fstop_0028_0029"></a>
</dd>
<dt>timer_stop({timer})</dt>
<dd><p>タイマーを停止する。タイマーのコールバックは以降呼び出されない。{timer} は timer_start() が返した ID である。よつて數値でなければならない。{timer} が存在しなかつた場合でもエラーは發生しない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002btimers">+timers</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>
<a name="timer_005fstopall_0028_0029"></a><a name="index-timer_005fstopall_0028_0029"></a>
</dd>
<dt>timer_stopall()</dt>
<dd><p>全てのタイマーを停止する。タイマーのコールバックは以降呼び出されない。タイマーが不作法に振る舞ふ場合に便利である。タイマーが存在しなかつた場合でもエラーは發生しない。
</p>
<p>{|<a href="various_002etxt.html#g_t_002btimers">+timers</a>| 機能を有效にしてコンパイルしたときのみ有效}
</p>
<a name="tolower_0028_0029"></a><a name="index-tolower_0028_0029"></a>
</dd>
<dt>tolower({expr})</dt>
<dd><p>引數の文字列の大文字を小文字に變換してできた文字列を返す (文字列に |<a href="change_002etxt.html#gu">gu</a>| を適用するのとちやうど同じ)。
</p>
<a name="toupper_0028_0029"></a><a name="index-toupper_0028_0029"></a>
</dd>
<dt>toupper({expr})</dt>
<dd><p>引數の文字列の小文字を大文字に變換してできた文字列を返す (文字列に |<a href="change_002etxt.html#gU">gU</a>| を適用するのとちやうど同じ)。
</p>
<a name="tr_0028_0029"></a><a name="index-tr_0028_0029"></a>
</dd>
<dt>tr({src}, {fromstr}, {tostr})</dt>
<dd><p>文字列 {src} の中で、{fromstr} に含まれる全ての文字を {tostr} の對應する文字で置き換へた文字列を返す。つまり、{fromstr} の最初の文字が {tostr} の最初の文字に置き換へられる。2 文字目以降も同樣。Unix のコマンド &quot;tr&quot; とちやうど同じである。マルチバイト文字も正しく扱へる。
</p>
<p>例:
</p><div class="example">
<pre class="example">echo tr(&quot;hello there&quot;, &quot;ht&quot;, &quot;HT&quot;)
</pre></div>
<p>戾り値は &quot;Hello THere&quot; となる。
</p><div class="example">
<pre class="example">echo tr(&quot;&lt;blob&gt;&quot;, &quot;&lt;&gt;&quot;, &quot;{}&quot;)
</pre></div>
<p>戾り値は &quot;{blob}&quot; となる。
</p>
<a name="trim_0028_0029"></a><a name="index-trim_0028_0029"></a>
</dd>
<dt>trim({text} [, {mask}])</dt>
<dd><p>{text} の始めと終はりから、{mask} 內にあるどのやうな文字も削除された文字列として {text} を返す。
</p>
<p>もしも {mask} が與へられてゐなければ、{mask} は 0x20 までのすべての文字となる。これは Tab, space, NL や CR を含み、加へて ノーブレークスペースの 0xa0 も含む。
</p>
<p>このコードはマルチバイト文字を適切に扱ふ。
</p>
<p>例:
</p><div class="example">
<pre class="example">echo trim(&quot;   some text &quot;)
</pre></div>
<p>&quot;some text&quot; を返す。
</p><div class="example">
<pre class="example">echo trim(&quot;  \r\t\t\r RESERVE \t\n\x0B\xA0&quot;) . &quot;_TAIL&quot;
</pre></div>
<p>&quot;RESERVE_TAIL&quot; を返す。
</p><div class="example">
<pre class="example">echo trim(&quot;rm&lt;Xrm&lt;&gt;X&gt;rrm&quot;, &quot;rm&lt;&gt;&quot;)
</pre></div>
<p>&quot;Xrm&lt;&gt;X&quot; (中閒の文字は削除されない) を返す。
</p>
<a name="trunc_0028_0029"></a><a name="index-trunc_0028_0029"></a>
</dd>
<dt>trunc({expr})</dt>
<dd><p>{expr} をゼロ方向に切りつめた整數を |<a href="#Float">Float</a>| で返す。
</p>
<p>{expr} は |<a href="#Float">Float</a>| または |<a href="#Number">Number</a>| に評價されなければならない。
</p>
<p>例:
</p><div class="example">
<pre class="example">echo trunc(1.456)
1.0
echo trunc(-5.456)
-5.0
echo trunc(4.0)
4.0
</pre></div>
<p>{|<a href="various_002etxt.html#g_t_002bfloat">+float</a>| 機能つきでコンパイルされたときのみ有效}
</p>
<a name="type_0028_0029"></a><a name="index-type_0028_0029"></a>
</dd>
<dt>type({expr})</dt>
<dd><p>{expr} の型を示す數値を返す。マジックナンバーを使はずに、v:t_ 變數を使ふ方が良い。それぞれの値は以下の通り:
</p><table>
<tr><td width="40%">數値:</td><td width="60%">0  |<a href="#v_003at_005fnumber">v:t_number</a>|</td></tr>
<tr><td width="40%">文字列:</td><td width="60%">1  |<a href="#v_003at_005fstring">v:t_string</a>|</td></tr>
<tr><td width="40%">Funcref:</td><td width="60%">2  |<a href="#v_003at_005ffunc">v:t_func</a>|</td></tr>
<tr><td width="40%">リスト:</td><td width="60%">3  |<a href="#v_003at_005flist">v:t_list</a>|</td></tr>
<tr><td width="40%">辭書:</td><td width="60%">4  |<a href="#v_003at_005fdict">v:t_dict</a>|</td></tr>
<tr><td width="40%">浮動小數點數:</td><td width="60%">5  |<a href="#v_003at_005ffloat">v:t_float</a>|</td></tr>
<tr><td width="40%">眞僞値:</td><td width="60%">6  |<a href="#v_003at_005fbool">v:t_bool</a>| (v:false と v:true)</td></tr>
<tr><td width="40%">特殊値:</td><td width="60%">7  |<a href="#v_003at_005fnone">v:t_none</a>| (v:null と v:none)</td></tr>
<tr><td width="40%">ジョブ:</td><td width="60%">8  |<a href="#v_003at_005fjob">v:t_job</a>|</td></tr>
<tr><td width="40%">チャネル:</td><td width="60%">9  |<a href="#v_003at_005fchannel">v:t_channel</a>|</td></tr>
<tr><td width="40%">Blob:</td><td width="60%">10  |<a href="#v_003at_005fblob">v:t_blob</a>|</td></tr>
</table>
<p>後方互換性のためには、次のやうな使ひ方ができる:
</p><div class="example">
<pre class="example">:if type(myvar) == type(0)
:if type(myvar) == type(&quot;&quot;)
:if type(myvar) == type(function(&quot;tr&quot;))
:if type(myvar) == type([])
:if type(myvar) == type({})
:if type(myvar) == type(0.0)
:if type(myvar) == type(v:false)
:if type(myvar) == type(v:none)
</pre></div>
<p>v:t_ 變數が存在するかを判定するにはこれを使ふ:
</p><div class="example">
<pre class="example">:if exists('v:t_number')
</pre></div>

<a name="undofile_0028_0029"></a><a name="index-undofile_0028_0029"></a>
</dd>
<dt>undofile({name})</dt>
<dd><p>{name} といふ名前のファイルの保存時に使用されるアンドゥファイルの名前を返す。&rsquo;<samp>undodir</samp>&rsquo; オプションが使用され、存在するディレクトリが檢索される。アンドゥファイルが存在するかどうかはチェックされない。
</p>
<p>{name} は常に絕對パスに展開される (內部では絕對パスを使つてゐるため)。
</p>
<p>{name} が空の場合 undofile() は空文字列を返す。ファイル名のないバッファはアンドゥファイルを書かないからである。|<a href="undo_002etxt.html#g_t_003awundo">:wundo</a>| や |<a href="undo_002etxt.html#g_t_003arundo">:rundo</a>| と組み合はせて使ふと便利だらう。
</p>
<p>|<a href="various_002etxt.html#g_t_002bpersistent_005fundo">+persistent_undo</a>| オプションを無效にしてコンパイルされた場合はこの函數は常に空文字列を返す。
</p>
<a name="undotree_0028_0029"></a><a name="index-undotree_0028_0029"></a>
</dd>
<dt>undotree()</dt>
<dd><p>アンドゥツリーの現在の狀態を辭書で返す。辭書の內容は次のとほり:
</p><table>
<tr><td width="20%">&quot;seq_last&quot;</td><td width="80%">使用されたアンドゥシーケンス番號の最大値。</td></tr>
<tr><td width="20%">&quot;seq_cur&quot;</td><td width="80%">アンドゥツリーの現在のシーケンス番號。いくつかの變更がアンドゥされた狀態だと &quot;seq_last&quot; と違ふ値になる。</td></tr>
<tr><td width="20%">&quot;time_cur&quot;</td><td width="80%">最後に |<a href="undo_002etxt.html#g_t_003aearlier">:earlier</a>| 系のコマンドが使はれた時閒。讀みやすい形式に變換するには |<a href="#strftime_0028_0029">strftime()</a>| を使ふ。</td></tr>
<tr><td width="20%">&quot;save_last&quot;</td><td width="80%">最後にファイルが保存された番號。保存がまだならゼロになる。</td></tr>
<tr><td width="20%">&quot;save_cur&quot;</td><td width="80%">アンドゥツリー內の現在位置の番號。</td></tr>
<tr><td width="20%">&quot;synced&quot;</td><td width="80%">最後のアンドゥブロックが同期されてゐれば非ゼロ。これはユーザーからの入力を待機してゐるときに起こる。|<a href="undo_002etxt.html#undo_002dblocks">undo-blocks</a>| 參照。</td></tr>
<tr><td width="20%">&quot;entries&quot;</td><td width="80%">アンドゥブロックの情報を表す辭書のリスト。</td></tr>
</table>

<p>&quot;entries&quot; リストの 1 番目にはもつとも古いアンドゥアイテムが入つてゐる。リストの各アイテムは次のやうな情報を持つた辭書である:
</p><table>
<tr><td width="20%">&quot;seq&quot;</td><td width="80%">アンドゥシーケンス番號。|<a href="undo_002etxt.html#g_t_003aundolist">:undolist</a>| で表示されるものと同じ。</td></tr>
<tr><td width="20%">&quot;time&quot;</td><td width="80%">變更が起こつた時閒。讀みやすい形式に變換するには |<a href="#strftime_0028_0029">strftime()</a>| を使ふ。</td></tr>
<tr><td width="20%">&quot;newhead&quot;</td><td width="80%">この項目は最後に追加されたアイテムにのみある。これは最後の變更を示し、次の變更を追加する場所を示す。</td></tr>
<tr><td width="20%">&quot;curhead&quot;</td><td width="80%">この項目は最後にアンドゥされたアイテムにのみある。これはアンドゥツリーの現在位置を示し、次にリドゥコマンドによつて使はれるブロックを示す。最後に變更を加へてからアンドゥを一度も實行してゐないときはこの項目はどこにも現れない。</td></tr>
<tr><td width="20%">&quot;save&quot;</td><td width="80%">この項目はファイルが保存される前の最後のブロックにのみある。番號は保存回數を示す。最初の保存は 1 で、最後のものは &quot;save_last&quot; と同じ。</td></tr>
<tr><td width="20%">&quot;alt&quot;</td><td width="80%">切り替へエントリ。同じアンドゥブロックのリストが入れ子にされてゐる。それぞれのアイテムはさらに &quot;alt&quot; アイテムを持つてゐることがある。</td></tr>
</table>

<a name="uniq_0028_0029"></a><a name="E882"></a><a name="index-uniq_0028_0029"></a>
<a name="index-E882"></a>
</dd>
<dt>uniq({list} [, {func} [, {dict}]])</dt>
<dd><p>{list} 內の隣接する同じ値の要素の 2 個目以降をその場で (in-place) 削除する。{list} を返す。リストを變更したくない場合は事前にコピーする:
</p><div class="example">
<pre class="example">:let newlist = uniq(copy(mylist))
</pre></div>
<p>デフォルトの比較函數は各要素の文字列表現を使ふ。{func} と {dict} については |<a href="#sort_0028_0029">sort()</a>| 參照。
</p>
<a name="values_0028_0029"></a><a name="index-values_0028_0029"></a>
</dd>
<dt>values({dict})</dt>
<dd><p>{dict} の全ての値からなるリスト |<a href="#List">List</a>| を返す。このリストの順序は不定である。|<a href="#items_0028_0029">items()</a>| と |<a href="#keys_0028_0029">keys()</a>| も參照。
</p>

<a name="virtcol_0028_0029"></a><a name="index-virtcol_0028_0029"></a>
</dd>
<dt>virtcol({expr})</dt>
<dd><p>結果は數値で、{expr} で與へられるファイルの位置の、スクリーン上での桁の位置を示す。返る値は、指定された位置にある文字の末尾が、スクリーン座標 (の桁) でどこに存在するかである。&lt;Tab&gt; (タブ文字) が指定した位置にあつた場合には、戾り値はそのタブの最後のカラム (桁) 位置になる。具體的に、&rsquo;<samp>ts</samp>&rsquo; が 8 に設定された狀態で第 1 桁に &lt;Tab&gt; があつた場合、戾り値は 8 になる。|<a href="syntax_002etxt.html#conceal">conceal</a>| は無視される。
</p>
<p>バイト位置については |<a href="#col_0028_0029">col()</a>| を使ふ。
</p>
<p>{expr}の解釋の仕方については |<a href="#col_0028_0029">col()</a>| を參照。
</p>
<p>&rsquo;<samp>virtualedit</samp>&rsquo; がオンのときは [lnum, col, off] といふリストを指定することもできる。&quot;off&quot; は文字の開始位置からのスクリーン座標でのオフセットである。例へば、&lt;Tab&gt;の中の位置や、行の最後の文字以降の位置を示すために使ふ。&quot;off&quot; が省略された場合はゼロが使はれる。
</p>
<p>現在のモードに對して假想編輯がオンのときは、行末を越えた位置が返つてくることもある。|<a href="options_002etxt.html#g_t_0027virtualedit_0027">'virtualedit'</a>| 可能な位置指定:
</p><table>
<tr><td width="10%">.</td><td width="90%">カーソルの位置</td></tr>
<tr><td width="10%">$</td><td width="90%">カーソル行の末尾 (カーソル行に表示されてゐる文字數 +1 となる)</td></tr>
<tr><td width="10%">&rsquo;x</td><td width="90%">マーク x の位置 (マークが設定されてゐない場合、0 が返る)</td></tr>
<tr><td width="10%">v</td><td width="90%">ビジュアルモードでは: ビジュアル選擇領域の開始行 (カーソルがその端)。ビジュアルモード以外ではカーソル位置を返す。すぐに更新される點が |<a href="motion_002etxt.html#g_t_0027_003c">'&lt;</a>| と違ふ。</td></tr>
</table>
<blockquote>
<p><strong>Note:</strong> <br>
現在のファイルに對して設定されてゐるマークだけが使用可能なことに注意。
</p>
<p>例:
</p><div class="example">
<pre class="example">virtcol(&quot;.&quot;)     &quot;foo^Lbar&quot; の &quot;^L&quot; の位置にカーソル、戾り値 5
virtcol(&quot;$&quot;)     &quot;foo^Lbar&quot; に對し、戾り値 9
virtcol(&quot;'t&quot;)    &quot;    there&quot; の 'h' に 't を設定、戾り値 6
</pre></div>
<p>最初の桁は 1 となる。エラーの場合は 0 が返る。より高度な例 (全ての行の長さの最大値を返す):
</p><div class="example">
<pre class="example">echo max(map(range(1, line('$')), &quot;virtcol([v:val, '$'])&quot;))
</pre></div>
</blockquote>


<a name="visualmode_0028_0029"></a><a name="index-visualmode_0028_0029"></a>
</dd>
<dt>visualmode([expr])</dt>
<dd><p>結果は文字列で、カレントバッファ內で最後に使はれたビジュアルモードを敎へてくれる。初期狀態では單に空文字列を返すだけだが、一度でもビジュアルモードが使はれた場合、その種類によつて &quot;v&quot;か &quot;V&quot; か &quot;&lt;CTRL-V&gt;&quot; (CTRL-V の文字が 1 文字で) 返される。これはそれぞれ文字選擇、行選擇、矩形選擇を意味してゐる。
</p>
<p>例:
</p><div class="example">
<pre class="example">exe &quot;normal &quot; . visualmode()
</pre></div>
<p>これは最後に使はれたのと同じビジュアルモードに入る。また、スクリプトの動作を、最後に使はれたビジュアルモードに應じて變更したい場合にも便利だらう。
ビジュアルモードにゐるときは |<a href="#mode_0028_0029">mode()</a>| を使つてビジュアルモードの種類を取得できる。(|<a href="map_002etxt.html#g_t_003avmap">:vmap</a>| などの中などで) {expr} に 0 以外の數値か空文字列以外の文字列を指定した場合は、ビジュアルモードがクリアされ、以前の値を返す。|<a href="#non_002dzero_002darg">non-zero-arg</a>| を參照。
</p>
<a name="wildmenumode_0028_0029"></a><a name="index-wildmenumode_0028_0029"></a>
</dd>
<dt>wildmenumode()</dt>
<dd><p>wildmenu が有效な場合は |<a href="#TRUE">TRUE</a>| を返し、さうでなければ |<a href="#FALSE">FALSE</a>| を返す。&rsquo;<samp>wildmenu</samp>&rsquo; と &rsquo;<samp>wildmode</samp>&rsquo; を參照。
</p>
<p>マッピングの中で &rsquo;<samp>wildcharm</samp>&rsquo; オプションを有效に扱ふために使用できる。(|<a href="map_002etxt.html#mapmode_002dc">mapmode-c</a>| マッピングの場合のみ意味をなす。)
</p>
<p>例へば、wildmode で &lt;c-j&gt; が &lt;down&gt; と同じやうに動作するやうにするには:
</p><div class="example">
<pre class="example">:cnoremap &lt;expr&gt; &lt;C-j&gt; wildmenumode() ? &quot;\&lt;Down&gt;\&lt;Tab&gt;&quot; : &quot;\&lt;c-j&gt;&quot;
</pre></div>
<p>(
</p><blockquote>
<p><strong>Note:</strong> <br>
&rsquo;<samp>wildcharm</samp>&rsquo; オプションが適切に設定されてゐる必要がある。
</p></blockquote>
<p>)
</p>
<a name="win_005fexecute_0028_0029"></a><a name="index-win_005fexecute_0028_0029"></a>
</dd>
<dt>win_execute({id}, {command} [, {silent}])</dt>
<dd><p>&lsquo;<code>execute()</code>&lsquo; と似てゐるが、ウィンドウ {id} のコンテキスト內で實行する。オートコマンドを發生させずに、ウィンドウを一時的にカレントウィンドウにする。{command} を實行すると、オートコマンドがトリガーされる。これは豫期しない副作用を引き起こす可能性がある。必要であれば |<a href="autocmd_002etxt.html#g_t_003anoautocmd">:noautocmd</a>| を使用すること。
</p>
<p>例:
</p><div class="example">
<pre class="example">call win_execute(winid, 'set syntax=python')
</pre></div>
<p>&lsquo;<code>setwinvar()</code>&lsquo; で同じことをしてもオートコマンドはトリガーされず、實際には構文ハイライトは表示されない。
<a name="E994"></a><a name="index-E994"></a>
すべてのコマンドがポップアップウィンドウで許可されてゐるわけではない。
</p>
<a name="win_005ffindbuf_0028_0029"></a><a name="index-win_005ffindbuf_0028_0029"></a>
</dd>
<dt>win_findbuf({bufnr})</dt>
<dd><p>バッファ {bufnr} が含まれてゐるウィンドウについて |<a href="windows_002etxt.html#window_002dID">window-ID</a>| のリストを返す。存在しない場合は空のリストになる。
</p>
<a name="win_005fgetid_0028_0029"></a><a name="index-win_005fgetid_0028_0029"></a>
</dd>
<dt>win_getid([{win} [, {tab}]])</dt>
<dd><p>特定のウィンドウに關する |<a href="windows_002etxt.html#window_002dID">window-ID</a>| を得る。{win} が未指定の時は現在のウィンドウとなる。この {win} はウィンドウ番號である。トップウィンドウは番號 1 を持つ。
</p>
<p>{tab} が未指定の場合現在のタブが使用され、{tab} が番號で指定された場合はそのタブとなる。最初のタブ番號は 1 である。ウィンドウが見附からない場合には 0 を返す。
</p>
<a name="win_005fgotoid_0028_0029"></a><a name="index-win_005fgotoid_0028_0029"></a>
</dd>
<dt>win_gotoid({expr})</dt>
<dd><p>{expr} の ID で示されるウィンドウへ移動する。これは現在のタブページも移動する。
</p>
<p>成功した場合は 1 を、ウィンドウが見附からない場合は 0 を返す。
</p>
<a name="win_005fid2tabwin_0028_0029"></a><a name="index-win_005fid2tabwin_0028_0029"></a>
</dd>
<dt>win_id2tabwin({expr})</dt>
<dd><p>{expr} の ID で示されるタブ番號とウィンドウ番號のリストを返す: [tabnr, winnr]
</p>
<p>ウィンドウが見附からなかつた場合は [0, 0] を返す。
</p>
<a name="win_005fid2win_0028_0029"></a><a name="index-win_005fid2win_0028_0029"></a>
</dd>
<dt>win_id2win({expr})</dt>
<dd><p>{expr} の ID で示されるウィンドウのウィンドウ番號を返す。現在のタブページ內でそのウィンドウが見附からなかつた場合は 0 を返す。
</p>
<a name="win_005fscreenpos_0028_0029"></a><a name="index-win_005fscreenpos_0028_0029"></a>
</dd>
<dt>win_screenpos({nr})</dt>
<dd><p>2 つの數値を持つリストとしてウィンドウ {nr} のスクリーン位置を返す: [row, col]。最初のウィンドウの位置は常に [1, 1]。タブ行が無いのであれば [2, 1]。
</p>
<p>{nr} はウィンドウ番號もしくは |<a href="windows_002etxt.html#window_002dID">window-ID</a>| になる。
</p>
<p>現在のタブページでウィンドウが見つからなければ [0, 0] を返す。
</p>
<a name="winbufnr_0028_0029"></a><a name="index-winbufnr_0028_0029"></a>
</dd>
<dt>winbufnr({nr})</dt>
<dd><p>結果は數値で、{nr} 番目のウィンドウに關聯付けられてゐるバッファの番號。{nr} にはウィンドウ番號または |<a href="windows_002etxt.html#window_002dID">window-ID</a>| が使へる。
</p>
<p>{nr} が 0 の場合、現在のウィンドウに關聯付けられてゐるバッファの番號が返る。
</p>
<p>{nr} で存在しないウィンドウを指定した場合には -1 が返る。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo &quot;The file in the current window is &quot; . bufname(winbufnr(0))
</pre></div>
<a name="wincol_0028_0029"></a><a name="index-wincol_0028_0029"></a>
</dd>
<dt>wincol()</dt>
<dd><p>結果は數値で、ウィンドウの中でカーソルがある位置の假想桁番號を表す。これはウィンドウの左側から數へたスクリーン上の桁である。一番左の桁は 1 となる。
</p>
<a name="winheight_0028_0029"></a><a name="index-winheight_0028_0029"></a>
</dd>
<dt>winheight({nr})</dt>
<dd><p>結果は數値で、{nr} で示されるウィンドウの高さ (行數) を示す。{nr} にはウィンドウ番號または |<a href="windows_002etxt.html#window_002dID">window-ID</a>| が使へる。{nr} が 0 ならば、現在のウィンドウの高さが返る。{nr} といふウィンドウが存在しない場合、-1 が返る。存在してゐるウィンドウは、絕對に 0 かそれ以上の高さを持つてゐる。これはどのやうなウィンドウツールバーも除外する。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo &quot;The current window has &quot; . winheight(0) . &quot; lines.&quot;
</pre></div>
<a name="winlayout_0028_0029"></a><a name="index-winlayout_0028_0029"></a>
</dd>
<dt>winlayout([{tabnr}])</dt>
<dd><p>結果はタブページ內のウィンドウレイアウトを含む、ネストされたリスト。
</p>
<p>{tabnr} を指定しないと現在のタブページが使はれ、さうでなければ番號 {tabnr} のタブページが使はれる。もしもタブページ {tabnr} が見つからなければ、空のリストが返される。
</p>
<p>leaf ウィンドウなら、次のものが返る:
</p><div class="example">
<pre class="example">['leaf', {winid}]
</pre></div>
<p>水平分割したウィンドウなら、桁の方式で次のものが返る:
</p><div class="example">
<pre class="example">['col', [{nested list of windows}]]
</pre></div>
<p>垂直分割したウィンドウなら、行の方式で次のものが返る:
</p><div class="example">
<pre class="example">['row', [{nested list of windows}]]
</pre></div>

<p>例:
</p><div class="example">
<pre class="example">&quot; タブページにウィンドウが 1 つのみ
:echo winlayout()
['leaf', 1000]
&quot; 水平分割されたウィンドウが 2 つ
:echo winlayout()
['col', [['leaf', 1000], ['leaf', 1001]]]
&quot; 3 つの水平分割されたウィンドウで、眞ん中のウィンドウは
&quot; 垂直分割されたウィンドウが 2 つある
:echo winlayout(2)
['col', [['leaf', 1002], ['row', ['leaf', 1003],
                     ['leaf', 1001]]], ['leaf', 1000]]
</pre></div>
<a name="winline_0028_0029"></a><a name="index-winline_0028_0029"></a>
</dd>
<dt>winline()</dt>
<dd><p>結果は數値で、ウィンドウの最上行から數へた行番號を返す。ウィンドウでの最上行が1となる。
</p>
<p>カーソルが移動するとファイルの表示が更新され、それによつてスクロールが引き起こされることがある。
</p>
<a name="winnr_0028_0029"></a><a name="index-winnr_0028_0029"></a>
</dd>
<dt>winnr([{arg}])</dt>
<dd><p>結果は現在のウィンドウを示す數値。最上位のウィンドウは 1 である。
</p>
<p>省略可能な引數 {arg} は以下の値をサポートする:
</p><table>
<tr><td width="10%">$</td><td width="90%">最後のウィンドウの番號 (ウィンドウ數)</td></tr>
<tr><td width="10%">#</td><td width="90%">最後にアクセスしたウィンドウの番號 (|<a href="windows_002etxt.html#CTRL_002dW_005fp">CTRL-W_p</a>| の行き先)。前のウィンドウがないか、別のタブページにある場合は 0 が返される。</td></tr>
<tr><td width="10%">{N}j</td><td width="90%">現在のウィンドウの下 N 番目のウィンドウの番號 (|<a href="windows_002etxt.html#CTRL_002dW_005fj">CTRL-W_j</a>| の行き先)。</td></tr>
<tr><td width="10%">{N}k</td><td width="90%">現在のウィンドウの上 N 番目のウィンドウの番號 (|<a href="windows_002etxt.html#CTRL_002dW_005fk">CTRL-W_k</a>| の行き先)。</td></tr>
<tr><td width="10%">{N}h</td><td width="90%">現在のウィンドウの左 N 番目のウィンドウの番號 (|<a href="windows_002etxt.html#CTRL_002dW_005fh">CTRL-W_h</a>| の行き先)。</td></tr>
<tr><td width="10%">{N}l</td><td width="90%">現在のウィンドウの右 N 番目のウィンドウの番號 (|<a href="windows_002etxt.html#CTRL_002dW_005fl">CTRL-W_l</a>| の行き先)。</td></tr>
</table>

<p>この番號は |<a href="windows_002etxt.html#CTRL_002dW_005fw">CTRL-W_w</a>| と &quot;<code>:wincmd w</code>&quot; で使へる。|<a href="windows_002etxt.html#g_t_003awincmd">:wincmd</a>|
</p>
<p>|<a href="#tabpagewinnr_0028_0029">tabpagewinnr()</a>| と |<a href="#win_005fgetid_0028_0029">win_getid()</a>| も參照。
例:
</p><pre class="verbatim">let window_count = winnr('$')
let prev_window = winnr('#')
let wnum = winnr('3k')
</pre>
<a name="winrestcmd_0028_0029"></a><a name="index-winrestcmd_0028_0029"></a>
</dd>
<dt>winrestcmd()</dt>
<dd><p>現在のウィンドウサイズを復元するための一聯の |<a href="windows_002etxt.html#g_t_003aresize">:resize</a>| コマンドを返す。これが返すコマンドは、ウィンドウを開閉せず、カレントウィンドウとカレントタブページが變更されてゐないときのみ正しく動作する。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let cmd = winrestcmd()
:call MessWithWindowSizes()
:exe cmd
</pre></div>
<a name="winrestview_0028_0029"></a><a name="index-winrestview_0028_0029"></a>
</dd>
<dt>winrestview({dict})</dt>
<dd><p>|<a href="#winsaveview_0028_0029">winsaveview()</a>| が返す辭書 |<a href="#Dictionary">Dictionary</a>| を使つてカレントウィンドウの表示狀態を復元する。
</p><blockquote>
<p><strong>Note:</strong> <br>
{dict} は |<a href="#winsaveview_0028_0029">winsaveview()</a>| の戾り値に含まれる値をすべて持つてゐなくても構はない。値がない場合はその設定は復元されない。次のやうにできる:
</p>
<div class="example">
<pre class="example">:call winrestview({'curswant': 4})
</pre></div>
</blockquote>
<p>これは curswant 値 (縱方向移動でカーソルの移動先として使はれる列番號) を列番號 5 に設定する (はいそのとほり。5 です)。ほかの設定値は變更されない。これはカーソル位置を手動で設定したい場合に便利である。
</p>
<p>この値を手動で變更した場合、結果は豫測できない。ウィンドウサイズが變更されてゐると、結果は必ずしも元通りにならない。
</p>
<a name="winsaveview_0028_0029"></a><a name="index-winsaveview_0028_0029"></a>
</dd>
<dt>winsaveview()</dt>
<dd><p>カレントウィンドウの表示狀態を復元するための情報を持つ辭書 |<a href="#Dictionary">Dictionary</a>| を返す。この表示狀態を復元するには |<a href="#winrestview_0028_0029">winrestview()</a>| を使ふ。
</p>
<p>マッピング內でジャンプして、元の表示狀態を戾したいときに使はれる。
</p>
<p>折り疊み情報は保存しない。オプション &rsquo;<samp>foldenable</samp>&rsquo; によつて一時的に折り疊みをオフにし、移動中に折り疊みが開かれないやうにすること。これは副作用があるかもしれない。
戾り値は以下のキーを持つ:
</p><table>
<tr><td width="20%">lnum</td><td width="80%">カーソルの行番號</td></tr>
<tr><td width="20%">col</td><td width="80%">カーソルの桁番號 (
<blockquote>
<p><strong>Note:</strong> <br>
getpos() とは異なり最初の桁番號はゼロ
</p></blockquote>
<p>)
</p></td></tr>
<tr><td width="20%">coladd</td><td width="80%">カーソル位置の桁オフセット。&rsquo;<samp>virtualedit</samp>&rsquo; がオンのとき使はれる。</td></tr>
<tr><td width="20%">curswant	垂直移動するときの桁</td></tr>
<tr><td width="20%">topline</td><td width="80%">ウィンドウの最上行</td></tr>
<tr><td width="20%">topfill</td><td width="80%">削除行。差分モードでのみ</td></tr>
<tr><td width="20%">leftcol</td><td width="80%">表示されてゐる最初の桁</td></tr>
<tr><td width="20%">skipcol</td><td width="80%">スキップされてゐる桁</td></tr>
</table>
<blockquote>
<p><strong>Note:</strong> <br>
オプションの値は保存されない。
</p></blockquote>


<a name="winwidth_0028_0029"></a><a name="index-winwidth_0028_0029"></a>
</dd>
<dt>winwidth({nr})</dt>
<dd><p>結果は數値で、ウィンドウ {nr} の幅。{nr} にはウィンドウ番號または |<a href="windows_002etxt.html#window_002dID">window-ID</a>| が使へる。
</p>
<p>{nr} が 0 のときはカレントウィンドウの幅を返す。ウィンドウ {nr} が存在しないときは -1 を返す。ウィンドウは必ず 0 以上の幅を持つ。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo &quot;The current window has &quot; . winwidth(0) . &quot; columns.&quot;
:if winwidth(0) &lt;= 50
:  50 wincmd |
:endif
</pre></div>
<p>端末または畫面サイズを取得するには、&rsquo;<samp>columns</samp>&rsquo; オプション參照。
</p>

<a name="wordcount_0028_0029"></a><a name="index-wordcount_0028_0029"></a>
</dd>
<dt>wordcount()</dt>
<dd><p>この結果は現在のバッファのバイト/文字/單語統計情報の辭書である。これは |<a href="editing_002etxt.html#g_005fCTRL_002dG">g_CTRL-G</a>| が提供する情報と同じである。
この値には下記が含まれる:
</p><table>
<tr><td width="30%">bytes</td><td width="70%">バッファ內のバイト數</td></tr>
<tr><td width="30%">chars</td><td width="70%">バッファ內の文字數</td></tr>
<tr><td width="30%">words</td><td width="70%">バッファ內の單語數</td></tr>
<tr><td width="30%">cursor_bytes</td><td width="70%">カーソル位置より前のバイト數 (ビジュアルモードでない)</td></tr>
<tr><td width="30%">cursor_chars</td><td width="70%">カーソル位置より前の文字數 (ビジュアルモードでない)</td></tr>
<tr><td width="30%">cursor_words</td><td width="70%">カーソル位置より前の單語數 (ビジュアルモードでない)</td></tr>
<tr><td width="30%">visual_bytes</td><td width="70%">ビジュアル選擇領域內のバイト數 (ビジュアルモードのみ)</td></tr>
<tr><td width="30%">visual_chars</td><td width="70%">ビジュアル選擇領域內の文字數 (ビジュアルモードのみ)</td></tr>
<tr><td width="30%">visual_words</td><td width="70%">ビジュアル選擇領域內の單語數 (ビジュアルモードのみ)</td></tr>
</table>


<a name="writefile_0028_0029"></a><a name="index-writefile_0028_0029"></a>
</dd>
<dt>writefile({object}, {fname} [, {flags}])</dt>
<dd><p>{object} が |<a href="#List">List</a>| の場合、それをファイル {fname} に書き込む。リストの各要素は改行文字 (NL) で區切られる。各要素は文字列か數値でなければならない。
</p>
<p>{flags} が &quot;b&quot; を含むときはバイナリモードとなり、最後の要素の後に NL が追加されない。最後の要素が空であると、ファイルの最後の行が NL で終はるやうになる。
</p>
<p>{object} が |<a href="#Blob">Blob</a>| の場合、バイトを變更せずにファイル {fname} に書き込む。
</p>
<p>{flags} が &quot;a&quot; を含むときは追記モードとなり、ファイルに行が追記される。
</p><div class="example">
<pre class="example">:call writefile([&quot;foo&quot;], &quot;event.log&quot;, &quot;a&quot;)
:call writefile([&quot;bar&quot;], &quot;event.log&quot;, &quot;a&quot;)
</pre></div>
<p>{flags} が &quot;s&quot; を含むときはファイルを書き込んだ後に fsync() が呼ばれる。もしも可能ならば、ファイルをディスクにフラッシュする。これには時閒がかかるけれども、例へシステムがクラッシュしたとしても、ファイルを失ふことを囘避する。
</p>
<p>{flags} が &quot;S&quot; も &quot;s&quot; も含まないときに &rsquo;fsync&rsquo; オプションが設定されてゐると fsync() は呼ばれる。
</p>
<p>{flags} が &quot;S&quot; を含むときは &rsquo;fsync&rsquo; が設定されてゐても fsync() は呼ばれない。
</p>
<p>NL 文字は NUL 文字に置換される。
</p>
<p>CR 文字を加へるには、{list} を writefile() に渡す前に行はねばならない。
</p>
<p>既存のファイルは上書きされる (上書き可能ならば)。
</p>
<p>書き込みが失敗したときは -1 を返す。さうでなければ 0 を返す。ファイルを作成できないときや、書き込みが失敗したときはエラーメッセージが表示される。
</p>
<p>|<a href="#readfile_0028_0029">readfile()</a>| も參照。
バイト單位でファイルをコピーするには次のやうにする:
</p><div class="example">
<pre class="example">:let fl = readfile(&quot;foo&quot;, &quot;b&quot;)
:call writefile(fl, &quot;foocopy&quot;, &quot;b&quot;)
</pre></div>


<a name="xor_0028_0029"></a><a name="index-xor_0028_0029"></a>
</dd>
<dt>xor({expr}, {expr})</dt>
<dd><p>2 つの引數のビット排他的論理和。引數は數値に變換される。リスト、辭書、浮動小數點數を指定するとエラーになる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let bits = xor(bits, 0x80)
</pre></div>
</dd>
</dl>


<a name="feature_002dlist"></a><a name="index-feature_002dlist"></a>
<a name="Ji-Neng-haDa-Bie-site-4-tunoXi-Tong-niFen-kerareru_003a"></a>
<h4 class="unnumberedsubsec">機能は大別して 4 つの系統に分けられる:</h4>
<ol>
<li> コンパイル時に |<a href="various_002etxt.html#g_t_002bfeature_002dlist">+feature-list</a>| とした時にだけサポートされる機能。例:
<div class="example">
<pre class="example">:if has(&quot;cindent&quot;)
</pre></div>
</li><li> ある狀態の時にだけサポートされる機能。例:
<div class="example">
<pre class="example">:if has(&quot;gui_running&quot;)
</pre></div>
</li><li> 特定のバージョン以降であるか、またはバージョンが同じで特定のパッチが含まれてゐるかどうか。&quot;patch-7.4.248&quot; は、Vim のバージョンが 7.5 以降か、または 7.4 でパッチ 248 を含んでゐるかどうかを示す。例:
<div class="example">
<pre class="example">:if has(&quot;patch-7.4.248&quot;)
</pre></div>
</li></ol>
<blockquote>
<p><strong>Note:</strong> <br>
249 が適用されてゐても、248 が拔けてゐることもありうるので注意。cherry-pick パッチの時にのみ生じる。
</p></blockquote>
<blockquote>
<p><strong>Note:</strong> <br>
これはパッチ 7.4.237 以降でのみ機能する。それ以前では上述のやうに v:version を確認する必要がある。例 (6.2.148 以降かどうかを確認する):
</p></blockquote>
<div class="example">
<pre class="example">:if v:version &gt; 602 || (v:version == 602 &amp;&amp; has(&quot;patch148&quot;))
</pre></div>

<blockquote>
<p><strong>ヒント:</strong> <br>
Vim がファイル名 (MS-Windows) でバックスラッシュをサポートしてゐるかどうかを調べるには &lsquo;if exists(&rsquo;+shellslash&rsquo;)&lsquo; を使用する。
</p></blockquote>


<table>
<tr><td width="30%">acl</td><td width="70%">|<a href="editing_002etxt.html#ACL">ACL</a>| をサポート</td></tr>
<tr><td width="30%">all_builtin_terms</td><td width="70%">全ての組込みターミナルを有效にしてコンパイル</td></tr>
<tr><td width="30%">amiga</td><td width="70%">AMIGA バージョン</td></tr>
<tr><td width="30%">arabic</td><td width="70%">アラビア語をサポート |<a href="arabic_002etxt.html#Arabic">Arabic</a>|</td></tr>
<tr><td width="30%">arp</td><td width="70%">ARP をサポート (Amiga)</td></tr>
<tr><td width="30%">autocmd</td><td width="70%">オートコマンドをサポート (常に眞)</td></tr>
<tr><td width="30%">autochdir</td><td width="70%">&rsquo;<samp>autochdir</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">autoservername</td><td width="70%">自動的に動作する |<a href="remote_002etxt.html#clientserver">clientserver</a>|</td></tr>
<tr><td width="30%">balloon_eval</td><td width="70%">|<a href="debugger_002etxt.html#balloon_002deval">balloon-eval</a>| をサポート</td></tr>
<tr><td width="30%">balloon_multiline</td><td width="70%">複數行バルーンをサポート</td></tr>
<tr><td width="30%">beos</td><td width="70%">BeOS バージョン</td></tr>
<tr><td width="30%">browse</td><td width="70%">|<a href="editing_002etxt.html#g_t_003abrowse">:browse</a>| をサポートし、browse() が動作する</td></tr>
<tr><td width="30%">browsefilter</td><td width="70%">|<a href="editing_002etxt.html#browsefilter">browsefilter</a>| をサポート</td></tr>
<tr><td width="30%">bsd</td><td width="70%">BSD ファミリの OS でコンパイルされてゐる (macOS を除く)</td></tr>
<tr><td width="30%">builtin_terms</td><td width="70%">幾つかの組込みターミナルが有效</td></tr>
<tr><td width="30%">byte_offset</td><td width="70%">&rsquo;<samp>statusline</samp>&rsquo; において &rsquo;o&rsquo; がサポートされる</td></tr>
<tr><td width="30%">cindent</td><td width="70%">&rsquo;<samp>cindent</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">clientserver</td><td width="70%">リモート呼び出しをサポート |<a href="remote_002etxt.html#clientserver">clientserver</a>|</td></tr>
<tr><td width="30%">clipboard</td><td width="70%">&rsquo;<samp>clipboard</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">cmdline_compl</td><td width="70%">|<a href="cmdline_002etxt.html#cmdline_002dcompletion">cmdline-completion</a>| コマンドライン補完をサポート</td></tr>
<tr><td width="30%">cmdline_hist</td><td width="70%">|<a href="cmdline_002etxt.html#cmdline_002dhistory">cmdline-history</a>| コマンドライン履歷をサポート</td></tr>
<tr><td width="30%">cmdline_info</td><td width="70%">&rsquo;<samp>showcmd</samp>&rsquo; と &rsquo;<samp>ruler</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">comments</td><td width="70%">|<a href="options_002etxt.html#g_t_0027comments_0027">'comments'</a>| をサポート</td></tr>
<tr><td width="30%">compatible</td><td width="70%">Vi 互換度を非常に高めてコンパイルされてゐる</td></tr>
<tr><td width="30%">conpty</td><td width="70%">|<a href="terminal_002etxt.html#ConPTY">ConPTY</a>| を使用できるプラットフォーム</td></tr>
<tr><td width="30%">cryptv</td><td width="70%">暗號化をサポート |<a href="editing_002etxt.html#encryption">encryption</a>|</td></tr>
<tr><td width="30%">cscope</td><td width="70%">|<a href="if_005fcscop_002etxt.html#cscope">cscope</a>| をサポート</td></tr>
<tr><td width="30%">cursorbind</td><td width="70%">|<a href="options_002etxt.html#g_t_0027cursorbind_0027">'cursorbind'</a>| をサポート (常に true)</td></tr>
<tr><td width="30%">debug</td><td width="70%">デバッグバージョンである</td></tr>
<tr><td width="30%">dialog_con</td><td width="70%">コンソールダイアログのサポート</td></tr>
<tr><td width="30%">dialog_gui</td><td width="70%">GUI ダイアログのサポート</td></tr>
<tr><td width="30%">diff</td><td width="70%">|<a href="diff_002etxt.html#vimdiff">vimdiff</a>| と &rsquo;<samp>diff</samp>&rsquo; のサポート</td></tr>
<tr><td width="30%">digraphs</td><td width="70%">ダイグラフをサポート</td></tr>
<tr><td width="30%">directx</td><td width="70%">DirectX と &rsquo;<samp>renderoptions</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">dnd</td><td width="70%">レジスタ &quot;~ をサポート |<a href="change_002etxt.html#quote_005f_007e">quote_~</a>|</td></tr>
<tr><td width="30%">ebcdic</td><td width="70%">EBCDIC 文字集合のマシン用</td></tr>
<tr><td width="30%">emacs_tags</td><td width="70%">Emacs 式のタグファイルをサポート</td></tr>
<tr><td width="30%">eval</td><td width="70%">式評價をサポート (常に眞)</td></tr>
<tr><td width="30%">ex_extra</td><td width="70%">今は常に眞 |<a href="various_002etxt.html#g_t_002bex_005fextra">+ex_extra</a>|</td></tr>
<tr><td width="30%">extra_search</td><td width="70%">|<a href="options_002etxt.html#g_t_0027incsearch_0027">'incsearch'</a>| と |<a href="options_002etxt.html#g_t_0027hlsearch_0027">'hlsearch'</a>| をサポート</td></tr>
<tr><td width="30%">farsi</td><td width="70%">|<a href="farsi_002etxt.html#farsi">farsi</a>| をサポート</td></tr>
<tr><td width="30%">file_in_path</td><td width="70%">|<a href="editing_002etxt.html#gf">gf</a>| と |<a href="cmdline_002etxt.html#g_t_003ccfile_003e">&lt;cfile&gt;</a>| をサポート</td></tr>
<tr><td width="30%">filterpipe</td><td width="70%">&rsquo;<samp>shelltemp</samp>&rsquo; がオフのとき、シェルの讀み込み・書き込み・フィルタコマンドにパイプを使ふ。</td></tr>
<tr><td width="30%">find_in_path</td><td width="70%">include ファイル內の檢索をサポート |<a href="various_002etxt.html#g_t_002bfind_005fin_005fpath">+find_in_path</a>|</td></tr>
<tr><td width="30%">float</td><td width="70%">浮動小數點數 |<a href="#Float">Float</a>| サポート</td></tr>
<tr><td width="30%">fname_case</td><td width="70%">ファイル名の大文字小文字が區別される (Amiga, MS-DOS, そして Windows では區別されないので僞)</td></tr>
<tr><td width="30%">folding</td><td width="70%">|<a href="fold_002etxt.html#folding">folding</a>| 折り疊みをサポート</td></tr>
<tr><td width="30%">footer</td><td width="70%">GUI のフッターをサポート |<a href="debugger_002etxt.html#gui_002dfooter">gui-footer</a>|</td></tr>
<tr><td width="30%">fork</td><td width="70%">system() の代はりに fork()/exec() を用ゐてゐる</td></tr>
<tr><td width="30%">fullscreen</td><td width="70%">&rsquo;<samp>fullscreen</samp>&rsquo; のサポート</td></tr>
<tr><td width="30%">gettext</td><td width="70%">飜譯メッセージをサポート |<a href="mlang_002etxt.html#multi_002dlang">multi-lang</a>|</td></tr>
<tr><td width="30%">gui</td><td width="70%">GUI が有效である</td></tr>
<tr><td width="30%">gui_athena</td><td width="70%">Athena の GUI が有效である</td></tr>
<tr><td width="30%">gui_gnome</td><td width="70%">Gnome サポート (gui_gtk も定義される)</td></tr>
<tr><td width="30%">gui_gtk</td><td width="70%">GTK+ の GUI が有效である</td></tr>
<tr><td width="30%">gui_gtk2</td><td width="70%">GTK+ 2 の GUI が有效である (gui_gtk も定義される)</td></tr>
<tr><td width="30%">gui_gtk3</td><td width="70%">GTK+ 3 の GUI が有效である (gui_gtk も定義される)</td></tr>
<tr><td width="30%">gui_mac</td><td width="70%">マッキントッシュの GUI が有效である</td></tr>
<tr><td width="30%">gui_macvim</td><td width="70%">MacVim の GUI が有效である。</td></tr>
<tr><td width="30%">gui_motif</td><td width="70%">Motif の GUI が有效である</td></tr>
<tr><td width="30%">gui_photon</td><td width="70%">Photon の GUI が有效である</td></tr>
<tr><td width="30%">gui_running</td><td width="70%">Vim が GUI モードで起動してゐる、もしくは閒もなくする</td></tr>
<tr><td width="30%">gui_win32</td><td width="70%">Win32 の GUI が有效である</td></tr>
<tr><td width="30%">gui_win32s</td><td width="70%">Win32s の GUI が有效である (Windows 3.1)</td></tr>
<tr><td width="30%">hangul_input</td><td width="70%">ハングル入力サポート |<a href="hangulin_002etxt.html#hangul">hangul</a>|</td></tr>
<tr><td width="30%">hpux</td><td width="70%">HP-UX のバージョン</td></tr>
<tr><td width="30%">iconv</td><td width="70%">iconv() をサポート</td></tr>
<tr><td width="30%">insert_expand</td><td width="70%">插入モード時に CTRL-X の展開がサポートされる</td></tr>
<tr><td width="30%">jumplist</td><td width="70%">|<a href="motion_002etxt.html#jumplist">jumplist</a>| をサポート</td></tr>
<tr><td width="30%">keymap</td><td width="70%">&rsquo;<samp>keymap</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">lambda</td><td width="70%">|<a href="#lambda">lambda</a>| をサポート</td></tr>
<tr><td width="30%">langmap</td><td width="70%">&rsquo;<samp>langmap</samp>&rsquo; サポート</td></tr>
<tr><td width="30%">libcall</td><td width="70%">|<a href="#libcall_0028_0029">libcall()</a>| をサポート</td></tr>
<tr><td width="30%">linebreak</td><td width="70%">&rsquo;<samp>linebreak</samp>&rsquo;, &rsquo;<samp>breakat</samp>&rsquo;, &rsquo;<samp>showbreak</samp>&rsquo;, &rsquo;<samp>breakindent</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">linux</td><td width="70%">Linux のバージョン</td></tr>
<tr><td width="30%">lispindent</td><td width="70%">lisp 式のインデントをサポート</td></tr>
<tr><td width="30%">listcmds</td><td width="70%">バッファリスト用のコマンド |<a href="windows_002etxt.html#g_t_003afiles">:files</a>| と引數リスト用のコマンド |<a href="editing_002etxt.html#arglist">arglist</a>| をサポート</td></tr>
<tr><td width="30%">localmap</td><td width="70%">ローカルなマッピングと短縮入力をサポート |<a href="map_002etxt.html#g_t_003amap_002dlocal">:map-local</a>|</td></tr>
<tr><td width="30%">lua</td><td width="70%">Lua インターフェイスをサポート |<a href="if_005flua_002etxt.html#Lua">Lua</a>|</td></tr>
<tr><td width="30%">mac</td><td width="70%">すべてのマッキントッシュ版 Vim。osx を參照</td></tr>
<tr><td width="30%">macunix</td><td width="70%">osxdarwin と同義語</td></tr>
<tr><td width="30%">menu</td><td width="70%">|<a href="gui_002etxt.html#g_t_003amenu">:menu</a>| をサポート</td></tr>
<tr><td width="30%">mksession</td><td width="70%">|<a href="starting_002etxt.html#g_t_003amksession">:mksession</a>| をサポート</td></tr>
<tr><td width="30%">modify_fname</td><td width="70%">ファイル名變換子をサポート |<a href="cmdline_002etxt.html#filename_002dmodifiers">filename-modifiers</a>|</td></tr>
<tr><td width="30%">mouse</td><td width="70%">マウスをサポート</td></tr>
<tr><td width="30%">mouse_dec</td><td width="70%">DEC のターミナルマウスをサポート</td></tr>
<tr><td width="30%">mouse_gpm</td><td width="70%">gpm をサポート (Linux のコンソールマウス)</td></tr>
<tr><td width="30%">mouse_gpm_enabled</td><td width="70%">GPM マウスが動作してゐる</td></tr>
<tr><td width="30%">mouse_netterm</td><td width="70%">netterm のマウスをサポート</td></tr>
<tr><td width="30%">mouse_pterm</td><td width="70%">qnx pterm のマウスをサポート</td></tr>
<tr><td width="30%">mouse_sysmouse</td><td width="70%">sysmouse (*BSD コンソールマウス) をサポート</td></tr>
<tr><td width="30%">mouse_sgr</td><td width="70%">sgr のマウスをサポート</td></tr>
<tr><td width="30%">mouse_urxvt</td><td width="70%">urxvt のマウスをサポート</td></tr>
<tr><td width="30%">mouse_xterm</td><td width="70%">xterm のマウスをサポート</td></tr>
<tr><td width="30%">mouseshape</td><td width="70%">&rsquo;<samp>mouseshape</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">multi_byte</td><td width="70%">&rsquo;<samp>encoding</samp>&rsquo; をサポート (常に眞)</td></tr>
<tr><td width="30%">multi_byte_encoding</td><td width="70%">&rsquo;<samp>encoding</samp>&rsquo; がマルチバイトエンコーディングになる</td></tr>
<tr><td width="30%">multi_byte_ime</td><td width="70%">IME による入力をサポート</td></tr>
<tr><td width="30%">multi_lang</td><td width="70%">複數言語をサポート</td></tr>
<tr><td width="30%">mzscheme</td><td width="70%">MzScheme インターフェイスをサポート |<a href="if_005fmzsch_002etxt.html#mzscheme">mzscheme</a>|</td></tr>
<tr><td width="30%">netbeans_enabled</td><td width="70%">|<a href="netbeans_002etxt.html#netbeans">netbeans</a>| をサポートし、現在接續してゐる</td></tr>
<tr><td width="30%">netbeans_intg</td><td width="70%">|<a href="netbeans_002etxt.html#netbeans">netbeans</a>| をサポート</td></tr>
<tr><td width="30%">num64</td><td width="70%">64 ビット數値をサポート |<a href="#Number">Number</a>|</td></tr>
<tr><td width="30%">odbeditor</td><td width="70%">|<a href="gui_005fmac_002etxt.html#odbeditor">odbeditor</a>| をサポート</td></tr>
<tr><td width="30%">ole</td><td width="70%">Win32 にて OLE オートメーションをサポート</td></tr>
<tr><td width="30%">osx</td><td width="70%">macOS 向け。mac を參照</td></tr>
<tr><td width="30%">osxdarwin</td><td width="70%">macOS 向け。|<a href="os_005fmac_002etxt.html#mac_002ddarwin_002dfeature">mac-darwin-feature</a>| をサポート</td></tr>
<tr><td width="30%">packages</td><td width="70%">|<a href="repeat_002etxt.html#packages">packages</a>| をサポート</td></tr>
<tr><td width="30%">path_extra</td><td width="70%">&rsquo;<samp>path</samp>&rsquo; と &rsquo;<samp>tags</samp>&rsquo; の上方・下方檢索をサポート</td></tr>
<tr><td width="30%">perl</td><td width="70%">Perl インターフェイスをサポート</td></tr>
<tr><td width="30%">persistent_undo</td><td width="70%">永續アンドゥをサポート</td></tr>
<tr><td width="30%">postscript</td><td width="70%">PostScript ファイルの印刷をサポート</td></tr>
<tr><td width="30%">printer</td><td width="70%">|<a href="print_002etxt.html#g_t_003ahardcopy">:hardcopy</a>| をサポート</td></tr>
<tr><td width="30%">profile</td><td width="70%">|<a href="repeat_002etxt.html#g_t_003aprofile">:profile</a>| をサポート</td></tr>
<tr><td width="30%">python</td><td width="70%">Python 2.x インターフェイスをサポート |<a href="if_005fpyth_002etxt.html#has_002dpython">has-python</a>|</td></tr>
<tr><td width="30%">python3</td><td width="70%">Python 3.x インターフェイスをサポート |<a href="if_005fpyth_002etxt.html#has_002dpython">has-python</a>|</td></tr>
<tr><td width="30%">python</td><td width="70%">Python 2.x インターフェイスを利用できる |<a href="if_005fpyth_002etxt.html#has_002dpython">has-python</a>|</td></tr>
<tr><td width="30%">python_compiled</td><td width="70%">Python 2.x インターフェイスでコンパイルされてゐる |<a href="if_005fpyth_002etxt.html#has_002dpython">has-python</a>|</td></tr>
<tr><td width="30%">python_dynamic</td><td width="70%">Python 2.x インターフェイスは動的にロードされる |<a href="if_005fpyth_002etxt.html#has_002dpython">has-python</a>|</td></tr>
<tr><td width="30%">python3</td><td width="70%">Python 3.x インターフェイスを利用できる |<a href="if_005fpyth_002etxt.html#has_002dpython">has-python</a>|</td></tr>
<tr><td width="30%">python3_compiled</td><td width="70%">Python 3.x インターフェイスでコンパイルされてゐる |<a href="if_005fpyth_002etxt.html#has_002dpython">has-python</a>|</td></tr>
<tr><td width="30%">python3_dynamic</td><td width="70%">Python 3.x インターフェイスは動的にロードされる |<a href="if_005fpyth_002etxt.html#has_002dpython">has-python</a>|</td></tr>
<tr><td width="30%">pythonx</td><td width="70%">|<a href="if_005fpyth_002etxt.html#python_005fx">python_x</a>| インターフェイスをサポート |<a href="if_005fpyth_002etxt.html#has_002dpythonx">has-pythonx</a>|</td></tr>
<tr><td width="30%">qnx</td><td width="70%">QNX バージョン</td></tr>
<tr><td width="30%">quickfix</td><td width="70%">|<a href="quickfix_002etxt.html#quickfix">quickfix</a>| をサポート</td></tr>
<tr><td width="30%">reltime</td><td width="70%">|<a href="#reltime_0028_0029">reltime()</a>| をサポート</td></tr>
<tr><td width="30%">rightleft</td><td width="70%">&rsquo;<samp>rightleft</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">ruby</td><td width="70%">Ruby インターフェイスをサポート |<a href="if_005fruby_002etxt.html#ruby">ruby</a>|</td></tr>
<tr><td width="30%">scrollbind</td><td width="70%">&rsquo;<samp>scrollbind</samp>&rsquo; をサポート (常に眞)</td></tr>
<tr><td width="30%">showcmd</td><td width="70%">&rsquo;<samp>showcmd</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">signs</td><td width="70%">|<a href="sign_002etxt.html#g_t_003asign">:sign</a>| をサポート</td></tr>
<tr><td width="30%">smartindent</td><td width="70%">&rsquo;<samp>smartindent</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">sound</td><td width="70%">サウンド再生をサポート。例へば &lsquo;<code>sound_playevent()</code>&lsquo;</td></tr>
<tr><td width="30%">spell</td><td width="70%">スペルチェックをサポート |<a href="spell_002etxt.html#spell">spell</a>|</td></tr>
<tr><td width="30%">startuptime</td><td width="70%">|<a href="starting_002etxt.html#g_t_002d_002dstartuptime">--startuptime</a>| をサポート</td></tr>
<tr><td width="30%">statusline</td><td width="70%">&rsquo;<samp>statusline</samp>&rsquo;, &rsquo;<samp>rulerformat</samp>&rsquo; そして &rsquo;<samp>titlestring</samp>&rsquo; と &rsquo;<samp>iconstring</samp>&rsquo; の特殊フォーマットをサポート</td></tr>
<tr><td width="30%">sun</td><td width="70%">SunOS バージョン</td></tr>
<tr><td width="30%">sun_workshop</td><td width="70%">Sun |<a href="workshop_002etxt.html#workshop">workshop</a>| のサポートは削除されました</td></tr>
<tr><td width="30%">syntax</td><td width="70%">構文ハイライト |<a href="syntax_002etxt.html#syntax">syntax</a>| をサポート</td></tr>
<tr><td width="30%">syntax_items</td><td width="70%">現在のバッファに有效なシンタックスが設定されてゐる</td></tr>
<tr><td width="30%">system</td><td width="70%">fork()/exec() の代はりに system() が使用されてゐる</td></tr>
<tr><td width="30%">tag_binary</td><td width="70%">タグファイル內の二分探索 |<a href="tagsrch_002etxt.html#tag_002dbinary_002dsearch">tag-binary-search</a>|</td></tr>
<tr><td width="30%">tag_old_static</td><td width="70%">舊式の靜的 tags のサポートは削除されました |<a href="tagsrch_002etxt.html#tag_002dold_002dstatic">tag-old-static</a>|</td></tr>
<tr><td width="30%">tcl</td><td width="70%">TCL インターフェイスをサポート</td></tr>
<tr><td width="30%">termguicolors</td><td width="70%">端末での true カラーをサポート</td></tr>
<tr><td width="30%">terminal</td><td width="70%">|<a href="terminal_002etxt.html#terminal">terminal</a>| をサポート</td></tr>
<tr><td width="30%">terminfo</td><td width="70%">termcap の代はりに terminfo をサポート</td></tr>
<tr><td width="30%">termresponse</td><td width="70%">|<a href="term_002etxt.html#t_005fRV">t_RV</a>| と |<a href="#v_003atermresponse">v:termresponse</a>| をサポート</td></tr>
<tr><td width="30%">textobjects</td><td width="70%">|<a href="motion_002etxt.html#text_002dobjects">text-objects</a>| をサポート</td></tr>
<tr><td width="30%">textprop</td><td width="70%">|<a href="textprop_002etxt.html#text_002dproperties">text-properties</a>| をサポート</td></tr>
<tr><td width="30%">tgetent</td><td width="70%">tgetent をサポート。termcap か terminfo ファイルが使用可能</td></tr>
<tr><td width="30%">timers</td><td width="70%">|<a href="#timer_005fstart_0028_0029">timer_start()</a>| をサポート</td></tr>
<tr><td width="30%">title</td><td width="70%">ウィンドウタイトルをサポート |<a href="options_002etxt.html#g_t_0027title_0027">'title'</a>|</td></tr>
<tr><td width="30%">toolbar</td><td width="70%">|<a href="gui_002etxt.html#gui_002dtoolbar">gui-toolbar</a>| をサポート</td></tr>
<tr><td width="30%">touchbar</td><td width="70%">MacVim でのタッチバーをサポート</td></tr>
<tr><td width="30%">transparency</td><td width="70%">&rsquo;<samp>transparency</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">ttyin</td><td width="70%">入力が端末 (tty) である</td></tr>
<tr><td width="30%">ttyout</td><td width="70%">出力が端末 (tty) である
<a name="g_t_002bunix"></a><a name="index-_002bunix"></a></td></tr>
<tr><td width="30%">unix</td><td width="70%">UNIX バージョン</td></tr>
<tr><td width="30%">unnamedplus</td><td width="70%">&rsquo;<samp>clipboard</samp>&rsquo; に &quot;unnamedplus&quot; をサポート</td></tr>
<tr><td width="30%">user_commands</td><td width="70%">ユーザー定義コマンドをサポート (常に眞)</td></tr>
<tr><td width="30%">vcon</td><td width="70%">Win32: 假想コンソールが動作するなら &rsquo;<samp>termguicolors</samp>&rsquo; を使ふことができる。|<a href="various_002etxt.html#g_t_002bvtp">+vtp</a>| も參照。</td></tr>
<tr><td width="30%">vertsplit</td><td width="70%">ウィンドウの垂直分割をサポート |<a href="windows_002etxt.html#g_t_003avsplit">:vsplit</a>| (常に眞)
<a name="vim_005fstarting"></a><a name="index-vim_005fstarting"></a></td></tr>
<tr><td width="30%">vim_starting</td><td width="70%">Vim の初期化プロセス中は眞となる。|<a href="starting_002etxt.html#startup">startup</a>|</td></tr>
<tr><td width="30%">viminfo</td><td width="70%">viminfo をサポート</td></tr>
<tr><td width="30%">vimscript-1</td><td width="70%">Vim script バージョン 1 サポート</td></tr>
<tr><td width="30%">vimscript-2</td><td width="70%">Vim script バージョン 2 サポート</td></tr>
<tr><td width="30%">vimscript-3</td><td width="70%">Vim script バージョン 3 サポート</td></tr>
<tr><td width="30%">virtualedit</td><td width="70%">オプション &rsquo;<samp>virtualedit</samp>&rsquo; をサポート (常に眞)</td></tr>
<tr><td width="30%">visual</td><td width="70%">ビジュアルモードをサポート (常に眞)</td></tr>
<tr><td width="30%">visualextra</td><td width="70%">擴張ビジュアルモードをサポート |<a href="visual_002etxt.html#blockwise_002doperators">blockwise-operators</a>| (常に眞)</td></tr>
<tr><td width="30%">vms</td><td width="70%">VMS バージョン</td></tr>
<tr><td width="30%">vreplace</td><td width="70%">コマンド |<a href="change_002etxt.html#gR">gR</a>| と |<a href="change_002etxt.html#gr">gr</a>| をサポート (常に眞)</td></tr>
<tr><td width="30%">vtp</td><td width="70%">|<a href="various_002etxt.html#g_t_002bvtp">+vtp</a>| をサポートする vcon をコンパイルする (現在のコンソールで動作するなら、見つけるために vcon をチェックする)</td></tr>
<tr><td width="30%">wildignore</td><td width="70%">オプション &rsquo;<samp>wildignore</samp>&rsquo; をサポート</td></tr>
<tr><td width="30%">wildmenu</td><td width="70%">オプション &rsquo;<samp>wildmenu</samp>&rsquo; を指定してコンパイル</td></tr>
<tr><td width="30%">win16</td><td width="70%">古い MS-Windows 3.1 バージョン (常に僞)</td></tr>
<tr><td width="30%">win32</td><td width="70%">Win32 バージョン (MS-Windows 95 以上の 32 or 64 ビット)</td></tr>
<tr><td width="30%">win32unix</td><td width="70%">Win32 バージョン。Unix ファイルを使用 (Cygwin)</td></tr>
<tr><td width="30%">win64</td><td width="70%">Win64 バージョン (MS-Windows 64 bit)</td></tr>
<tr><td width="30%">win95</td><td width="70%">Win32 バージョン。MS-Windows 95/98/ME 用 (常に僞)</td></tr>
<tr><td width="30%">winaltkeys</td><td width="70%">オプション &rsquo;<samp>winaltkeys</samp>&rsquo; を指定してコンパイル</td></tr>
<tr><td width="30%">windows</td><td width="70%">複數ウィンドウをサポート (常に眞)</td></tr>
<tr><td width="30%">writebackup</td><td width="70%">オプション &rsquo;<samp>writebackup</samp>&rsquo; が起動時に on になる</td></tr>
<tr><td width="30%">xfontset</td><td width="70%">X fontset をサポート |<a href="mbyte_002etxt.html#xfontset">xfontset</a>|</td></tr>
<tr><td width="30%">xim</td><td width="70%">XIM をサポート |<a href="mbyte_002etxt.html#xim">xim</a>|</td></tr>
<tr><td width="30%">xpm</td><td width="70%">pixmap をサポート</td></tr>
<tr><td width="30%">xpm_w32</td><td width="70%">Win32 で pixmap をサポート(後方互換性のためのみ。代はりに &quot;xpm&quot; を使用せよ。)</td></tr>
<tr><td width="30%">xsmp</td><td width="70%">X セッションマネージメントをサポート</td></tr>
<tr><td width="30%">xsmp_interact</td><td width="70%">對話的 X セッションマネージメントをサポート</td></tr>
<tr><td width="30%">xterm_clipboard</td><td width="70%">xterm のクリップボードサポート</td></tr>
<tr><td width="30%">xterm_save</td><td width="70%">xterm のスクリーンの保存復歸をサポート</td></tr>
<tr><td width="30%">x11</td><td width="70%">X11 をサポート</td></tr>
</table>

<a name="string_002dmatch"></a><a name="index-string_002dmatch"></a>
<a name="index-WenZi-Lie-Nei-denopatanmatutingu"></a>
<a name="WenZi-Lie-Nei-denopatanmatutingu"></a>
<h4 class="unnumberedsubsec">文字列內でのパターンマッチング</h4>

<p>|<a href="pattern_002etxt.html#pattern">pattern</a>| で說明されてゐる正規表現パターンは通常、バッファ內の行に對してマッチを檢索するために使はれる。
</p>
<p>文字列內でマッチを見つけるために使ふときも、ほとんどは同じやうに動作する。違ひは、文字列が 1 つの行であるかのやうに扱はれる事である。
</p>
<p>文字列が文字 &quot;\n&quot; だけを含むとき、これは改行とはみなされない。この &quot;\n&quot; はパターン內の &quot;\n&quot; や &quot;.&quot; にマッチする。例:
</p><div class="example">
<pre class="example">:let a = &quot;aaaa\nxxxx&quot;
:echo matchstr(a, &quot;..\n..&quot;)
aa
xx
:echo matchstr(a, &quot;a.x&quot;)
a
x
</pre></div>

<p>&quot;^&quot; は文字列の最初の文字でだけマッチし、&quot;$&quot; は最後の文字でだけマッチすることに注意。&quot;\n&quot; の前後にはマッチしない。
</p>
<a name="user_002dfunctions"></a><a name="index-user_002dfunctions"></a>
<a name="index-Guan-Shu-Ding-Yi-"></a>
<a name="g_t5_002e-Guan-Shu-Ding-Yi-"></a>
<h3 class="section">5. 函數定義</h3>

<p>ユーザーは自分で新しい函數を定義することができる。その函數は組込み函數とまつたく同じやうに呼び出せる。函數は一聯の Ex コマンドを實行する。ノーマルモードコマンドはコマンド |<a href="various_002etxt.html#g_t_003anormal">:normal</a>| によつて實行できる。
</p>
<p>函數名は組込み函數との混同を避ける爲、大文字で始まらなければならない。他のスクリプトで同じ函數名を使用してしまふことを避ける爲に、露骨に短い名前は避けるべきである。函數名を例へば &quot;HTMLcolor()&quot; のやうに、スクリプトの名前から始めるといふのは良い習慣である。
</p>
<p>波括弧變數といふものもある (|<a href="#curly_002dbraces_002dnames">curly-braces-names</a>| を參照)。また、オートロード |<a href="#autoload">autoload</a>| 機構を使ふと、函數が呼ばれたときだけ定義することができる。
</p>
<a name="local_002dfunction"></a><a name="index-local_002dfunction"></a>
<p>スクリプトローカルな函數の名前は &quot;s:&quot; で始めなければならない。スクリプトローカルな函數は、そのスクリプトの中の函數から、またはそのスクリプト內で定義されたユーザー定義コマンド、オートコマンドからしか呼ぶことができない。そのスクリプト內で定義されたマッピングにより呼ぶこともできるが、スクリプトの外部でマッピングが展開された場合は &quot;s:&quot; の代はりに |<a href="map_002etxt.html#g_t_003cSID_003e">&lt;SID&gt;</a>| をつけなければならない。
</p>
<p>ローカル函數はスクリプトローカル函數だけである。バッファローカル函數やウィンドウローカル函數といふものはない。
</p>
<dl compact="compact">
<dd><a name="g_t_003afu"></a><a name="g_t_003afunction"></a><a name="E128"></a><a name="E129"></a><a name="E123"></a><a name="index-_003afu"></a>
<a name="index-_003afunction"></a>
<a name="index-E128"></a>
<a name="index-E129"></a>
<a name="index-E123"></a>
</dd>
<dt>:fu[nction]</dt>
<dd><p>全ての函數と、その引數を表示する。
</p>
</dd>
<dt>:fu[nction] {name}</dt>
<dd><p>函數 {name} の定義を表示する。
</p>
<p>{name} は辭書 |<a href="#Dictionary">Dictionary</a>| の要素の |<a href="#Funcref">Funcref</a>| であつてもよい:
</p><div class="example">
<pre class="example">:function dict.init
</pre></div>

</dd>
<dt>:fu[nction] /{pattern}</dt>
<dd><p>{pattern} にマッチする名前の函數を表示する。&quot;File&quot; で終はる函數を全て表示する例:
</p><div class="example">
<pre class="example">:function /File$
</pre></div>
</dd>
</dl>
<a name="g_t_003afunction_002dverbose"></a><a name="index-_003afunction_002dverbose"></a>
<p>&rsquo;<samp>verbose</samp>&rsquo; が 0 でないとき、これらのコマンドで函數を表示すると、それがどこで定義されたかも表示する。例:
</p><div class="example">
<pre class="example">:verbose function SetFileTypeSH
    function SetFileTypeSH(name)
        Last set from /usr/share/vim/vim-7.0/filetype.vim
</pre></div>
<p>より詳しくは |<a href="various_002etxt.html#g_t_003averbose_002dcmd">:verbose-cmd</a>| を參照。
</p>
<dl compact="compact">
<dd><a name="E124"></a><a name="E125"></a><a name="E853"></a><a name="E884"></a><a name="index-E124"></a>
<a name="index-E125"></a>
<a name="index-E853"></a>
<a name="index-E884"></a>
</dd>
<dt>:fu[nction][!] {name}([arguments]) [range] [abort] [dict] [closure]</dt>
<dd><p>{name} といふ名前で新しい函數を定義する。函數の本體は、宣言の次の行から始まり、對應する |<a href="#g_t_003aendfunction">:endfunction</a>| までになる。
</p>
<p>函數名はアルファベットと數字と &rsquo;_&rsquo; からなり、通常の函數はアルファベットの大文字、スクリプトローカル函數は &quot;s:&quot; で始まらなければならない。
</p><blockquote>
<p><strong>Note:</strong> <br>
&quot;b:&quot; や &quot;g:&quot; は使用できない (7.4.260 からは函數名にコロンが含まれる場合は E884 エラーが發生する。例 &quot;foo:bar()&quot;。このパッチ以前はエラーにはならない)。
</p></blockquote>

<p>{name} は辭書 |<a href="#Dictionary">Dictionary</a>| の要素の |<a href="#Funcref">Funcref</a>| であつてもよい:
</p><div class="example">
<pre class="example">:function dict.init(arg)
</pre></div>
<p>&quot;dict&quot; は既に定義されてゐる辭書でなければならない。その要素 &quot;init&quot; がまだ存在しないならば追加される。存在する場合は、既存の函數を上書きするためには [!] をつけなければならない。この値は番號つきの函數を指す |<a href="#Funcref">Funcref</a>| である。この函數は |<a href="#Funcref">Funcref</a>| を通してのみ呼ぶことができ、そこへの參照がなくなると削除される。
<a name="E127"></a><a name="E122"></a><a name="index-E127"></a>
<a name="index-E122"></a>
</p>
<p>この名前で定義される函數が既に定義濟みで [!] が使用されなかつた場合、エラーとなる。例外が 1 つある: スクリプトを再讀み込みするとき、そのスクリプトで以前に定義された函數は何も言はずに置き換へられる。
</p>
<p>[!] が使用されてゐれば、それまで存在していた函數は、速やかに新しいものへ置換へられる。
</p><blockquote>
<p><strong>Note:</strong> <br>
賢く使ふこと！氣をつけないで使ふと、意圖せず存在する函數が置き換へられてしまふ。これはひどいバグだ。
</p></blockquote>

<p>引數 {arguments} については |<a href="#function_002dargument">function-argument</a>| を參照。
</p>
<a name="g_t_003afunc_002drange"></a><a name="a_003afirstline"></a><a name="a_003alastline"></a><a name="index-_003afunc_002drange"></a>
<a name="index-a_003afirstline"></a>
<a name="index-a_003alastline"></a>
<p>引數 [range] を追加した場合、函數は「範圍」を管理することができる。「範圍」は &quot;a:firstline&quot; と &quot;a:lastline&quot; によつて渡される。[range] がなかつた場合、&quot;:{range}call&quot; が「範圍」を指定されて實行されると、1 行 1 行について、カーソルをその行の先頭に置いた狀態で函數を呼び出すことになる。|<a href="#function_002drange_002dexample">function-range-example</a>| を參照。他の Ex コマンドと同樣に、カーソルは選擇範圍の最初の行に移動される。
<a name="g_t_003afunc_002dabort"></a><a name="index-_003afunc_002dabort"></a>
</p>
<p>引數 [abort] を追加すると、函數の實行中にエラーに遭遇し次第、卽函數は中斷される。
<a name="g_t_003afunc_002ddict"></a><a name="index-_003afunc_002ddict"></a>
</p>
<p>引數 [dict] を追加すると、この函數は辭書 |<a href="#Dictionary">Dictionary</a>| の要素を通してしか呼べなくなる。そしてその辭書にローカル變數 &quot;self&quot; が定義される。|<a href="#Dictionary_002dfunction">Dictionary-function</a>| を參照。
<a name="g_t_003afunc_002dclosure"></a><a name="E932"></a><a name="index-_003afunc_002dclosure"></a>
<a name="index-E932"></a>
</p>
<p>引數 [closure] を追加すると、函數は外側のスコープの變數と引數をアクセスできるやうになる。これは一般的にクロージャと呼ばれる。以下の例では Bar() は Foo() のスコープの &quot;x&quot; を使用してゐる。それは Foo() から戾つても參照され續ける:
</p><div class="example">
<pre class="example">:function! Foo()
:  let x = 0
:  function! Bar() closure
:    let x += 1
:    return x
:  endfunction
:  return funcref('Bar')
:endfunction
</pre></div>

<div class="example">
<pre class="example">:let F = Foo()
:echo F()
1
:echo F()
2
:echo F()
3
</pre></div>

<a name="function_002dsearch_002dundo"></a><a name="index-function_002dsearch_002dundo"></a>
<p>函數の實行によつて、最後に使用されたサーチパターン、及び redo コマンドの &quot;.&quot; の內容は變更されない。したがつて、函數內で |<a href="pattern_002etxt.html#g_t_003anohlsearch">:nohlsearch</a>| を行つても、函數から戾ると檢索結果のハイライトが元に戾ることになる。
</p>
<a name="g_t_003aendf"></a><a name="g_t_003aendfunction"></a><a name="E126"></a><a name="E193"></a><a name="W22"></a><a name="index-_003aendf"></a>
<a name="index-_003aendfunction"></a>
<a name="index-E126"></a>
<a name="index-E193"></a>
<a name="index-W22"></a>
</dd>
<dt>:endf[unction] [argument]</dt>
<dd><p>函數定義の終了。[argument] を付けずに 1 行このコマンドのみを書くのがベスト。
</p>
<p>[argument] となるのは:
</p><table>
<tr><td width="30%">| command</td><td width="70%">次を實行するコマンド</td></tr>
<tr><td width="30%">\n command</td><td width="70%">次を實行するコマンド</td></tr>
<tr><td width="30%">&quot; comment</td><td width="70%">常に無效</td></tr>
<tr><td width="30%">anything else</td><td width="70%">無效。&rsquo;<samp>verbose</samp>&rsquo; が非ゼロのときは警告が出る</td></tr>
</table>
<p>Vim 8.0.0654 以降で追加されたコマンドがサポートされ、それより以前のコマンドは默つて無視される。
</p>
<p>&lsquo;:execute&lsquo; コマンドの中で函數と定義するため、|<a href="cmdline_002etxt.html#g_t_003abar">:bar</a>| の代はりに改行を使ふ:
</p><div class="example">
<pre class="example">:exe &quot;func Foo()\necho 'foo'\nendfunc&quot;
</pre></div>
<a name="g_t_003adelf"></a><a name="g_t_003adelfunction"></a><a name="E130"></a><a name="E131"></a><a name="E933"></a><a name="index-_003adelf"></a>
<a name="index-_003adelfunction"></a>
<a name="index-E130"></a>
<a name="index-E131"></a>
<a name="index-E933"></a>
</dd>
<dt>:delf[unction][!] {name}</dt>
<dd><p>函數 {name} を削除する。
</p>
<p>{name} は辭書 |<a href="#Dictionary">Dictionary</a>| の要素の |<a href="#Funcref">Funcref</a>| であつてもよい:
</p><div class="example">
<pre class="example">:delfunc dict.init
</pre></div>
<p>この例は &quot;dict&quot; から要素 &quot;init&quot; を削除する。この函數への參照がなくなると、函數は削除される。! を一緖に使ふと、函數が存在しなくてもエラーを生じない。
<a name="g_t_003aretu"></a><a name="g_t_003areturn"></a><a name="E133"></a><a name="index-_003aretu"></a>
<a name="index-_003areturn"></a>
<a name="index-E133"></a>
</p></dd>
<dt>:retu[rn] [expr]</dt>
<dd><p>函數から戾る。&quot;[expr]&quot; が與へられた場合、それは評價され函數の戾り値として呼出し側に渡される。&quot;[expr]&quot; が與へられない場合、數値 0 が呼出し側に渡される。
</p><blockquote>
<p><strong>Note:</strong> <br>
函數內に實行されない命令があるかどうかはチェックされないことに留意すること。つまり、たとへ &quot;<code>:return</code>&quot; 命令の後に何か命令があつたとしても、警告も何も與へられない。
</p></blockquote>

<p>|<a href="#g_t_003atry">:try</a>| と |<a href="#g_t_003afinally">:finally</a>| の閒で &quot;<code>:return</code>&quot; が實行された場合、&quot;<code>:finally</code>&quot; から對應する |<a href="#g_t_003aendtry">:endtry</a>| までのコマンドがまず實行される。&quot;<code>:try</code>&quot; がネストしてゐる場合、それらの全てに對してこのプロセスが適用される。そして最も外側の &quot;<code>:endtry</code>&quot; にて函數を拔ける。
</p></dd>
</dl>

<a name="function_002dargument"></a><a name="a_003avar"></a><a name="index-function_002dargument"></a>
<a name="index-a_003avar"></a>
<p>引數は、與へられた名前によつて定義される。函數のなかでは &quot;a:name&quot; (&quot;a:&quot; を引數に接頭)のやうにして參照することができる。
<a name="a_003a0"></a><a name="a_003a1"></a><a name="a_003a000"></a><a name="E740"></a><a name="g_t_002e_002e_002e"></a><a name="index-a_003a0"></a>
<a name="index-a_003a1"></a>
<a name="index-a_003a000"></a>
<a name="index-E740"></a>
<a name="index-_002e_002e_002e"></a>
</p>
<p>引數はコンマで區切ることで、最大 20 まで與へることができる。最後の引數を &quot;...&quot; にすることで、可變長の引數を使用できる。函數の中では &quot;a:1&quot; や &quot;a:2&quot; のやうにして可變長の引數にアクセスできる。&quot;a:0&quot; は可變長引數が幾つあるかを示してゐる (0 であること、つまり引數がそれ以上ないこともある)。&quot;a:000&quot; は全引數を持つリスト |<a href="#List">List</a>| を示してゐる。
</p><blockquote>
<p><strong>Note:</strong> <br>
&quot;a:1&quot; は &quot;a:000[0]&quot; と同じである。
</p></blockquote>
<a name="E742"></a><a name="index-E742"></a>

<p>a: のスコープとこの變數は固定されてをり、變更できない。しかしリスト |<a href="#List">List</a>| や辭書 |<a href="#Dictionary">Dictionary</a>| のやうな複合型が使用された場合は、その內容を變更できる。よつて函數にリスト |<a href="#List">List</a>| を渡し、そこに要素を追加させることができる。函數にリスト |<a href="#List">List</a>| や辭書 |<a href="#Dictionary">Dictionary</a>| を變更させたくない場合は |<a href="#g_t_003alockvar">:lockvar</a>| を使ふこと。
</p>
<p>函數を引數無しで定義することも可能である。その時でも()は付けなければならない。
</p>
<p>函數の中で別の函數を定義することも可能である。
</p>
<a name="optional_002dfunction_002dargument"></a><a name="index-optional_002dfunction_002dargument"></a>
<p>名前付き固定引數にデフォルト値を指定できる。これにより、函數呼び出しではオプションになる。呼び出し時に固定引數が指定されてゐない場合は、デフォルトの式を使用して初期化される。これは &lsquo;<code>:function</code>&lsquo; で宣言された函數に對してのみ機能し、ラムダ式 |<a href="#expr_002dlambda">expr-lambda</a>| には機能しない。
</p>
<p>例:
</p><pre class="verbatim">function Something(key, value = 10)
   echo a:key .. &quot;: &quot; .. a:value
endfunction
call Something('empty')       &quot;empty: 10&quot;
call Something('key', 20)     &quot;key: 20&quot;
</pre>
<p>引數のデフォルト式は、定義時ではなく函數呼び出し時に評價される。したがつて、函數が定義された瞬閒に無效な式を使用することが可能である。式はまた、呼び出し中に引數が指定されてゐない場合にのみ評價される。
</p>
<p>デフォルトの式を使ふために |<a href="#v_003anone">v:none</a>| を渡すことができる。
</p><blockquote>
<p><strong>Note:</strong> <br>
これは、引數にデフォルトの式がある場合、v:none を通常の値として渡すことができないことを意味することに注意。
</p></blockquote>

<p>例:
</p><pre class="verbatim">function Something(a = 10, b = 20, c = 30)
endfunction
call Something(1, v:none, 3)      &quot; b = 20
</pre><a name="E989"></a><a name="index-E989"></a>
<p>デフォルト式を持つオプション引數は、必須引數の後になければならない。オプションの名前付き引數すべての後に &quot;...&quot; を使用できる。
</p>
<p>後の引數のデフォルトが前の引數を參照することは可能だが、その逆はできない。すべての引數と同樣に、それらには &quot;a:&quot; を前に付ける必要がある。
</p>
<p>動作する例:
</p><pre class="verbatim">:function Okay(mandatory, optional = a:mandatory)
:endfunction
</pre><p>動作しない例:
</p><pre class="verbatim">:function NoGood(first = a:second, second = 10)
:endfunction
</pre><p>&quot;...&quot; が使はれてゐない時は、函數呼び出しの時の引數の數は必須の名前付きの引數の數と一致してゐなければならない。&quot;...&quot; を使つた時には引數の數は大きくなるだらう。
</p>
<a name="local_002dvariables"></a><a name="index-local_002dvariables"></a>
<p>函數の中でローカル變數を使ふこともできる。これらは函數から戾ると消滅する。グローバル變數にアクセスするためには &quot;g:&quot; を付ける必要がある。
</p>
<p>例:
</p><pre class="verbatim">:function Table(title, ...)
:  echohl Title
:  echo a:title
:  echohl None
:  echo a:0 . &quot; items:&quot;
:  for s in a:000
:    echon ' ' . s
:  endfor
:endfunction 
</pre>
<p>この函數は次のやうに呼ぶことができる:
</p><div class="example">
<pre class="example">let lines = Table(&quot;Table&quot;, &quot;line1&quot;, &quot;line2&quot;)
let lines = Table(&quot;Empty Table&quot;)
</pre></div>

<p>1 つ以上の値を返したい場合には、リスト |<a href="#List">List</a>| を返すやうにする:
</p><pre class="verbatim">:function Compute(n1, n2)
:  if a:n2 == 0
:    return [&quot;fail&quot;, 0]
:  endif
:  return [&quot;ok&quot;, a:n1 / a:n2]
:endfunction
</pre>
<p>この函數は次のやうに呼ぶことができる:
</p><pre class="verbatim">:let [success, div] = Compute(102, 6)
:if success == &quot;ok&quot;
:  echo div
:endif
</pre><dl compact="compact">
<dd><a name="g_t_003acal"></a><a name="g_t_003acall"></a><a name="E107"></a><a name="E117"></a><a name="index-_003acal"></a>
<a name="index-_003acall"></a>
<a name="index-E107"></a>
<a name="index-E117"></a>
</dd>
<dt>:[range]cal[l] {name}([arguments])</dt>
<dd><p>函數を呼び出す。函數の名前と引數は &lsquo;<code>:function</code>&lsquo; によつて指定されるものである。引數は最大 20 まで使用可能。戾り値は破毀される。
</p>
<p>「範圍」を受け付ける函數に「範圍」を指定しなかつた場合、函數はカーソルの現在位置について一度だけ呼び出される。
</p>
<p>「範圍」を受け付けない函數に「範圍」を指定した場合、その範圍の 1 行ずつについて函數が呼び出される。その時カーソルは當該行の先頭に設定される。カーソルは「範圍」の最下行の左端になる(恐らく最後の函數呼出しの結果、動いた先である)。引數は各呼出しについて繰り返し評價される。それは次の例で確かめることができる:
<a name="function_002drange_002dexample"></a><a name="index-function_002drange_002dexample"></a>
</p><pre class="verbatim">:function Mynumber(arg)
:  echo line(&quot;.&quot;) . &quot; &quot; . a:arg
:endfunction
:1,5call Mynumber(getline(&quot;.&quot;))
</pre><p>&quot;a:firstline&quot; と &quot;a:lastline&quot; はとにかく定義されるので、「範圍」の最初や最後で何か違つた事をするのにも用ゐることができる。
</p>
<p>「範圍」自身を扱つてゐる函數の例:
</p><pre class="verbatim">:function Cont() range
:  execute (a:firstline + 1) . &quot;,&quot; . a:lastline . 's/^/\t\\ '
:endfunction
:4,8call Cont()
</pre><p>この函數は「範圍」の最初の行を除いた全ての行の先頭に、繼續のための文字 &quot;\&quot; を插入する。
</p>
<p>この函數の戾り値からさらに閒接參照が行はれる場合、その參照先には範圍が渡されない。例:
</p><div class="example">
<pre class="example">:4,8call GetDict().method()
</pre></div>
<p>GetDict() には範圍が渡されるが、method() には渡されない。
</p></dd>
</dl>

<a name="E132"></a><a name="index-E132"></a>
<p>函數の再歸的な使用はオプション |<a href="options_002etxt.html#g_t_0027maxfuncdepth_0027">'maxfuncdepth'</a>| によつて制限することができる。
</p>

<a name="index-Zi-Dong-De-niDu-miIp-mareruGuan-Shu-"></a>
<a name="Zi-Dong-De-niDu-miIp-mareruGuan-Shu-"></a>
<h4 class="unnumberedsubsec">自動的に讀み込まれる函數</h4>
<a name="autoload_002dfunctions"></a><a name="index-autoload_002dfunctions"></a>
<p>たくさんの函數または巨大な函數を使ふときは、それらが使用されたときだけ自動的に定義されるやうにすることができる。これには 2 つの方法がある: オートコマンドによる方法と、&rsquo;<samp>runtimepath</samp>&rsquo; 內の &quot;autoload&quot; ディレクトリによる方法である。
</p>

<a name="index-otokomandowoShi-uFang-Fa-"></a>
<a name="otokomandowoShi-uFang-Fa-"></a>
<h4 class="unnumberedsubsec">オートコマンドを使ふ方法</h4>

<p>これはユーザーマニュアルのセクション |<a href="usr_005f41_002etxt.html#g_t41_002e14">41.14</a>| で說明されてゐる。
</p>
<p>オートコマンドは、長い Vim script ファイルのプラグインに對して有用である。自動コマンドを定義し、すぐに &lsquo;<code>:finish</code>&lsquo; でそのスクリプトを拔ける。かうすると Vim の起動が速くなる。その後オートコマンドにより &lsquo;<code>:finish</code>&lsquo; コマンドをスキップする變數を定義し、そのファイルが再び讀み込まれる。
</p>
<p>定義すべき函數名にマッチするパターンを指定してオートコマンドイベント FuncUndefined を使ふ。例:
</p><div class="example">
<pre class="example">:au FuncUndefined BufNet* source ~/vim/bufnetfuncs.vim
</pre></div>

<p>ファイル &quot;~/vim/bufnetfuncs.vim&quot; は &quot;BufNet&quot; で始まる函數を定義しなければならない。|<a href="autocmd_002etxt.html#FuncUndefined">FuncUndefined</a>| も參照。
</p>

<a name="index-otorodosukuriputonoShi-iFang-"></a>
<a name="otorodosukuriputonoShi-iFang-"></a>
<h4 class="unnumberedsubsec">オートロードスクリプトの使ひ方</h4>
<a name="autoload"></a><a name="E746"></a><a name="index-autoload"></a>
<a name="index-E746"></a>
<p>これはユーザーマニュアルのセクション |<a href="usr_005f41_002etxt.html#g_t41_002e15">41.15</a>| で說明されてゐる。
</p>
<p>&quot;autoload&quot; ディレクトリのスクリプトを使ふ方法はより簡單である。しかし完全に正しいファイル名を使ふ必要がある。オートロードされる函數は次のやうな名前を持つ:
</p><div class="example">
<pre class="example">:call filename#funcname()
</pre></div>

<p>このやうな函數が呼ばれ、それがまだ定義されてゐなかつた場合、Vim は &rsquo;<samp>runtimepath</samp>&rsquo; 內の &quot;autoload&quot; ディレクトリから &quot;<samp>filename.vim</samp>&quot; といふスクリプトファイルを探す。例へば &quot;<samp>~/.vim/autoload/filename.vim</samp>&quot; のやうに。そしてこのファイルは次のやうな函數を定義してゐなければならない:
</p>
<div class="example">
<pre class="example">function filename#funcname()
   echo &quot;Done!&quot;
endfunction
</pre></div>

<p>このファイル名と函數の # の前の部分は完全に一致しなければならない。そして定義された函數は呼ばれた函數と完全に同じ名前でなければならない。
</p>
<p>サブディレクトリを使ふこともできる。函數名の中の # はパスのセパレータのやうに解釋される。つまり、次の函數を呼ぶと:
</p><div class="example">
<pre class="example">:call foo#bar#func()
</pre></div>

<p>Vim は &rsquo;<samp>runtimepath</samp>&rsquo; からファイル &quot;<samp>autoload/foo/bar.vim</samp>&quot; を探す。
</p>
<p>これはまだ定義されてゐない變數を參照するときにも使へる:
</p><div class="example">
<pre class="example">:let l = foo#bar#lvar
</pre></div>

<p>しかしこのオートロードスクリプトがすでに讀み込まれてゐる場合、未知の變數があつてもこのスクリプトは再讀み込みされない。
</p>
<p>この變數に値を代入するときは、何も特別なことはない。この方法は、オートロードスクリプトが讀み込まれる前に設定を渡すために使ふことができる:
</p><div class="example">
<pre class="example">:let foo#bar#toggle = 1
:call foo#bar#func()
</pre></div>

<blockquote>
<p><strong>Note:</strong> <br>
オートロードスクリプト內で定義されるはずの函數を呼んだがスクリプト內で函數が定義されなかつた場合、その函數を呼ぶたびにそのスクリプトが source される。そして每囘エラーメッセージが表示される。
</p></blockquote>

<p>また、2 つのスクリプト閒で、互ひに自分が定義される前に相手を呼ぶような函數があると、これは動作しない。トップレベルでオートロード機能を使ふのは避けること。
</p>
<blockquote>
<p><strong>Hint:</strong> <br>
たくさんのファイルからなるスクリプトを配布する場合には、|<a href="pi_005fvimball_002etxt.html#vimball">vimball</a>| ユーティリティを使ふとそれらをまとめることができる。ユーザーマニュアルの |<a href="usr_005f41_002etxt.html#distribute_002dscript">distribute-script</a>| も參照。
</p></blockquote>

<a name="curly_002dbraces_002dnames"></a><a name="index-curly_002dbraces_002dnames"></a>
<a name="index-Bo-Gua-Hu-Bian-Shu-"></a>
<a name="g_t6_002e-Bo-Gua-Hu-Bian-Shu-"></a>
<h3 class="section">6. 波括弧變數</h3>

<p>變數を使用可能なほとんどの文脈では「波括弧」變數を使ふことができる。これは有效な變數名であり、次のやうに、1 個以上の式を波括弧 {} で圍む:
</p><div class="example">
<pre class="example">my_{adjective}_variable
</pre></div>

<p>Vim はこれを見つけると、まづ波括弧の中の式を評價し、その値をもとの位置に置きかえ、全體を變數名として再解釋する。よつて上の例では、變數 &quot;adjective&quot; に &quot;noisy&quot; が代入されてゐたとすると、この變數は &quot;my_noisy_variable&quot; となる。あるいは、&quot;adjective&quot; に &quot;quiet&quot; が代入されてゐたとすれば &quot;my_quiet_variable&quot; となる。
</p>
<p>これの應用の 1 つは、オプション値によつて支配される變數の集合を作ることである。例へば次の文
</p><div class="example">
<pre class="example">echo my_{&amp;background}_message
</pre></div>

<p>は現在の &rsquo;<samp>background</samp>&rsquo; の値に應じて &quot;my_dark_message&quot; か &quot;my_light_message&quot; の中身を表示する。
</p>
<p>波括弧を複數使ふこともできる:
</p><div class="example">
<pre class="example">echo my_{adverb}_{adjective}_message
</pre></div>
<p>ネストさせることもできる:
</p><div class="example">
<pre class="example">echo my_{ad{end_of_word}}_message
</pre></div>
<p>ここで &quot;end_of_word&quot; は &quot;verb&quot; か &quot;jective&quot; のどちらかである。
</p>
<p>しかし、波括弧の中の式を評價した結果が有效な變數名とならなければならない。つまり、次は無效である:
</p><div class="example">
<pre class="example">:let foo='a + b'
:echo c{foo}d
</pre></div>
<p>といふのは、展開の結果が &quot;ca + bd&quot; となるからで、これは有效な名前ではない。
</p>
<a name="curly_002dbraces_002dfunction_002dnames"></a><a name="index-curly_002dbraces_002dfunction_002dnames"></a>
<p>同樣の方法で評價した名前により函數を定義したり呼び出したりできる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let func_end='whizz'
:call my_func_{func_end}(parameter)
</pre></div>

<p>この例は函數 &quot;my_func_whizz(parameter)&quot; を呼びだす。
</p>
<p>これらは機能しない:
</p><pre class="verbatim">:let i = 3
:let @{i} = ''  &quot; error
:echo @{i}      &quot; error
</pre>
<a name="expression_002dcommands"></a><a name="index-expression_002dcommands"></a>
<a name="index-komando"></a>
<a name="g_t7_002e-komando"></a>
<h3 class="section">7. コマンド</h3>

<dl compact="compact">
<dd><a name="g_t_003alet"></a><a name="E18"></a><a name="index-_003alet"></a>
<a name="index-E18"></a>
</dd>
<dt>:let {var-name} = {expr1}</dt>
<dd><p>內部變數 {var-name} に式 {expr1} の結果をセットする。變數の型は {expr1} によつて決定される。{var-name} といふ變數がまだ存在しない場合、新たに作成される。
</p>
<a name="E689"></a><a name="index-E689"></a>
</dd>
<dt>:let {var-name}[{idx}] = {expr1}</dt>
<dd><p>リストの要素に式 {expr1} の結果をセットする。{var-name} はリストを參照し、{idx} はそのリストの有效なインデックスでなければならない。ネストしたリストに對してはインデックスを繰り返すことができる。
このコマンドはリスト |<a href="#List">List</a>| に要素を追加するためには使へない。文字列の i バイト目をセットするためにも使へない。それには次のやうにする:
</p><div class="example">
<pre class="example">:let var = var[0:2] . 'X' . var[4:]
</pre></div>
<p>{var-name} が |<a href="#Blob">Blob</a>| の場合、{idx} は blob の長さになる。この場合、1 バイトが追加される。
</p>
<a name="E708"></a><a name="E709"></a><a name="E710"></a><a name="E711"></a><a name="E719"></a><a name="index-E708"></a>
<a name="index-E709"></a>
<a name="index-E710"></a>
<a name="index-E711"></a>
<a name="index-E719"></a>
</dd>
<dt>:let {var-name}[{idx1}:{idx2}] = {expr1}</dt>
<dd><p>リスト |<a href="#List">List</a>| の一部を式 {expr} の値で置き換へる。{expr} の値は正しい個數の要素を持つリストでなければならない。
{idx1} を省略すると 0 となる。{idx2} を省略するとリストの末尾となる。指定された範圍の一部がリストの末尾を越える場合、要素が追加される。
</p>
<a name="g_t_003alet_002b_003d"></a><a name="g_t_003alet_002d_003d"></a><a name="g_t_003aletstar_003d"></a><a name="g_t_003alet_002f_003d"></a><a name="g_t_003alet_0025_003d"></a><a name="g_t_003alet_002e_003d"></a><a name="E734"></a><a name="E985"></a><a name="index-_003alet_002b_003d"></a>
<a name="index-_003alet_002d_003d"></a>
<a name="index-_003aletstar_003d"></a>
<a name="index-_003alet_002f_003d"></a>
<a name="index-_003alet_0025_003d"></a>
<a name="index-_003alet_002e_003d"></a>
<a name="index-E734"></a>
<a name="index-E985"></a>
</dd>
<dt>:let {var} += {expr1}	&quot;:let {var} = {var} + {expr1}&quot; と同樣</dt>
<dt>:let {var} -= {expr1} &quot;:let {var} = {var} - {expr1}&quot; と同樣</dt>
<dt>:let {var} *= {expr1} &quot;:let {var} = {var} * {expr1}&quot; と同樣</dt>
<dt>:let {var} /= {expr1} &quot;:let {var} = {var} / {expr1}&quot; と同樣</dt>
<dt>:let {var} %= {expr1} &quot;:let {var} = {var} % {expr1}&quot; と同樣</dt>
<dt>:let {var} .= {expr1} &quot;:let {var} = {var} . {expr1}&quot; と同樣</dt>
<dt>:let {var} ..= {expr1} &quot;:let {var} = {var} .. {expr1}&quot; と同樣</dt>
<dd><p>{var} がセットされてゐないときや、{var} と {expr1} の型が演算子に合はないときは失敗する。
</p>
<p>&lsquo;<code>.=</code>&lsquo; は Vim script バージョン2以降ではサポートされてゐない。|<a href="#vimscript_002dversion">vimscript-version</a>| を參照。
</p>

<a name="g_t_003alet_002denvironment"></a><a name="g_t_003alet_002d_0024"></a><a name="index-_003alet_002denvironment"></a>
<a name="index-_003alet_002d_0024"></a>
</dd>
<dt>:let ${env-name} = {expr1}</dt>
<dd><p>環境變數 {env-name} に式 {expr1} の結果をセットする。型は常に文字列。
</p></dd>
<dt>:let ${env-name} .= {expr1}</dt>
<dd><p>環境變數 {env-name} に {expr1} を付け加へる。その環境變數が存在しないときは &quot;=&quot; と同樣に働く。
</p>
<a name="g_t_003alet_002dregister"></a><a name="g_t_003alet_002d_0040"></a><a name="index-_003alet_002dregister"></a>
<a name="index-_003alet_002d_0040"></a>
</dd>
<dt>:let @{reg-name} = {expr1}</dt>
<dd><p>式 {expr1} の結果をレジスタ {reg-name} に書きこむ。{reg-name} は單一の文字でかつ、書きこむことのできるレジスタでなければならない (|<a href="change_002etxt.html#registers">registers</a>| を參照)。&quot;@@&quot; は名前無しレジスタとして使用でき、&quot;@/&quot; はサーチパターンとして使用できる。
</p>
<p>{expr1} の結果が &lt;CR&gt; か &lt;NL&gt; で終了してゐた場合、レジスタは行單位で設定され、さうでなければ文字單位で設定される。次のコマンドにより最後に檢索したパターンをクリアすることができる:
</p><div class="example">
<pre class="example">:let @/ = &quot;&quot;
</pre></div>
<p>これは空文字列を檢索するのとは異なる。空文字列を檢索すると、いたるところでマッチする。
</p>
</dd>
<dt>:let @{reg-name} .= {expr1}</dt>
<dd><p>レジスタ {reg-name} に {expr1} を付け加へる。このレジスタが空のときは、そこに {expr1} をセットする。
</p>
<a name="g_t_003alet_002doption"></a><a name="g_t_003alet_002d_0026"></a><a name="index-_003alet_002doption"></a>
<a name="index-_003alet_002d_0026"></a>
</dd>
<dt>:let &amp;{option-name} = {expr1}</dt>
<dd><p>オプション {option-name} に式 {expr} の値をセットする。文字列や數値の値はそのオプションの型に變換される。
ウィンドウやバッファについてローカルなオプションに對しては、その效果は |<a href="options_002etxt.html#g_t_003aset">:set</a>| コマンドを使つたときと同樣で、ローカルな値とグローバルな値の兩方が變更される。例:
</p><div class="example">
<pre class="example">:let &amp;path = &amp;path . ',/usr/local/include'
</pre></div>
<p>これは、t_xx 形式の端末コードにも使へる。ただし、英數字の名前に限る。例:
</p><div class="example">
<pre class="example">:let &amp;t_k1 = &quot;\&lt;Esc&gt;[234;&quot;
</pre></div>
<p>コードが存在してゐなかつたときは端末キーコードとして作成され、エラーは發生しない。
</p>
</dd>
<dt>:let &amp;{option-name} .= {expr1}</dt>
<dd><p>文字列のオプションの場合: その値に {expr} を付け加へる。|<a href="options_002etxt.html#g_t_003aset_002b_003d">:set+=</a>| とは違ひ、コンマを插入しない。
</p>
</dd>
<dt>:let &amp;{option-name} += {expr1}</dt>
<dt>:let &amp;{option-name} -= {expr1}</dt>
<dd><p>數値または切替のオプションの場合: {expr1} を足す・引く。
</p>
</dd>
<dt>:let &amp;l:{option-name} = {expr1}</dt>
<dt>:let &amp;l:{option-name} .= {expr1}</dt>
<dt>:let &amp;l:{option-name} += {expr1}</dt>
<dt>:let &amp;l:{option-name} -= {expr1}</dt>
<dd><p>上と同樣だが、オプションのローカルな値だけをセットする (ローカルな値があるならば)。|<a href="options_002etxt.html#g_t_003asetlocal">:setlocal</a>| と同樣に働く。
</p>
</dd>
<dt>:let &amp;g:{option-name} = {expr1}</dt>
<dt>:let &amp;g:{option-name} .= {expr1}</dt>
<dt>:let &amp;g:{option-name} += {expr1}</dt>
<dt>:let &amp;g:{option-name} -= {expr1}</dt>
<dd><p>上と同樣だが、オプションのグローバルな値だけをセットする (グローバルな値があるならば)。|<a href="options_002etxt.html#g_t_003asetglobal">:setglobal</a>| と同樣に働く。
</p>
<a name="g_t_003alet_002dunpack"></a><a name="E687"></a><a name="E688"></a><a name="index-_003alet_002dunpack"></a>
<a name="index-E687"></a>
<a name="index-E688"></a>
</dd>
<dt>:let [{name1}, {name2}, ...] = {expr1}</dt>
<dd><p>{expr1} の値はリスト |<a href="#List">List</a>| でなければならない。そのリストの最初の要素が {name1} に代入され、2 番目の要素が {name2} に代入される。以下同樣。
name の個數がリスト |<a href="#List">List</a>| の要素の個數に一致しなければならない。
</p>
<p>前述のやうに各 name は &quot;<code>:let</code>&quot; コマンドの要素の1つになることができる。例:
</p><div class="example">
<pre class="example">:let [s, item] = GetItem(s)
</pre></div>
<p>詳細: 最初に {expr1} が評價され、それから順番に代入が行はれる。{name2} が {name1} に依存するかどうかは問題になる。例:
</p><div class="example">
<pre class="example">:let x = [0, 1]
:let i = 0
:let [i, x[i]] = [1, 2]
:echo x
</pre></div>
<p>この結果は[0, 2]となる。
</p>
</dd>
<dt>:let [{name1}, {name2}, ...] .= {expr1}</dt>
<dt>:let [{name1}, {name2}, ...] += {expr1}</dt>
<dt>:let [{name1}, {name2}, ...] -= {expr1}</dt>
<dd><p>上と同樣だが、リスト |<a href="#List">List</a>| の各要素に對し連結・足し算・引き算を行ふ。
</p>
</dd>
<dt>:let [{name}, ..., ; {lastname}] = {expr1}</dt>
<dd><p>|<a href="#g_t_003alet_002dunpack">:let-unpack</a>| と同樣だが、リスト |<a href="#List">List</a>| の要素數が names の數より多くてもよい。餘つた要素のリストが {lastname} に代入される。要素の餘りがないとき {lastname} は空リストになる。例:
</p><div class="example">
<pre class="example">:let [a, b; rest] = [&quot;aval&quot;, &quot;bval&quot;, 3, 4]
</pre></div>
</dd>
<dt>:let [{name}, ..., ; {lastname}] .= {expr1}</dt>
<dt>:let [{name}, ..., ; {lastname}] += {expr1}</dt>
<dt>:let [{name}, ..., ; {lastname}] -= {expr1}</dt>
<dd><p>上と同樣だが、リスト |<a href="#List">List</a>| の各要素に對して連結・足し算・引き算を行ふ。
</p>
<a name="g_t_003alet_003d_003c_003c"></a><a name="g_t_003alet_002dheredoc"></a><a name="E990"></a><a name="E991"></a><a name="index-_003alet_003d_003c_003c"></a>
<a name="index-_003alet_002dheredoc"></a>
<a name="index-E990"></a>
<a name="index-E991"></a>
</dd>
<dt>:let {var-name} =&lt;&lt; [trim] {marker}</dt>
<dt>text...</dt>
<dt>text...</dt>
<dt>{marker}</dt>
<dd><p>內部變數 {var-name} を文字列 {marker} で圍まれたテキスト行を含む List に設定する。{marker} は空白を含んではならない。
</p>
<p>最後の行は {marker} 文字列だけで終はり、他の文字は含まれない。{marker} の後の空白に氣をつけること！
</p>
<p>{marker} が指定されてゐない場合は、&quot;.&quot; がデフォルトのマーカーとして使用される。
</p>
<p>&quot;trim&quot; がない場合は、テキスト行內の全ての空白文字は保持される。もし {marker} の前に &quot;trim&quot; が指定されてゐる場合、インデントが取り除かれるため以下を實行できる:
</p><pre class="verbatim">let text =&lt;&lt; trim END
   if ok
     echo 'done'
   endif
END
</pre><p>結果: [&quot;if ok&quot;, &quot;  echo &rsquo;done&rsquo;&quot;, &quot;endif&quot;]
マーカーは &quot;let&quot; のインデントと竝ばなければならず、最初の行のインデントは全てのテキスト行から取り除かれる。
</p>
<p>具體例: 最初の空でないテキスト行の先頭のインデントと完全に一致する全ての先頭のインデントは入力行から削除される。
&lsquo;<code>let</code>&lsquo; の前の先頭のインデントと完全に一致する先頭のインデントはすべて {marker} を含む行から削除される。
</p><blockquote>
<p><strong>Note:</strong> <br>
スペースとタブの違ひが重要であることに注意すること。
</p></blockquote>

<p>{var-name} がまだ存在しない場合は作成される。他のコマンドを續けることはできないが、コメントを續けることはできる。
</p>
<p>例:
</p><pre class="verbatim">        let var1 =&lt;&lt; END
Sample text 1
    Sample text 2
Sample text 3
END

        let data =&lt;&lt; trim DATA
        1 2 3 4
        5 6 7 8
        DATA
</pre>
<a name="E121"></a><a name="index-E121"></a>
</dd>
<dt>:let {var-name}	..</dt>
<dd><p>變數 {var-name} の値を一覽表示する。變數の名前を複數指定することができる。以下の特別な名前が認識される:
<a name="E738"></a><a name="index-E738"></a>
</p><table>
<tr><td width="10%">g:</td><td width="90%">グローバル變數</td></tr>
<tr><td width="10%">b:</td><td width="90%">バッファローカル變數</td></tr>
<tr><td width="10%">w:</td><td width="90%">ウィンドウローカル變數</td></tr>
<tr><td width="10%">t:</td><td width="90%">タブページローカル變數</td></tr>
<tr><td width="10%">s:</td><td width="90%">スクリプトローカル變數</td></tr>
<tr><td width="10%">l:</td><td width="90%">函數ローカル變數</td></tr>
<tr><td width="10%">v:</td><td width="90%">Vim の變數</td></tr>
</table>

</dd>
<dt>:let</dt>
<dd><p>全變數の値を一覽表示する。値の前に變數の型が示される:
</p><table>
<tr><td width="50%">&lt;nothing&gt;</td><td width="50%">文字列</td></tr>
<tr><td width="50%">#</td><td width="50%">數値</td></tr>
<tr><td width="50%">*</td><td width="50%">Funcref</td></tr>
</table>


<a name="g_t_003aunlet"></a><a name="g_t_003aunl"></a><a name="E108"></a><a name="E795"></a><a name="index-_003aunlet"></a>
<a name="index-_003aunl"></a>
<a name="index-E108"></a>
<a name="index-E795"></a>
</dd>
<dt>:unl[et][!] {name} ...</dt>
<dd><p>內部變數 {name} を削除する。複數の變數名を指定すると、それらが全て削除される。名前はリスト |<a href="#List">List</a>| や辭書 |<a href="#Dictionary">Dictionary</a>| の要素でもよい。
</p>
<p>[!] をつけると存在しない變數に對するエラーメッセージを表示しない。
リスト |<a href="#List">List</a>| から 1 個以上の要素を削除することができる:
</p><div class="example">
<pre class="example">:unlet list[3]	  &quot; 4番目の要素を削除
:unlet list[3:]   &quot; 4番目から最後までの要素を削除
</pre></div>
<p>辭書 |<a href="#Dictionary">Dictionary</a>| からは一度に 1 個の要素を削除することができる:
</p><div class="example">
<pre class="example">:unlet dict['two']
:unlet dict.two
</pre></div>
<p>グローバル變數とスクリプトローカル變數をクリーンアップするために特に便利である (これらはスクリプト終了時に檢出されない)。函數ローカルな函數は、その函數から拔けるときに自動的に削除される。
</p>
<a name="g_t_003aunlet_002denvironment"></a><a name="g_t_003aunlet_002d_0024"></a><a name="index-_003aunlet_002denvironment"></a>
<a name="index-_003aunlet_002d_0024"></a>
</dd>
<dt>:unl[et] ${env-name} ...</dt>
<dd><p>環境變數 {env-name} を削除する。1 つの <code>:unlet</code> コマンドで {name} と ${env-name} を合はせることができる。變數が存在しない場合は ! がなくてもエラーメッセージを生じない。システムがもしも環境變數の削除をサポートしてゐないのなら、空にします。
</p>
<a name="g_t_003acons"></a><a name="g_t_003aconst"></a><a name="index-_003acons"></a>
<a name="index-_003aconst"></a>
</dd>
<dt>:cons[t] {var-name} = {expr1}</dt>
<dt>:cons[t] [{name1}, {name2}, ...] = {expr1}</dt>
<dt>:cons[t] [{name}, ..., ; {lastname}] = {expr1}</dt>
<dt>:cons[t] {var-name} =&lt;&lt; [trim] {marker}</dt>
<dt>text...</dt>
<dt>text...</dt>
<dt>{marker}</dt>
<dd><p>|<a href="#g_t_003alet">:let</a>| に似てゐるが、加へて、値がセットされたあとに變數がロックされる。これは、ロックされた變數と同じで、|<a href="#g_t_003alet">:let</a>| のすぐ後に |<a href="#g_t_003alockvar">:lockvar</a>| を使ふことで變數をロックすることと同義である。したがつて:
</p><div class="example">
<pre class="example">:const x = 1
</pre></div>
<p>は、以下と同義である:
</p><div class="example">
<pre class="example">:let x = 1
:lockvar 1 x
</pre></div>
<p>これは、變數が變更されないことを確實にしたいときに便利である。
<a name="E995"></a><a name="index-E995"></a>
|<a href="#g_t_003aconst">:const</a>| は變數の變更をすることができない:
</p><div class="example">
<pre class="example">:let x = 1
:const x = 2  &quot; エラー!
</pre></div>
<a name="E996"></a><a name="index-E996"></a>
<blockquote>
<p><strong>Note:</strong> <br>
環境變數、オプション値およびレジスタ値はロックできないため、ここでは使用できないことに注意。
</p></blockquote>

</dd>
<dt>:cons[t]</dt>
<dt>:cons[t] {var-name}</dt>
<dd><p>もしも引數が與へられてゐないか、もしくは引數が {var-name} のみなら、|<a href="#g_t_003alet">:let</a>| と同じ擧動をします。
</p>
<a name="g_t_003alockvar"></a><a name="g_t_003alockv"></a><a name="index-_003alockvar"></a>
<a name="index-_003alockv"></a>
</dd>
<dt>:lockv[ar][!] [depth] {name} ...</dt>
<dd><p>內部變數 {name} をロックする。ロックすると、それ以降變更ができなくなる(アンロックするまで)。
ロックされた變數を削除することはできる:
</p><div class="example">
<pre class="example">:lockvar v
:let v = 'asdf'		&quot; 失敗!
:unlet v
</pre></div>
<a name="E741"></a><a name="E940"></a><a name="index-E741"></a>
<a name="index-E940"></a>
<p>ロックされた變數を變更しようとするとエラーメッセージ
</p><div class="display">
<pre class="display">&quot;E741: Value is locked: {name}&quot;
</pre></div>
<p>が表示される。
</p>
<p>もしも組み込み變數をロック・アンロックしようとすると、エラーメッセージ
</p><div class="display">
<pre class="display">&quot;E940: Cannot lock or unlock variable {name}&quot;
</pre></div>
<p>が表示される。
</p>
<p>[depth] はリスト |<a href="#List">List</a>| や辭書 |<a href="#Dictionary">Dictionary</a>| をロックするときに意味がある。どれだけ深くロックするかを指定する:
</p><ol>
<li> リスト |<a href="#List">List</a>| や辭書 |<a href="#Dictionary">Dictionary</a>| それ自身をロックする。要素を追加したり削除はできないが、要素の値を變へることはできる。
</li><li> 要素の値もロックする。その要素がリスト |<a href="#List">List</a>| や辭書 |<a href="#Dictionary">Dictionary</a>| である場合、その中の要素の追加や削除はできないが、値の變更はできる。
</li><li> 2 と同樣だが、リスト |<a href="#List">List</a>|・辭書內 |<a href="#Dictionary">Dictionary</a>| のリスト |<a href="#List">List</a>| ・辭書 |<a href="#Dictionary">Dictionary</a>| に對してもあてはまる。1 レベル深い。
</li></ol>
<p>[depth] の既定値は 2 であり、{name} がリスト |<a href="#List">List</a>| または辭書 |<a href="#Dictionary">Dictionary</a>| である場合、その値は變更できない。
<a name="E743"></a><a name="index-E743"></a>
深さを無限にするには [!] を使ひ、[depth] を省略する。しかしループを捕捉するために深さの最大値は 100 に設定されてゐる。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
2 つの變數が同じリスト |<a href="#List">List</a>| を參照してゐる場合、片方の變數をロックすると、もう一方の變數を介してアクセスした場合もロックされてゐる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let l = [0, 1, 2, 3]
:let cl = l
:lockvar l
:let cl[1] = 99		&quot; 代入できない!
</pre></div>
<p>これを囘避するにはリストのコピーを作るとよい。|<a href="#deepcopy_0028_0029">deepcopy()</a>| を參照。
</p></blockquote>


<a name="g_t_003aunlockvar"></a><a name="g_t_003aunlo"></a><a name="index-_003aunlockvar"></a>
<a name="index-_003aunlo"></a>
</dd>
<dt>:unlo[ckvar][!] [depth] {name} ...</dt>
<dd><p>內部變數 {name} をアンロックする。|<a href="#g_t_003alockvar">:lockvar</a>| の逆を行ふ。
</p>

<a name="g_t_003aif"></a><a name="g_t_003aend"></a><a name="g_t_003aendif"></a><a name="g_t_003aen"></a><a name="E171"></a><a name="E579"></a><a name="E580"></a><a name="index-_003aif"></a>
<a name="index-_003aend"></a>
<a name="index-_003aendif"></a>
<a name="index-_003aen"></a>
<a name="index-E171"></a>
<a name="index-E579"></a>
<a name="index-E580"></a>
</dd>
<dt>:if {expr1}</dt>
<dt>:en[dif]</dt>
<dd><p>{expr1} が非ゼロと評價された場合に、對應する &quot;<code>:else</code>&quot; か &quot;<code>:endif</code>&quot; までの命令を實行する。
</p>
<p>バージョン 4.5 から 5.0 まで閒の Vim は、&quot;<code>:if</code>&quot; と &quot;<code>:endif</code>&quot; の閒の全ての Ex コマンドは無視する。この 2 つのコマンドは將來の擴張性を、下位互換と同時に提供するためのものである。ネスティング (入れ子) が可能である。
</p><blockquote>
<p><strong>Note:</strong> <br>
&quot;<code>:else</code>&quot; や &quot;<code>:elseif</code>&quot; は無視され、&quot;else&quot; 部分は一切實行されないことに注意。
</p></blockquote>

<p>あなたはこれを、舊バージョンとの互換性を保つたまま使用することができる:
</p><div class="example">
<pre class="example">:if version &gt;= 500
:  version-5-specific-commands
:endif
</pre></div>
<p>しかしそれでも &quot;endif&quot; を見つけるために後續のコマンドをパースする必要がある。古い Vim で新しいコマンドを使ふと問題が起こることがある。例へば &quot;<code>:silent</code>&quot; が &quot;<code>:substitute</code>&quot; コマンドと認識されるなど。その場合には、&quot;<code>:execute</code>&quot; を使ふと問題を避けることができる:
</p><div class="example">
<pre class="example">:if version &gt;= 600
:  execute &quot;silent 1,$delete&quot;
:endif
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
&quot;<code>:append</code>&quot; と &quot;<code>:insert</code>&quot; コマンドは &quot;:if&quot; と &quot;:endif&quot; の閒では正しく動かない。
</p></blockquote>

<a name="g_t_003aelse"></a><a name="g_t_003ael"></a><a name="E581"></a><a name="E583"></a><a name="index-_003aelse"></a>
<a name="index-_003ael"></a>
<a name="index-E581"></a>
<a name="index-E583"></a>
</dd>
<dt>:el[se]</dt>
<dd><p>對應する &quot;:if&quot; ブロックが實行されなかつた場合には、これに對應する &quot;:else&quot; か &quot;:endif&quot; までのコマンドが實行される。
</p>
<a name="g_t_003aelseif"></a><a name="g_t_003aelsei"></a><a name="E582"></a><a name="E584"></a><a name="index-_003aelseif"></a>
<a name="index-_003aelsei"></a>
<a name="index-E582"></a>
<a name="index-E584"></a>
</dd>
<dt>:elsei[f] {expr1}</dt>
<dd><p>&quot;:else&quot; &quot;:if&quot; の省略形。&quot;:endif&quot; を付け加へる (入れ子にする) 手閒を省くことができる。
</p>
<a name="g_t_003awhile"></a><a name="g_t_003aendwhile"></a><a name="g_t_003awh"></a><a name="g_t_003aendw"></a><a name="E170"></a><a name="E585"></a><a name="E588"></a><a name="E733"></a><a name="index-_003awhile"></a>
<a name="index-_003aendwhile"></a>
<a name="index-_003awh"></a>
<a name="index-_003aendw"></a>
<a name="index-E170"></a>
<a name="index-E585"></a>
<a name="index-E588"></a>
<a name="index-E733"></a>
</dd>
<dt>:wh[ile] {expr1}</dt>
<dt>:endw[hile]</dt>
<dd><p>{expr1} が非ゼロとして評價される閒、&quot;:while&quot; と &quot;:endwhile&quot; の閒のコマンドを繰り返し實行する。
ループの內側でエラーが生じた場合、endwhile の直後から實行が再開される。
</p>
<p>例:
</p><div class="example">
<pre class="example">:let lnum = 1
:while lnum &lt;= line(&quot;$&quot;)
   :call FixLine(lnum)
   :let lnum = lnum + 1
:endwhile
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
&quot;:append&quot; や &quot;:insert&quot; コマンドは &quot;:while&quot; ループの內側では正しく動かない。
</p></blockquote>

<a name="g_t_003afor"></a><a name="E690"></a><a name="E732"></a><a name="g_t_003aendfo"></a><a name="g_t_003aendfor"></a><a name="index-_003afor"></a>
<a name="index-E690"></a>
<a name="index-E732"></a>
<a name="index-_003aendfo"></a>
<a name="index-_003aendfor"></a>
</dd>
<dt>:for {var} in {object}</dt>
<dt>:endfo[r]</dt>
<dd><p>{object} の各要素に對し、&quot;:for&quot; と &quot;:endfor&quot; の閒のコマンドを繰り返す。{object} はリスト |<a href="#List">List</a>| または |<a href="#Blob">Blob</a>| である。變數 {var} に各要素の値がセットされる。ループの內側のコマンドでエラーが檢出されたときは &quot;endfor&quot; の後から實行が繼續される。ループの內側で {object} を變更するとどの要素が使はれるかに影響を與へる。それを望まない場合はコピーを作ること:
</p><div class="example">
<pre class="example">:for item in copy(mylist)
</pre></div>
<p>{object} が |<a href="#List">List</a>| でコピーを作らない場合、Vim は現在の要素に對してコマンドを實行する前に、|<a href="#List">List</a>| の次の要素への參照を保存する。そのため副作用なしに現在の要素を削除することができる。それ以降の要素を變更すると、それが見つからなくなる。つまり以下の例は動作する (|<a href="#List">List</a>| を空にする非效率な方法):
</p><div class="example">
<pre class="example">for item in mylist
   call remove(mylist, 0)
endfor
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
リスト |<a href="#List">List</a>| を竝べ替へる (例へば sort() や reverse() で) と豫期しない結果になることがある。
</p></blockquote>

<p>{object} が |<a href="#Blob">Blob</a>| の場合、Vim は常にコピーを作成して繰り返す。|<a href="#List">List</a>| とは異なり、|<a href="#Blob">Blob</a>| を變更しても繰り返しには影響しない。
</p>
</dd>
<dt>:for [{var1}, {var2}, ...] in {listlist}</dt>
<dt>:endfo[r]</dt>
<dd><p>上の &quot;:for&quot; と同樣だが、{listlist} の各要素がリストでなければならない點が異なる。そのリストの各要素が {var1}, {var2} などに代入される。例:
</p><div class="example">
<pre class="example">:for [lnum, col] in [[1, 3], [2, 5], [3, 8]]
   :echo getline(lnum)[col]
:endfor
</pre></div>
<a name="g_t_003acontinue"></a><a name="g_t_003acon"></a><a name="E586"></a><a name="index-_003acontinue"></a>
<a name="index-_003acon"></a>
<a name="index-E586"></a>
</dd>
<dt>:con[tinue]</dt>
<dd><p>&quot;:while&quot; または &quot;:for&quot; ループの內側で使はれたときは、そのループの開始位置まで戾る。
</p>
<p>ループの內側の |<a href="#g_t_003atry">:try</a>| と |<a href="#g_t_003afinally">:finally</a>| の閒で使はれた場合、|<a href="#g_t_003afinally">:finally</a>| から |<a href="#g_t_003aendtry">:endtry</a>| までの閒のコマンドがまず實行される。
</p>
<p>ループの內側で &quot;:try&quot; がネストしてゐる場合、全ての &quot;:try&quot; に對してこのプロセスが適用される。最も外側の &quot;:endtry&quot; の後ループの開始位置まで戾る。
</p>
<a name="g_t_003abreak"></a><a name="g_t_003abrea"></a><a name="E587"></a><a name="index-_003abreak"></a>
<a name="index-_003abrea"></a>
<a name="index-E587"></a>
</dd>
<dt>:brea[k]</dt>
<dd><p>&quot;:while&quot; または &quot;:for&quot; ループの內側で使はれたときは、對應する &quot;:endwhile&quot; または &quot;:endfor&quot; の後のコマンドまでスキップする。
</p>
<p>ループの內側の |<a href="#g_t_003atry">:try</a>| と |<a href="#g_t_003afinally">:finally</a>| の閒で使はれた場合、&quot;:finally&quot; から |<a href="#g_t_003aendtry">:endtry</a>| までの閒のコマンドがまず實行される。
</p>
<p>ループの內側で &quot;:try&quot; がネストしてゐる場合、全ての &quot;:try&quot; に對してこのプロセスが適用される。最も外側の &quot;:endtry&quot; の後ループの後までジャンプする。
</p>
<a name="g_t_003atry"></a><a name="g_t_003aendt"></a><a name="g_t_003aendtry"></a><a name="E600"></a><a name="E601"></a><a name="E602"></a><a name="index-_003atry"></a>
<a name="index-_003aendt"></a>
<a name="index-_003aendtry"></a>
<a name="index-E600"></a>
<a name="index-E601"></a>
<a name="index-E602"></a>
</dd>
<dt>:try</dt>
<dt>:endt[ry]</dt>
<dd><p>&quot;:try&quot; と &quot;:endtry&quot; の閒のコマンド (&quot;:source&quot; コマンド、函數呼び出し、オートコマンド實行を含めた全てのコマンド實行) のエラー制禦を變更する。
</p>
<p>エラーや割り込みが檢出された場合、後に |<a href="#g_t_003afinally">:finally</a>| コマンドがあるならば、&quot;:finally&quot; の後から實行が繼續される。さうでなければ、または &quot;:endtry&quot; に達した後は次の動的に圍んでゐる &quot;:try&quot; に對應する &quot;:finally&quot; などが探される。その後スクリプトは實行を停止する。(函數定義に引數 &quot;abort&quot; がついてゐるかどうかは關係ない)
</p>
<p>例:
</p><div class="example">
<pre class="example">:try | edit too much | finally | echo &quot;cleanup&quot; | endtry
:echo &quot;impossible&quot;      &quot; 實行されない。上のコマンドによりスクリプトは停止する。
</pre></div>
<p>さらに、(動的に) &quot;:try&quot; と &quot;:endtry&quot; の內側にあるエラーや割り込みは例外に變換される。そしてそれは |<a href="#g_t_003athrow">:throw</a>| コマンドによつて投げたときと同樣に捕捉できる (|<a href="#g_t_003acatch">:catch</a>| を參照)。この場合はスクリプトの實行は停止しない。
</p>
<p>割り込み例外には &quot;Vim:Interrupt&quot; といふ値が使はれる。Vim コマンドにおけるエラーは &quot;Vim({command}):{errmsg}&quot;といふ形式の値に變換される。その他のエラーは &quot;Vim:{errmsg}&quot; といふ形式のエラーに變換される。ここで {command} はコマンドの完全な名前であり、{errmsg} はその例外が捕捉されなかつた場合に表示されるメッセージで、常にエラー番號で始まる。
</p>
<p>例:
</p><div class="example">
<pre class="example">:try | sleep 100 | catch /^Vim:Interrupt$/ | endtry
:try | edit | catch /^Vim(edit):E\d\+/ | echo &quot;error&quot; | endtry
</pre></div>
<a name="g_t_003acat"></a><a name="g_t_003acatch"></a><a name="E603"></a><a name="E604"></a><a name="E605"></a><a name="index-_003acat"></a>
<a name="index-_003acatch"></a>
<a name="index-E603"></a>
<a name="index-E604"></a>
<a name="index-E605"></a>
</dd>
<dt>:cat[ch] /{pattern}/</dt>
<dd><p>{pattern} にマッチする例外が發生し、より前の |<a href="#g_t_003acatch">:catch</a>| で捕捉されなかつた場合、このコマンドから次の |<a href="#g_t_003acatch">:catch</a>|, |<a href="#g_t_003afinally">:finally</a>|, |<a href="#g_t_003aendtry">:endtry</a>| までのコマンドが實行される。そのやうな例外が發生しなかつた場合、そのコマンドはスキップされる。
</p>
<p>{pattern} が省略された場合は全てのエラーが捕捉される。
</p>
<p>例:
</p><div class="example">
<pre class="example">:catch /^Vim:Interrupt$/         &quot; 割り込み (CTRL-C) を捕捉
:catch /^Vim\%((\a\+)\)\=:E/     &quot; 全 Vim エラーを捕捉
:catch /^Vim\%((\a\+)\)\=:/      &quot; 例外と割り込みを捕捉
:catch /^Vim(write):/            &quot; :write における全エラーを捕捉
:catch /^Vim\%((\a\+)\)\=:E123:/ &quot; エラー E123 を捕捉
:catch /my-exception/            &quot; ユーザー定義例外を捕捉
:catch /.*/                      &quot; 全てを捕捉
:catch                           &quot; /.*/ と同じ
</pre></div>
<p>{pattern} を圍むのに/以外の文字を使ふことができる。ただしその文字は特別な意味 (例: &rsquo;|&rsquo; や &rsquo;&quot;&rsquo; など)を持つてゐてはならず、{pattern} の內側に現れてはならない。
</p>
<p>例外の情報は |<a href="#v_003aexception">v:exception</a>| で得られる。|<a href="#throw_002dvariables">throw-variables</a>| も參照。
</p><blockquote>
<p><strong>Note:</strong> <br>
エラーメッセージの本文によつて &quot;:catch&quot; することは確實ではない。メッセージはロケールによつて異なるからである。
</p></blockquote>

<a name="g_t_003afina"></a><a name="g_t_003afinally"></a><a name="E606"></a><a name="E607"></a><a name="index-_003afina"></a>
<a name="index-_003afinally"></a>
<a name="index-E606"></a>
<a name="index-E607"></a>
</dd>
<dt>:fina[lly]</dt>
<dd><p>|<a href="#g_t_003atry">:try</a>| と &quot;:finally&quot; の閒を拔ける前に必ず、このコマンドから對應する |<a href="#g_t_003aendtry">:endtry</a>| の閒のコマンドが實行される。つまり正常に進んだ場合、|<a href="#g_t_003acontinue">:continue</a>|, |<a href="#g_t_003abreak">:break</a>|, |<a href="repeat_002etxt.html#g_t_003afinish">:finish</a>|, |<a href="#g_t_003areturn">:return</a>| を使つた場合、エラー・割り込み・例外が發生した場合 (|<a href="#g_t_003athrow">:throw</a>| を參照) のいづれの場合でも。
</p>
<a name="g_t_003ath"></a><a name="g_t_003athrow"></a><a name="E608"></a><a name="index-_003ath"></a>
<a name="index-_003athrow"></a>
<a name="index-E608"></a>
</dd>
<dt>:th[row] {expr1}</dt>
<dd><p>{expr1} を評價し、例外として投げる。|<a href="#g_t_003atry">:try</a>| と |<a href="#g_t_003acatch">:catch</a>| の閒で &quot;:throw&quot; が使はれた場合、{expr1} にマッチする最初の |<a href="#g_t_003acatch">:catch</a>| までのコマンドはスキップされる。
そのやうな &quot;:catch&quot; がない場合、または &quot;:catch&quot; と |<a href="#g_t_003afinally">:finally</a>| の閒で &quot;:throw&quot; が使はれた場合、&quot;:finally&quot; から |<a href="#g_t_003aendtry">:endtry</a>| までのコマンドが實行される。&quot;:throw&quot; が &quot;:finally&quot; の後で實行された場合、&quot;:endtry&quot; までのコマンドはスキップされる。
</p>
<p>&quot;:endtry&quot; において、動的に圍んでゐる次の &quot;:try&quot; (これは函數呼び出しやスクリプト source も含めて探される) から對應する &quot;:catch&quot; までに對しこのプロセスが再び適用される。例外が捕捉されない場合、コマンドの處理は終了する。
</p>
<p>例:
</p><div class="example">
<pre class="example">:try | throw &quot;oops&quot; | catch /^oo/ | echo &quot;caught&quot; | endtry
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
エラーによつて行のパースがスキップされ、&quot;|&quot; によるコマンド區切りが解釋されないやうな場合は &quot;catch&quot; は行を分けて書く必要がある。
</p></blockquote>

<a name="g_t_003aec"></a><a name="g_t_003aecho"></a><a name="index-_003aec"></a>
<a name="index-_003aecho"></a>
</dd>
<dt>:ec[ho] {expr1} ..</dt>
<dd><p>各 {expr1} をスペースで區切つて表示する。最初の {expr1} の表示は、常に新しい行から始まる。|<a href="cmdline_002etxt.html#g_t_003acomment">:comment</a>| も參照。
</p>
<p>改行が必要な場合 &quot;\n&quot; を使用する。カーソルを第 1 桁に持つて行くには &quot;\r&quot; を使用する。色强調を行ふにはコマンド |<a href="#g_t_003aechohl">:echohl</a>| を使用する。コメント文を同じ行に續けることはできない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echo &quot;the value of 'shell' is&quot; &amp;shell
</pre></div>
<a name="g_t_003aecho_002dredraw"></a><a name="index-_003aecho_002dredraw"></a>
<p>このコマンドの後、再描畫を行ふと表示したメッセージが消えてしまふ。Vim は一聯のコマンドが完了するまで再描畫を後回しにするため、この現象は頻繁に發生する。例へば、&quot;:echo&quot; より前に實行したコマンドが後で再描畫を引き起こし、メッセージが消えてしまふといふことがある (再描畫はしばしばユーザーが何か入力するまで後回しにされる)。この問題を避けるには、|<a href="various_002etxt.html#g_t_003aredraw">:redraw</a>| を使つて强制的に再描畫すること。例:
</p><div class="example">
<pre class="example">:new | redraw | echo &quot;there is a new window&quot;
</pre></div>
<a name="g_t_003aechon"></a><a name="index-_003aechon"></a>
</dd>
<dt>:echon {expr1} ..</dt>
<dd><p>改行を付けずに、{expr1} を表示する。|<a href="cmdline_002etxt.html#g_t_003acomment">:comment</a>| も參照。色强調を行ふにはコマンド |<a href="#g_t_003aechohl">:echohl</a>| を使用する。コメント文を同じ行に續けることはできない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echon &quot;the value of 'shell' is &quot; &amp;shell
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
Vim コマンドの &quot;:echo&quot; と、外部のシェルコマンドである &quot;:!echo&quot; との違ひに注意:
</p><div class="example">
<pre class="example">:!echo %                --&gt; filename
</pre></div>
<p>&quot;:!&quot; の引數は展開される。|<a href="cmdline_002etxt.html#g_t_003a_005f_0025">:_%</a>| を參照。
</p><div class="example">
<pre class="example">:!echo &quot;%&quot;              --&gt; filename or &quot;filename&quot;
</pre></div>
<p>前の例のやうに働く。ダブルクォートが表示されるかどうかは、使用してゐる &rsquo;<samp>shell</samp>&rsquo; に依存する。
</p><div class="example">
<pre class="example">:echo %                 --&gt; 何も表示されない
</pre></div>
<p>&rsquo;%&rsquo; は式として不當な文字である。
</p><div class="example">
<pre class="example">:echo &quot;%&quot;               --&gt; %
</pre></div>
<p>單に文字 &rsquo;%&rsquo; を表示する。
</p><div class="example">
<pre class="example">:echo expand(&quot;%&quot;)       --&gt; filename
</pre></div>
<p>&rsquo;%&rsquo; を展開するために函數 expand() を呼び出してゐる。
</p></blockquote>

<a name="g_t_003aechoh"></a><a name="g_t_003aechohl"></a><a name="index-_003aechoh"></a>
<a name="index-_003aechohl"></a>
</dd>
<dt>:echoh[l] {name}</dt>
<dd><p>次の |<a href="#g_t_003aecho">:echo</a>|, |<a href="#g_t_003aechon">:echon</a>|, |<a href="#g_t_003aechomsg">:echomsg</a>| コマンドから、ハイライトグループ {name} を適用する。|<a href="#input_0028_0029">input()</a>| のプロンプトに對しても適用される。例:
</p><div class="example">
<pre class="example">:echohl WarningMsg | echo &quot;Don't panic!&quot; | echohl None
</pre></div>
<p>使用した後にはグループを &quot;None&quot; に戾すことを忘れないやうに。さもないとそれ以降の echo の表示全てがハイライトされてしまふ。
</p>
<a name="g_t_003aechom"></a><a name="g_t_003aechomsg"></a><a name="index-_003aechom"></a>
<a name="index-_003aechomsg"></a>
</dd>
<dt>:echom[sg] {expr1} ..</dt>
<dd><p>式を本當のメッセージとして表示し、そのメッセージをメッセージ履歷 |<a href="message_002etxt.html#message_002dhistory">message-history</a>| に保存する。|<a href="#g_t_003aecho">:echo</a>| コマンド同樣に、引數の閒にスペースが插入される。しかし印字不可能な文字は解釋されずに表示される。
|<a href="#g_t_003aecho">:echo</a>| とはかなり異なり、むしろ |<a href="#g_t_003aexecute">:execute</a>| に近い方法で解析がされる。なんらかを表示する前に、まづ最初に全ての式が數値または文字列に評價されない場合は、<code>string()</code> を使用して文字列に變換する。
强調を行ふには |<a href="#g_t_003aechohl">:echohl</a>| コマンドを使ふ。
</p>
<p>例:
</p><div class="example">
<pre class="example">:echomsg &quot;It's a Zizzer Zazzer Zuzz, as you can plainly see.&quot;
</pre></div>
<p>畫面を再描畫したときメッセージが消去されてしまふのを避ける方法については |<a href="#g_t_003aecho_002dredraw">:echo-redraw</a>| を參照。
<a name="g_t_003aechoe"></a><a name="g_t_003aechoerr"></a><a name="index-_003aechoe"></a>
<a name="index-_003aechoerr"></a>
</p></dd>
<dt>:echoe[rr] {expr1} ..</dt>
<dd><p>式をエラーメッセージとして表示し、そのメッセージをメッセージ履歷 |<a href="message_002etxt.html#message_002dhistory">message-history</a>| に保存する。スクリプトや函數の中で使用されたときは行番號が付け加へられる。
|<a href="#g_t_003aechomsg">:echomsg</a>| コマンドと同樣に引數の閒にスペースが插入される。try 條件文の中で使用されたときは、このメッセージがエラー例外として投げられる。(|<a href="#try_002dechoerr">try-echoerr</a>| を參照)
</p>
<p>例:
</p><div class="example">
<pre class="example">:echoerr &quot;This script just failed!&quot;
</pre></div>
<p>單にメッセージを强調させたい場合には |<a href="#g_t_003aechohl">:echohl</a>| を使ふこと。ビープを鳴らしたいときには次のやうにする:
</p><div class="example">
<pre class="example">:exe &quot;normal \&lt;Esc&gt;&quot;
</pre></div>
<a name="g_t_003aexe"></a><a name="g_t_003aexecute"></a><a name="index-_003aexe"></a>
<a name="index-_003aexecute"></a>
</dd>
<dt>:exe[cute] {expr1} ..</dt>
<dd><p>{expr1} の評價結果の文字列を Ex コマンドとして實行する。
複數の引數は連結され、閒にスペースが插入される。餘計なスペースを入れたくない場合は &quot;.&quot; オペレータを使つて文字列を連結すること。
</p>
<p>{expr1} は處理されたコマンドとして扱はれ、コマンドライン編輯用のキーは認識されない。コメント文を同じ行に續けることはできない。
</p>
<p>例:
</p><div class="example">
<pre class="example">:execute &quot;buffer&quot; nextbuf
:execute &quot;normal&quot; count . &quot;w&quot;
</pre></div>
<p>&quot;:execute&quot; は &rsquo;|&rsquo; を受けつけないコマンドに、次のコマンドを續けて實行させるのにも使用できる。例:
</p><div class="example">
<pre class="example">:execute '!ls' | echo &quot;theend&quot;
</pre></div>
<p>{譯注: 普通の使ひ方では &quot;:!ls&quot; の後には &rsquo;|&rsquo; を使つて、Ex コマンドを續けることはできない}
</p>
<p>また &quot;:execute&quot; は、Vim script 內でコマンド &quot;:normal&quot; の引數に制禦文字を書くことを避けるために役に立つ。
</p><div class="example">
<pre class="example">:execute &quot;normal ixxx\&lt;Esc&gt;&quot;
</pre></div>
<p>これで &lt;Esc&gt; 文字を表す。|<a href="#expr_002dstring">expr-string</a>| を參照。
</p>
<p>ファイル名の中の特殊文字を正しくエスケープするやうに注意すること。Vim コマンドに與へるファイル名をエスケープするには |<a href="#fnameescape_0028_0029">fnameescape()</a>| を使ふ。|<a href="various_002etxt.html#g_t_003a_0021">:!</a>| コマンドに與へるときは |<a href="#shellescape_0028_0029">shellescape()</a>| を使ふ。
</p>
<p>例:
</p><div class="example">
<pre class="example">:execute &quot;e &quot; . fnameescape(filename)
:execute &quot;!ls &quot; . shellescape(filename, 1)
</pre></div>
<blockquote>
<p><strong>Note:</strong> <br>
execute に渡す文字列はいかなるコマンドでも構はないが、&quot;if&quot; や &quot;while&quot;、&quot;for&quot; の開始や終了は常に機能するとは限らない。なぜならコマンドをスキップするときには &quot;:execute&quot; は解釋されないので Vim はブロックの開始や終了を認識することができない。&quot;break&quot; と &quot;continue&quot; も &quot;:execute&quot; で實行すべきではない。
次の例は機能しない。&quot;:execute&quot; は評價されず、Vim は &quot;while&quot; を認識しないので、&quot;:endwhile&quot; を見つけたときにエラーが發生する:
</p><div class="example">
<pre class="example">:if 0
: execute 'while i &gt; 5'
:  echo &quot;test&quot;
: endwhile
:endif
</pre></div>
<p>文字列の中に完全な &quot;while&quot; や &quot;if&quot; コマンドが含まれることが求められる:
</p><div class="example">
<pre class="example">:execute 'while i &lt; 5 | echo i | let i = i + 1 | endwhile'
</pre></div>
</blockquote>

<a name="g_t_003aexe_002dcomment"></a><a name="index-_003aexe_002dcomment"></a>
<p>&quot;:execute&quot; や &quot;:echo&quot; そして &quot;:echon&quot; は、同一行に直接コメントを續けることはできない。何故ならそれらのコマンドにとつて &rsquo;&quot;&rsquo; は文字列の始まりに見えてしまふからである。しかし &rsquo;|&rsquo; の後にコメントを書くことは可能である。例:
</p><div class="example">
<pre class="example">:echo &quot;foo&quot; | &quot;this is a comment
</pre></div>
</dd>
</dl>

<a name="exception_002dhandling"></a><a name="index-exception_002dhandling"></a>
<a name="index-LiWai-Chu-Li-"></a>
<a name="g_t8_002e-LiWai-Chu-Li-"></a>
<h3 class="section">8. 例外處理</h3>

<p>Vim script 言語は例外處理機構を備へてゐる。この節では例外處理をどのやうに行ふかについて說明する。
</p>
<p>例外はエラー發生時や割り込み發生時に Vim によつて投げられる。それについては |<a href="#catch_002derrors">catch-errors</a>| と |<a href="#catch_002dinterrupt">catch-interrupt</a>| を參照。ユーザーはコマンド |<a href="#g_t_003athrow">:throw</a>| によつて明示的に例外を投げることができる。|<a href="#throw_002dcatch">throw-catch</a>| を參照。
</p>

<a name="try_002dconditionals"></a><a name="index-try_002dconditionals"></a>
<a name="index-TRY-Tiao-Jian-Wen"></a>
<a name="TRY-Tiao-Jian-Wen"></a>
<h4 class="unnumberedsubsec">TRY 條件文</h4>

<p>例外を捕捉したり、例外を引き金として後始末のコードを實行することができる。try 條件文を使ふ事によつて catch 節 (これが例外を捕捉する) や finally 節 (後始末のために實行される) を指定する事ができる。
</p>
<p>try 條件文はコマンド |<a href="#g_t_003atry">:try</a>| によつて始まり、對應するコマンド |<a href="#g_t_003aendtry">:endtry</a>| によつて終了する。その閒でコマンド |<a href="#g_t_003acatch">:catch</a>| により catch 節を定めたり、コマンド |<a href="#g_t_003afinally">:finally</a>| によつて finally 節を定めることができる。catch 節は 1 個もなかつたり、複數個あつてもよい。しかし finally 節は 1 個までしか持てない。finally 節の後に catch 節があつてはならない。catch 節と finally 節の前の部分は try ブロックと呼ばれる。
</p>
<pre class="verbatim">:try
:  ...
:  ...                             try ブロック
:  ...
:catch /{pattern}/
:  ...
:  ...                             catch 節
:  ...
:catch /{pattern}/
:  ...
:  ...                             catch 節
:  ...
:finally
:  ...
:  ...                             finally 節
:  ...
:endtry
</pre>
<p>try 條件文により、コードから發生する例外を監視したり、適切な對應を取ることができる。try ブロック內で發生した例外は捕捉される。try ブロックと catch 節內で發生した例外は捕捉され、後始末が行はれる。
</p>
<p>try ブロックの實行中に例外が發生しなかつた場合は、制禦は (もしあれば) finally 節に移動する。その實行後に、スクリプトは &quot;:endtry&quot; の後の行から實行を繼續する。
</p>
<p>try ブロックの實行中に例外が發生した場合は、try ブロックの殘りの行はスキップされる。例外はコマンド &quot;:catch&quot; の引數として指定された正規表現に照合される。最初にマッチした &quot;:catch&quot; の後の catch 節が實行される。他の catch 節は實行されない。catch 節は次に &quot;:catch&quot;, &quot;:finally&quot;, &quot;:endtry&quot; が現れたところで終了する (どれでもよい)。
</p>
<p>&quot;:endtry&quot; に達すると、スクリプトは次の行から通常通り實行が續けられる。發生した例外が、コマンド &quot;:catch&quot; で指定されたどの正規表現にもマッチしないとき、その例外はその try 條件文で捕捉されず、どの catch 節も實行されない。finally 節があるならば實行される。finally 節の實行中は例外は後回しにされ、&quot;:endtry&quot; のときに實行される。そして &quot;:endtry&quot; の後のコマンドは實行されず、例外は他のどこかで捕捉される。|<a href="#try_002dnesting">try-nesting</a>| を參照。
</p>
<p>catch 節の實行中に新たな例外が發生した場合は、その catch 節の殘りの行は實行されない。新しい例外は同じtry條件文のどの &quot;:catch&quot; コマンドの正規表現にも照合されず、どの catch 節も實行されない。しかし finally 節があるならばそこが實行され、その閒その例外は保留される。&quot;:endtry&quot; の後のコマンドは實行されない。新しい例外は他のどこかで捕捉される。|<a href="#try_002dnesting">try-nesting</a>| を參照。
</p>
<p>finally 節の實行中に例外が發生した場合は、その finally 節の殘りの行は實行されない。try ブロックやその catch 節のどこかで例外が發生してからその finally 節が實行されてゐた場合は、元の (保留されてゐた) 例外は破毀される。&quot;:endtry&quot; の後のコマンドは實行されない。finally 節で發生した例外は傳播し、他のどこかで捕捉される。|<a href="#try_002dnesting">try-nesting</a>| を參照。
</p>
<p>完全な try 條件文を圍む &quot;:while&quot; ループ內で、try ブロックや catch 節において &quot;:break&quot; や &quot;:continue&quot; が實行されたときも finally 節が實行される。また、函數の中や source されたスクリプト中で、try ブロックや try 條件文の catch 節において &quot;:return&quot; や &quot;:finish&quot; が實行されたときも finally 節が實行される。finally 節の實行中は &quot;:break&quot;, &quot;:continue&quot;, &quot;:return&quot;, &quot;:finish&quot; は保留され、&quot;:endtry&quot; に達したとき再開される。しかしこれらは、その finally 節內で例外が發生したときは破毀される。
</p>
<p>完全な try 條件節を圍む &quot;:while&quot; ループ內での &quot;:break&quot; や &quot;:continue&quot;、または finally 節內で &quot;:return&quot; や &quot;:finish&quot; に出會つたときは、finally 節の殘りはスキップされ、通常通り &quot;:break&quot;, &quot;continue&quot;, &quot;:return&quot;, &quot;finish&quot; が實行される。もしその finally 節の前に、try ブロックや catch 節內で例外が發生したり、&quot;:break&quot;, &quot;:continue&quot;, &quot;:return&quot;, &quot;:finally&quot; が行はれてゐた場合は、それらの保留されてゐた例外やコマンドは破毀される。
</p>
<p>例として |<a href="#throw_002dcatch">throw-catch</a>| と |<a href="#try_002dfinally">try-finally</a>| を參照。
</p>

<a name="try_002dnesting"></a><a name="index-try_002dnesting"></a>
<a name="index-try-Tiao-Jian-Wennonesuto"></a>
<a name="try-Tiao-Jian-Wennonesuto"></a>
<h4 class="unnumberedsubsec">try 條件文のネスト</h4>

<p>try 條件文は任意にネストされられる。つまり、try 條件文の try ブロック・catch 節・finally 節のなかに別の完全な try 條件文を書くことができる。內側の try 條件文が try ブロックで發生した例外を捕捉しなかつたときや、catch 節・finally 節で新たな例外が發生したときは、外側の try 條件文がそのルールにしたがつて例外を捕捉する。內側の try 條件文が外側の條件文の try ブロックの中にある場合は catch 節が判定されるが、さうでない場合は finally 節のみが實行される。これはネストの仕方には關係ない。つまり、內側の try 條件文が直接外側の try 條件文に含まれてゐてもよいし、外側がスクリプトを source したり、內側の try 條件文を含む函數を呼び出してゐてもよい。
</p>
<p>有效な try 條件文のどれも例外を捕捉しなかつたときは、それらの finally 節が實行される。その後、スクリプトの實行は停止する。&quot;:throw&quot; コマンドにより明示的に投げられた例外が捕捉されなかつた場合は、エラーメッセージが表示される。Vim によつて暗默的に投げられたエラーや割り込み例外については、通常通りエラーメッセージや割り込みメッセージが表示される。
</p>
<p>例として |<a href="#throw_002dcatch">throw-catch</a>| を參照。
</p>

<a name="except_002dexamine"></a><a name="index-except_002dexamine"></a>
<a name="index-LiWai-Chu-Li-kodonoJian-Cha-"></a>
<a name="LiWai-Chu-Li-kodonoJian-Cha-"></a>
<h4 class="unnumberedsubsec">例外處理コードの檢査</h4>

<p>例外處理のコードはトリッキーになりがちである。何が起こつてゐるか知りたいときはスクリプトファイルを source するときに &rsquo;<samp>verbose</samp>&rsquo; を 13 に設定するか、コマンド修飾子 &quot;:13verbose&quot; を使ふ。すると例外が發生・破毀・捕捉・完了したときには表示されるやうになる。冗長度のレベルを 14 以上にすると、finally 節において保留されてゐるものも表示されるやうになる。この情報はデバッグモードでも表示される (|<a href="repeat_002etxt.html#debug_002dscripts">debug-scripts</a>| を參照)。
</p>

<a name="throw_002dcatch"></a><a name="index-throw_002dcatch"></a>
<a name="index-LiWai-noSheng-Cheng-toBu-Zhuo-"></a>
<a name="LiWai-noSheng-Cheng-toBu-Zhuo-"></a>
<h4 class="unnumberedsubsec">例外の生成と捕捉</h4>

<p>任意の數値や文字列を例外として投げることができる。コマンド |<a href="#g_t_003athrow">:throw</a>| を使ひ、投げられる値を引數に渡す:
</p><div class="example">
<pre class="example">:throw 4711
:throw &quot;string&quot;
</pre></div>
<a name="throw_002dexpression"></a><a name="index-throw_002dexpression"></a>
<p>式を引數に指定することもできる。まづその式が評價され、その結果が投げられる:
</p><div class="example">
<pre class="example">:throw 4705 + strlen(&quot;string&quot;)
:throw strpart(&quot;strings&quot;, 0, 6)
</pre></div>

<p>&quot;:throw&quot; コマンドの引數を評價してゐる最中に例外が發生することもありうる。その例外が捕捉されない限り、その式の評價は破毀される。よつて、その &quot;:throw&quot; コマンドは例外を投げることができない。
</p>
<p>例:
</p>
<pre class="verbatim">:function! Foo(arg)
:  try
:    throw a:arg
:  catch /foo/
:  endtry
:  return 1
:endfunction
:
:function! Bar()
:  echo &quot;in Bar&quot;
:  return 4710
:endfunction
:
:throw Foo(&quot;arrgh&quot;) + Bar()
</pre>
<p>この例を實行すると &quot;arrgh&quot; が投げられ、Bar() が實行されないため &quot;in Bar&quot; は表示されない。しかし次のやうにすると
</p><div class="example">
<pre class="example">:throw Foo(&quot;foo&quot;) + Bar()
</pre></div>
<p>&quot;in Bar&quot; を表示し、4711 を投げる。
</p>
<p>式を引數として受け取る他のコマンドでも、式の評價中に捕捉されない例外が發生するとコマンドが破毀される。そして例外はそのコマンドを呼び出した位置へ傳播する。
</p>
<p>例:
</p>
<pre class="verbatim">:if Foo(&quot;arrgh&quot;)
:  echo &quot;then&quot;
:else
:  echo &quot;else&quot;
:endif
</pre>
<p>この例で、&quot;then&quot; と &quot;else&quot; のどちらも表示されない。
</p>
<a name="catch_002dorder"></a><a name="index-catch_002dorder"></a>
<p>例外は、1 個以上の |<a href="#g_t_003acatch">:catch</a>| コマンドを持つ try 條件文で捕捉することができる。これについては |<a href="#try_002dconditionals">try-conditionals</a>| を參照。各 &quot;:catch&quot; コマンドで捕捉される値は、引數にて正規表現で指定できる。マッチする例外が捕捉されると、その後に續く catch 節が實行される。
</p>
<p>例:
</p>
<pre class="verbatim">:function! Foo(value)
:  try
:    throw a:value
:  catch /^\d\+$/
:    echo &quot;Number thrown&quot;
:  catch /.*/
:    echo &quot;String thrown&quot;
:  endtry
:endfunction
:
:call Foo(0x1267)
:call Foo('string')
</pre>
<p>最初の Foo() の呼び出しは &quot;Number thrown&quot; を表示し、2 番目の呼び出しは &quot;String thrown&quot; を表示する。例外は、順番に &quot;:catch&quot; コマンドに照合される。最初にマッチした catch 節だけが實行される。そのため、より限定的な &quot;:catch&quot; を先に書くべきである。次の順序で書くと無意味になつてしまふ:
</p>
<pre class="verbatim">:  catch /.*/
:    echo &quot;String thrown&quot;
:  catch /^\d\+$/
:    echo &quot;Number thrown&quot;
</pre>
<p>最初の &quot;:catch&quot; は常にマッチするため、2 番目の catch 節は決して實行されない。
</p>
<a name="throw_002dvariables"></a><a name="index-throw_002dvariables"></a>
<p>一般的な正規表現により例外を捕捉した場合、その正確な値には變數 |<a href="#v_003aexception">v:exception</a>| によりアクセスできる:
</p><div class="example">
<pre class="example">:  catch /^\d\+$/
:    echo &quot;Number thrown.  Value is&quot; v:exception
</pre></div>

<p>また、どこで例外が發生したかも知りたいだらう。これは |<a href="#v_003athrowpoint">v:throwpoint</a>| に保持されてゐる。
</p><blockquote>
<p><strong>Note:</strong> <br>
&quot;v:exception&quot; と &quot;v:throwpoint&quot; は最も直近に捕捉された例外に對し、それが終了するまで有效である。
</p></blockquote>
<p>例:
</p>
<pre class="verbatim">:function! Caught()
:  if v:exception != &quot;&quot;
:    echo 'Caught &quot;' . v:exception . '&quot; in ' . v:throwpoint
:  else
:    echo 'Nothing caught'
:  endif
:endfunction
:
:function! Foo()
:  try
:    try
:      try
:	 throw 4711
:      finally
:	 call Caught()
:      endtry
:    catch /.*/
:      call Caught()
:      throw &quot;oops&quot;
:    endtry
:  catch /.*/
:    call Caught()
:  finally
:    call Caught()
:  endtry
:endfunction
:
:call Foo()
</pre>
<p>上の例は次のやうに表示する
</p><pre class="verbatim">Nothing caught
Caught &quot;4711&quot; in function Foo, line 4
Caught &quot;oops&quot; in function Foo, line 10
Nothing caught
</pre>
<p>實用的な例:  次のコマンド &quot;:LineNumber&quot; は、それが呼び出されたスクリプトや函數中の行番號を表示する:
</p>
<div class="example">
<pre class="example">:function! LineNumber()
:    return substitute(v:throwpoint, '.*\D\(\d\+\).*', '\1', &quot;&quot;)
:endfunction
:command! LineNumber try | throw &quot;&quot; | catch | echo LineNumber() | endtry
</pre></div>
<a name="try_002dnested"></a><a name="index-try_002dnested"></a>
<p>try 條件文によつて捕捉されない例外はそれを圍む try 條件文によつて捕捉することができる:
</p>
<pre class="verbatim">:try
:  try
:    throw &quot;foo&quot;
:  catch /foobar/
:    echo &quot;foobar&quot;
:  finally
:    echo &quot;inner finally&quot;
:  endtry
:catch /foo/
:  echo &quot;foo&quot;
:endtry
</pre>
<p>內側の try 條件文はこの例外を捕捉せず、finally 節が實行されるだけである。そしてこの例外は外側の try 條件文で捕捉される。この例を實行すると &quot;inner finally&quot; と &quot;foo&quot; が表示される。
</p>
<a name="throw_002dfrom_002dcatch"></a><a name="index-throw_002dfrom_002dcatch"></a>
<p>例外を捕捉した後、新しい例外を投げて他の catch 節で捕捉させることができる:
</p>
<pre class="verbatim">:function! Foo()
:  throw &quot;foo&quot;
:endfunction
:
:function! Bar()
:  try
:    call Foo()
:  catch /foo/
:    echo &quot;Caught foo, throw bar&quot;
:    throw &quot;bar&quot;
:  endtry
:endfunction
:
:try
:  call Bar()
:catch /.*/
:  echo &quot;Caught&quot; v:exception
:endtry
</pre>

<p>これを實行すると &quot;Caught foo, throw bar&quot; と &quot;Caught bar&quot; が表示される。
</p>
<a name="rethrow"></a><a name="index-rethrow"></a>
<p>Vim script 言語には本物の rethrow はないが、代はりに &quot;v:exception&quot; を使ふことができる:
</p>
<pre class="verbatim">:function! Bar()
:  try
:    call Foo()
:  catch /.*/
:    echo &quot;Rethrow&quot; v:exception
:    throw v:exception
:  endtry
:endfunction
</pre><a name="try_002dechoerr"></a><a name="index-try_002dechoerr"></a>
<blockquote>
<p><strong>Note:</strong> <br>
この方法は Vim のエラーや割り込み例外を &quot;rethrow&quot; するためには使へない。Vim の內部例外を僞裝することはできないからである。それを行はうとするとエラー例外が發生する。その狀況を表す自分自身の例外を投げるべきである。獨自のエラー例外値を含む Vim のエラー例外を發生させたい場合には、コマンド |<a href="#g_t_003aechoerr">:echoerr</a>| を使ふことができる:
</p>
<pre class="verbatim">:try
:  try
:    asdf
:  catch /.*/
:    echoerr v:exception
:  endtry
:catch /.*/
:  echo v:exception
:endtry
</pre>
<p>このコードを實行すると次が表示される
</p><div class="display">
<pre class="display">Vim(echoerr):Vim:E492: Not an editor command:   asdf
</pre></div>
</blockquote>


<a name="try_002dfinally"></a><a name="index-try_002dfinally"></a>
<a name="index-Hou-Shi-Mo-Chu-Li-"></a>
<a name="Hou-Shi-Mo-Chu-Li-"></a>
<h4 class="unnumberedsubsec">後始末處理</h4>

<p>しばしばスクリプト中でグローバルな設定を變更し、最後に元の設定を復元することがある。しかしユーザーが <kbd>CTRL-C</kbd> を押してスクリプトを中斷すると、設定が一貫しない狀態になつてしまふ。スクリプトの開發段階においても、エラーが發生したり、明示的に例外を投げたが捕捉されなかつた場合に、同じことが起こりうる。この問題は、try 條件文を使つて finally 節で設定を復元することで解決できる。finally 節は、通常の制禦フロー・エラー時・明示的な &quot;:throw&quot; 時・割り込み時に實行されることが保證されてゐる。
</p><blockquote>
<p><strong>Note:</strong> <br>
try 條件文の內側で發生したエラーと割り込みは例外に變換される。これらが捕捉されなかつたときには、finally 節の實行の後にスクリプトの實行が停止する。
</p></blockquote>
<p>例: &gt;
</p>
<pre class="verbatim">:try
:  let s:saved_ts = &amp;ts
:  set ts=17
:
:  &quot; Do the hard work here.
:
:finally
:  let &amp;ts = s:saved_ts
:  unlet s:saved_ts
:endtry
</pre>
<p>函數やスクリプトの一部でグローバルな設定を變更し、その函數・スクリプトの失敗時・通常終了時に設定を復元する必要があるときは、必ず局所的にこの手法を使ふべきである。
</p>
<a name="break_002dfinally"></a><a name="index-break_002dfinally"></a>
<p>&quot;:continue&quot;, &quot;:break&quot;, &quot;:return&quot;, &quot;:finish&quot; などによつて try ブロックや catch 節を拔けるときも後始末處理が働く。
</p>
<p>例:
</p>
<pre class="verbatim">:let first = 1
:while 1
:  try
:    if first
:      echo &quot;first&quot;
:      let first = 0
:      continue
:    else
:      throw &quot;second&quot;
:    endif
:  catch /.*/
:    echo v:exception
:    break
:  finally
:    echo &quot;cleanup&quot;
:  endtry
:  echo &quot;still in while&quot;
:endwhile
:echo &quot;end&quot;
</pre>
<p>上の例を實行すると &quot;first&quot;, &quot;cleanup&quot;, &quot;second&quot;, &quot;cleanup&quot;, &quot;end&quot; と表示される:
</p>
<pre class="verbatim">:function! Foo()
:  try
:    return 4711
:  finally
:    echo &quot;cleanup\n&quot;
:  endtry
:  echo &quot;Foo still active&quot;
:endfunction
:
:echo Foo() &quot;returned by Foo&quot;
</pre>
<p>上の例を實行すると &quot;cleanup&quot; と &quot;4711 returned by Foo&quot; が表示される。finally 節に餘計な &quot;:return&quot; を書く必要はない。(さうすると戾り値が上書きされてしまふ)
</p>
<a name="except_002dfrom_002dfinally"></a><a name="index-except_002dfrom_002dfinally"></a>
<p>finally 節で &quot;:continue&quot;, &quot;:break&quot;, &quot;:return&quot;, &quot;:finish&quot;, &quot;:throw&quot; を使ふことは可能である。しかしさうすると try 條件文の後始末を破毀してしまふことになるので推奬されてゐない。しかし、當然、finally 節の中で割り込みとエラー例外が發生することはありうる。
</p>
<p>finally 節におけるエラーにより、割り込みが正しく動作しなくなる例:
</p>
<pre class="verbatim">:try
:  try
:    echo &quot;Press CTRL-C for interrupt&quot;
:    while 1
:    endwhile
:  finally
:    unlet novar
:  endtry
:catch /novar/
:endtry
:echo &quot;Script still running&quot;
:sleep 1
</pre>
<p>失敗する可能性のあるコマンドを finally 節に書く必要があるときは、それらのコマンドにより發生するエラーを捕捉したり無視したりすることについて考へること。|<a href="#catch_002derrors">catch-errors</a>| と |<a href="#ignore_002derrors">ignore-errors</a>| を參照。
</p>

<a name="catch_002derrors"></a><a name="index-catch_002derrors"></a>
<a name="index-erawoBian-Geng-suru"></a>
<a name="erawoBian-Geng-suru"></a>
<h4 class="unnumberedsubsec">エラーを變更する</h4>

<p>特定のエラーを捕捉するには、監視したいコードを try ブロックに入れ、そのエラーメッセージに對する catch 節を加へるだけでよい。try 條件節が存在すると全てのエラーは例外に變換される。そのため、メッセージはまつたく表示されず、|<a href="#v_003aerrmsg">v:errmsg</a>| は設定されない。&quot;:catch&quot; コマンドに對する正しい正規表現を作るには、エラー例外のフォーマットがどのやうなものか知つてゐなければならない。
</p>
<p>エラー例外は次のフォーマットを持つ:
</p><div class="example">
<pre class="example">Vim({cmdname}):{errmsg}
</pre></div>
<p>または
</p><div class="example">
<pre class="example">Vim:{errmsg}
</pre></div>

<p>{cmdname} は失敗したコマンド名である。2番目の形式はコマンド名が不明のとき用ゐられる。{errmsg} は、そのエラーがtry條件文の外で發生したときに通常表示されるエラーメッセージである。エラーメッセージは必ず大文字の &quot;E&quot; で始まり、その後に 2, 3 桁のエラー番號、コロン、スペースが續く。
</p>
<p>例:
</p>
<p>次のコマンドを實行すると、
</p><pre class="verbatim">:unlet novar
</pre><p>通常次のエラーメッセージが表示される
</p><div class="display">
<pre class="display">E108: No such variable: &quot;novar&quot;
</pre></div>
<p>これは try 條件文の中では例外に變換される
</p><div class="example">
<pre class="example">Vim(unlet):E108: No such variable: &quot;novar&quot;
</pre></div>

<p>次のコマンドを實行すると、
</p><pre class="verbatim">:dwim
</pre><p>通常次のエラーメッセージが表示される
</p><div class="display">
<pre class="display">E492: Not an editor command: dwim
</pre></div>
<p>これは try 條件文の中では例外に變換される
</p><div class="example">
<pre class="example">Vim:E492: Not an editor command: dwim
</pre></div>

<p>&quot;<code>:unlet</code>&quot; の全てのエラーを次によつて捕捉できる
</p><div class="example">
<pre class="example">:catch /^Vim(unlet):/
</pre></div>
<p>また、全てのミススペルされたコマンドのエラーは次で捕捉できる
</p><div class="example">
<pre class="example">:catch /^Vim:E492:/
</pre></div>

<p>複數のコマンドによつて同一のエラーメッセージが表示される場合もある:
</p><div class="example">
<pre class="example">:function nofunc
</pre></div>
<p>と
</p><div class="example">
<pre class="example">:delfunction nofunc
</pre></div>
<p>は兩方とも次のエラーメッセージを表示する。
</p><div class="display">
<pre class="display">E128: Function name must start with a capital: nofunc
</pre></div>
<p>これは try 條件節の中では例外に變換される。それぞれ
</p><div class="example">
<pre class="example">Vim(function):E128: Function name must start with a capital: nofunc
</pre></div>
<p>または
</p><div class="example">
<pre class="example">Vim(delfunction):E128: Function name must start with a capital: nofunc
</pre></div>
<p>となる。どのコマンドによつて發生したかに關係なくこのエラーを捕捉するには、次の正規表現を使ふ:
</p><div class="example">
<pre class="example">:catch /^Vim(\a\+):E128:/
</pre></div>

<p>複數のエラーメッセージを表示するコマンドもある:
</p><div class="example">
<pre class="example">:let x = novar
</pre></div>
<p>は次のエラーメッセージを表示する:
</p><div class="display">
<pre class="display">E121: Undefined variable: novar
E15: Invalid expression:  novar
</pre></div>
<p>最初のエラーメッセージのみが例外の値として使はれる。それが最も限定的なメッセージだからである (|<a href="#except_002dseveral_002derrors">except-several-errors</a>| を參照)。これは次のやうにして捕捉できる
</p><div class="example">
<pre class="example">:catch /^Vim(\a\+):E121:/
</pre></div>

<p>&quot;nofunc&quot; といふ名前に關係したエラー全てを捕捉するには
</p><div class="example">
<pre class="example">:catch /\&lt;nofunc\&gt;/
</pre></div>

<p>コマンド &quot;<code>:write</code>&quot; と &quot;<code>:read</code>&quot; による全ての Vim エラーを捕捉するには
</p><div class="example">
<pre class="example">:catch /^Vim(\(write\|read\)):E\d\+:/
</pre></div>

<p>全ての Vim エラーを捕捉するには次の正規表現を使ふ
</p><div class="example">
<pre class="example">:catch /^Vim\((\a\+)\)\=:E\d\+:/
</pre></div>
<a name="catch_002dtext"></a><a name="index-catch_002dtext"></a>
<blockquote>
<p><strong>Note:</strong> <br>
エラーメッセージの本文によつて捕捉しようとしてはならない
</p><div class="example">
<pre class="example">:catch /No such variable/
</pre></div>
<p>かうすると英語の環境では動作するが、コマンド |<a href="mlang_002etxt.html#g_t_003alanguage">:language</a>| により他の言語を使つてゐるユーザーの環境では動作しなくなる。しかし、コメントとしてメッセージテキストを引用することは役に立つ:
</p><div class="example">
<pre class="example">:catch /^Vim(\a\+):E108:/   &quot; No such variable
</pre></div>
</blockquote>


<a name="ignore_002derrors"></a><a name="index-ignore_002derrors"></a>
<a name="index-erawoWu-Shi-suru"></a>
<a name="erawoWu-Shi-suru"></a>
<h4 class="unnumberedsubsec">エラーを無視する</h4>

<p>特定のコマンドで發生したエラーを捕捉すれば、エラーを無視することができる:
</p>
<div class="example">
<pre class="example">:try
:  write
:catch
:endtry
</pre></div>

<p>しかしこの單純な形は使はないよう强く推奬されてゐる。なぜなら、これはあなたが望むより多くの例外を捕捉してしまふからである。&quot;<code>:write</code>&quot; コマンドを使ふと自動コマンドが實行され、書き込みとは關係ないエラーが發生する可能性がある。例へば:
</p><div class="example">
<pre class="example">:au BufWritePre * unlet novar
</pre></div>

<p>このやうなエラーの中には、スクリプトの作者が責任を負はないものもある: つまり、スクリプトのユーザーがそのやうなオートコマンドを定義してゐる場合である。その場合、上の例のやうにすると、ユーザーからエラーを隱してしまふことになる。エラーを無視するには、次のやうにした方がよい
</p>
<div class="example">
<pre class="example">:try
:  write
:catch /^Vim(write):/
:endtry
</pre></div>

<p>これは書き込みエラーだけを捕捉する。つまり、あなたが意圖的に無視したいエラーだけである。
</p>
<p>オートコマンドを發生させないやうな 1 つのコマンドに對しては、&quot;<samp>:silent!</samp>&quot; を使へばエラーを例外に變換すること自體を抑制させることができる:
</p><div class="example">
<pre class="example">:silent! nunmap k
</pre></div>
<p>これは try 條件文が有效なときも機能する。
</p>

<a name="catch_002dinterrupt"></a><a name="index-catch_002dinterrupt"></a>
<a name="index-Ge-riIp-miwoBu-Zhuo-suru"></a>
<a name="Ge-riIp-miwoBu-Zhuo-suru"></a>
<h4 class="unnumberedsubsec">割り込みを捕捉する</h4>

<p>有效な try 條件文內では、割り込み (CTRL-C) は例外 &quot;Vim:Interrupt&quot; に變換される。これを他の例外と同樣に捕捉することができる。するとそのスクリプトは停止しない。
</p>
<p>例:
</p>
<pre class="verbatim">:function! TASK1()
:  sleep 10
:endfunction

:function! TASK2()
:  sleep 20
:endfunction

:while 1
:  let command = input(&quot;Type a command: &quot;)
:  try
:    if command == &quot;&quot;
:      continue
:    elseif command == &quot;END&quot;
:      break
:    elseif command == &quot;TASK1&quot;
:      call TASK1()
:    elseif command == &quot;TASK2&quot;
:      call TASK2()
:    else
:      echo &quot;\nIllegal command:&quot; command
:      continue
:    endif
:  catch /^Vim:Interrupt$/
:    echo &quot;\nCommand interrupted&quot;
:    &quot; 例外捕捉。次のプロンプトから繼續する。
:  endtry
:endwhile
</pre>
<p>ここで <kbd>CTRL-C</kbd> を押すとタスクに割り込むことができる。その後スクリプトは新しいコマンドを要求する。プロンプトで <kbd>CTRL-C</kbd> を押すとスクリプトが終了する。
</p>
<p>スクリプト中の特定の行で <kbd>CTRL-C</kbd> が押されたとき何が起こるかをテストするにはデバッグモードを使ひ、その行の上で |<a href="repeat_002etxt.html#g_t_003equit">&gt;quit</a>| や |<a href="repeat_002etxt.html#g_t_003einterrupt">&gt;interrupt</a>| コマンドを使ふ。|<a href="repeat_002etxt.html#debug_002dscripts">debug-scripts</a>| を參照。
</p>

<a name="catch_002dall"></a><a name="index-catch_002dall"></a>
<a name="index-Quan-tewoBu-Zhuo-suru"></a>
<a name="Quan-tewoBu-Zhuo-suru"></a>
<h4 class="unnumberedsubsec">全てを捕捉する</h4>

<p>次のコマンド
</p><div class="example">
<pre class="example">:catch /.*/
:catch //
:catch
</pre></div>

<p>は全てをエラー例外・割り込み例外・|<a href="#g_t_003athrow">:throw</a>| コマンドにより明示的に投げられた例外の捕捉する。これは、スクリプトのトップレベルで、豫期しないことを捕捉するために役に立つ。
</p>
<p>例:
</p>
<pre class="verbatim">:try
:
:  &quot; ここで難しいことをする
:
:catch /MyException/
:
:  &quot; 既知の問題を制禦する
:
:catch /^Vim:Interrupt$/
:    echo &quot;Script interrupted&quot;
:catch /.*/
:  echo &quot;Internal error (&quot; . v:exception . &quot;)&quot;
:  echo &quot; - occurred at &quot; . v:throwpoint
:endtry
:&quot; スクリプトの終はり
</pre>
<blockquote>
<p><strong>Note:</strong> <br>
全てを捕捉すると、期待してゐた以上のものを捕捉してしまふかもしれない。それゆゑ、&quot;<code>:catch</code>&quot; コマンドの引數に正規表現を指定することにより、自分が本當に制禦できる問題だけを捕捉することが强く推奬されてゐる。
</p>
<p>全てを捕捉してしまふと、<kbd>CTRL-C</kbd> を押してスクリプトを中斷することがほぼ不可能になつてしまふことがある。その例:
</p>
<div class="example">
<pre class="example">:while 1
:  try
:    sleep 1
:  catch
:  endtry
:endwhile
</pre></div>
</blockquote>


<a name="except_002dautocmd"></a><a name="index-except_002dautocmd"></a>
<a name="index-LiWai-tootokomando"></a>
<a name="LiWai-tootokomando"></a>
<h4 class="unnumberedsubsec">例外とオートコマンド</h4>

<p>オートコマンドの實行中に例外を使ふこともできる。例:
</p>
<pre class="verbatim">:autocmd User x try
:autocmd User x   throw &quot;Oops!&quot;
:autocmd User x catch
:autocmd User x   echo v:exception
:autocmd User x endtry
:autocmd User x throw &quot;Arrgh!&quot;
:autocmd User x echo &quot;Should not be displayed&quot;
:
:try
:  doautocmd User x
:catch
:  echo v:exception
:endtry
</pre>
<p>上の例を實行すると &quot;Oops!&quot; と &quot;Arrgh!&quot; が表示される。
</p>
<a name="except_002dautocmd_002dPre"></a><a name="index-except_002dautocmd_002dPre"></a>
<p>いくつかのコマンドでは、それ自身が實行される前にオートコマンドが實行される。例外が發生し、それが一聯のオートコマンドの中で捕捉されない場合、一聯の自動コマンドと、その引き金となつたコマンドは破毀され、例外がそのコマンドを呼んだ位置へ傳播する。
</p>
<p>例:
</p>
<pre class="verbatim">:autocmd BufWritePre * throw &quot;FAIL&quot;
:autocmd BufWritePre * echo &quot;Should not be displayed&quot;
:
:try
:  write
:catch
:  echo &quot;Caught:&quot; v:exception &quot;from&quot; v:throwpoint
:endtry
</pre>
<p>ここで &quot;<code>:write</code>&quot; コマンドは現在編輯してゐるファイルを書き込まない (&rsquo;<samp>modified</samp>&rsquo; を確認すればわかる)。BufWritePre のオートコマンドで發生した例外により、&quot;<code>:write</code>&quot; が破毀されたためである。そしてその例外は捕捉され、次を表示する:
</p><div class="display">
<pre class="display">Caught: FAIL from BufWrite Auto commands for &quot;*&quot;
</pre></div>
<a name="except_002dautocmd_002dPost"></a><a name="index-except_002dautocmd_002dPost"></a>
<p>いくつかのコマンドでは、それ自身が實行された後でオートコマンドが實行される。引き金となつたコマンド自身が失敗して、それが有效な try 條件文の內側にあつた場合、自動コマンドはスキップされ、エラー例外が發生する。その例外は、コマンドを呼んだ位置で捕捉することができる。
</p>
<p>例:
</p>
<pre class="verbatim">:autocmd BufWritePost * echo &quot;File successfully written!&quot;
:
:try
:  write /i/m/p/o/s/s/i/b/l/e
:catch
:  echo v:exception
:endtry
</pre>
<p>この例は次を表示する:
</p><div class="display">
<pre class="display">Vim(write):E212: Can&rsquo;t open file for writing (/i/m/p/o/s/s/i/b/l/e)
</pre></div>

<p>引き金となつたコマンドが失敗したときでさへもオートコマンドを實行したいといふ場合は、catch 節の中でそのイベントを引き起こすことできる。
</p>
<p>例:
</p>
<pre class="verbatim">:autocmd BufWritePre  * set noreadonly
:autocmd BufWritePost * set readonly
:
:try
:  write /i/m/p/o/s/s/i/b/l/e
:catch
:  doautocmd BufWritePost /i/m/p/o/s/s/i/b/l/e
:endtry
</pre><p>&quot;<code>:silent!</code>&quot; を使ふこともできる:
</p>
<pre class="verbatim">:let x = &quot;ok&quot;
:let v:errmsg = &quot;&quot;
:autocmd BufWritePost * if v:errmsg != &quot;&quot;
:autocmd BufWritePost *   let x = &quot;after fail&quot;
:autocmd BufWritePost * endif
:try
:  silent! write /i/m/p/o/s/s/i/b/l/e
:catch
:endtry
:echo x
</pre>
<p>上の例は &quot;after fail&quot; を表示する。
</p>
<p>引き金となつたコマンドが失敗しなかつた場合、オートコマンドから發生した例外は、元のコマンドを呼んだ位置から捕捉できる:
</p>
<pre class="verbatim">:autocmd BufWritePost * throw &quot;:-(&quot;
:autocmd BufWritePost * echo &quot;Should not be displayed&quot;
:
:try
:  write
:catch
:  echo v:exception
:endtry
</pre><a name="except_002dautocmd_002dCmd"></a><a name="index-except_002dautocmd_002dCmd"></a>
<p>いくつかのコマンドでは、通常の處理を一聯のオートコマンドで置き換へることができる。そのコマンド列で發生した例外は元のコマンドの呼び出し位置で捕捉できる。
</p>
<p>例: &quot;<code>:write</code>&quot; コマンドでは、例外が發生したとき、呼び出し側は實際にファイルが書き込まれたのかどうかを知ることができない。これを敎へる必要があるときは、なんらかの手段を使はねばならない。
</p>
<pre class="verbatim">:if !exists(&quot;cnt&quot;)
:  let cnt = 0
:
:  autocmd BufWriteCmd * if &amp;modified
:  autocmd BufWriteCmd *   let cnt = cnt + 1
:  autocmd BufWriteCmd *   if cnt % 3 == 2
:  autocmd BufWriteCmd *     throw &quot;BufWriteCmdError&quot;
:  autocmd BufWriteCmd *   endif
:  autocmd BufWriteCmd *   write | set nomodified
:  autocmd BufWriteCmd *   if cnt % 3 == 0
:  autocmd BufWriteCmd *     throw &quot;BufWriteCmdError&quot;
:  autocmd BufWriteCmd *   endif
:  autocmd BufWriteCmd *   echo &quot;File successfully written!&quot;
:  autocmd BufWriteCmd * endif
:endif
:
:try
:	write
:catch /^BufWriteCmdError$/
:  if &amp;modified
:    echo &quot;Error on writing (file contents not changed)&quot;
:  else
:    echo &quot;Error after writing&quot;
:  endif
:catch /^Vim(write):/
:    echo &quot;Error on writing&quot;
:endtry
</pre>
<p>バッファに變更を行つた後でこのスクリプトを數回 source すると、1 囘目は次のやうに表示される
</p><div class="example">
<pre class="example">File successfully written!
</pre></div>
<p>2 囘目は
</p><div class="example">
<pre class="example">Error on writing (file contents not changed)
</pre></div>
<p>3 囘目は
</p><div class="example">
<pre class="example">Error after writing
</pre></div>
<p>以下同樣。
</p>
<a name="except_002dautocmd_002dill"></a><a name="index-except_002dautocmd_002dill"></a>
<p>異なるイベントに對するオートコマンドにわたつて try 條件文を展開することはできない。以下のコードは不正である:
</p>
<pre class="verbatim">:autocmd BufWritePre  * try
:
:autocmd BufWritePost * catch
:autocmd BufWritePost *   echo v:exception
:autocmd BufWritePost * endtry
:
:write
</pre>

<a name="except_002dhier_002dparam"></a><a name="index-except_002dhier_002dparam"></a>
<a name="index-LiWai-noJie-Ceng-toFu-Jia-Qing-Bao-tukiLiWai-"></a>
<a name="LiWai-noJie-Ceng-toFu-Jia-Qing-Bao-tukiLiWai-"></a>
<h4 class="unnumberedsubsec">例外の階層と付加情報つき例外</h4>

<p>プログラミング言語の中には例外クラスを階層化したり、例外クラスのオブジェクトに付加的な情報を渡すことができるものがある。これと似たことを Vim でもできる。
階層構造を持つた例外を投げるには、各部分をコロンで區切つた完全なクラス名を投げればよい。例へば、數學ライブラリ內でオーバーフローが發生したときに &quot;EXCEPT:MATHERR:OVERFLOW&quot; を投げる。
例外クラスに付加的な情報を與へたいときは、それを括弧の中に書く。例へば、&quot;myfile&quot; の書き込み中にエラーが發生したときに文字列 &quot;EXCEPT:IO:WRITEERR(myfile)&quot; を投げる。
&quot;<code>:catch</code>&quot; コマンドにおいて適切な正規表現を使へば、階層の基底クラスや派生クラスを捕捉できる。括弧の中の付加情報は、&quot;<code>:substitute</code>&quot; コマンドを使つて |<a href="#v_003aexception">v:exception</a>| から切り出すことができる。
</p>
<p>例:
</p>
<pre class="verbatim">:function! CheckRange(a, func)
:  if a:a &lt; 0
:    throw &quot;EXCEPT:MATHERR:RANGE(&quot; . a:func . &quot;)&quot;
:  endif
:endfunction
:
:function! Add(a, b)
:  call CheckRange(a:a, &quot;Add&quot;)
:  call CheckRange(a:b, &quot;Add&quot;)
:  let c = a:a + a:b
:  if c &lt; 0
:    throw &quot;EXCEPT:MATHERR:OVERFLOW&quot;
:  endif
:  return c
:endfunction
:
:function! Div(a, b)
:  call CheckRange(a:a, &quot;Div&quot;)
:  call CheckRange(a:b, &quot;Div&quot;)
:  if (a:b == 0)
:    throw &quot;EXCEPT:MATHERR:ZERODIV&quot;
:  endif
:  return a:a / a:b
:endfunction
:
:function! Write(file)
:  try
:    execute &quot;write&quot; fnameescape(a:file)
:  catch /^Vim(write):/
:    throw &quot;EXCEPT:IO(&quot; . getcwd() . &quot;, &quot; . a:file . &quot;):WRITEERR&quot;
:  endtry
:endfunction
:
:try
:
:  &quot; 計算やI/Oを行ふ
:
:catch /^EXCEPT:MATHERR:RANGE/
:  let function = substitute(v:exception, '.*(\(\a\+\)).*', '\1', &quot;&quot;)
:  echo &quot;Range error in&quot; function
:
:catch /^EXCEPT:MATHERR/	&quot; catches OVERFLOW and ZERODIV
:  echo &quot;Math error&quot;
:
:catch /^EXCEPT:IO/
:  let dir = substitute(v:exception, '.*(\(.\+\),\s*.\+).*', '\1', &quot;&quot;)
:  let file = substitute(v:exception, '.*(.\+,\s*\(.\+\)).*', '\1', &quot;&quot;)
:  if file !~ '^/'
:    let file = dir . &quot;/&quot; . file
:  endif
:  echo 'I/O error for &quot;' . file . '&quot;'
:
:catch /^EXCEPT/
:  echo &quot;Unspecified error&quot;
:
:endtry
</pre>
<p>エラー時や <kbd>CTRL-C</kbd> を押したときに Vim 自身によつて投げられる例外は平坦な階層になつてゐる: つまりこれらは全て &quot;Vim&quot; クラスに入つてゐる。ユーザーは接頭辭 &quot;Vim&quot; をつけた例外を投げることはできない。これらは Vim 用に豫約されてゐる。
</p>
<p>Vim のエラー例外は失敗したコマンドの名前 (わかつてゐるならば) といふ付加情報がついてゐる。|<a href="#catch_002derrors">catch-errors</a>| を參照。
</p>

<a name="index-Bian-watutaTe-Xing-"></a>
<a name="Bian-watutaTe-Xing-"></a>
<h4 class="unnumberedsubsec">變はつた特性</h4>
<a name="except_002dcompat"></a><a name="index-except_002dcompat"></a>
<p>例外制禦のコンセプトは、例外を引き起こしたコマンドは卽座に異常終了し、制禦が finally 節または catch 節に移るといふ前提に基づいてゐる。
</p>
<p>Vim script 言語では、エラーの後もスクリプトや函數が處理を續行する場合がある。&quot;abort&quot; フラグのない函數や、&quot;:silent!&quot; をつけて實行されたコマンドでは、制禦は次の行、そして函數の外へ移り、制禦フローは最外側の &quot;:endwhile&quot; や &quot;:endif&quot; の次の行へ移る。一方、エラーは例外と同樣に捕捉できるべきである (つまり、卽座に異常終了することが要求される)。
</p>
<p>この問題は、try 條件文が有效なときだけエラーを例外に變換し、(&quot;:silent!&quot; で抑制されてゐない限り) 卽座に異常終了することで解決される。(エラー) 例外は有效な try 條件文でのみ捕捉可能であるため、これはなんら制約とはならない。エラーを捕捉せずに卽座に終了してほしいなら、單に catch 節を持たない try 條件文を使へばよい。(finally 節を指定すれば、終了の前に後始末處理を行ふことができる)
</p>
<p>有效な try 條件文がないとき、卽座の異常終了でなく、通常の異常終了と繼續が行はれる。これによつて Vim6.1 以前用に書かれたスクリプトの互換性を保證してゐる。
</p>
<p>しかし、有效な try 條件文の中から、例外處理コマンドを使つてゐない既存のスクリプトを source する (またはその函數の 1 つを呼ぶ) と、エラー發生時に既存のスクリプトの制禦フローが變はるかもしれない。エラー發生時に卽座に異常終了し、新しい方のスクリプト內でエラーを捕捉できる。しかし source されたスクリプトが &quot;:silent!&quot; コマンドでエラーメッセージを抑制してゐた場合 (それが適切なスクリプトなら |<a href="#v_003aerrmsg">v:errmsg</a>| を見ることでエラーを確認してゐる)、實行パスは變はらない。そのエラーは例外に變換されない (|<a href="various_002etxt.html#g_t_003asilent">:silent</a>| を參照)。これが起こる殘りのただ 1 つの原因は、エラーに關心を拂つてゐなく、エラーメッセージを表示させるスクリプトである。おそらく新しいスクリプトからそのやうなコードを使ひたいとは思はないだらう。
</p>
<a name="except_002dsyntax_002derr"></a><a name="index-except_002dsyntax_002derr"></a>
<p>例外處理コマンドにおける構文エラーは、それが屬する try 條件文のどの &quot;<code>:catch</code>&quot; コマンドでも決して捕捉されない。しかし finally 節は實行される。
</p>
<p>例:
</p>
<pre class="verbatim">:try
:  try
:    throw 4711
:  catch /\(/
:    echo &quot;in catch with syntax error&quot;
:  catch
:    echo &quot;inner catch-all&quot;
:  finally
:    echo &quot;inner finally&quot;
:  endtry
:catch
:  echo 'outer catch-all caught &quot;' . v:exception . '&quot;'
:  finally
:    echo &quot;outer finally&quot;
:endtry
</pre>
<p>上の例を實行すると次が表示される:
</p><div class="display">
<pre class="display">inner finally
outer catch-all caught &quot;Vim(catch):E54: Unmatched \(&quot;
outer finally
</pre></div>
<p>元の例外は破毀され、代はりにエラー例外が投げられる。
</p>
<p>{譯注: throw 4711 により例外が發生したが、その後の catch /\(/ に構文エラーがあるためエラー例外が發生し、最初の例外は破毀された。}
</p>
<a name="except_002dsingle_002dline"></a><a name="index-except_002dsingle_002dline"></a>
<p>コマンド &quot;:try&quot;, &quot;:catch&quot;, &quot;:finally&quot;, &quot;:endtry&quot; は 1 行の中に書くことができる。しかし構文エラーがあつたとき &quot;catch&quot; の行を認識するのが難しくなるので、避けた方がよい。
</p>
<p>例:
</p><pre class="verbatim">:try | unlet! foo # | catch | endtry
</pre><p>この例は &quot;:unlet!&quot; の後に餘計な文字があるためエラー例外を發生させる。そして&quot;:catch&quot; と &quot;:endtry&quot; が認識されないため、この例外は破毀され、&quot;E488: Trailing characters&quot; のメッセージが表示される。
</p>
<a name="except_002dseveral_002derrors"></a><a name="index-except_002dseveral_002derrors"></a>
<p>1 つのコマンドにより複數のエラーが發生した場合、普通は最初のエラーメッセージが最も限定的であるため、それがエラー例外に變換される。
</p>
<p>例:
</p><div class="example">
<pre class="example">echo novar
</pre></div>
<p>は次を發生させる:
</p><div class="display">
<pre class="display">E121: Undefined variable: novar
E15: Invalid expression: novar
</pre></div>
<p>try 條件文の中のエラー例外の値は次になる:
</p><div class="example">
<pre class="example">Vim(echo):E121: Undefined variable: novar
</pre></div>
<a name="except_002dsyntax_002derror"></a><a name="index-except_002dsyntax_002derror"></a>
<p>しかし、同じコマンドにおいて通常のエラーの後に構文エラーが檢出されたときは、構文エラーが例外として投げられる。
</p>
<p>例:
</p><pre class="verbatim">unlet novar #
</pre><p>これは次を發生させる:
</p><div class="display">
<pre class="display">E108: No such variable: &quot;novar&quot;
E488: Trailing characters
</pre></div>
<p>try 條件文の中のエラー例外の値は次になる:
</p><div class="example">
<pre class="example">Vim(unlet):E488: Trailing characters
</pre></div>
<p>この理由は、構文エラーによつてユーザーが豫期してゐない實行パスになつてしまふかもしれないためである。例:
</p><pre class="verbatim">try
    try | unlet novar # | catch | echo v:exception | endtry
catch /.*/
    echo &quot;outer catch:&quot; v:exception
endtry
</pre><p>これは &quot;outer catch: Vim(unlet):E488: Trailing characters&quot; を表示し、次にエラーメッセージ &quot;E600: Missing :endtry&quot; が表示される。|<a href="#except_002dsingle_002dline">except-single-line</a>| を參照。
</p>
<a name="eval_002dexamples"></a><a name="index-eval_002dexamples"></a>
<a name="g_t9_002e-Li"></a>
<h3 class="section">9. 例</h3>

<a name="index-16-Jin-Shu-deBiao-Shisuru"></a>
<a name="g_t16-Jin-Shu-deBiao-Shisuru"></a>
<h4 class="unnumberedsubsec">16 進數で表示する</h4>
<pre class="verbatim">:&quot; 函數 Nr2Bin() は數値の 2 進文字列表現を返す。
:func Nr2Bin(nr)
:  let n = a:nr
:  let r = &quot;&quot;
:  while n
:    let r = '01'[n % 2] . r
:    let n = n / 2
:  endwhile
:  return r
:endfunc
</pre>
<pre class="verbatim">:&quot; 函數 String2Bin() は文字列中の各文字を2進文字列に變換して、ハイフン(-)で
:&quot; 區切つて返す。
:func String2Bin(str)
:  let out = ''
:  for ix in range(strlen(a:str))
:    let out = out . '-' . Nr2Bin(char2nr(a:str[ix]))
:  endfor
:  return out[1:]
:endfunc
</pre>
<p>使ひ方の例:
</p><div class="example">
<pre class="example">:echo Nr2Bin(32)
</pre></div>
<p>結果: &quot;100000&quot;
</p><div class="example">
<pre class="example">:echo String2Bin(&quot;32&quot;)
</pre></div>
<p>結果: &quot;110011-110010&quot;
</p>

<a name="index-Xing-wosoto-_0028Bing-beTi-e_0029-suru"></a>
<a name="Xing-wosoto-_0028Bing-beTi-e_0029-suru-_0028by-Robert-Webb_0029"></a>
<h4 class="unnumberedsubsec">行をソート (竝べ替へ) する (by Robert Webb)</h4>

<p>以下は、指定した比較函數を使つて行をソートする例である。
</p>
<pre class="verbatim">:func SortBuffer()
:  let lines = getline(1, '$')
:  call sort(lines, function(&quot;Strcmp&quot;))
:  call setline(1, lines)
:endfunction
</pre>
<p>ワンライナーにすると次のやうになる:
</p><div class="example">
<pre class="example">:call setline(1, sort(getline(1, '$'), function(&quot;Strcmp&quot;)))
</pre></div>


<a name="index-scanf_0028_0029-noDai-Ti-"></a>
<a name="scanf_0028_0029-noDai-Ti-"></a>
<h4 class="unnumberedsubsec">scanf() の代替</h4>
<a name="sscanf"></a><a name="index-sscanf"></a>
<p>Vim には sscanf() に相當する函數が無い。行の一部を取り出す必要がある場合には、matchstr() や substitute() を使へば實現できる。以下の例は、&quot;foobar.txt, 123, 45&quot; といふやうな行から、ファイル名と行番號とカラム番號を取り出す方法を示してゐる。
</p><pre class="verbatim">:&quot; 正規表現を設定
:let mx='\(\f\+\),\s*\(\d\+\),\s*\(\d\+\)'
:&quot; 正規表現全體にマッチする部分を取り出す
:let l = matchstr(line, mx)
:&quot; マッチ結果から各要素を取り出す
:let file = substitute(l, mx, '\1', '')
:let lnum = substitute(l, mx, '\2', '')
:let col = substitute(l, mx, '\3', '')
</pre>
<p>入力は變數 &quot;line&quot;、結果は &quot;file&quot; と &quot;lnum&quot; と &quot;col&quot; に格納される (このアイデアは Michael Geddes による)。
</p>

<a name="index-Ci-Shu-kara-scriptnames-woQu-riChu-su"></a>
<a name="Ci-Shu-kara-scriptnames-woQu-riChu-su"></a>
<h4 class="unnumberedsubsec">辭書から scriptnames を取り出す</h4>
<a name="scriptnames_002ddictionary"></a><a name="index-scriptnames_002ddictionary"></a>
<p>コマンド |<a href="repeat_002etxt.html#g_t_003ascriptnames">:scriptnames</a>| により今までに source された全てのスクリプトファイルのリストを取得することができる。これと等價な函數や變數は存在しない (めつたに必要にならないからである)。そのやうな場合には次のコードが利用できる:
</p><pre class="verbatim">&quot; &quot;:scriptnames&quot; の出力を變數scriptnames_outputに入れる。
let scriptnames_output = ''
redir =&gt; scriptnames_output
silent scriptnames
redir END
</pre>
<pre class="verbatim">&quot; 出力を行のリストに分割し、各行をパースする。辭書 &quot;scripts&quot; に要素を追加
&quot; する。
let scripts = {}
for line in split(scriptnames_output, &quot;\n&quot;)
  &quot; 空行以外に對して實行
  if line =~ '\S'
    &quot; 行內の最初の番號を取得
    let nr = matchstr(line, '\d\+')
    &quot; ファイル名を取得。スクリプト番號&quot; 123: &quot;を削除。
    let name = substitute(line, '.\+:\s*', '', '')
    &quot; 辭書に要素を追加
    let scripts[nr] = name
  endif
endfor
unlet scriptnames_output
</pre>
<a name="vimscript_002dversion"></a><a name="vimscript_002dversions"></a><a name="index-vimscript_002dversion"></a>
<a name="index-vimscript_002dversions"></a>
<a name="g_t10_002e-Vim-script-baziyon"></a>
<h3 class="section">10. Vim script バージョン</h3>
<a name="scriptversion"></a><a name="index-scriptversion"></a>
<p>時閒が經つにつれて多くの機能が Vim script に追加された。これには Ex コマンド、關
數、變數タイプなどが含まれる。それぞれの個々の機能は |<a href="#has_0028_0029">has()</a>| と |<a href="#exists_0028_0029">exists()</a>| 函數でチェックできる。
</p>
<p>時々、機能の古い構文が Vim をより良くすることを妨げることがある。サポートが奪はれると、これは古い Vim script を壞すだらう。これを明確にするために |<a href="repeat_002etxt.html#g_t_003ascriptversion">:scriptversion</a>| コマンドを使ふことができる。Vim script が古いバージョンの Vim と互換性がない場合、不可解な方法で失敗するのではなく、明示的なエラーを與へる。
</p>
<dl compact="compact">
<dd><a name="scriptversion_002d1"></a><a name="index-scriptversion_002d1"></a>
</dd>
<dt>:scriptversion 1</dt>
<dd><p>これはオリジナルの Vim script であり、|<a href="repeat_002etxt.html#g_t_003ascriptversion">:scriptversion</a>| コマンドを使用してゐないのと同じである。行の範圍について古い構文に戾るために使用することができる。以下でサポートを檢査する:
</p><div class="example">
<pre class="example">has('vimscript-1')
</pre></div>

<a name="scriptversion_002d2"></a><a name="index-scriptversion_002d2"></a>
</dd>
<dt>:scriptversion 2</dt>
<dd><p>&quot;.&quot; による文字列連結はサポートされてゐない、代はりに &quot;..&quot; を使用すること。これにより、Dict メンバーアクセスと浮動小數點數に &quot;.&quot; を使用することによる曖昧さが囘避される。&quot;.5&quot; は數値 0.5 を意味する。
</p>
<a name="scriptversion_002d3"></a></dd>
<dt>:scriptversion 3</dt>
<dd><p>すべての Vim の定義濟變數 |<a href="#vim_002dvariable">vim-variable</a>| には &quot;v:&quot; といふ接頭辭を付けなければならない。例へば &quot;version&quot; は |<a href="#v_003aversion">v:version</a>| とは違ふので、普通の變數として使ふことができる。&quot;count&quot; やその他のいくつかの分かり切つた名前でも同樣である。
</p>
<p>以下でサポートを檢査する:
</p><div class="example">
<pre class="example">has('vimscript-3')
</pre></div>
</dd>
</dl>

<a name="no_002deval_002dfeature"></a><a name="index-no_002deval_002dfeature"></a>
<a name="index-_002beval-Ji-Neng-gaWu-Xiao-"></a>
<a name="g_t11_002e-_002beval-Ji-Neng-gaWu-Xiao-"></a>
<h3 class="section">11. +eval 機能が無效</h3>

<p>コンパイル時に |<a href="various_002etxt.html#g_t_002beval">+eval</a>| 機能が無效とされてゐる場合、全ての式評價 (eval) コマンドは提供されない。その場合、Vim script が全ての種類のエラーを引き起こすことを避ける爲、&quot;:if&quot; と &quot;:endif&quot; は解釋される。&quot;:if&quot; とそれに對應する &quot;:endif&quot; に挾まれた內容は無視される。&quot;:if&quot; の後に續く引數も無視される。この &quot;:if&quot; コマンドはネスティングが可能である。しかし必ず行の先頭に書かれてゐる必要がある。&quot;:else&quot; コマンドは認識されない。
</p>
<p>|<a href="various_002etxt.html#g_t_002beval">+eval</a>| 機能が存在しなかつた場合、どのやうにコマンドが實行を免れるかの例:
</p><pre class="verbatim">:if 1
:  echo &quot;Expression evaluation is compiled in&quot;
:else
:  echo &quot;You will _never_ see this message&quot;
:endif
</pre>
<p>|<a href="various_002etxt.html#g_t_002beval">+eval</a>| 機能が無效になつてゐる場合にのみコマンドを實行するには、2 つの方法がある。最も簡單なのは、スクリプト (または Vim) を途中で終了することである:
</p><div class="example">
<pre class="example">if 1
   echo &quot;commands executed with +eval&quot;
   finish
endif
args  &quot; command executed without +eval
</pre></div>

<p>スクリプトのロードを中止したくない場合は、次の例に示すやうなトリックを使用することができる:
</p><div class="example">
<pre class="example">silent! while 0
  set history=111
silent! endwhile
</pre></div>

<p>|<a href="various_002etxt.html#g_t_002beval">+eval</a>| 機能が利用可能な場合にコマンドは、&quot;while 0&quot; なのでスキップされる。|<a href="various_002etxt.html#g_t_002beval">+eval</a>| 機能が無效の場合は、&quot;while 0&quot; はエラーになる。これは默つて無視され、コマンドは實行される。
</p>
<a name="eval_002dsandbox"></a><a name="sandbox"></a><a name="E48"></a><a name="index-eval_002dsandbox"></a>
<a name="index-sandbox"></a>
<a name="index-E48"></a>
<a name="index-sandobotukusu"></a>
<a name="g_t12_002e-sandobotukusu"></a>
<h3 class="section">12. サンドボックス</h3>

<p>オプション &rsquo;<samp>foldexpr</samp>&rsquo;, &rsquo;<samp>formatexpr</samp>&rsquo;, &rsquo;<samp>includeexpr</samp>&rsquo;, &rsquo;<samp>indentexpr</samp>&rsquo;, &rsquo;<samp>statusline</samp>&rsquo;, &rsquo;<samp>foldtext</samp>&rsquo; はサンドボックスの中で評價される。これによつて、惡質な副作用を持つ式からの保護がなされてゐる。これによつて、これらのオプションがモードラインから設定された場合にある種の安全性がもたらされてゐる。tags ファイルからのコマンドが實行されたときとコマンドラインでの <kbd>CTRL-R =</kbd> に對してもサンドボックスが使はれる。
</p>
<p>コマンド |<a href="#g_t_003asandbox">:sandbox</a>| に對してもサンドボックスが使はれる。
</p>
<p>サンドボックス內では以下の事が禁止される:
</p><ul>
<li> バッファの變更
</li><li> マッピング、オートコマンド、ユーザー定義コマンドの定義・變更
</li><li> ある種のオプションの設定 (|<a href="options_002etxt.html#option_002dsummary">option-summary</a>| を參照)
<a name="E794"></a></li><li> <a name="index-E794"></a>
ある種の Vim 定義濟變數 (v:) の設定 (|<a href="#v_003avar">v:var</a>| を參照)
</li><li> シェルコマンドの實行
</li><li> ファイルの讀み書き
</li><li> 他のバッファへの移動・ファイルを開く
</li><li> Python, Perl 等のコマンドの實行
</li></ul>
<p>これは 100% 安全と保證するものではない。しかし、ある種の攻擊を防ぐ事はできるはずである。
</p>
<dl compact="compact">
<dd><a name="g_t_003asan"></a><a name="g_t_003asandbox"></a><a name="index-_003asan"></a>
<a name="index-_003asandbox"></a>
</dd>
<dt>:san[dbox] {cmd}</dt>
<dd><p>サンドボックス內で {cmd} を實行する。モードラインから設定された可能性のあるオプションを評價するために使へる。
</p>
<p>例: &rsquo;<samp>foldexpr</samp>&rsquo;
</p></dd>
</dl>

<a name="sandbox_002doption"></a><a name="index-sandbox_002doption"></a>
<p>いくつかのオプションは式を含んでゐる。その式を評價するときはセキュリティ上の危險性を囘避するためにサンドボックス內で行はねばならない。しかしサンドボックスには制限があるので、これはそのオプションが安全でない場所で設定されたときのみ行はれる。ここで「安全でない」とは次の場合をいふ:
</p><ul>
<li> カレントディレクトリの .vimrc や .exrc を source するとき
</li><li> サンドボックス內で實行してゐる最中
</li><li> モードラインから設定された値
</li><li> サンドボックス內で定義されてゐる函數を實行してゐるとき
</li></ul>

<blockquote>
<p><strong>Note:</strong> <br>
サンドボックス內でオプションの値を退避し、それから復元した場合、そのオプションはやはりサンドボックス內で設定されたものとマークされる。
</p></blockquote>

<a name="textlock"></a><a name="index-textlock"></a>
<a name="index-tekisutorotuku"></a>
<a name="g_t13_002e-tekisutorotuku"></a>
<h3 class="section">13. テキストロック</h3>

<p>いくつか狀況においては、バッファを變更する・他のウィンドウへジャンプするなど、Vim の現在の處理を混亂させたり破壞してしまふやうな動作は禁止される。これは Vim が實際に他の何かをしてゐるときに起こることに對して當てはまる。例へば、&rsquo;<samp>balloonexpr</samp>&rsquo; の評價は、マウスカーソルがある位置に留まつてゐるどんなときにでも起こりうる。
</p>
<p>テキストロックが有效になつてゐるときは、以下の事が禁止される:
</p><ul>
<li> バッファのテキスト變更
</li><li> 他のバッファやウィンドウへの移動
</li><li> 他のファイルを開く
</li><li> ウィンドウを閉ぢたりVimを終了したり
</li><li> その他
</li></ul>

<a name="testing"></a><a name="index-testing"></a>
<a name="index-tesuto"></a>
<a name="g_t14_002e-tesuto"></a>
<h3 class="section">14. テスト</h3>

<p>Vim はビルドした後、通常 &quot;make test&quot; を使つてテストできる。テストはディレクトリ &quot;src/testdir&quot; にある。
</p>
<p>時閒の經過と共にいくつかのタイプのテストが追加された:
</p><table>
<tr><td width="99%">test33.in               最も古い、もう追加しない</td></tr>
<tr><td width="99%">test_something.in       古いスタイルのテスト</td></tr>
<tr><td width="99%">test_something.vim      新しいスタイルのテスト</td></tr>
</table>

<a name="new_002dstyle_002dtesting"></a><a name="index-new_002dstyle_002dtesting"></a>
<p>新しいテストは新しいスタイルのテストで追加すべきである。これらは |<a href="#assert_005fequal_0028_0029">assert_equal()</a>| などの函數を使用して、テストコマンドと期待される結果を 1 か所に保持する。
<a name="old_002dstyle_002dtesting"></a><a name="index-old_002dstyle_002dtesting"></a>
場合によつては、古いスタイルのテストを使用する必要がある。例へば、|<a href="various_002etxt.html#g_t_002beval">+eval</a>| 機能なしで Vim をテストするとき。
</p>
<p>詳細は、src/testdir/README.txt ファイルを參照。
</p>

<hr>
<div class="header">
<p>
Up: <a href="Mu-Ci-.html#g_t_76ee_6b21" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html#Indexes-CP" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
