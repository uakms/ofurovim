<!DOCTYPE html>
<html lang="ja">
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>

<title>usr_41.txt (Vim Reference Manual)</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="description" content="usr_41.txt (Vim Reference Manual)">
<meta name="keywords" content="usr_41.txt (Vim Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="Mu-Ci-.html" rel="start" title="目次">
<link href="Indexes-CP.html" rel="index" title="Indexes CP">
<link href="Mu-Ci-.html" rel="up" title="目次">
<link href="usr_005f42_002etxt.html" rel="next" title="usr_42.txt">
<link href="usr_005f40_002etxt.html" rel="prev" title="usr_40.txt">
<style>
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="ja">
<span id="usr_005f41_002etxt"></span><div class="header">
<p>
Next: <a href="usr_005f42_002etxt.html" accesskey="n" rel="next">usr_42.txt</a>, Previous: <a href="usr_005f40_002etxt.html" accesskey="p" rel="prev">usr_40.txt</a>, Up: <a href="Mu-Ci-.html" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Vim-script-Shu-Fa-"></span><h2 class="unnumbered">Vim script 書法</h2>
<pre class="verbatim">*usr_41.txt*	For Vim バージョン 8.1.  Last change: 2019 Nov 17

		     VIM USER MANUAL - by Bram Moolenaar

			      Vim script 書法
</pre>

<p>Vim script 言語は vimrc ファイルや構文ファイルなど、さまざまな目的に使はれます。この章では Vim script の書き方を說明します。說明することがたくさんあるので大きな章になつてゐます。
</p>
<table>
<tr><td width="30%">|<a href="#g_t41_002e1">41.1</a>|</td><td width="70%">はじめに</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e2">41.2</a>|</td><td width="70%">變數</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e3">41.3</a>|</td><td width="70%">式</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e4">41.4</a>|</td><td width="70%">條件式</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e5">41.5</a>|</td><td width="70%">式を實行する</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e6">41.6</a>|</td><td width="70%">函數を使ふ</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e7">41.7</a>|</td><td width="70%">函數を定義する</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e8">41.8</a>|</td><td width="70%">リストと辭書</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e9">41.9</a>|</td><td width="70%">例外</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e10">41.10</a>|</td><td width="70%">注意事項</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e11">41.11</a>|</td><td width="70%">プラグインを書く</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e12">41.12</a>|</td><td width="70%">ファイルタイププラグインを書く</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e13">41.13</a>|</td><td width="70%">コンパイラプラグインを書く</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e14">41.14</a>|</td><td width="70%">プラグインを書く (高速ロード版)</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e15">41.15</a>|</td><td width="70%">ライブラリスクリプトを書く</td></tr>
<tr><td width="30%">|<a href="#g_t41_002e16">41.16</a>|</td><td width="70%">Vim script を配布する</td></tr>
</table>

<span id="g_t41_002e1"></span><span id="vim_002dscript_002dintro"></span><span id="script"></span><span id="index-Vim-script-hazimeni"></span>
<span id="index-vim_002dscript_002dintro"></span>
<span id="index-script"></span>
<span id="hazimeni"></span><h3 class="section">はじめに</h3>

<p>誰もが最初に觸れる Vim script は vimrc ファイルです。Vim が起動するときに讀み込まれ、書かれてゐるコマンドが實行されます。それにより好きなやうに設定を變更できます。vimrc の中ではすべてのコロンコマンドが使へます (&quot;:&quot; で始まるコマンドのこと。Ex コマンドやコマンドラインコマンドと呼ばれることもある)。
</p>
<p>シンタックスファイルも Vim script です。シンタックスファイルは、ファイルタイプ別にオプションを設定するファイルの一種です。複雜なマクロ定義を別ファイルに分けて保存しておくこともできます。このやうに、いろいろな使用方法が考へられます。
</p>
<p>簡單な例から始めませう:
</p>
<pre class="verbatim">:let i = 1
:while i &lt; 5
:  echo &quot;count is&quot; i
:  let i += 1
:endwhile
</pre><blockquote>
<p><strong>Note:</strong> <br>
實際には &quot;:&quot; を書く必要はありません。&quot;:&quot; が必要なのはコマンドラインで入力するときだけです。Vim script ファイルを書くときは省略できます。このヘルプでは、コロンコマンドであることを强調し、ノーマルモードと區別するためにコロンを表記してゐます。
</p></blockquote>
<blockquote>
<p><strong>Note:</strong> <br>
例文をヤンクして :@&quot; コマンドで實際に實行できます。
</p></blockquote>

<p>出力は次のやうになります:
</p>
<pre class="verbatim">count is 1
count is 2
count is 3
count is 4
</pre>
<p>1 行目では &quot;:let&quot; コマンドで變數に値を代入してゐます。書式は次のとほりです:
</p>
<pre class="verbatim">:let {variable} = {expression}
</pre>
<p>例では、變數名が &quot;i&quot;、式が 1 です。
</p>
<p>&quot;<code>:while</code>&quot; コマンドでループを開始します。書式は次のとほりです:
</p>
<pre class="verbatim">:while {condition}
:  {statements}
:endwhile
</pre>
<p>條件式が眞である閒、ステートメントが實行されます。例では、條件式は &quot;i &lt; 5&quot; です。これは、i が 5 より小さい場合に眞になります。
</p><blockquote>
<p><strong>Note:</strong> <br>
何かのミスで while ループが止まらなかつた場合は、<kbd>CTRL-C</kbd> を押せば中斷できます (MS-Windows では <kbd>CTRL-Break</kbd>)。
</p></blockquote>

<p>&quot;<code>:echo</code>&quot; コマンドは引數を出力します。例では、&quot;count is&quot; といふ文字列と、變數 i の値を出力してゐます。i が 1 なら、次のやうに表示されます:
</p>
<pre class="verbatim">count is 1
</pre>
<p>&quot;:let i += 1&quot; は &quot;:let i = i + 1&quot; と同じ意味です。變數 i に 1 を加算し、新しい値を同じ變數に代入します。
</p>
<p>上述の例は、實際にはもつと簡潔に書くことができます:
</p>
<pre class="verbatim">:for i in range(1, 4)
:  echo &quot;count is&quot; i
:endfor
</pre>
<p>|<a href="eval_002etxt.html#g_t_003afor">:for</a>| と |<a href="eval_002etxt.html#range_0028_0029">range()</a>| の說明はもつと先です。すぐに知りたい人はリンク先にジャンプしてください。
</p>

<span id="g_t4-Zhong-Lei-noShu-Zhi-"></span><h4 class="unnumberedsubsec">4 種類の數値</h4>

<p>數値は 10 進數、16 進數、8 進數および 2 進數のいづれかで表記します。16 進數は &quot;0x&quot; か &quot;0X&quot; で開始します。例へば &quot;0x1f&quot; は 10 進數の 31 です。8 進數は &quot;0&quot; で開始します。例へば &quot;017&quot; は 10 進數の 15 です。2 進數は &quot;0b&quot; か &quot;0B&quot; で開始します。例へば &quot;0b101&quot; は 10 進數の 5 です。
</p><blockquote>
<p><strong>注意:</strong> <br>
10 進數で書くときは先頭に &quot;0&quot; を付けないでください。8 進數として扱はれてしまひます。
</p></blockquote>
<p>&quot;<code>:echo</code>&quot; コマンドは常に 10 進數で出力します。例:
</p>
<pre class="verbatim">:echo 0x7f 036
</pre><pre class="verbatim">127 30
</pre>
<p>數値にマイナス記號を付けると負數になります。8 進數、16 進數や 2 進數も負數にできます。マイナス記號は減算記號としても使はれます。次の例を上の例と比べてみてください:
</p>
<pre class="verbatim">:echo 0x7f -036
</pre><pre class="verbatim">97
</pre>
<p>式の途中にある空白は無視されますが、可讀性を高めるために、適切に空白で區切ることをお勸めします。例へば上記の數値が負數であると勘違ひしてしまはないやうに、マイナス記號と數値の閒に空白をいれませう:
</p>
<pre class="verbatim">:echo 0x7f - 036
</pre>
<span id="g_t41_002e2"></span><span id="index-Vim-script-Bian-Shu-"></span>
<span id="Bian-Shu-"></span><h3 class="section">變數</h3>

<p>變數名にはアルファベット、數字、アンダースコアが使へます。變數名を數字で開始することはできません。次のやうな變數名が使へます:
</p>
<pre class="verbatim">counter
_aap3
very_long_variable_name_with_underscores
FuncLength
LENGTH
</pre>
<p>&quot;foo+var&quot; や &quot;6var&quot; のやうな名前は使へません。
</p>
<p>例に擧げた變數はグローバル變數です。定義されてゐる變數の一覽を見るのは次のコマンドを使ひます:
</p>
<pre class="verbatim">:let
</pre>
<p>グローバル變數はどこでも使へます。そのため、あるスクリプトファイルで &quot;count&quot; といふ變數を使つたとき、その變數は他のスクリプトでも使はれてゐる可能性があります。これは混亂を招きますし、トラブルの元です。それを避けるには &quot;s:&quot; を付けてスクリプトローカル變數を使ひます。例へば、次のやうに使ひます:
</p>
<pre class="verbatim">:let s:count = 1
:while s:count &lt; 5
:  source other.vim
:  let s:count += 1
:endwhile
</pre>
<p>&quot;s:count&quot; はスクリプトローカル變數なので、他のスクリプトファイルによつて變更される心配はありません。他のスクリプトファイルで &quot;s:count&quot; 變數が使はれてゐたとしても、それは別の變數です。スクリプトローカル變數についての詳細は |<a href="eval_002etxt.html#script_002dvariable">script-variable</a>| を參照してください。
</p>
<p>變數の種類は他にもあります。|<a href="eval_002etxt.html#internal_002dvariables">internal-variables</a>| 參照。次の變數がよく使はれます:
</p>
<table>
<tr><td width="30%">b:name</td><td width="70%">バッファローカル變數</td></tr>
<tr><td width="30%">w:name</td><td width="70%">ウィンドウローカル變數</td></tr>
<tr><td width="30%">g:name</td><td width="70%">グローバル變數 (函數內では g: 必須)</td></tr>
<tr><td width="30%">v:name</td><td width="70%">Vim が定義する變數</td></tr>
</table>


<span id="Bian-Shu-noXue-Chu-"></span><h4 class="unnumberedsubsec">變數の削除</h4>

<p>變數はメモリを消費します。&quot;<code>:let</code>&quot; コマンドの出力にも表示されます。變數を削除するには &quot;<code>:unlet</code>&quot; コマンドを使ひます。例:
</p>
<pre class="verbatim">:unlet s:count
</pre>
<p>スクリプトローカル變數の &quot;<code>s:count</code>&quot; が削除され、使用されてゐたメモリが開放されます。變數が存在しない場合でもエラーを起こしたくない場合は &lsquo;<samp>!</samp>&rsquo; を付けてください:
</p>
<pre class="verbatim">:unlet! s:count
</pre>
<p>スクリプトの實行が終了したとき、ローカル變數は自動的には削除されません。次に同じスクリプトを實行したときにその變數を使ふことができます。例:
</p>
<pre class="verbatim">:if !exists(&quot;s:call_count&quot;)
:  let s:call_count = 0
:endif
:let s:call_count = s:call_count + 1
:echo &quot;called&quot; s:call_count &quot;times&quot;
</pre>
<p>&quot;exists()&quot; 函數は變數が定義されてゐるかどうかをチェックします。引數に調べたい變數の名前を指定します。變數自體を指定するのではありません。例へば:
</p>
<pre class="verbatim">:if !exists(s:call_count)
</pre>
<p>これは、s:call_count の値を變數名として exists() 函數を呼び出してゐるので、意味が違つてしまひます。
</p>
<p>感歎符 (! 記號) は値を反轉します。値が眞なら僞になり、僞なら眞になります。この記號は &quot;not&quot; と讀むことができます。つまり、&quot;if !exists()&quot; は &quot;if not exists()&quot; と讀むことができます。
</p>
<p>Vim では、0 以外の値はすべて眞です。0 は僞です。
</p><blockquote>
<p><strong>Note:</strong> <br>
數値が必要なところで文字列を使つたとき、文字列は自動的に數値に變換されます。文字列の先頭が數字ではなかつた場合は 0 に變換されます。つまり: <br>
        :if &quot;true&quot; <br>
&quot;true&quot; は 0 に變換されるので僞になります。
</p></blockquote>


<span id="WenZi-Lie-Bian-Shu-toDing-Shu-"></span><h4 class="unnumberedsubsec">文字列變數と定數</h4>

<p>ここまでは變數の値に數値だけを使つてゐましたが、文字列を使ふこともできます。Vim は數値と文字列を基本型としてサポートしてゐます。變數は動的に型付けされます。型は &quot;<code>:let</code>&quot; コマンドで變數に値を代入するたびに變化します。詳しくは |<a href="#g_t41_002e8">41.8</a>| を參照してください。
</p>
<p>變數に文字列を代入するには文字列定數を使ふ必要があります。文字列定數には 2 つの種類があります。1 つはダブルクォート文字列です:
</p>
<pre class="verbatim">:let name = &quot;peter&quot;
:echo name
</pre><pre class="verbatim">peter
</pre>
<p>文字列の中でダブルクォートを使ひたい場合は、バックスラッシュを前置してください:
</p>
<pre class="verbatim">:let name = &quot;\&quot;peter\&quot;&quot;
:echo name
</pre><pre class="verbatim">&quot;peter&quot;
</pre>
<p>バックスラッシュを使ひたくない場合はシングルクォート文字列を使つてください:
</p>
<pre class="verbatim">:let name = '&quot;peter&quot;'
:echo name
</pre><pre class="verbatim">&quot;peter&quot;
</pre>
<p>シングルクォート文字列の中ではすべての文字がそのまま使はれます。ただし、シングルクォートだけは特別で、1 つのシングルクォートを表すためには 2 つのシングルクォートを書く必要があります。バックスラッシュはそのまま使はれるので、特殊文字は使へません。
</p>
<p>ダブルクォート文字列の中では特殊文字が使へます。次のやうなものがあります:
</p>
<table>
<tr><td width="35%">\t</td><td width="65%">&lt;Tab&gt;</td></tr>
<tr><td width="35%">\n</td><td width="65%">&lt;NL&gt;, 改行</td></tr>
<tr><td width="35%">\r</td><td width="65%">&lt;CR&gt;, &lt;Enter&gt;</td></tr>
<tr><td width="35%">\e</td><td width="65%">&lt;Esc&gt;</td></tr>
<tr><td width="35%">\b</td><td width="65%">&lt;BS&gt;, バックスペース</td></tr>
<tr><td width="35%">\&quot;</td><td width="65%">&quot;</td></tr>
<tr><td width="35%">\\</td><td width="65%">\, バックスラッシュ</td></tr>
<tr><td width="35%">\&lt;Esc&gt;</td><td width="65%">&lt;Esc&gt;</td></tr>
<tr><td width="35%">\&lt;C-W&gt;</td><td width="65%">CTRL-W</td></tr>
</table>

<p>最後の 2 つはただの 1 例です。&quot;\&lt;name&gt;&quot; 形式で &quot;name&quot; といふ特殊キーを使ふことができます。
</p>
<p>文字列で使へる特殊表記については |<a href="eval_002etxt.html#expr_002dquote">expr-quote</a>| を參照してください。
</p>
<span id="g_t41_002e3"></span><span id="index-Vim-script-Shi-"></span>
<span id="Shi-"></span><h3 class="section">式</h3>

<p>Vim の式は高機能でシンプルです。式の定義については |<a href="eval_002etxt.html#expression_002dsyntax">expression-syntax</a>| を參照してください。ここでは基本的なことだけを說明します。
</p>
<p>數値と文字列と變數はそれ自體が式です。つまり、式が必要なところでは數値でも文字列でも變數でも使へます。他にも次のやうなものが使へます:
</p>
<table>
<tr><td width="50%">$NAME</td><td width="50%">環境變數</td></tr>
<tr><td width="50%">&amp;name</td><td width="50%">オプション</td></tr>
<tr><td width="50%">@r</td><td width="50%">レジスタ</td></tr>
</table>

<p>例:
</p>
<pre class="verbatim">:echo &quot;The value of 'tabstop' is&quot; &amp;ts
:echo &quot;Your home directory is&quot; $HOME
:if @a &gt; 5
</pre>
<p>&amp;name 形式を使ふと、オプションを保存し、別の値に設定し、何かを實行して、オプションを元に戾す、といふやうなことができます。例:
</p>
<pre class="verbatim">:let save_ic = &amp;ic
:set noic
:/The Start/,$delete
:let &amp;ic = save_ic
</pre>
<p>&rsquo;<samp>ignorecase</samp>&rsquo; オプションをオフにしてから &quot;The Start&quot; パターンを檢索してゐます。しかし設定は變更されません。(パターンに &quot;\C&quot; を加へる方法でも同じことができます。|<a href="pattern_002etxt.html#g_t_002f_005cC">/\C</a>| 參照。)
</p>

<span id="Shu-Zhi-Ji-Suan-"></span><h4 class="unnumberedsubsec">數値計算</h4>

<p>基本的な要素を組み合はせると面白くなつてきます。まづは數値計算です:
</p>
<table>
<tr><td width="30%">a + b</td><td width="70%">加算</td></tr>
<tr><td width="30%">a - b</td><td width="70%">減算</td></tr>
<tr><td width="30%">a * b</td><td width="70%">乘算</td></tr>
<tr><td width="30%">a / b</td><td width="70%">除算</td></tr>
<tr><td width="30%">a % b</td><td width="70%">剩餘演算(餘りを得る)</td></tr>
</table>

<p>演算子の優先順位は一般的な規則と同じです:
</p>
<pre class="verbatim">:echo 10 + 5 * 2
</pre><pre class="verbatim">20
</pre>
<p>カッコを使つて優先順位を變更できます:
</p>
<pre class="verbatim">:echo (10 + 5) * 2
</pre><pre class="verbatim">30
</pre>
<p>文字列は &quot;.&quot; で連結できます:
</p>
<pre class="verbatim">:echo &quot;foo&quot; . &quot;bar&quot;
</pre><pre class="verbatim">foobar
</pre>
<p>&quot;<code>:echo</code>&quot; コマンドに複數の引數を指定すると、スペースで區切られて表示されます。これらの例では 1 つの式しか使はれてゐないので、スペースは插入されてゐません。
</p>
<p>C 言語と同じ條件演算子も使へます:
</p>
<pre class="verbatim">a ? b : c
</pre>
<p>&quot;a&quot; が眞なら &quot;b&quot; が使はれ、さうでなければ &quot;c&quot; が使はれます。例:
</p>
<pre class="verbatim">:let i = 4
:echo i &gt; 5 ? &quot;i is big&quot; : &quot;i is small&quot;
</pre><pre class="verbatim">i is small
</pre>
<p>被演算子の部分は優先的に評價されるので、次のやうに見なすことができます:
</p>
<pre class="verbatim">(a) ? (b) : (c)
</pre>
<span id="g_t41_002e4"></span><span id="index-Vim-script-Tiao-Jian-Shi-"></span>
<span id="Tiao-Jian-Shi-"></span><h3 class="section">條件式</h3>

<p>&quot;:if&quot; コマンドは條件が眞の場合に &quot;:endif&quot; までのステートメントを實行します。書式は次のとほり:
</p>
<pre class="verbatim">:if {condition}
   {statements}
:endif
</pre>
<p>{condition} を評價した結果が眞 (0以外) であれば、{statements} の內容が實行されます。{statements} は正しく記述されてゐる必要があります。不正な記述があると &quot;:endif&quot; までたどり着けません。
</p>
<p>&quot;:else&quot; を使ふこともできます。書式は次のとほり:
</p>
<pre class="verbatim">:if {condition}
   {statements}
:else
   {statements}
:endif
</pre>
<p>2 つ目の {statements} は條件が僞の場合にだけ實行されます。
</p>
<p>&quot;:elseif&quot; を使ふこともできます:
</p>
<pre class="verbatim">:if {condition}
   {statements}
:elseif {condition}
   {statements}
:endif
</pre>
<p>これは &quot;:else&quot; に續けて &quot;if&quot; 文を使ふのと同じ動作ですが、餘計な &quot;:endif&quot; を使はなくて濟みます。
</p>
<p>vimrc ファイルで便利に使へる例を示しませう。&rsquo;<samp>term</samp>&rsquo; オプションの値を調べ、その値に應じて處理を分けます:
</p>
<pre class="verbatim">:if &amp;term == &quot;xterm&quot;
:  &quot; xterm 用の設定
:elseif &amp;term == &quot;vt100&quot;
:  &quot; vt100 端末用の設定
:else
:  &quot; その他の端末用の設定
:endif
</pre>

<span id="Lun-Li-Yan-Suan-Zi-"></span><h4 class="unnumberedsubsec">論理演算子</h4>

<p>今までの說明で既に論理演算子を使ひました。次の演算子がよく使はれます:
</p>
<table>
<tr><td width="40%">a == b</td><td width="60%">等しい</td></tr>
<tr><td width="40%">a != b</td><td width="60%">等しくない</td></tr>
<tr><td width="40%">a &gt;  b</td><td width="60%">より大きい</td></tr>
<tr><td width="40%">a &gt;= b</td><td width="60%">より大きいか等しい</td></tr>
<tr><td width="40%">a &lt;  b</td><td width="60%">より小さい</td></tr>
<tr><td width="40%">a &lt;= b</td><td width="60%">より小さいか等しい</td></tr>
</table>

<p>條件が成立するなら 1、さうでなければ 0 が返ります。例:
</p>
<pre class="verbatim">:if v:version &gt;= 700
:  echo &quot;おめでたう&quot;
:else
:  echo &quot;古いバージョンを使つてゐます。更新してね!&quot;
:endif
</pre>
<p>&quot;v:version&quot; は Vim によつて定義されてゐる變數で、Vim のバージョンが入つてゐます。バージョン 6.0 なら 600、バージョン 6.1 なら 601 です。これは複數のバージョンに對應するスクリプトを書くときに便利です。|<a href="eval_002etxt.html#v_003aversion">v:version</a>|
</p>
<p>論理演算子は數値でも文字列でも扱へます。文字列どうしを比較するときは數學的な差が比較されます。文字のバイト値を比較するので、一部の言語では正しい結果にならないかもしれません。
</p>
<p>文字列と數値を比較するときは、文字列を數値に變換します。文字列が數字ではなかつたときは 0 になるので注意してください。例:
</p>
<pre class="verbatim">:if 0 == &quot;one&quot;
:  echo &quot;yes&quot;
:endif
</pre>
<p>これは &quot;yes&quot; と表示されます。&quot;one&quot; は數字ではないので 0 に變換されるのです。
</p>
<p>文字列にはさらに 2 つの論理演算子があります:
</p>
<table>
<tr><td width="40%">a =~ b</td><td width="60%">パターンにマッチする</td></tr>
<tr><td width="40%">a !~ b</td><td width="60%">パターンにマッチしない</td></tr>
</table>

<p>左邊の &quot;a&quot; は文字列として扱はれます。右邊の &quot;b&quot; は檢索パターンとして扱はれます。例:
</p>
<pre class="verbatim">:if str =~ &quot; &quot;
:  echo &quot;str にはスペースが含まれてゐる&quot;
:endif
:if str !~ '\.$'
:  echo &quot;str の末尾はピリオドではない&quot;
:endif
</pre>
<p>パターンを指定するのにシングルクォート文字列を使ふのがコツです。ダブルクォート文字列ではバックスラッシュを二重に書く必要があり、そして、檢索パターンではバックスラッシュをよく使ふので、バックスラッシュだらけになつてしまひます。
</p>
<p>文字列を比較するときは &rsquo;<samp>ignorecase</samp>&rsquo; オプションが使はれます。大文字小文字の區別を明示的に指定したい場合は比較演算子に &quot;#&quot; (區別する) または &quot;?&quot; (區別しない) をつけます。大文字小文字を區別せずに等しいかどうかを比較したい場合は &quot;==?&quot; を使ひます。&quot;!~#&quot; ならパターンにマッチしないことを、大文字と小文字を區別して確認できます。演算子の一覽は |<a href="eval_002etxt.html#expr_002d_003d_003d">expr-==</a>| を參照してください。
</p>

<span id="Ta-norupukomando"></span><h4 class="unnumberedsubsec">他のループコマンド</h4>

<p>&quot;<code>:while</code>&quot; コマンドは既に說明しました。&quot;<code>:while</code>&quot; ループの中では 2 つのステートメントが使へます:
</p>
<table>
<tr><td width="25%">:continue</td><td width="75%">ループの先頭にジャンプしてループを繼續する。</td></tr>
<tr><td width="25%">:break</td><td width="75%">&quot;<code>:endwhile</code>&quot; までジャンプしてループを脫ける。</td></tr>
</table>

<p>例:
</p>
<pre class="verbatim">:while counter &lt; 40
:  call do_something()
:  if skip_flag
:    continue
:  endif
:  if finished_flag
:    break
:  endif
:  sleep 50m
:endwhile
</pre>
<p>&quot;<code>:sleep</code>&quot; コマンドは Vim を一定時閒停止します。&quot;50m&quot; は 50 ミリ秒です。&quot;<code>:sleep 4</code>&quot; なら 4 秒閒スリープします。
</p>
<p>&quot;:for&quot; コマンドを使つてループすることもできます。|<a href="#g_t41_002e8">41.8</a>| を參照。
</p>
<span id="g_t41_002e5"></span><span id="index-Vim-script-Shi-woShi-Xing-suru"></span>
<span id="Shi-woShi-Xing-suru"></span><h3 class="section">式を實行する</h3>

<p>今まではコマンドを直接書いてきました。&quot;<code>:execute</code>&quot; コマンドを使ふと、式の評價結果をコマンドとして實行できます。これによつてコマンドを動的に生成することができます。
</p>
<p>例へば、變數に格納された文字列を使つてタグジャンプするには次のやうにします:
</p>
<pre class="verbatim">:execute &quot;tag &quot; . tag_name
</pre>
<p>文字列 &quot;tag &quot; と變數 &quot;tag_name&quot; の値を &quot;.&quot; で連結してゐます。假に &quot;tag_name&quot; の値が &quot;get_cmd&quot; だつた場合、次のコマンドが實行されることになります:
</p>
<pre class="verbatim">:tag get_cmd
</pre>
<p>&quot;<code>:execute</code>&quot; コマンドはコロンコマンドのみ實行できます。&quot;<code>:normal</code>&quot; コマンドでノーマルモードコマンドを實行できますが、このコマンドの引數は文字がそのまま使はれ、式としては評價されません。例:
</p>
<pre class="verbatim">:normal gg=G
</pre>
<p>このコマンドは一行目にジャンプしてから &quot;=&quot; オペレータですべての行を整形します。
</p>
<p>&quot;<code>:normal</code>&quot; コマンドで式の値を使ひたい場合は &quot;<code>:execute</code>&quot; と組み合はせてください。
例:
</p>
<pre class="verbatim">:execute &quot;normal &quot; . normal_commands
</pre>
<p>變數 &quot;normal_commands&quot; にはノーマルモードコマンドを入れておく必要があります。
</p>
<p>&quot;<code>:normal</code>&quot; には完結したコマンドを指定するやうにしてください。引數が最後まで實行された段階でコマンドは中斷されます。例へば、插入モードを開始した場合は插入モードを終了しなくてはなりません。次のコマンドは正しく動作します:
</p>
<pre class="verbatim">:execute &quot;normal Inew text \&lt;Esc&gt;&quot;
</pre>
<p>これは現在行に &quot;new text&quot; を插入します。特殊キー &quot;\&lt;ESC&gt;&quot; を使つてゐることに注目してください。これによりスクリプトの中で本物の &lt;Esc&gt; 文字を使はないですみます。
</p>
<p>文字列を實行するのではなく、その式の値を得たい場合は、eval() 函數を使ひます:
</p>
<pre class="verbatim">:let optname = &quot;path&quot;
:let optval = eval('&amp;' . optname)
</pre>
<p>文字 &quot;&amp;&quot; と &quot;path&quot; を連結してゐるので eval() の引數は &quot;&amp;path&quot; になります。戾り値は &rsquo;<samp>path</samp>&rsquo; オプションの値です。
</p>
<p>次のやうにすることもできます:
</p><pre class="verbatim">:exe 'let optval = &amp;' . optname
</pre>
<span id="g_t41_002e6"></span><span id="index-Vim-script-Guan-Shu-woShi-u"></span>
<span id="Guan-Shu-woShi-u"></span><h3 class="section">函數を使ふ</h3>

<p>たくさんの函數があらかじめ定義され、豐富な機能が提供されてゐます。このセクションの說明にもいくつか登場します。函數の一覽は |<a href="eval_002etxt.html#functions">functions</a>| を參照してください。
</p>
<p>函數は &quot;<samp>:call</samp>&quot; コマンドで呼び出します。引數はカッコで圍み、それぞれをコンマで區切ります。例:
</p>
<pre class="verbatim">:call search(&quot;Date: &quot;, &quot;W&quot;)
</pre>
<p>これは &quot;Date: &quot; と &quot;W&quot; を引數にして search() 函數を呼び出してゐます。search() 函數は 1 つ目の引數を檢索パターンとして使ひ、2 つ目の引數をフラグとして使ひます。&quot;W&quot; フラグを指定するとファイル末尾で檢索が終了します (折り返さない)。
</p>
<p>函數は式の中で使ふこともできます。例:
</p>
<pre class="verbatim">:let line = getline(&quot;.&quot;)
:let repl = substitute(line, '\a', &quot;*&quot;, &quot;g&quot;)
:call setline(&quot;.&quot;, repl)
</pre>
<p>getline() 函數はカレントバッファから行を取得する函數です。引數には行番號を指定します。この例では &quot;.&quot; ですが、これはカーソルのある行を示します。
</p>
<p>substitute() 函數は &quot;<code>:substitute</code>&quot; コマンドとほぼ同じです。最初の引數は置換對象の文字列、2 つ目の引數はパターン、3 つ目は置き換へ文字列、最後はフラグです。
</p>
<p>setline() 函數は行の內容を置き換へます。最初の引數は行番號、2 つ目の引數は置き換へる文字列です。この例では、substitute() の結果で現在行を置き換へてゐます。上記の 3 行のコマンドは次のコマンドと同じことをしてゐます:
</p>
<pre class="verbatim">:substitute/\a/*/g
</pre>
<p>substitute() コマンドの前後にいろいろな處理を入れたりすると、もつと面白いことができるやうになります。
</p>

<span id="function_002dlist"></span><span id="index-function_002dlist"></span>
<span id="index-Vim-script-Guan-Shu-YiLan-"></span>
<span id="Guan-Shu-YiLan-"></span><h4 class="unnumberedsubsec">函數一覽</h4>

<p>たくさんの函數があります。ここでは機能別に分類して紹介します。アルファベット順の一覽は |<a href="eval_002etxt.html#functions">functions</a>| を參照してください。函數の名前の上で <kbd>CTRL-]</kbd> を押すと、詳細な說明にジャンプできます。
</p>
<span id="string_002dfunctions"></span><span id="index-string_002dfunctions"></span>
<span id="index-Vim-script-WenZi-Lie-Zao-Zuo-"></span>
<span id="WenZi-Lie-Zao-Zuo-_003a"></span><h4 class="unnumberedsubsubsec">文字列繰作:</h4>
<table>
<tr><td width="30%"><a href="eval_002etxt.html#nr2char_0028_0029">nr2char()</a></td><td width="70%">數値から文字を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#list2str_0028_0029">list2str()</a></td><td width="70%">數値のリストから文字列を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#char2nr_0028_0029">char2nr()</a></td><td width="70%">文字の數値を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#str2list_0028_0029">str2list()</a></td><td width="70%">文字列から數値のリストを得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#str2nr_0028_0029">str2nr()</a></td><td width="70%">文字列を數値に變換する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#str2float_0028_0029">str2float()</a></td><td width="70%">文字列を浮動小數點數に變換する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#printf_0028_0029">printf()</a></td><td width="70%">書式付き文字列を整形する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#escape_0028_0029">escape()</a></td><td width="70%">文字列の特定の文字を &rsquo;\&rsquo; でエスケープ</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#shellescape_0028_0029">shellescape()</a></td><td width="70%">シェルコマンドで使へるやうに文字列をエスケープ</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#fnameescape_0028_0029">fnameescape()</a></td><td width="70%">Vim コマンド用にファイル名をエスケープ</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#tr_0028_0029">tr()</a></td><td width="70%">ある文字の集合から別の文字の集合へ置換する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#strtrans_0028_0029">strtrans()</a></td><td width="70%">文字列を印刷可能な狀態とする</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#tolower_0028_0029">tolower()</a></td><td width="70%">文字列を小文字にする</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#toupper_0028_0029">toupper()</a></td><td width="70%">文字列を大文字にする</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#match_0028_0029">match()</a></td><td width="70%">文字列の中でパターンにマッチした位置</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#matchend_0028_0029">matchend()</a></td><td width="70%">文字列の中でパターンにマッチした末尾の位置</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#matchstr_0028_0029">matchstr()</a></td><td width="70%">文字列の中でパターンにマッチした文字列</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#matchstrpos_0028_0029">matchstrpos()</a></td><td width="70%">文字列の中でパターンにマッチした文字列と位置</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#matchlist_0028_0029">matchlist()</a></td><td width="70%">matchstr()と同樣だが、部分マッチも返す</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#stridx_0028_0029">stridx()</a></td><td width="70%">文字列の中で部分文字列が見つかつた最初の位置</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#strridx_0028_0029">strridx()</a></td><td width="70%">文字列の中で部分文字列が見つかつた最後の位置</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#strlen_0028_0029">strlen()</a></td><td width="70%">文字列のバイト單位での長さ</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#strchars_0028_0029">strchars()</a></td><td width="70%">文字列の文字單位での長さ</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#strwidth_0028_0029">strwidth()</a></td><td width="70%">表示された文字列のサイズ</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#strdisplaywidth_0028_0029">strdisplaywidth()</a></td><td width="70%">表示された文字列のサイズ、タブに關係する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#substitute_0028_0029">substitute()</a></td><td width="70%">パターンにマッチする文字列を置換</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#submatch_0028_0029">submatch()</a></td><td width="70%">&quot;:s&quot; と substitute() の中で部分マッチを得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#strpart_0028_0029">strpart()</a></td><td width="70%">文字列の一部分を得る(バイト數指定)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#strcharpart_0028_0029">strcharpart()</a></td><td width="70%">文字のインデックスで指定された部分文字列を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#strgetchar_0028_0029">strgetchar()</a></td><td width="70%">文字のインデックスで指定された文字コードを得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#expand_0028_0029">expand()</a></td><td width="70%">特殊キーワードを展開する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#expandcmd_0028_0029">expandcmd()</a></td><td width="70%">&lsquo;<code>:edit</code>&lsquo; のやうにコマンドを展開する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#iconv_0028_0029">iconv()</a></td><td width="70%">テキストのエンコーディングを變換する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#byteidx_0028_0029">byteidx()</a></td><td width="70%">文字列中の文字のバイトインデックス</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#byteidxcomp_0028_0029">byteidxcomp()</a></td><td width="70%">byteidx() と同樣だが合成文字を數に入れる</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#repeat_0028_0029">repeat()</a></td><td width="70%">文字列を複數回繰り返す</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#eval_0028_0029">eval()</a></td><td width="70%">文字列を式として評價する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#execute_0028_0029">execute()</a></td><td width="70%">Ex コマンドを實行し出力を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#win_005fexecute_0028_0029">win_execute()</a></td><td width="70%">execute() に似てゐるが指定ウィンドウで實行する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#trim_0028_0029">trim()</a></td><td width="70%">文字列から文字をトリムする</td></tr>
</table>

<span id="list_002dfunctions"></span><span id="index-list_002dfunctions"></span>
<span id="index-Vim-script-risutoCao-Zuo-"></span>
<span id="risutoCao-Zuo-_003a"></span><h4 class="unnumberedsubsubsec">リスト操作:</h4>
<table>
<tr><td width="25%"><a href="eval_002etxt.html#get_0028_0029">get()</a></td><td width="75%">要素を取得。存在しないインデックスでもエラーを出さない</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#len_0028_0029">len()</a></td><td width="75%">リスト中の要素の個數</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#empty_0028_0029">empty()</a></td><td width="75%">リストが空であるか判定する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#insert_0028_0029">insert()</a></td><td width="75%">リストの任意の位置に要素を插入する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#add_0028_0029">add()</a></td><td width="75%">リストに要素を追加する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#extend_0028_0029">extend()</a></td><td width="75%">リストにリストを連結する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#remove_0028_0029">remove()</a></td><td width="75%">リストから1個以上の要素を取り除く</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#copy_0028_0029">copy()</a></td><td width="75%">リストの淺いコピーを作成する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#deepcopy_0028_0029">deepcopy()</a></td><td width="75%">リストの完全なコピーを作成する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#filter_0028_0029">filter()</a></td><td width="75%">リストから選擇された要素を取り除く</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#map_0028_0029">map()</a></td><td width="75%">リストの各要素を變換する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#sort_0028_0029">sort()</a></td><td width="75%">リストをソートする</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#reverse_0028_0029">reverse()</a></td><td width="75%">リストの竝び順を反轉させる</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#uniq_0028_0029">uniq()</a></td><td width="75%">隣接して繰り返される要素のコピーを削除する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#split_0028_0029">split()</a></td><td width="75%">文字列を分割し、リストにする</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#join_0028_0029">join()</a></td><td width="75%">リストの要素を連結し、文字列にする</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#range_0028_0029">range()</a></td><td width="75%">數列リストを返す</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#string_0028_0029">string()</a></td><td width="75%">リストの文字列表現</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#call_0028_0029">call()</a></td><td width="75%">リストを引數として函數を呼ぶ</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#index_0028_0029">index()</a></td><td width="75%">リスト中の要素のインデックス</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#max_0028_0029">max()</a></td><td width="75%">リスト中の最大値</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#min_0028_0029">min()</a></td><td width="75%">リスト中の最小値</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#count_0028_0029">count()</a></td><td width="75%">ある要素がリスト中に出現する回數を返す</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#repeat_0028_0029">repeat()</a></td><td width="75%">リストを複數回繰り返す</td></tr>
</table>

<span id="dict_002dfunctions"></span><span id="index-dict_002dfunctions"></span>
<span id="index-Vim-script-Ci-Shu-Cao-Zuo-"></span>
<span id="Ci-Shu-Cao-Zuo-_003a"></span><h4 class="unnumberedsubsubsec">辭書操作:</h4>
<table>
<tr><td width="25%"><a href="eval_002etxt.html#get_0028_0029">get()</a></td><td width="75%">辭書の要素を返す。存在しないキーでもエラーを出さない</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#len_0028_0029">len()</a></td><td width="75%">辭書の要素の個數</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#has_005fkey_0028_0029">has_key()</a></td><td width="75%">あるキーが辭書に含まれてゐるか判定する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#empty_0028_0029">empty()</a></td><td width="75%">辭書が空であるか判定する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#remove_0028_0029">remove()</a></td><td width="75%">辭書から要素を取り除く</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#extend_0028_0029">extend()</a></td><td width="75%">ある辭書の要素をすべて別の辭書に追加する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#filter_0028_0029">filter()</a></td><td width="75%">辭書から選擇された要素を取り除く</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#map_0028_0029">map()</a></td><td width="75%">辭書の各要素を變換する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#keys_0028_0029">keys()</a></td><td width="75%">辭書の全キーのリストを取得する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#values_0028_0029">values()</a></td><td width="75%">辭書の全値のリストを取得する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#items_0028_0029">items()</a></td><td width="75%">辭書の全キー・値のペアを取得する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#copy_0028_0029">copy()</a></td><td width="75%">辭書の淺いコピーを作成する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#deepcopy_0028_0029">deepcopy()</a></td><td width="75%">辭書の完全なコピーを作成する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#string_0028_0029">string()</a></td><td width="75%">辭書の文字列表現</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#max_0028_0029">max()</a></td><td width="75%">辭書中の最大値</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#min_0028_0029">min()</a></td><td width="75%">辭書中の最小値</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#count_0028_0029">count()</a></td><td width="75%">ある値が出現する回數を返す</td></tr>
</table>

<span id="float_002dfunctions"></span><span id="index-float_002dfunctions"></span>
<span id="index-Vim-script-Fu-Dong-Xiao-Shu-Dian-Shu-noJi-Suan-"></span>
<span id="Fu-Dong-Xiao-Shu-Dian-Shu-noJi-Suan-_003a"></span><h4 class="unnumberedsubsubsec">浮動小數點數の計算:</h4>
<table>
<tr><td width="30%"><a href="eval_002etxt.html#float2nr_0028_0029">float2nr()</a></td><td width="70%">Float を Number に變換</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#abs_0028_0029">abs()</a></td><td width="70%">絕對値 (Numberも處理可能)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#round_0028_0029">round()</a></td><td width="70%">丸め</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#ceil_0028_0029">ceil()</a></td><td width="70%">切り上げ</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#floor_0028_0029">floor()</a></td><td width="70%">切り下げ</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#trunc_0028_0029">trunc()</a></td><td width="70%">小數點以下切り捨て</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#fmod_0028_0029">fmod()</a></td><td width="70%">除法の餘り</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#exp_0028_0029">exp()</a></td><td width="70%">指數</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#log_0028_0029">log()</a></td><td width="70%">自然對數 (eを底とする對數)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#log10_0028_0029">log10()</a></td><td width="70%">10 を底とする對數</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#pow_0028_0029">pow()</a></td><td width="70%">x の y 乘</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#sqrt_0028_0029">sqrt()</a></td><td width="70%">平方根</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#sin_0028_0029">sin()</a></td><td width="70%">正弦 (サイン)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#cos_0028_0029">cos()</a></td><td width="70%">餘弦 (コサイン)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#tan_0028_0029">tan()</a></td><td width="70%">正接 (タンジェント)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#asin_0028_0029">asin()</a></td><td width="70%">逆正弦 (アークサイン)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#acos_0028_0029">acos()</a></td><td width="70%">逆餘弦 (アークコサイン)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#atan_0028_0029">atan()</a></td><td width="70%">逆正接 (アークタンジェント)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#atan2_0028_0029">atan2()</a></td><td width="70%">逆正接 (アークタンジェント)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#sinh_0028_0029">sinh()</a></td><td width="70%">雙曲線正弦 (ハイパボリックサイン)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#cosh_0028_0029">cosh()</a></td><td width="70%">雙曲線餘弦 (ハイパボリックコサイン)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#tanh_0028_0029">tanh()</a></td><td width="70%">雙曲線正接 (ハイパボリックタンジェント)</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#isnan_0028_0029">isnan()</a></td><td width="70%">數値でないかどうかのチェック</td></tr>
</table>

<span id="bitwise_002dfunction"></span><span id="index-bitwise_002dfunction"></span>
<span id="index-Vim-script-sonoTa-noJi-Suan-"></span>
<span id="sonoTa-noJi-Suan-_003a"></span><h4 class="unnumberedsubsubsec">その他の計算:</h4>
<table>
<tr><td width="40%"><a href="eval_002etxt.html#and_0028_0029">and()</a></td><td width="60%">ビットごとの論理積</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#invert_0028_0029">invert()</a></td><td width="60%">ビットごとの否定</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#or_0028_0029">or()</a></td><td width="60%">ビットごとの論理和</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#xor_0028_0029">xor()</a></td><td width="60%">ビットごとの排他的論理和</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#sha256_0028_0029">sha256()</a></td><td width="60%">SHA-256 ハッシュ</td></tr>
</table>

<span id="var_002dfunctions"></span><span id="index-var_002dfunctions"></span>
<span id="index-Vim-script-Bian-Shu--1"></span>
<span id="Bian-Shu-_003a"></span><h4 class="unnumberedsubsubsec">變數:</h4>
<table>
<tr><td width="30%"><a href="eval_002etxt.html#type_0028_0029">type()</a></td><td width="70%">變數の型</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#islocked_0028_0029">islocked()</a></td><td width="70%">變數がロックされてゐるか判定する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#funcref_0028_0029">funcref()</a></td><td width="70%">函數參照へのFuncrefを取得する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#function_0028_0029">function()</a></td><td width="70%">函數名から Funcref を取得する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#getbufvar_0028_0029">getbufvar()</a></td><td width="70%">指定バッファの變數値を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#setbufvar_0028_0029">setbufvar()</a></td><td width="70%">指定バッファに變數を設定する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#getwinvar_0028_0029">getwinvar()</a></td><td width="70%">指定ウィンドウの變數値を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#gettabvar_0028_0029">gettabvar()</a></td><td width="70%">指定タブページから變數値を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#gettabwinvar_0028_0029">gettabwinvar()</a></td><td width="70%">指定ウィンドウ・タブページから變數値を取得する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#setwinvar_0028_0029">setwinvar()</a></td><td width="70%">指定ウィンドウに變數を設定する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#settabvar_0028_0029">settabvar()</a></td><td width="70%">指定タブページに變數を設定する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#settabwinvar_0028_0029">settabwinvar()</a></td><td width="70%">指定ウィンドウ・タブページに變數を設定する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#garbagecollect_0028_0029">garbagecollect()</a></td><td width="70%">開放可能なメモリを解放する</td></tr>
</table>

<span id="cursor_002dfunctions"></span><span id="mark_002dfunctions"></span><span id="index-cursor_002dfunctions"></span>
<span id="index-mark_002dfunctions"></span>
<span id="index-Vim-script-kasorutomakunoWei-Zhi-"></span>
<span id="kasorutomakunoWei-Zhi-_003a"></span><h4 class="unnumberedsubsubsec">カーソルとマークの位置:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#col_0028_0029">col()</a></td><td width="65%">カーソルやマークの列番號を取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#virtcol_0028_0029">virtcol()</a></td><td width="65%">カーソルやマークの畫面上の列番號を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#line_0028_0029">line()</a></td><td width="65%">カーソルやマークの行番號を取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#wincol_0028_0029">wincol()</a></td><td width="65%">カーソルのウィンドウでの列番號</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#winline_0028_0029">winline()</a></td><td width="65%">カーソルのウィンドウでの行番號</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#cursor_0028_0029">cursor()</a></td><td width="65%">カーソルを指定した位置に移動させる</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#screencol_0028_0029">screencol()</a></td><td width="65%">カーソルのスクリーン列を取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#screenrow_0028_0029">screenrow()</a></td><td width="65%">カーソルのスクリーン行を取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#screenpos_0028_0029">screenpos()</a></td><td width="65%">テキスト文字のスクリーン位置 (行と列)</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getcurpos_0028_0029">getcurpos()</a></td><td width="65%">カーソルの位置を取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getpos_0028_0029">getpos()</a></td><td width="65%">カーソルやマークなどの位置を取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#setpos_0028_0029">setpos()</a></td><td width="65%">カーソルやマークなどの位置を設定する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#byte2line_0028_0029">byte2line()</a></td><td width="65%">指定のバイト位置の行番號を取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#line2byte_0028_0029">line2byte()</a></td><td width="65%">指定の行のバイト位置を取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#diff_005ffiller_0028_0029">diff_filler()</a></td><td width="65%">ある行より上の詰め行の數を取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#screenattr_0028_0029">screenattr()</a></td><td width="65%">スクリーン列/行の屬性を取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#screenchar_0028_0029">screenchar()</a></td><td width="65%">スクリーン列/行の文字コードを取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#screenchars_0028_0029">screenchars()</a></td><td width="65%">スクリーン列/行の文字コードのリストを取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#screenstring_0028_0029">screenstring()</a></td><td width="65%">スクリーン列/行の文字列を取得する</td></tr>
</table>

<span id="text_002dfunctions"></span><span id="index-text_002dfunctions"></span>
<span id="index-Vim-script-karentobatuhuadeDong-Zuo-surumono"></span>
<span id="karentobatuhuadeDong-Zuo-surumono_003a"></span><h4 class="unnumberedsubsubsec">カレントバッファで動作するもの:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#getline_0028_0029">getline()</a></td><td width="65%">バッファから行を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#setline_0028_0029">setline()</a></td><td width="65%">バッファの行を置き換へる</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#append_0028_0029">append()</a></td><td width="65%">行または行のリストをバッファに追加する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#indent_0028_0029">indent()</a></td><td width="65%">行のインデントを得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#cindent_0028_0029">cindent()</a></td><td width="65%">C 言語におけるインデントを得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#lispindent_0028_0029">lispindent()</a></td><td width="65%">Lisp 言語におけるインデントを得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#nextnonblank_0028_0029">nextnonblank()</a></td><td width="65%">次の非空行を探す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#prevnonblank_0028_0029">prevnonblank()</a></td><td width="65%">前の非空行を探す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#search_0028_0029">search()</a></td><td width="65%">パターンにマッチする場所を探す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#searchpos_0028_0029">searchpos()</a></td><td width="65%">パターンにマッチする場所を探す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#searchpair_0028_0029">searchpair()</a></td><td width="65%">start/skip/end の對を探す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#searchpairpos_0028_0029">searchpairpos()</a></td><td width="65%">start/skip/end の對を探す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#searchdecl_0028_0029">searchdecl()</a></td><td width="65%">名前が宣言されてゐる場所を探す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getcharsearch_0028_0029">getcharsearch()</a></td><td width="65%">文字檢索情報を返す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#setcharsearch_0028_0029">setcharsearch()</a></td><td width="65%">文字檢索情報を設定する</td></tr>
</table>

<span id="Ta-nobatuhuadeDong-Zuo-surumono_003a"></span><h4 class="unnumberedsubsec">他のバッファで動作するもの:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#getbufline_0028_0029">getbufline()</a></td><td width="65%">バッファの行のリストを得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#setbufline_0028_0029">setbufline()</a></td><td width="65%">指定されたバッファ內で 1 行を置換する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#appendbufline_0028_0029">appendbufline()</a></td><td width="65%">指定されたバッファ內で行のリストを追加する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#deletebufline_0028_0029">deletebufline()</a></td><td width="65%">指定されたバッファから行を削除する</td></tr>
</table>

<span id="system_002dfunctions"></span><span id="file_002dfunctions"></span><span id="index-system_002dfunctions"></span>
<span id="index-file_002dfunctions"></span>
<span id="index-Vim-script-sisutemuGuan-Shu-tohuairuZao-Zuo-"></span>
<span id="sisutemuGuan-Shu-tohuairuZao-Zuo-_003a"></span><h4 class="unnumberedsubsubsec">システム函數とファイル繰作:</h4>
<table>
<tr><td width="25%"><a href="eval_002etxt.html#glob_0028_0029">glob()</a></td><td width="75%">ワイルドカードを展開する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#globpath_0028_0029">globpath()</a></td><td width="75%">複數のディレクトリを對象にワイルドカードを展開</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#glob2regpat_0028_0029">glob2regpat()</a></td><td width="75%">glob パターンを正規表現に變換する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#findfile_0028_0029">findfile()</a></td><td width="75%">複數のディレクトリからファイルを探す</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#finddir_0028_0029">finddir()</a></td><td width="75%">複數のディレクトリからディレクトリを探す</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#resolve_0028_0029">resolve()</a></td><td width="75%">ショートカットのリンク先を得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#fnamemodify_0028_0029">fnamemodify()</a></td><td width="75%">ファイル名を修飾する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#pathshorten_0028_0029">pathshorten()</a></td><td width="75%">パス中のディレクトリ名を短くする</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#simplify_0028_0029">simplify()</a></td><td width="75%">パスの意味を變へずに簡略化する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#executable_0028_0029">executable()</a></td><td width="75%">實行形式ファイルかどうかをチェックする</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#exepath_0028_0029">exepath()</a></td><td width="75%">實行ファイルのフルパスを得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#filereadable_0028_0029">filereadable()</a></td><td width="75%">ファイルが讀み込み可能かどうかをチェックする</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#filewritable_0028_0029">filewritable()</a></td><td width="75%">ファイルが書き込み可能かどうかをチェックする</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#getfperm_0028_0029">getfperm()</a></td><td width="75%">ファイルのパーミッションを得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#setfperm_0028_0029">setfperm()</a></td><td width="75%">ファイルのパーミッションを設定する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#getftype_0028_0029">getftype()</a></td><td width="75%">ファイルの種類を得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#isdirectory_0028_0029">isdirectory()</a></td><td width="75%">ディレクトリの存在をチェックする</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#getfsize_0028_0029">getfsize()</a></td><td width="75%">ファイルのサイズを得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#getcwd_0028_0029">getcwd()</a></td><td width="75%">カレントディレクトリを得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#haslocaldir_0028_0029">haslocaldir()</a></td><td width="75%">カレントウィンドウが |<a href="editing_002etxt.html#g_t_003alcd">:lcd</a>| もしくは |<a href="editing_002etxt.html#g_t_003atcd">:tcd</a>| を使用するかどうかをチェックする</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#tempname_0028_0029">tempname()</a></td><td width="75%">一時ファイルの名前を得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#mkdir_0028_0029">mkdir()</a></td><td width="75%">ディレクトリを作成する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#chdir_0028_0029">chdir()</a></td><td width="75%">現在の作業ディレクトリを變更する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#delete_0028_0029">delete()</a></td><td width="75%">ファイルを削除する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#rename_0028_0029">rename()</a></td><td width="75%">ファイルの名前を變更する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#system_0028_0029">system()</a></td><td width="75%">シェルコマンドを實行し、その結果を文字列で得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#systemlist_0028_0029">systemlist()</a></td><td width="75%">シェルコマンドを實行し、その結果をリストで得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#environ_0028_0029">environ()</a></td><td width="75%">すべての環境變數を得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#getenv_0028_0029">getenv()</a></td><td width="75%">環境變數を得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#setenv_0028_0029">setenv()</a></td><td width="75%">環境變數を設定する</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#hostname_0028_0029">hostname()</a></td><td width="75%">システムの名稱を得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#readfile_0028_0029">readfile()</a></td><td width="75%">ファイルを讀み込み、行のリストを得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#writefile_0028_0029">writefile()</a></td><td width="75%">行のリストをファイルに書き込む</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#readdir_0028_0029">readdir()</a></td><td width="75%">ディレクトリ內のファイル名のリストを得る</td></tr>
<tr><td width="25%"><a href="eval_002etxt.html#writefile_0028_0029">writefile()</a></td><td width="75%">行のリストまたは Blob をファイルに書き込む</td></tr>
</table>

<span id="date_002dfunctions"></span><span id="time_002dfunctions"></span><span id="index-date_002dfunctions"></span>
<span id="index-time_002dfunctions"></span>
<span id="index-Vim-script-Ri-Fu-toShi-Ke-"></span>
<span id="Ri-Fu-toShi-Ke-_003a"></span><h4 class="unnumberedsubsubsec">日附と時刻:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#getftime_0028_0029">getftime()</a></td><td width="65%">ファイルの最終更新日時を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#localtime_0028_0029">localtime()</a></td><td width="65%">現在時刻を秒單位で得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#strftime_0028_0029">strftime()</a></td><td width="65%">時刻を文字列に變換する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#reltime_0028_0029">reltime()</a></td><td width="65%">現在時刻または經過時閒を正確に取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#reltimestr_0028_0029">reltimestr()</a></td><td width="65%">reltime() の結果を文字列に變換する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#reltimefloat_0028_0029">reltimefloat()</a></td><td width="65%">reltime() の結果を浮動小數點に變換する</td></tr>
</table>

<span id="buffer_002dfunctions"></span><span id="window_002dfunctions"></span><span id="arg_002dfunctions"></span><span id="index-buffer_002dfunctions"></span>
<span id="index-window_002dfunctions"></span>
<span id="index-arg_002dfunctions"></span>
<span id="index-Vim-script-batuhua_002c-uindou_002c-Yin-Shu-risuto"></span>
<span id="batuhua_002c-uindou_002c-Yin-Shu-risuto_003a"></span><h4 class="unnumberedsubsubsec">バッファ、ウィンドウ、引數リスト:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#argc_0028_0029">argc()</a></td><td width="65%">引數リストの大きさ</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#argidx_0028_0029">argidx()</a></td><td width="65%">引數リスト中の現在の位置</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#arglistid_0028_0029">arglistid()</a></td><td width="65%">引數リストの ID を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#argv_0028_0029">argv()</a></td><td width="65%">引數リストの中身を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#bufadd_0028_0029">bufadd()</a></td><td width="65%">バッファリストにファイルを追加する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#bufexists_0028_0029">bufexists()</a></td><td width="65%">バッファの存在をチェックする</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#buflisted_0028_0029">buflisted()</a></td><td width="65%">バッファが存在し、リストされてゐるかどうか</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#bufload_0028_0029">bufload()</a></td><td width="65%">バッファがロードされるのを確實にする</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#bufloaded_0028_0029">bufloaded()</a></td><td width="65%">バッファが存在し、ロードされてゐるかどうか</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#bufname_0028_0029">bufname()</a></td><td width="65%">バッファの名前を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#bufnr_0028_0029">bufnr()</a></td><td width="65%">バッファの番號を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#tabpagebuflist_0028_0029">tabpagebuflist()</a></td><td width="65%">タブページ中のバッファのリストを返す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#tabpagenr_0028_0029">tabpagenr()</a></td><td width="65%">タブページの番號を取得する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#tabpagewinnr_0028_0029">tabpagewinnr()</a></td><td width="65%">タブページを對象に winnr() と同樣</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#winnr_0028_0029">winnr()</a></td><td width="65%">カレントウィンドウの番號を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#bufwinid_0028_0029">bufwinid()</a></td><td width="65%">バッファのウィンドウ ID を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#bufwinnr_0028_0029">bufwinnr()</a></td><td width="65%">バッファのウィンドウ番號を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#winbufnr_0028_0029">winbufnr()</a></td><td width="65%">ウィンドウのバッファ番號を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#listener_005fadd_0028_0029">listener_add()</a></td><td width="65%">變更を監視するためのコールバックを追加する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#listener_005fflush_0028_0029">listener_flush()</a></td><td width="65%">リスナーコールバックを呼び出す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#listener_005fremove_0028_0029">listener_remove()</a></td><td width="65%">リスナーコールバックを削除する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#win_005ffindbuf_0028_0029">win_findbuf()</a></td><td width="65%">バッファが含まれるウィンドウを探す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#win_005fgetid_0028_0029">win_getid()</a></td><td width="65%">ウィンドウのウィンドウIDを得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#win_005fgotoid_0028_0029">win_gotoid()</a></td><td width="65%">IDで指定されたウィンドウへ移動する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#win_005fid2tabwin_0028_0029">win_id2tabwin()</a></td><td width="65%">ID で指定されたタブとウィンドウの番號を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#win_005fid2win_0028_0029">win_id2win()</a></td><td width="65%">IDで指定されたウィンドウの番號を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getbufinfo_0028_0029">getbufinfo()</a></td><td width="65%">バッファの情報一覽を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#gettabinfo_0028_0029">gettabinfo()</a></td><td width="65%">タブページの情報一覽を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getwininfo_0028_0029">getwininfo()</a></td><td width="65%">ウィンドウの情報一覽を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getchangelist_0028_0029">getchangelist()</a></td><td width="65%">變更リストのエントリ一覽を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getjumplist_0028_0029">getjumplist()</a></td><td width="65%">ジャンプリストのエントリ一覽を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#swapinfo_0028_0029">swapinfo()</a></td><td width="65%">スワップファイルに關する情報</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#swapname_0028_0029">swapname()</a></td><td width="65%">バッファのスワップファイルパスを取得する</td></tr>
</table>

<span id="command_002dline_002dfunctions"></span><span id="index-command_002dline_002dfunctions"></span>
<span id="index-Vim-script-komandorain"></span>
<span id="komandorain_003a"></span><h4 class="unnumberedsubsubsec">コマンドライン:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#getcmdline_0028_0029">getcmdline()</a></td><td width="65%">現在のコマンドラインを取得</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getcmdpos_0028_0029">getcmdpos()</a></td><td width="65%">コマンドラインにおけるカーソル位置を取得</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#setcmdpos_0028_0029">setcmdpos()</a></td><td width="65%">コマンドラインにおけるカーソル位置を設定</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getcmdtype_0028_0029">getcmdtype()</a></td><td width="65%">現在のコマンドラインの種類を返す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getcmdwintype_0028_0029">getcmdwintype()</a></td><td width="65%">現在のコマンドラインウィンドウの種類を返す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getcompletion_0028_0029">getcompletion()</a></td><td width="65%">マッチするコマンド補完リストを返す</td></tr>
</table>

<span id="quickfix_002dfunctions"></span><span id="index-quickfix_002dfunctions"></span>
<span id="index-Vim-script-QuickFix-torokesiyonrisuto"></span>
<span id="QuickFix-torokesiyonrisuto_003a"></span><h4 class="unnumberedsubsubsec">QuickFix とロケーションリスト:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#getqflist_0028_0029">getqflist()</a></td><td width="65%">QuickFix エラーのリスト</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#setqflist_0028_0029">setqflist()</a></td><td width="65%">QuickFix を變更する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getloclist_0028_0029">getloclist()</a></td><td width="65%">ロケーションリストの項目のリスト</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#setloclist_0028_0029">setloclist()</a></td><td width="65%">ロケーションリストを變更する</td></tr>
</table>

<span id="completion_002dfunctions"></span><span id="index-completion_002dfunctions"></span>
<span id="index-Vim-script-Cha-Ru-modoBu-Wan-"></span>
<span id="Cha-Ru-modoBu-Wan-_003a"></span><h4 class="unnumberedsubsubsec">插入モード補完:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#complete_0028_0029">complete()</a></td><td width="65%">補完候補を設定する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#complete_005fadd_0028_0029">complete_add()</a></td><td width="65%">補完候補を追加する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#complete_005fcheck_0028_0029">complete_check()</a></td><td width="65%">補完處理を終へるべきかどうかをチェックする</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#complete_005finfo_0028_0029">complete_info()</a></td><td width="65%">現在の補完情報を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#pumvisible_0028_0029">pumvisible()</a></td><td width="65%">ポップアップメニューが表示されてゐるかチェック</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#pum_005fgetpos_0028_0029">pum_getpos()</a></td><td width="65%">表示されてゐるポップアップメニューの位置とサイズを得る</td></tr>
</table>

<span id="folding_002dfunctions"></span><span id="index-folding_002dfunctions"></span>
<span id="index-Vim-script-Zhe-riDie-mi"></span>
<span id="Zhe-riDie-mi_003a"></span><h4 class="unnumberedsubsubsec">折り疊み:</h4>
<table>
<tr><td width="30%"><a href="eval_002etxt.html#foldclosed_0028_0029">foldclosed()</a></td><td width="70%">行が折り疊まれてゐるかどうかをチェックする</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#foldclosedend_0028_0029">foldclosedend()</a></td><td width="70%">foldclosed() と同樣。折り疊み末尾の行番號を返す</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#foldlevel_0028_0029">foldlevel()</a></td><td width="70%">行の折り疊みレベルを得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#foldtext_0028_0029">foldtext()</a></td><td width="70%">閉ぢた折り疊みを代替表示するテキストを生成</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#foldtextresult_0028_0029">foldtextresult()</a></td><td width="70%">閉ぢた折り疊みを代替表示するテキストを得る</td></tr>
</table>

<span id="syntax_002dfunctions"></span><span id="highlighting_002dfunctions"></span><span id="index-syntax_002dfunctions"></span>
<span id="index-highlighting_002dfunctions"></span>
<span id="index-Vim-script-sintatukusuhairaito"></span>
<span id="sintatukusuhairaito_003a"></span><h4 class="unnumberedsubsubsec">シンタックスハイライト:</h4>
<table>
<tr><td width="30%"><a href="eval_002etxt.html#clearmatches_0028_0029">clearmatches()</a></td><td width="70%">|<a href="eval_002etxt.html#matchadd_0028_0029">matchadd()</a>| と |<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| コマンドで定義されたマッチをクリアする</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#getmatches_0028_0029">getmatches()</a></td><td width="70%">|<a href="eval_002etxt.html#matchadd_0028_0029">matchadd()</a>| と |<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| コマンドで定義されたすべてのマッチを得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#hlexists_0028_0029">hlexists()</a></td><td width="70%">ハイライトグループの存在をチェック</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#hlID_0028_0029">hlID()</a></td><td width="70%">ハイライトグループの ID を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#synID_0028_0029">synID()</a></td><td width="70%">指定位置のシンタックス ID を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#synIDattr_0028_0029">synIDattr()</a></td><td width="70%">シンタックス ID から指定の屬性を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#synIDtrans_0028_0029">synIDtrans()</a></td><td width="70%">變換したシンタックス ID を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#synstack_0028_0029">synstack()</a></td><td width="70%">指定位置のシンタックス ID のリストを得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#synconcealed_0028_0029">synconcealed()</a></td><td width="70%">conceal の情報を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#diff_005fhlID_0028_0029">diff_hlID()</a></td><td width="70%">差分モードの指定位置のシンタックス ID を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#matchadd_0028_0029">matchadd()</a></td><td width="70%">强調表示するパターンを定義する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#matchaddpos_0028_0029">matchaddpos()</a></td><td width="70%">强調表示する位置のリストを定義する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#matcharg_0028_0029">matcharg()</a></td><td width="70%">|<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| の引數の情報を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#matchdelete_0028_0029">matchdelete()</a></td><td width="70%">|<a href="eval_002etxt.html#matchadd_0028_0029">matchadd()</a>| と |<a href="pattern_002etxt.html#g_t_003amatch">:match</a>| コマンドで定義されたマッチを削除する</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#setmatches_0028_0029">setmatches()</a></td><td width="70%">|<a href="eval_002etxt.html#getmatches_0028_0029">getmatches()</a>| で得たマッチを使つて復元する</td></tr>
</table>

<span id="spell_002dfunctions"></span><span id="index-spell_002dfunctions"></span>
<span id="index-Vim-script-superingu"></span>
<span id="superingu_003a"></span><h4 class="unnumberedsubsubsec">スペリング:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#spellbadword_0028_0029">spellbadword()</a></td><td width="65%">カーソル位置以降のスペルミスを探す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#spellsuggest_0028_0029">spellsuggest()</a></td><td width="65%">スペル訂正の候補を返す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#soundfold_0028_0029">soundfold()</a></td><td width="65%">單語の同音等値(sound-a-like equivalent)を返す</td></tr>
</table>

<span id="history_002dfunctions"></span><span id="index-history_002dfunctions"></span>
<span id="index-Vim-script-Lu-Li-"></span>
<span id="Lu-Li-_003a"></span><h4 class="unnumberedsubsubsec">履歷:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#histadd_0028_0029">histadd()</a></td><td width="65%">履歷に項目を追加</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#histdel_0028_0029">histdel()</a></td><td width="65%">履歷から項目を削除</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#histget_0028_0029">histget()</a></td><td width="65%">履歷の項目を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#histnr_0028_0029">histnr()</a></td><td width="65%">履歷リストの最大インデックスを得る</td></tr>
</table>

<span id="interactive_002dfunctions"></span><span id="index-interactive_002dfunctions"></span>
<span id="index-Vim-script-Dui-Hua-intahueisu"></span>
<span id="Dui-Hua-intahueisu_003a"></span><h4 class="unnumberedsubsubsec">對話インターフェイス:</h4>
<table>
<tr><td width="30%"><a href="eval_002etxt.html#browse_0028_0029">browse()</a></td><td width="70%">ファイル選擇ダイアログを開く</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#browsedir_0028_0029">browsedir()</a></td><td width="70%">ディレクトリ選擇ダイアログを開く</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#confirm_0028_0029">confirm()</a></td><td width="70%">ユーザーに選擇をさせる</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#getchar_0028_0029">getchar()</a></td><td width="70%">ユーザーが入力した文字を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#getcharmod_0028_0029">getcharmod()</a></td><td width="70%">最後に入力した文字の修飾子 (modifier) を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#getmousepos_0028_0029">getmousepos()</a></td><td width="70%">最後に取得したマウスの位置を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#feedkeys_0028_0029">feedkeys()</a></td><td width="70%">先行入力キューに文字を入れる</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#input_0028_0029">input()</a></td><td width="70%">ユーザーが入力した行を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#inputlist_0028_0029">inputlist()</a></td><td width="70%">ユーザーにリストから項目を選擇させる</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#inputsecret_0028_0029">inputsecret()</a></td><td width="70%">ユーザーが入力した行を得る。ただし表示はしない</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#inputdialog_0028_0029">inputdialog()</a></td><td width="70%">ダイアログを使つてユーザーが入力した行を得る</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#inputsave_0028_0029">inputsave()</a></td><td width="70%">先行入力キューを保存して空にする</td></tr>
<tr><td width="30%"><a href="eval_002etxt.html#inputrestore_0028_0029">inputrestore()</a></td><td width="70%">inputsave() で保存した狀態に戾す</td></tr>
</table>

<span id="gui_002dfunctions"></span><span id="index-gui_002dfunctions"></span>
<span id="index-Vim-script-GUI"></span>
<span id="GUI_003a"></span><h4 class="unnumberedsubsubsec">GUI:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#getfontname_0028_0029">getfontname()</a></td><td width="65%">現在使はれてゐるフォントの名前を取得</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getwinpos_0028_0029">getwinpos()</a></td><td width="65%">Vim ウィンドウの座標</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getwinposx_0028_0029">getwinposx()</a></td><td width="65%">Vim ウィンドウの X 座標</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getwinposy_0028_0029">getwinposy()</a></td><td width="65%">Vim ウィンドウの Y 座標</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#balloon_005fshow_0028_0029">balloon_show()</a></td><td width="65%">バルーンの內容を設定する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#balloon_005fsplit_0028_0029">balloon_split()</a></td><td width="65%">バルーン用にメッセージを分割する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#balloon_005fgettext_0028_0029">balloon_gettext()</a></td><td width="65%">バルーンのテキストを得る</td></tr>
</table>

<span id="server_002dfunctions"></span><span id="index-server_002dfunctions"></span>
<span id="index-Vim-script-Vim-saba"></span>
<span id="Vim-saba_003a"></span><h4 class="unnumberedsubsubsec">Vim サーバー:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#serverlist_0028_0029">serverlist()</a></td><td width="65%">サーバー名のリストを返す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#remote_005fstartserver_0028_0029">remote_startserver()</a></td><td width="65%">サーバーをスタートする</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#remote_005fsend_0028_0029">remote_send()</a></td><td width="65%">Vim サーバーにコマンド文字を送る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#remote_005fexpr_0028_0029">remote_expr()</a></td><td width="65%">Vim サーバーで式を評價する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#server2client_0028_0029">server2client()</a></td><td width="65%">Vim サーバーのクライアントに應答を返す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#remote_005fpeek_0028_0029">remote_peek()</a></td><td width="65%">Vim サーバーから返信があつたかどうかをチェック</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#remote_005fread_0028_0029">remote_read()</a></td><td width="65%">Vim サーバーからの返信を讀む</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#foreground_0028_0029">foreground()</a></td><td width="65%">Vim のウィンドウを前面に持つてくる</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#remote_005fforeground_0028_0029">remote_foreground()</a></td><td width="65%">Vim サーバーのウィンドウを前面に持つてくる</td></tr>
</table>

<span id="window_002dsize_002dfunctions"></span><span id="index-window_002dsize_002dfunctions"></span>
<span id="index-Vim-script-uindousaizutoWei-Zhi-"></span>
<span id="uindousaizutoWei-Zhi-_003a"></span><h4 class="unnumberedsubsubsec">ウィンドウサイズと位置:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#winheight_0028_0029">winheight()</a></td><td width="65%">ウィンドウの高さを取得</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#winwidth_0028_0029">winwidth()</a></td><td width="65%">ウィンドウの幅を取得</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#win_005fscreenpos_0028_0029">win_screenpos()</a></td><td width="65%">ウィンドウのスクリーン座標を取得</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#winlayout_0028_0029">winlayout()</a></td><td width="65%">タブページ內のウィンドウレイアウトを取得</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#winrestcmd_0028_0029">winrestcmd()</a></td><td width="65%">ウィンドウサイズを復元するコマンドを返す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#winsaveview_0028_0029">winsaveview()</a></td><td width="65%">カレントウィンドウのビューを取得</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#winrestview_0028_0029">winrestview()</a></td><td width="65%">カレントウィンドウのビューを復元</td></tr>
</table>

<span id="mapping_002dfunctions"></span><span id="index-mapping_002dfunctions"></span>
<span id="index-Vim-script-matupingu"></span>
<span id="matupingu_003a"></span><h4 class="unnumberedsubsubsec">マッピング:</h4>
<table>
<tr><td width="40%"><a href="eval_002etxt.html#hasmapto_0028_0029">hasmapto()</a></td><td width="60%">マップの存在をチェック</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#mapcheck_0028_0029">mapcheck()</a></td><td width="60%">マッチするマップの存在をチェック</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#maparg_0028_0029">maparg()</a></td><td width="60%">マップの rhs (展開結果)を得る</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#wildmenumode_0028_0029">wildmenumode()</a></td><td width="60%">wildmode が有效かどうかをチェック</td></tr>
</table>

<span id="test_002dfunctions"></span><span id="index-test_002dfunctions"></span>
<span id="index-Vim-script-tesuto"></span>
<span id="tesutoYong-_003a"></span><h4 class="unnumberedsubsubsec">テスト用:</h4>
<table>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005fequal_0028_0029">assert_equal()</a></td><td width="60%">2 つの式が等しい事をテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005fequalfile_0028_0029">assert_equalfile()</a></td><td width="60%">2 つのファイル內容が等しいことをテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005fnotequal_0028_0029">assert_notequal()</a></td><td width="60%">2 つの式が等しくない事をテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005finrange_0028_0029">assert_inrange()</a></td><td width="60%">式が範圍內にある事をテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005fmatch_0028_0029">assert_match()</a></td><td width="60%">値がパターンにマッチする事をテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005fnotmatch_0028_0029">assert_notmatch()</a></td><td width="60%">値がパターンにマッチしない事をテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005ffalse_0028_0029">assert_false()</a></td><td width="60%">式が false かどうかテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005ftrue_0028_0029">assert_true()</a></td><td width="60%">式が true かどうかテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005fexception_0028_0029">assert_exception()</a></td><td width="60%">コマンドが例外を投げる事をテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005fbeeps_0028_0029">assert_beeps()</a></td><td width="60%">コマンドがビープ音を慣らすことをテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005ffails_0028_0029">assert_fails()</a></td><td width="60%">コマンドが失敗する事をテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#assert_005freport_0028_0029">assert_report()</a></td><td width="60%">テストの失敗をレポートする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005falloc_005ffail_0028_0029">test_alloc_fail()</a></td><td width="60%">メモリの確保を失敗させる</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fautochdir_0028_0029">test_autochdir()</a></td><td width="60%">起動中に &rsquo;autochdir&rsquo; を有效にする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005foverride_0028_0029">test_override()</a></td><td width="60%">Vimの 內部處理を置き換へてテストする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fgarbagecollect_005fnow_0028_0029">test_garbagecollect_now()</a></td><td width="60%">直ちにメモリを解放する</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fgetvalue_0028_0029">test_getvalue()</a></td><td width="60%">內部變數の値を取得する</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fignore_005ferror_0028_0029">test_ignore_error()</a></td><td width="60%">特定のエラーメッセージを無視する</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fnull_005fblob_0028_0029">test_null_blob()</a></td><td width="60%">null の Blob を返す</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fnull_005fchannel_0028_0029">test_null_channel()</a></td><td width="60%">null のチャネルを返す</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fnull_005fdict_0028_0029">test_null_dict()</a></td><td width="60%">null の辭書を返す</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fnull_005fjob_0028_0029">test_null_job()</a></td><td width="60%">null の Job を返す</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fnull_005flist_0028_0029">test_null_list()</a></td><td width="60%">null のリストを返す</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fnull_005fpartial_0028_0029">test_null_partial()</a></td><td width="60%">null の部分適用を返す</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fnull_005fstring_0028_0029">test_null_string()</a></td><td width="60%">null の文字列を返す</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fsettime_0028_0029">test_settime()</a></td><td width="60%">Vim が內部的に用ゐる時閒を設定する</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fsetmouse_0028_0029">test_setmouse()</a></td><td width="60%">マウスの位置を設定する</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005ffeedinput_0028_0029">test_feedinput()</a></td><td width="60%">入力バッファにキーシーケンスを追加する</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005foption_005fnot_005fset_0028_0029">test_option_not_set()</a></td><td width="60%">オプションに設定されてゐるフラグをリセットする</td></tr>
<tr><td width="40%"><a href="testing_002etxt.html#test_005fscrollbar_0028_0029">test_scrollbar()</a></td><td width="60%">GUI でスクロールバーの移動をシミュレートする</td></tr>
</table>

<span id="channel_002dfunctions"></span><span id="index-channel_002dfunctions"></span>
<span id="index-Vim-script-purosesuJian-Tong-Xin-"></span>
<span id="purosesuJian-Tong-Xin-_003a"></span><h4 class="unnumberedsubsubsec">プロセス閒通信:</h4>
<table>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fcanread_0028_0029">ch_canread()</a></td><td width="65%">何か讀むものがあるかチェックする</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fopen_0028_0029">ch_open()</a></td><td width="65%">チャネルを開く</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fclose_0028_0029">ch_close()</a></td><td width="65%">チャネルを閉ぢる</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fclose_005fin_0028_0029">ch_close_in()</a></td><td width="65%">チャネルの入力パートを閉ぢる</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fread_0028_0029">ch_read()</a></td><td width="65%">チャネルからメッセージを讀み取る</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005freadblob_0028_0029">ch_readblob()</a></td><td width="65%">チャネルから Blob を讀み取る</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005freadraw_0028_0029">ch_readraw()</a></td><td width="65%">チャネルから raw メッセージを讀み取る</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fsendexpr_0028_0029">ch_sendexpr()</a></td><td width="65%">チャネルに JSON メッセージを送る</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fsendraw_0028_0029">ch_sendraw()</a></td><td width="65%">チャネルに raw メッセージを送る</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fevalexpr_0028_0029">ch_evalexpr()</a></td><td width="65%">チャネル經由で式を評價する</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fevalraw_0028_0029">ch_evalraw()</a></td><td width="65%">チャネル經由で raw 文字列を評價する</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fstatus_0028_0029">ch_status()</a></td><td width="65%">チャネルの狀態を取得する</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fgetbufnr_0028_0029">ch_getbufnr()</a></td><td width="65%">チャネルのバッファ番號を取得する</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fgetjob_0028_0029">ch_getjob()</a></td><td width="65%">チャネルが割り當てられてゐる Job を取得する</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005finfo_0028_0029">ch_info()</a></td><td width="65%">チャネルの情報を取得する</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005flog_0028_0029">ch_log()</a></td><td width="65%">チャネルのログファイルにメッセージを出力する</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005flogfile_0028_0029">ch_logfile()</a></td><td width="65%">チャネルのログファイルを設定する</td></tr>
<tr><td width="35%"><a href="channel_002etxt.html#ch_005fsetoptions_0028_0029">ch_setoptions()</a></td><td width="65%">チャネルのオプションを設定する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#json_005fencode_0028_0029">json_encode()</a></td><td width="65%">式を JSON の文字列にエンコードする</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#json_005fdecode_0028_0029">json_decode()</a></td><td width="65%">JSON の文字列を Vim の型にデコードする</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#js_005fencode_0028_0029">js_encode()</a></td><td width="65%">式を JSON の文字列にエンコードする</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#js_005fdecode_0028_0029">js_decode()</a></td><td width="65%">JSON の文字列を Vim の型にデコードする</td></tr>
</table>

<span id="job_002dfunctions"></span><span id="index-job_002dfunctions"></span>
<span id="index-Vim-script-ziyobu"></span>
<span id="ziyobu_003a"></span><h4 class="unnumberedsubsubsec">ジョブ:</h4>
<table>
<tr><td width="40%"><a href="channel_002etxt.html#job_005fstart_0028_0029">job_start()</a></td><td width="60%">Job を開始する</td></tr>
<tr><td width="40%"><a href="channel_002etxt.html#job_005fstop_0028_0029">job_stop()</a></td><td width="60%">Job を停止する</td></tr>
<tr><td width="40%"><a href="channel_002etxt.html#job_005fstatus_0028_0029">job_status()</a></td><td width="60%">Job のステータスを取得する</td></tr>
<tr><td width="40%"><a href="channel_002etxt.html#job_005fgetchannel_0028_0029">job_getchannel()</a></td><td width="60%">Job が使用する channel を取得する</td></tr>
<tr><td width="40%"><a href="channel_002etxt.html#job_005finfo_0028_0029">job_info()</a></td><td width="60%">Job の情報を取得する</td></tr>
<tr><td width="40%"><a href="channel_002etxt.html#job_005fsetoptions_0028_0029">job_setoptions()</a></td><td width="60%">Job のオプションを設定する</td></tr>
</table>

<span id="sign_002dfunctions"></span><span id="index-sign_002dfunctions"></span>
<span id="index-Vim-script-Mu-Yin-"></span>
<span id="Mu-Yin-_003a"></span><h4 class="unnumberedsubsubsec">目印:</h4>
<table>
<tr><td width="40%"><a href="sign_002etxt.html#sign_005fdefine_0028_0029">sign_define()</a></td><td width="60%">目印を定義または更新する</td></tr>
<tr><td width="40%"><a href="sign_002etxt.html#sign_005fgetdefined_0028_0029">sign_getdefined()</a></td><td width="60%">定義されてゐる目印のリストを取得する</td></tr>
<tr><td width="40%"><a href="sign_002etxt.html#sign_005fgetplaced_0028_0029">sign_getplaced()</a></td><td width="60%">配置されてゐる目印のリストを取得する</td></tr>
<tr><td width="40%"><a href="sign_002etxt.html#sign_005fjump_0028_0029">sign_jump()</a></td><td width="60%">目印へ移動する</td></tr>
<tr><td width="40%"><a href="sign_002etxt.html#sign_005fplace_0028_0029">sign_place()</a></td><td width="60%">目印を配置する</td></tr>
<tr><td width="40%"><a href="sign_002etxt.html#sign_005fplacelist_0028_0029">sign_placelist()</a></td><td width="60%">目印のリストを配置する</td></tr>
<tr><td width="40%"><a href="sign_002etxt.html#sign_005fundefine_0028_0029">sign_undefine()</a></td><td width="60%">定義された目印を削除する</td></tr>
<tr><td width="40%"><a href="sign_002etxt.html#sign_005funplace_0028_0029">sign_unplace()</a></td><td width="60%">設置された目印を解除する</td></tr>
<tr><td width="40%"><a href="sign_002etxt.html#sign_005funplacelist_0028_0029">sign_unplacelist()</a></td><td width="60%">目印のリストを解除する</td></tr>
</table>

<span id="terminal_002dfunctions"></span><span id="index-terminal_002dfunctions"></span>
<span id="index-Vim-script-Terminal-window"></span>
<span id="Terminal-window_003a"></span><h4 class="unnumberedsubsubsec">Terminal window:</h4>
<table>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fstart_0028_0029">term_start()</a></td><td width="60%">ターミナルウィンドウを開いてジョブを開始する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005flist_0028_0029">term_list()</a></td><td width="60%">ターミナルバッファのリストを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fsendkeys_0028_0029">term_sendkeys()</a></td><td width="60%">ターミナルにキーストロークを送る</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fwait_0028_0029">term_wait()</a></td><td width="60%">スクリーンがアップデートされるのを待つ</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetjob_0028_0029">term_getjob()</a></td><td width="60%">ターミナルに關聯するジョブを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fscrape_0028_0029">term_scrape()</a></td><td width="60%">ターミナルスクリーンの列を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetline_0028_0029">term_getline()</a></td><td width="60%">ターミナルからテキストの行を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetattr_0028_0029">term_getattr()</a></td><td width="60%">{what} の屬性値を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetcursor_0028_0029">term_getcursor()</a></td><td width="60%">ターミナルのカーソル位置を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetscrolled_0028_0029">term_getscrolled()</a></td><td width="60%">ターミナルのスクロール數を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetaltscreen_0028_0029">term_getaltscreen()</a></td><td width="60%">代替のスクリーンフラグを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetsize_0028_0029">term_getsize()</a></td><td width="60%">ターミナルのサイズを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetstatus_0028_0029">term_getstatus()</a></td><td width="60%">ターミナルのステータスを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgettitle_0028_0029">term_gettitle()</a></td><td width="60%">ターミナルのタイトルを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgettty_0028_0029">term_gettty()</a></td><td width="60%">ターミナルの tty 名を取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fsetansicolors_0028_0029">term_setansicolors()</a></td><td width="60%">GUI で使用される 16 色の ANSI カラーパレットを設定する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fgetansicolors_0028_0029">term_getansicolors()</a></td><td width="60%">GUI で使用するた 16 色の ANSI カラーパレットを取得する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fdumpdiff_0028_0029">term_dumpdiff()</a></td><td width="60%">2 つのスクリーンダンプ閒の差異を表示する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fdumpload_0028_0029">term_dumpload()</a></td><td width="60%">ウィンドウの端末スクリーンダンプを讀み込む</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fdumpwrite_0028_0029">term_dumpwrite()</a></td><td width="60%">端末スクリーンの內容をファイルにダンプする</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fsetkill_0028_0029">term_setkill()</a></td><td width="60%">端末のジョブに停止シグナルを設定する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fsetrestore_0028_0029">term_setrestore()</a></td><td width="60%">端末の復元コマンドを設定する</td></tr>
<tr><td width="40%"><a href="terminal_002etxt.html#term_005fsetsize_0028_0029">term_setsize()</a></td><td width="60%">端末のサイズを設定する</td></tr>
</table>

<span id="potupuatupuuindou_003a"></span><h4 class="unnumberedsubsec">ポップアップウィンドウ:</h4>
<span id="popup_002dwindow_002dfunctions"></span><span id="index-popup_002dwindow_002dfunctions"></span>
<table>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fcreate_0028_0029">popup_create()</a></td><td width="60%">畫面中央にポップアップを作成する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fatcursor_0028_0029">popup_atcursor()</a></td><td width="60%">カーソルの眞上にポップアップを作成し、カーソルを移動するとポップアップを閉ぢる</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fbeval_0028_0029">popup_beval()</a></td><td width="60%">v:beval_ の値によつて指示された位置で、マウスが移動したときに閉ぢる</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fnotification_0028_0029">popup_notification()</a></td><td width="60%">3 秒閒通知を表示する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fdialog_0028_0029">popup_dialog()</a></td><td width="60%">パディングとボーダでポップアップを作成する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fmenu_0028_0029">popup_menu()</a></td><td width="60%">リストから項目を選擇するためのプロンプト</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fhide_0028_0029">popup_hide()</a></td><td width="60%">一時的にポップアップを隱す</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fshow_0028_0029">popup_show()</a></td><td width="60%">以前隱されたポップアップを表示する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fmove_0028_0029">popup_move()</a></td><td width="60%">ポップアップの位置とサイズを變更する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fsetoptions_0028_0029">popup_setoptions()</a></td><td width="60%">ポップアップのオプションを上書きする</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fsettext_0028_0029">popup_settext()</a></td><td width="60%">ポップアップバッファの內容を置き換へる</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fclose_0028_0029">popup_close()</a></td><td width="60%">ポップアップを閉ぢる</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fclear_0028_0029">popup_clear()</a></td><td width="60%">すべてのポップアップを閉ぢる</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005ffilter_005fmenu_0028_0029">popup_filter_menu()</a></td><td width="60%">項目のリストから選擇する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005ffilter_005fyesno_0028_0029">popup_filter_yesno()</a></td><td width="60%">&rsquo;y&rsquo; か &rsquo;n&rsquo; が押されるまでブロックする</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fgetoptions_0028_0029">popup_getoptions()</a></td><td width="60%">ポップアップの現在のオプションを取得する</td></tr>
<tr><td width="40%"><a href="popup_002etxt.html#popup_005fgetpos_0028_0029">popup_getpos()</a></td><td width="60%">ポップアップの實際の位置とサイズを取得する</td></tr>
</table>

<span id="timer_002dfunctions"></span><span id="index-timer_002dfunctions"></span>
<span id="index-Vim-script-taima"></span>
<span id="taima_003a"></span><h4 class="unnumberedsubsubsec">タイマー:</h4>
<table>
<tr><td width="40%"><a href="eval_002etxt.html#timer_005fstart_0028_0029">timer_start()</a></td><td width="60%">タイマーを作る</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#timer_005fpause_0028_0029">timer_pause()</a></td><td width="60%">タイマーを一時停止もしくは再開する</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#timer_005fstop_0028_0029">timer_stop()</a></td><td width="60%">タイマーを止める</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#timer_005fstopall_0028_0029">timer_stopall()</a></td><td width="60%">全てのタイマーを止める</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#timer_005finfo_0028_0029">timer_info()</a></td><td width="60%">タイマーの情報を得る</td></tr>
</table>

<span id="tag_002dfunctions"></span><span id="index-tag_002dfunctions"></span>
<span id="tagu_003a"></span><h4 class="unnumberedsubsubsec">タグ:</h4>
<table>
<tr><td width="40%"><a href="eval_002etxt.html#taglist_0028_0029">taglist()</a></td><td width="60%">マッチしてゐるタグのリストを取得する</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#tagfiles_0028_0029">tagfiles()</a></td><td width="60%">タグファイルのリストを取得する</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#gettagstack_0028_0029">gettagstack()</a></td><td width="60%">ウィンドウのタグスタックを取得する</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#settagstack_0028_0029">settagstack()</a></td><td width="60%">ウィンドウのタグスタックを變更する</td></tr>
</table>

<span id="promptbuffer_002dfunctions"></span><span id="index-promptbuffer_002dfunctions"></span>
<span id="puronputobatuhua_003a"></span><h4 class="unnumberedsubsubsec">プロンプトバッファ:</h4>
<table>
<tr><td width="40%"><a href="eval_002etxt.html#prompt_005fsetcallback_0028_0029">prompt_setcallback()</a></td><td width="60%">バッファにプロンプトコールバックを設定する</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#prompt_005fsetinterrupt_0028_0029">prompt_setinterrupt()</a></td><td width="60%">バッファに割り込みコールバックを設定する</td></tr>
<tr><td width="40%"><a href="eval_002etxt.html#prompt_005fsetprompt_0028_0029">prompt_setprompt()</a></td><td width="60%">バッファにプロンプトテキストを設定する</td></tr>
</table>

<span id="various_002dfunctions"></span><span id="index-various_002dfunctions"></span>
<span id="index-Vim-script-sonoTa-"></span>
<span id="sonoTa-_003a"></span><h4 class="unnumberedsubsubsec">その他:</h4>
<table>
<tr><td width="35%"><a href="eval_002etxt.html#mode_0028_0029">mode()</a></td><td width="65%">現在の編輯モードを得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#visualmode_0028_0029">visualmode()</a></td><td width="65%">最後に使はれたビジュアルモードの種類</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#exists_0028_0029">exists()</a></td><td width="65%">變數、函數の存在をチェック</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#has_0028_0029">has()</a></td><td width="65%">機能がサポートされてゐるかをチェック</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#changenr_0028_0029">changenr()</a></td><td width="65%">最近の變更番號を返す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#cscope_005fconnection_0028_0029">cscope_connection()</a></td><td width="65%">cscope 接續をチェック</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#did_005ffiletype_0028_0029">did_filetype()</a></td><td width="65%">FileType 自動コマンドが使用されたかどうか</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#eventhandler_0028_0029">eventhandler()</a></td><td width="65%">イベントハンドラによつて起動されたかどうか</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getpid_0028_0029">getpid()</a></td><td width="65%">Vim のプロセスIDを得る</td></tr>
<tr><td width="35%"></td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#libcall_0028_0029">libcall()</a></td><td width="65%">外部ライブラリの函數を呼ぶ</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#libcallnr_0028_0029">libcallnr()</a></td><td width="65%">同上、數値を返す</td></tr>
<tr><td width="35%"></td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#undofile_0028_0029">undofile()</a></td><td width="65%">アンドゥファイルの名前を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#undotree_0028_0029">undotree()</a></td><td width="65%">アンドゥツリーの狀態を返す</td></tr>
<tr><td width="35%"></td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getreg_0028_0029">getreg()</a></td><td width="65%">レジスタの値を得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#getregtype_0028_0029">getregtype()</a></td><td width="65%">レジスタのタイプを得る</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#setreg_0028_0029">setreg()</a></td><td width="65%">レジスタの値を設定する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#reg_005fexecuting_0028_0029">reg_executing()</a></td><td width="65%">實行中のレジスタ名を返す</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#reg_005frecording_0028_0029">reg_recording()</a></td><td width="65%">記錄中のレジスタ名を返す</td></tr>
<tr><td width="35%"></td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#shiftwidth_0028_0029">shiftwidth()</a></td><td width="65%">&rsquo;<samp>shiftwidth</samp>&rsquo; の實際の値</td></tr>
<tr><td width="35%"></td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#wordcount_0028_0029">wordcount()</a></td><td width="65%">バッファ內のバイト數/單語數/文字數などを得る</td></tr>
<tr><td width="35%"></td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#luaeval_0028_0029">luaeval()</a></td><td width="65%">|<a href="if_005flua_002etxt.html#Lua">Lua</a>| の式を評價する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#mzeval_0028_0029">mzeval()</a></td><td width="65%">|<a href="if_005fmzsch_002etxt.html#MzScheme">MzScheme</a>| の式を評價する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#perleval_0028_0029">perleval()</a></td><td width="65%">|<a href="if_005fperl_002etxt.html#Perl">Perl</a>| の式を評價する (|<a href="various_002etxt.html#g_t_002bperl">+perl</a>|)</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#py3eval_0028_0029">py3eval()</a></td><td width="65%">|<a href="if_005fpyth_002etxt.html#Python">Python</a>| の式を評價する (|<a href="various_002etxt.html#g_t_002bpython3">+python3</a>|)</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#pyeval_0028_0029">pyeval()</a></td><td width="65%">|<a href="if_005fpyth_002etxt.html#Python">Python</a>| の式を評價する (|<a href="various_002etxt.html#g_t_002bpython">+python</a>|)</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#pyxeval_0028_0029">pyxeval()</a></td><td width="65%">|<a href="if_005fpyth_002etxt.html#python_005fx">python_x</a>| の式を評價する</td></tr>
<tr><td width="35%"><a href="eval_002etxt.html#debugbreak_0028_0029">debugbreak()</a></td><td width="65%">デバッグされてゐるプログラムを中斷する</td></tr>
</table>

<span id="g_t41_002e7"></span><span id="index-Guan-Shu-woDing-Yi-suru"></span>
<span id="Guan-Shu-woDing-Yi-suru"></span><h3 class="section">函數を定義する</h3>

<p>自分で函數を定義することができます。基本的な函數定義は次のとほり:
</p>
<pre class="verbatim">:function {name}({var1}, {var2}, ...)
:  {body}
:endfunction
</pre><blockquote>
<p><strong>Note:</strong> <br>
函數名は大文字で開始する必要があります。
</p></blockquote>

<p>小さな函數を定義してみませう。2 つの數値のうち小さい方を返す函數を作ります。函數は次のやうな行で始まります:
</p>
<pre class="verbatim">:function Min(num1, num2)
</pre>
<p>函數の名前が &quot;Min&quot; であり、2 つの引數 (&quot;num1&quot; と &quot;num2&quot;) を取る、といふことを表してゐます。
</p>
<p>最初にしなければならないのは、どちらの數値が小さいかをチェックすることです:
</p><pre class="verbatim">:  if a:num1 &lt; a:num2
</pre>
<p>&quot;a:&quot; は特殊なプリフィックスで、この變數が函數の引數であることを示します。小さい方の値を變數 &quot;smaller&quot; に代入しませう:
</p>
<pre class="verbatim">:  if a:num1 &lt; a:num2
:    let smaller = a:num1
:  else
:    let smaller = a:num2
:  endif
</pre>
<p>變數 &quot;smaller&quot; はローカル變數です。函數の中で使はれた變數はローカル變數になります。ただし、&quot;g:&quot;、&quot;a:&quot;、&quot;s:&quot; などのプリフィックスを付けた場合は別です。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
函數の內からグローバル變數にアクセスするには &quot;g:&quot; を付ける必要があります。つまり、函數內では &quot;g:today&quot; はグローバル變數 &quot;today&quot; を示し、&quot;today&quot; ならそれとは別の變數、すなはちローカル變數になります。
</p></blockquote>

<p>&quot;:return&quot; ステートメントを使つて、小さい方の値を呼び出し元に返しませう。そして、函數を閉ぢます:
</p>
<pre class="verbatim">:  return smaller
:endfunction
</pre>
<p>函數定義の全體は次のやうになります:
</p>
<pre class="verbatim">:function Min(num1, num2)
:  if a:num1 &lt; a:num2
:    let smaller = a:num1
:  else
:    let smaller = a:num2
:  endif
:  return smaller
:endfunction
</pre>
<p>函數を短く書きたい場合は、次のやうにもできます:
</p>
<pre class="verbatim">:function Min(num1, num2)
:  if a:num1 &lt; a:num2
:    return a:num1
:  endif
:  return a:num2
:endfunction
</pre>
<p>ユーザー定義函數は組み込み函數とまつたく同じ方法で呼び出すことができます。違ふのは名前だけです。Min 函數は次のやうに使用できます:
</p>
<pre class="verbatim">:echo Min(5, 8)
</pre>
<p>函數が實行され、函數の中身が Vim によつて解釋されます。未定義の變數や函數を使ふなどの閒違ひがあつたときは、エラーメッセージが表示されます。函數定義の時點ではそれらのエラーは檢出されません。
</p>
<p>函數が &quot;:endfunction&quot; まで實行されたとき、あるいは引數無しで &quot;:return&quot; を使つたときは 0 が返ります。
</p>
<p>既存の函數を再定義したい場合は &quot;:function&quot; コマンドに &quot;!&quot; を付けてください:
</p>
<pre class="verbatim">:function!  Min(num1, num2, num3)
</pre>

<span id="Fan-Wei-Zhi-Ding-woShi-u"></span><h4 class="unnumberedsubsec">範圍指定を使ふ</h4>

<p>&quot;<code>:call</code>&quot; コマンドは行範圍を受け取ることができます。範圍指定の使用方法は 2 つあります。函數を定義するときに &quot;range&quot; キーワードを使つた場合は、函數自身が範圍指定を處理します。
</p>
<p>函數には &quot;a:firstline&quot; と &quot;a:lastline&quot; といふ 2 つの變數が暗默的に渡されます。この 2 つの變數には範圍指定された行番號が代入されてゐます。例:
</p>
<pre class="verbatim">:function Count_words() range
:  let lnum = a:firstline
:  let n = 0
:  while lnum &lt;= a:lastline
:    let n = n + len(split(getline(lnum)))
:    let lnum = lnum + 1
:  endwhile
:  echo &quot;found &quot; . n . &quot; words&quot;
:endfunction
</pre>
<p>この函數は次のやうに呼び出すことができます:
</p>
<pre class="verbatim">:10,30call Count_words()
</pre>
<p>函數が一度だけ實行され、單語の數が表示されます。
</p>
<p>函數を定義するときに &quot;range&quot; キーワードを使はなかつた場合は、指定された範圍のそれぞれの行に對して函數が呼ばれます (カーソルはその行の上)。例:
</p>
<pre class="verbatim">:function  Number()
:  echo &quot;line &quot; . line(&quot;.&quot;) . &quot; contains: &quot; . getline(&quot;.&quot;)
:endfunction
</pre>
<p>次のやうに實行すると:
</p>
<pre class="verbatim">:10,15call Number()
</pre>
<p>函數は 6 回實行されます。
</p>

<span id="Ke-Bian-Chang-Yin-Shu-"></span><h4 class="unnumberedsubsec">可變長引數</h4>

<p>可變個の引數を取る函數を定義できます。例へば、次の函數は、必ず 1 つの引數 (start) を取り、最大で 20 個までの引數を取ることができます:
</p>
<pre class="verbatim">:function Show(start, ...)
</pre>
<p>變數 &quot;a:1&quot; に 1 つ目のオプション引數が代入されます。2 つ目が &quot;a:2&quot; で、3 つ目が &quot;a:3&quot; です。&quot;a:0&quot; にはオプション引數の數が入ります。
</p>
<p>例:
</p>
<pre class="verbatim">:function Show(start, ...)
:  echohl Title
:  echo &quot;start is &quot; . a:start
:  echohl None
:  let index = 1
:  while index &lt;= a:0
:    echo &quot;  Arg &quot; . index . &quot; is &quot; . a:{index}
:    let index = index + 1
:  endwhile
:  echo &quot;&quot;
:endfunction
</pre>
<p>この函數は &quot;<code>:echohl</code>&quot; を使つて &quot;<code>:echo</code>&quot; の出力に色を付けてゐます。&quot;<code>:echohl None</code>&quot; で色付けをやめます。&quot;<code>:echon</code>&quot; コマンドは &quot;<code>:echo</code>&quot; と同じ機能ですが、改行を出力しません。
</p>
<p>變數 a:000 を使ふこともできます。これは &quot;...&quot; 引數がすべて入つたリストです。|<a href="eval_002etxt.html#a_003a000">a:000</a>|を參照。
</p>

<span id="Guan-Shu-noYiLan-"></span><h4 class="unnumberedsubsec">函數の一覽</h4>

<p>&quot;<code>:function</code>&quot; コマンドでユーザー定義函數の一覽を表示できます:
</p>
<pre class="verbatim">:function
</pre><pre class="verbatim">function Show(start, ...)
function GetVimIndent()
function SetSyn(name)
</pre>
<p>函數の中身を見たいときは函數名を指定してください:
</p>
<pre class="verbatim">:function SetSyn
</pre><pre class="verbatim">1     if &amp;syntax == ''
2       let &amp;syntax = a:name
3     endif
   endfunction
</pre>

<span id="debatugu"></span><h4 class="unnumberedsubsec">デバッグ</h4>

<p>エラーメッセージが表示されたとき、あるいはデバッグ中に、行番號が表示されると便利です。デバッグモードについては |<a href="repeat_002etxt.html#debug_002dscripts">debug-scripts</a>| を參照してください。
</p>
<p>&rsquo;<samp>verbose</samp>&rsquo; オプションに 12 以上の値を設定すると、すべての函數呼び出しが表示されます。15 以上にすると、實行されたすべての行が表示されます。
</p>

<p>函數の削除
</p>
<p>例へば Show() 函數を削除するのは次のやうにします:
</p>
<pre class="verbatim">:delfunction Show
</pre>
<p>函數が存在しない場合はエラーになります。
</p>

<span id="Guan-Shu-henoCan-Zhao-"></span><h4 class="unnumberedsubsec">函數への參照</h4>

<p>變數に函數を代入できると便利なことがあります。それには function() 函數を使ひます。function() は函數の名前を受け取り、函數への參照を返します:
</p>
<pre class="verbatim">:let result = 0        &quot; or 1
:function! Right()
:  return 'Right!'
:endfunc
:function! Wrong()
:  return 'Wrong!'
:endfunc
:
:if result == 1
:  let Afunc = function('Right')
:else
:  let Afunc = function('Wrong')
:endif
:echo call(Afunc, [])
</pre><pre class="verbatim">Wrong!
</pre>
<p><strong>Note:</strong> 函數への參照を保持する變數の名前は大文字で始めなければなりません。さうでないと組み込み函數の名前と紛らはしくなります。
</p>
<p>變數が參照してゐる函數を呼び出すには call() 函數を使ひます。call() 函數の最初の引數は函數への參照で、2 番目の引數は引數のリストです。
</p>
<p>函數への參照は、次節で說明される辭書と組み合はせたときもつとも役に立ちます。
</p>
<span id="g_t41_002e8"></span><span id="index-risutotoCi-Shu-"></span>
<span id="risutotoCi-Shu-"></span><h3 class="section">リストと辭書</h3>

<p>ここまでは基本型(文字列と數値)を扱つてきました。Vim は 2 つの複合型、リストと辭書もサポートしてゐます。
</p>
<p>リストとは、要素を順番に竝べたものです。要素はどのやうな型でも構ひません。數値のリスト、リストのリスト、あるいは複數の型が混在したリストでも作れます。例へば、3 個の文字列からなるリストを作るには次のやうにします:
</p>
<pre class="verbatim">:let alist = ['aap', 'mies', 'noot']
</pre>
<p>リストの要素は角括弧で圍み、コンマで區切ります。空のリストを作るには次のやうにします:
</p>
<pre class="verbatim">:let alist = []
</pre>
<p>函數 add() を使ふとリストに要素を追加することができます:
</p>
<pre class="verbatim">:let alist = []
:call add(alist, 'foo')
:call add(alist, 'bar')
:echo alist
</pre><pre class="verbatim">['foo', 'bar']
</pre>
<p>リストの連結には + を使ひます:
</p>
<pre class="verbatim">:echo alist + ['foo', 'bar']
</pre><pre class="verbatim">['foo', 'bar', 'foo', 'bar']
</pre>
<p>直接リストを擴張するには次のやうにします:
</p>
<pre class="verbatim">:let alist = ['one']
:call extend(alist, ['two', 'three'])
:echo alist
</pre><pre class="verbatim">['one', 'two', 'three']
</pre>
<p>add() とは效果が異なることに注意してください:
</p>
<pre class="verbatim">:let alist = ['one']
:call add(alist, ['two', 'three'])
:echo alist
</pre><pre class="verbatim">['one', ['two', 'three']]
</pre>
<p>add() の第二引數は1つの要素として追加されます。
</p>

<span id="FOR-rupu"></span><h4 class="unnumberedsubsec">FOR ループ</h4>

<p>リストを使つてできる素晴らしいことの1つが、リストに對する繰り返しです:
</p>
<pre class="verbatim">:let alist = ['one', 'two', 'three']
:for n in alist
:  echo n
:endfor
</pre><pre class="verbatim">one
two
three
</pre>
<p>上の例は、リスト &quot;alist&quot; の各要素に對して、その値を變數 &quot;n&quot; に代入しながらループを行ひます。for ループの書式は次の通りです:
</p>
<pre class="verbatim">:for {varname} in {listexpression}
:  {commands}
:endfor
</pre>
<p>ある回數だけループするには、その長さのリストを使ひます。函數range() を使ふと、そのやうなリストを作成できます:
</p>
<pre class="verbatim">:for a in range(3)
:  echo a
:endfor
</pre><pre class="verbatim">0
1
2
</pre>
<p>range() が生成するリストの最初の要素は0であることに注意してください。そのため、最後の要素はリストの長さより 1 小さい値になります。
</p>
<p>最大値、ステップ幅を指定することもでき、逆方向に進むこともできます:
</p>
<pre class="verbatim">:for a in range(8, 4, -2)
:  echo a
:endfor
</pre><pre class="verbatim">8
6
4
</pre>
<p>より有用な例として、バッファ中の行に對するループ:
</p>
<pre class="verbatim">:for line in getline(1, 20)
:  if line =~ &quot;Date: &quot;
:    echo matchstr(line, 'Date: \zs.*')
:  endif
:endfor
</pre>
<p>1 行目から 20 行目(兩端を含む)を調べ、そこに含まれる日附を全て表示してゐます。
</p>

<span id="Ci-Shu-"></span><h4 class="unnumberedsubsec">辭書</h4>

<p>辭書はキーと値のペアを保持します。キーを指定することで高速に値を檢索できます。辭書は波括弧で作ります:
</p>
<pre class="verbatim">:let uk2nl = {'one': 'een', 'two': 'twee', 'three': 'drie'}
</pre>
<p>そして角括弧の中にキーを書くことで單語を檢索します:
</p>
<pre class="verbatim">:echo uk2nl['two']
</pre><pre class="verbatim">twee
</pre>
<p>辭書の定義の書式は次の通りです:
</p>
<pre class="verbatim">{&lt;key&gt; : &lt;value&gt;, ...}
</pre>
<p>空の辭書とは、どんなキーも持たない辭書のことです:
</p>
<pre class="verbatim">{}
</pre>
<p>辭書にはいろいろな使ひ道があります。辭書を扱ふ函數もたくさんあります。例へば、キーのリストを取得してそれに對してループするには次のやうにします:
</p>
<pre class="verbatim">:for key in keys(uk2nl)
:  echo key
:endfor
</pre><pre class="verbatim">three
one
two
</pre>
<p>キーはソートされてゐません。特定の順序に竝べるにはリストをソートします:
</p>
<pre class="verbatim">:for key in sort(keys(uk2nl))
:  echo key
:endfor
</pre><pre class="verbatim">one
three
two
</pre>
<p>要素が定義された順序を得ることはできません。そのやうな目的にはリストを使つてください。リストは順序を保つて要素を保持します。
</p>

<span id="Ci-Shu-noGuan-Shu-"></span><h4 class="unnumberedsubsec">辭書の函數</h4>

<p>辭書の要素は角括弧でインデックスを指定して取得します:
</p>
<pre class="verbatim">:echo uk2nl['one']
</pre><pre class="verbatim">een
</pre>
<p>記號を使はない方法もあります:
</p>
<pre class="verbatim">:echo uk2nl.one
</pre><pre class="verbatim">een
</pre>
<p>この方法はキーがアルファベット、數字、アンダースコアなどの ASCII 文字だけで構成されてゐる場合に使へます。この方法で値を代入することもできます:
</p>
<pre class="verbatim">:let uk2nl.four = 'vier'
:echo uk2nl
</pre><pre class="verbatim">{'three': 'drie', 'four': 'vier', 'one': 'een', 'two': 'twee'}
</pre>
<p>函數の定義と辭書への代入を同時に記述することができます:
</p>
<pre class="verbatim">:function uk2nl.translate(line) dict
:  return join(map(split(a:line), 'get(self, v:val, &quot;???&quot;)'))
:endfunction
</pre>
<p>これを實行してみませう:
</p>
<pre class="verbatim">:echo uk2nl.translate('three two five one')
</pre><pre class="verbatim">drie twee ??? een
</pre>
<p>&quot;<code>:function</code>&quot; の行の末尾に &quot;dict&quot; と書かれてゐます。これは、その函數が辭書から使はれることを示します。ローカル變數 &quot;self&quot; がその辭書を指すやうになります。
</p>
<p>次に、複雜な return コマンドを分解してみませう:
</p>
<pre class="verbatim">split(a:line)
</pre>
<p>函數 split() は文字列を空白文字で區切り、リストにして返します。そのため、この例での戾り値は次のやうになります: &gt;
</p>
<pre class="verbatim">:echo split('three two five one')
</pre><pre class="verbatim">['three', 'two', 'five', 'one']
</pre>
<p>このリストが map() 函數の第一引數になります。map() はリストの各要素を &quot;v:val&quot; に代入した狀態で第 2 引數を評價します。これにより for ループより短いコードが書けます。このコードは:
</p>
<pre class="verbatim">:let alist = map(split(a:line), 'get(self, v:val, &quot;???&quot;)')
</pre>
<p>次のコードと同じです:
</p>
<pre class="verbatim">:let alist = split(a:line)
:for idx in range(len(alist))
:  let alist[idx] = get(self, alist[idx], &quot;???&quot;)
:endfor
</pre>
<p>函數 get() はそのキーが辭書に入つてゐるかをチェックします。入つてゐればその値を返します。入つてゐなければデフォルト値(この例では &rsquo;???&rsquo;)を返します。キーが入つてゐなくてもエラーを起こしたくないやうな場合に便利です。
</p>
<p>函數 join() は split() の逆の處理をします。つまり單語のリストをスペースでつなげます。
</p>
<p>split()、map()、join() を組み合はせると、單語からなる行を簡潔に處理することができます。
</p>

<span id="obuziekutoZhi-Xiang-puroguramingu"></span><h4 class="unnumberedsubsec">オブジェクト指向プログラミング</h4>

<p>辭書には値と函數を入れることができるので、辭書をオブジェクトとして使ふことができます。
</p>
<p>上述の例ではオランダ語から英語に飜譯するために辭書を使ひました。同じことが他の言語でもできると面白いかもしれませんね。まづ飜譯函數を持つたオブジェクト (つまり辭書) を作ります。飜譯する單語はまだ定義しません:
</p>
<pre class="verbatim">:let transdict = {}
:function transdict.translate(line) dict
:  return join(map(split(a:line), 'get(self.words, v:val, &quot;???&quot;)'))
:endfunction
</pre>
<p>單語を飜譯するのに &rsquo;self.words&rsquo; を使ふ點が上述の例と少し違ひます。しかし、self.words はまだありません。よつて、これは抽象クラスと呼ぶことができます。
</p>
<p>オランダ語を飜譯するオブジェクトをインスタンス化してみませう:
</p>
<pre class="verbatim">:let uk2nl = copy(transdict)
:let uk2nl.words = {'one': 'een', 'two': 'twee', 'three': 'drie'}
:echo uk2nl.translate('three one')
</pre><pre class="verbatim">drie een
</pre>
<p>さらにドイツ語の飜譯機を作ります:
</p>
<pre class="verbatim">:let uk2de = copy(transdict)
:let uk2de.words = {'one': 'eins', 'two': 'zwei', 'three': 'drei'}
:echo uk2de.translate('three one')
</pre><pre class="verbatim">drei eins
</pre>
<p>copy() 函數を使つて &quot;transdict&quot; 辭書をコピーし、そのコピーに對して單語を追加してゐます。元の辭書はもちろん變更されません。
</p>
<p>さらに一步進んで、適切な言語を選擇できるやうにしてみます:
</p>
<pre class="verbatim">:if $LANG =~ &quot;de&quot;
:  let trans = uk2de
:else
:  let trans = uk2nl
:endif
:echo trans.translate('one two three')
</pre><pre class="verbatim">een twee drie
</pre>
<p>&quot;trans&quot; は 2 つのオブジェクト(辭書)のうちどちらか 1 つを參照します。コピーは作られてゐません。リストと辭書の同一性についてのより詳しい情報は |<a href="eval_002etxt.html#list_002didentity">list-identity</a>| と |<a href="eval_002etxt.html#dict_002didentity">dict-identity</a>| にあります。
</p>
<p>未對應の言語を使ふ場合は、translate() 函數を上書きして何もしないやうにするといいかもしれません:
</p>
<pre class="verbatim">:let uk2uk = copy(transdict)
:function! uk2uk.translate(line)
:  return a:line
:endfunction
:echo uk2uk.translate('three one wladiwostok')
</pre><pre class="verbatim">three one wladiwostok
</pre>
<p>! を使つて既に存在してゐる函數への參照を上書きしてゐます。續いて、未對應の言語に對して &quot;uk2uk&quot; を使ふやうに變更します:
</p>
<pre class="verbatim">:if $LANG =~ &quot;de&quot;
:  let trans = uk2de
:elseif $LANG =~ &quot;nl&quot;
:  let trans = uk2nl
:else
:  let trans = uk2uk
:endif
:echo trans.translate('one two three')
</pre><pre class="verbatim">one two three
</pre>
<p>さらなる情報については |<a href="eval_002etxt.html#List">List</a>| と |<a href="eval_002etxt.html#Dictionaries">Dictionaries</a>| を參照してください。
</p>
<span id="g_t41_002e9"></span><span id="index-LiWai-"></span>
<span id="LiWai-"></span><h3 class="section">例外</h3>

<p>まづは例題を見てください:
</p>
<pre class="verbatim">:try
:   read ~/templates/pascal.tmpl
:catch /E484:/
:   echo &quot;パスカル用のテンプレートファイルは見つかりませんでした。&quot;
:endtry
</pre>
<p>&quot;<code>:read</code>&quot; コマンドはファイルがなければ失敗します。そのエラーをキャッチして、エラーメッセージの代はりにより親切なメッセージを表示してゐます。
</p>
<p>&quot;<code>:try</code>&quot; と &quot;<code>:endtry</code>&quot; の閒で起きたエラーは例外に變はります。例外は文字列です。エラーが例外に變はつたとき、文字列にはエラーメッセージが含まれます。また、全てのエラーメッセージは番號を持つてゐます。例題では &quot;E484:&quot; を含んだエラーをキャッチしてゐます。この番號は變はらないことが保證されてゐます (テキストは飜譯されるなどして變はるかもしれません)。
</p>
<p>&quot;<code>:read</code>&quot; コマンドが他のエラーを起こした場合、&quot;E484:&quot; といふパターンはマッチしないでせう。したがつて、その例外はキャッチされず、通常のエラーメッセージが表示されます。
</p>
<p>次のやうに書くこともできます:
</p>
<pre class="verbatim">:try
:   read ~/templates/pascal.tmpl
:catch
:   echo &quot;パスカル用のテンプレートファイルは見つかりませんでした。&quot;
:endtry
</pre>
<p>全ての例外がキャッチされます。しかしこれでは &quot;&lsquo;<samp>E21: Cannot make changes, 'modifiable' is off</samp>&rsquo;&quot; のやうな有效なエラーに氣づくことができません。
</p>
<p>&quot;<code>:finally</code>&quot; といふ便利なコマンドもあります:
</p>
<pre class="verbatim">:let tmp = tempname()
:try
:   exe &quot;.,$write &quot; . tmp
:   exe &quot;!filter &quot; . tmp
:   .,$delete
:   exe &quot;$read &quot; . tmp
:finally
:   call delete(tmp)
:endtry
</pre>
<p>カーソル行からファイル末尾までを &quot;filter&quot; コマンド (ファイル名を引數に取るコマンド) でフィルタ處理してゐます。&quot;<code>:try</code>&quot; と &quot;<code>:finally</code>&quot; の閒で問題が起きても、ユーザーが <kbd>CTRL-C</kbd> を押して操作をキャンセルしても、&quot;<code>call delete(tmp)</code>&quot; は必ず呼ばれます。一時ファイルが殘つてしまふ心配はありません。
</p>
<p>例外についてさらに詳しい情報はリファレンスマニュアルの |<a href="eval_002etxt.html#exception_002dhandling">exception-handling</a>| を參照してください。
</p>
<span id="g_t41_002e10"></span><span id="index-Vim-script-Zhu-Yi-Shi-Xiang-"></span>
<span id="Zhu-Yi-Shi-Xiang-"></span><h3 class="section">注意事項</h3>

<p>Vim script において注意すべきことの槪要を簡單に說明します。他の場所にも同じやうな說明はありますが、手頃なチェックリストに使へるでせう。
</p>
<p>改行記號はシステムによつて異なります。Unix では &lt;NL&gt; 文字が使はれますが、MS-DOS, Windows, OS/2 などでは &lt;CR&gt;&lt;LF&gt; が使はれます。末尾が &lt;CR&gt; になつてゐるマップを使ふときは注意してください。|<a href="repeat_002etxt.html#g_t_003asource_005fcrnl">:source_crnl</a>| 參照。
</p>

<span id="Kong-Bai-"></span><h4 class="unnumberedsubsec">空白</h4>

<p>空の行はあつても構ひません。無視されます。
</p>
<p>行頭の空白 (スペースとTAB) は常に無視されます。引數と引數の閒には空白がいくつあつても構ひません (例へば下記の &quot;set&quot; と &quot;cpoptions&quot; の閒)。空白は 1 つのスペースにまとめられ、セパレータの役目をします。最後の文字より後ろにある空白文字は狀況によつて無視されたりされなかつたりします。下記參照。
</p>
<p>&quot;:set&quot; コマンドで &quot;=&quot; 記號を使ふとき:
</p>
<pre class="verbatim">:set cpoptions    =aABceFst
</pre>
<p>&quot;=&quot; の直前にある空白は無視されます。しかし、&quot;=&quot; の後ろに空白をはさむことはできません。
</p>
<p>オプション値に空白を含めるときは、バックスラッシュ (&quot;\&quot;) でエスケープする必要があります:
</p>
<pre class="verbatim">:set tags=my\ nice\ file
</pre>
<p>次のやうに書くと:
</p>
<pre class="verbatim">:set tags=my nice file
</pre>
<p>これはエラーになります。このコマンドは次のやうに解釋されてしまひます:
</p>
<pre class="verbatim">:set tags=my
:set nice
:set file
</pre>

<span id="komento"></span><h4 class="unnumberedsubsec">コメント</h4>

<p>コメントは &quot; (ダブルクォート) 記號で開始します。行末までのすべての文字がコメントとして解釋され、無視されます。ただし、コメントを書くことができないコマンドもあります (以下に例を示します)。コメントは行のどこからでも開始できます。
</p>
<p>コメントとして簡單な註釋を付けたとします。例:
</p>
<pre class="verbatim">:abbrev dev development         &quot; shorthand
:map &lt;F3&gt; o#include             &quot; insert include
:execute cmd                    &quot; do it
:!ls *.c                        &quot; list C files
</pre>
<p>短縮形 &rsquo;dev&rsquo; は &rsquo;development     &quot; shorthand&rsquo; に展開されます。&lt;F3&gt; には &rsquo;o#....&rsquo; から &rsquo;&quot; insert include&rsquo; までの全部がマップされます。&quot;execute&quot; コマンドはエラーを起こします。&quot;<code>!</code>&quot; コマンドはすべての文字をシェルに渡すので、&lsquo;<samp>&quot;</samp>&rsquo; 記號が閉ぢられてゐないことでエラーが起こります。
</p>
<p>&quot;:map&quot;、&quot;:abbreviate&quot;、&quot;:execute&quot;、&quot;!&quot; などのコマンドはその後ろにコメントを書くことができません (そのやうなコマンドは他にもあります)。ただし、無理やりコメントを書く方法もあります:
</p>
<pre class="verbatim">:abbrev dev development|&quot; shorthand
:map &lt;F3&gt; o#include|&quot; insert include
:execute cmd                    |&quot; do it
</pre>
<p>&rsquo;|&rsquo; 文字でコマンドを區切り、次のコマンドを書くことができます。この例では 2 つ目のコマンドはコメントのみです。&quot;!&quot; の場合は |<a href="eval_002etxt.html#g_t_003aexecute">:execute</a>| と &rsquo;|&rsquo; を使はなければなりません:
</p><pre class="verbatim">:exe '!ls *.c'                  |&quot; list C files
</pre>
<p>&quot;<code>:map</code>&quot; と &quot;<code>:abbreviate</code>&quot; の場合は &rsquo;|&rsquo; の前に空白を置かないやうに注意してください。これらのコマンドは行末か &rsquo;|&rsquo; までのすべての文字を使ひます。そのため、意圖せずに末尾に空白を入れてしまふかもしれません:
</p>
<pre class="verbatim">:map &lt;F4&gt; o#include
</pre>
<p>vimrc を編輯するときに &rsquo;<samp>list</samp>&rsquo; オプションをオンに設定しておくと、この問題が發見しやすくなります。
</p>
<p>Unix では特別なコメント書式を使つて Vim script を實行形式にすることができます:
</p><pre class="verbatim">#!/usr/bin/env vim -S
echo &quot;this is a Vim script&quot;
quit
</pre>
<p>&quot;#&quot; コマンドは行を行番號付きで表示しますが、&rsquo;!&rsquo; をつけると何もしなくなります。よつてファイルを實行するためのシェルコマンドを記述することができます。|<a href="various_002etxt.html#g_t_003a_0023_0021">:#!</a>| |<a href="starting_002etxt.html#g_t_002dS">-S</a>|
</p>

<span id="Luo-tosiXue-"></span><h4 class="unnumberedsubsec">落とし穴</h4>

<p>次の例には大きな問題があります:
</p>
<pre class="verbatim">:map ,ab o#include
:unmap ,ab
</pre>
<p>この unmap コマンドはうまく動きません。なぜなら &quot;,ab &quot; を unmap しようとしてゐるからです。そのやうなマップは存在しません。エラーが表示されますが、スペースは目に見えないので、エラーの原因を見つけるのは困難です。
</p>
<p>&quot;<code>:unmap</code>&quot; コマンドの後にコメントを書いた場合も同樣です:
</p>
<pre class="verbatim">:unmap ,ab     &quot; comment
</pre>
<p>コメントは無視されますが、Vim は &rsquo;,ab     &rsquo; を unmap しようとします。次のやうに書いてください:
</p>
<pre class="verbatim">:unmap ,ab|    &quot; comment
</pre>

<span id="biyunoFu-Yuan-"></span><h4 class="unnumberedsubsec">ビューの復元</h4>

<p>何らかの變更を加へてから、カーソルのあつた場所に戾りたい時があります。そのときに、畫面に表示されてゐた行範圍も復元されるとすてきです。
</p>
<p>次の例は、現在行をヤンクしてファイルの先頭にプットし、ビューを復元します:
</p>
<pre class="verbatim">map ,p ma&quot;aYHmbgg&quot;aP`bzt`a
</pre>
<p>これは次のことをしてゐます:
</p><pre class="verbatim">ma&quot;aYHmbgg&quot;aP`bzt`a
ma                      現在のカーソル位置にマーク a を設定
  &quot;aY                   現在行をレジスタ a にヤンク
     Hmb                ウィンドウの 1 行目に移動してマーク b を設定
        gg              ファイルの 1 行目に移動
          &quot;aP           ヤンクした行をその上にプット
             `b         ウィンドウの 1 行目に戾る
               zt       ウィンドウの表示範圍を以前と同じにする
                 `a     保存しておいたカーソル位置に移動
</pre>

<span id="patukezingu"></span><h4 class="unnumberedsubsec">パッケージング</h4>

<p>函數の名前が他の人の函數とかぶらないやうに、次の方法を使つてください:
</p><ul>
<li> ユニークな文字列を名前の前に付ける。私はよく略語を使ひます。例へば、オプションウィンドウ (option window) のための函數なら &quot;OW_&quot; などです。
</li><li> 函數を 1 つのファイルにまとめて、函數がロードされてゐるかどうかを示すグローバル變數を設定する。ファイルが 2 囘目に讀み込まれたとき、最初にそれらの函數をアンロードする。
</li></ul>
<p>例:
</p>
<pre class="verbatim">&quot; This is the XXX package

if exists(&quot;XXX_loaded&quot;)
  delfun XXX_one
  delfun XXX_two
endif

function XXX_one(a)
        ... body of function ...
endfun

function XXX_two(b)
        ... body of function ...
endfun

let XXX_loaded = 1
</pre>
<span id="g_t41_002e11"></span><span id="write_002dplugin"></span><span id="index-write_002dplugin"></span>
<span id="index-puraguinwoShu-ku"></span>
<span id="puraguinwoShu-ku"></span><h3 class="section">プラグインを書く</h3>

<p>Vim script を書いて、それを多くの人に使つてもらふことができます。そのやうなスクリプトはプラグインと呼ばれます。Vim ユーザーはあなたのスクリプトをプラグインディレクトリにコピーするだけで、すぐにその機能を使ふことができます。|<a href="usr_005f05_002etxt.html#add_002dplugin">add-plugin</a>| 參照。
</p>
<p>プラグインには 2 種類あります:
</p>
<table>
<tr><td width="50%">グローバルプラグイン:</td><td width="50%">すべてのファイルで共通</td></tr>
<tr><td width="50%">ファイルタイププラグイン:</td><td width="50%">ファイルの種類別</td></tr>
</table>

<p>この節ではグローバルプラグインについて說明します。ほとんどの說明はファイルタイププラグインに對してもあてはまります。ファイルタイププラグイン特有の說明は次節にあります |<a href="#write_002dfiletype_002dplugin">write-filetype-plugin</a>|。
</p>

<span id="Ming-Qian-"></span><h4 class="unnumberedsubsec">名前</h4>

<p>最初にプラグインの名前を決めなければなりません。プラグインが提供する機能が名前から分かるやうにしてください。また、他の人が作つたプラグインと名前がかぶらないやうにしてください。古い Windows システムでの問題を避けるため、名前は 8 文字以內にしてください。
</p>
<p>例へばタイプミス (type mistake) を修正 (correct) するためのスクリプトなら &quot;typecorr.vim&quot; といふ名前を付けたりします。ここではこれを例題として使ひます。
</p>
<p>プラグインが誰でも使へるやうにするため、いくつかのガイドラインに從つてください。ガイドラインは段階的に說明していきます。例題プラグインの完全なソースは最後に示します。
</p>

<span id="bodei"></span><h4 class="unnumberedsubsec">ボディ</h4>

<p>まづはプラグインの本體部分を見てみませう。行番號は實際の番號です:
</p>
<pre class="verbatim">14 iabbrev teh the
15 iabbrev otehr other
16 iabbrev wnat want
17 iabbrev synchronisation
18     \ synchronization
19 let s:count = 4
</pre>
<p>もちろん、實際のスクリプトはもつと巨大です。
</p>
<p>行番號は說明のために追加したものです。プラグインを書くときは行番號を付けないでください。
</p>

<span id="hetuda"></span><h4 class="unnumberedsubsec">ヘッダー</h4>

<p>新しい單語を追加していくと、プラグインには複數のバージョンが存在することになります。ファイルを配布したとき、それを使つた人は、誰がこの素晴らしいプラグインを書いたのかを知りたいと思ふでせうし、感想を傳へたいと思ふかもしれません。
といふわけで、次のやうなヘッダーをプラグインに書いてください:
</p>
<pre class="verbatim">1 &quot; Vim global plugin for correcting typing mistakes
2 &quot; Last Change:  2000 Oct 15
3 &quot; Maintainer:   Bram Moolenaar &lt;Bram@vim.org&gt;
</pre>
<p>著作權とライセンスについて: プラグインがとても便利で、そして再配布を制限するほどのものでない場合は、パブリックドメインか Vim ライセンス (|<a href="uganda_002etxt.html#license">license</a>|) の適用を檢討してみてください。次の短い宣言をプラグインの先頭付近に書いておくだけで十分です:
</p>
<pre class="verbatim">4     &quot; License:      This file is placed in the public domain.
</pre>

<span id="use_002dcpo_002dsave"></span><span id="index-use_002dcpo_002dsave"></span>
<span id="index-Xing-Lian-Jie-_002c-Fu-Zuo-Yong-noHui-Bi-"></span>
<span id="Xing-Lian-Jie-_002c-Fu-Zuo-Yong-noHui-Bi-"></span><h4 class="unnumberedsubsec">行連結、副作用の囘避</h4>

<p>上の例の 18 行目では行連結 (|<a href="repeat_002etxt.html#line_002dcontinuation">line-continuation</a>|) が使はれてゐます。ユーザーの環境で &rsquo;<samp>compatible</samp>&rsquo; オプションがオンに設定されてゐると、この行でエラーが發生します。&rsquo;<samp>compatible</samp>&rsquo; オプションの設定には副作用があるので、勝手に設定をオフにすることはできません。問題を避けるには、一時的に &rsquo;<samp>cpoptions</samp>&rsquo; の値を Vim の初期値に設定し、後で元に戾します。さうすれば、行連結を使ふことができ、スクリプトはほとんどの環境で動作するやうになります。設定の變更は次のやうにします:
</p>
<pre class="verbatim">11     let s:save_cpo = &amp;cpo
12     set cpo&amp;vim
..
42     let &amp;cpo = s:save_cpo
43     unlet s:save_cpo
</pre>
<p>最初に &rsquo;<samp>cpoptions</samp>&rsquo; の値を s:save_cpo 變數に保存します。プラグインの最後でオプションの値を元に戾します。
</p>
<p>スクリプトローカル變數 (|<a href="eval_002etxt.html#s_003avar">s:var</a>|) を使つてゐることに注目してください。グローバル變數は他の場所で使はれてゐる可能性があります。スクリプトの中だけで使ふ場合はスクリプトローカル變數を使つてください。
</p>

<span id="rodosinai"></span><h4 class="unnumberedsubsec">ロードしない</h4>

<p>ユーザーが常にプラグインをロードしたいと思ふとは限りません。また、システム管理者がシステムのプラグインディレクトリにプラグインを入れたが、ユーザーは自分で入れたプラグインを使ひたいといふこともあります。したがつて、指定したプラグインだけを無效にできる必要があります。次のやうにします:
</p>
<pre class="verbatim">6     if exists(&quot;g:loaded_typecorr&quot;)
7       finish
8     endif
9     let g:loaded_typecorr = 1
</pre>
<p>これはスクリプトの二重ロードを避ける效果もあります。スクリプトを二重にロードすると、函數の再定義エラーが發生したり、自動コマンドが二重に追加されることでトラブルが起きたりします。
</p>
<p>變數の名前は &quot;loaded_&quot; で始めてプラグインのファイル名をそのまま付けるやうにしてください。&quot;g:&quot; を付けることで函數の中で變數を使用したときに發生するミスを防いでゐます (函數の中では &quot;g:&quot; を付けない變數はローカル變數になります)。
</p>
<p>&quot;finish&quot; を使つてファイルの殘りの部分の讀み込みを停止してゐます。この方法はファイル全體を if-endif で圍むよりも速いです。
</p>

<span id="matupu"></span><h4 class="unnumberedsubsec">マップ</h4>

<p>さて、プラグインをもつと魅力あるものに仕上げませう。マップを追加して、カーソルの下の單語に對する修正を追加できるやうにします。單純にキーを選んでマップを設定することもできますが、そのキーは既にユーザーが使つてゐるかもしれません。マップに使用するキーをユーザーが選擇できるやうにするには、&lt;Leader&gt; を使ひます:
</p>
<pre class="verbatim">22       map &lt;unique&gt; &lt;Leader&gt;a  &lt;Plug&gt;TypecorrAdd
</pre>
<p>&quot;&lt;Plug&gt;TypecorrAdd&quot; は目的の動作をします。詳しくは後で說明します。
</p>
<p>使用したいキーを &quot;mapleader&quot; 變數に設定することで、マップの最初のキーを設定できます。例へば、次のやうに設定すると: &gt;
</p>
<pre class="verbatim">let mapleader = &quot;_&quot;
</pre>
<p>マップは &quot;_a&quot; と定義されます。變數が設定されてゐない場合は初期設定 (バックスラッシュ) が使はれます。つまり &quot;\a&quot; といふマップが定義されます。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
上記のコマンドでは &lt;unique&gt; が使はれてゐます。これは、同じマップが既に定義されてゐた場合にエラーを表示します。|<a href="map_002etxt.html#g_t_003amap_002d_003cunique_003e">:map-&lt;unique&gt;</a>|
</p></blockquote>

<p>マップするキーをユーザーが自分で定義できるやうにするには、次のやうにします:
</p>
<pre class="verbatim">21      if !hasmapto('&lt;Plug&gt;TypecorrAdd')
22        map &lt;unique&gt; &lt;Leader&gt;a  &lt;Plug&gt;TypecorrAdd
23      endif
</pre>
<p>&quot;&lt;Plug&gt;TypecorrAdd&quot; に對するマップが既にあるかどうかを調べ、無い場合のみ&quot; &lt;Leader&gt;a&quot; にマップを定義します。ユーザーは自分の vimrc ファイルの中でマップを定義することができます:
</p>
<pre class="verbatim">map ,c  &lt;Plug&gt;TypecorrAdd
</pre>
<p>すると、マップのキーとして &quot;,c&quot; が使はれます。&quot;_a&quot; や &quot;\a&quot; は使はれません。
</p>

<span id="pisu"></span><h4 class="unnumberedsubsec">ピース</h4>

<p>スクリプトが大きくなると、それを部品ごとに分けたくなります。それには函數やマップを使ひます。しかし、さうすると函數やマップが他のスクリプトのものと衝突する可能性があります。例へば、Add() といふ函數を追加したとき、他のスクリプトでも同じ名前の函數が定義されてゐるかもしれません。そのやうな場合は、名前の前に &quot;s:&quot; を付けて、スクリプトの中だけで使へる函數を定義します。
</p>
<p>新しい修正を追加するための函數を定義します:
</p>
<pre class="verbatim">30 function s:Add(from, correct)
31   let to = input(&quot;type the correction for &quot; . a:from . &quot;: &quot;)
32   exe &quot;:iabbrev &quot; . a:from . &quot; &quot; . to
..
36 endfunction
</pre>
<p>s:Add() 函數は同じスクリプトの中から呼び出すことができます。他のスクリプトが s:Add() を定義してゐた場合、それはそのスクリプトにローカルであり、函數が定義されたスクリプトの中からのみ呼び出すことができます。さらにグローバルの Add() 函數 (&quot;s:&quot; 無し) を定義することもでき、それはまた別の函數になります。
</p>
<p>マップ定義では &lt;SID&gt; が使へます。これは、現在のスクリプトを識別するためのスクリプト ID を生成します。私たちの入力修正プラグインでは &lt;SID&gt; を次のやうに使ひます:
</p>
<pre class="verbatim">24	noremap &lt;unique&gt; &lt;script&gt; &lt;Plug&gt;TypecorrAdd  &lt;SID&gt;Add
..
28	noremap &lt;SID&gt;Add  :call &lt;SID&gt;Add(expand(&quot;&lt;cword&gt;&quot;), 1)&lt;CR&gt;
</pre>
<p>ユーザーが &quot;\a&quot; と入力すると、次の手順でキー入力が呼び出されます:
</p>
<pre class="verbatim">\a  -&gt;  &lt;Plug&gt;TypecorrAdd  -&gt;  &lt;SID&gt;Add  -&gt;  :call &lt;SID&gt;Add()
</pre>
<p>他のスクリプトで &lt;SID&gt;Add をマップすると、別のスクリプト ID が使はれ、別のマップが生成されます。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
s:Add() ではなく &lt;SID&gt;Add() と書いてゐることに注意してください。マップはスクリプトの外側でユーザーが入力するものだからです。&lt;SID&gt; はスクリプト ID に變換され、どのスクリプトの Add() 函數を呼べばいいのかわかるやうになつてゐます。
</p></blockquote>

<p>これは少し複雜ですが、複數のプラグインを同時に使用するためには必要なことです。基本的なルールとしては、マップの中では &lt;SID&gt;Add() を使ひ、他の場所 (スクリプトの中、自動コマンド、ユーザー定義コマンド) では s:Add() を使ひます。
</p>
<p>マップと同じ方法で、メニューを追加することもできます:
</p>
<pre class="verbatim">26 noremenu &lt;script&gt; Plugin.Add\ Correction      &lt;SID&gt;Add
</pre>
<p>プラグインのメニューを追加する場合は &quot;Plugin&quot; メニューの下に登錄することが推奬されてゐます。この例ではメニューが 1 つだけですが、複數のメニューを追加する場合は、サブメニューの使用が推奬されてゐます。例へば、&quot;Plugin.CVS&quot; 以下に &quot;Plugin.CVS.checkin&quot; や &quot;Plugin.CVS.checkout&quot; などの CVS の操作を登錄します。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
28 行目では &quot;:noremap&quot; を使つて、他のマップでトラブルが起きないやうにしてゐます。例へば、誰かが &quot;:call&quot; をマップしてゐるかもしれないからです。24 行目でも &quot;:noremap&quot; を使つてゐますが、ここでは &quot;&lt;SID&gt;Add&quot; を再マップして欲しいので、&quot;&lt;script&gt;&quot; を使つてゐます。これを使ふとスクリプトローカルなマップだけが再マップされます |<a href="map_002etxt.html#g_t_003amap_002d_003cscript_003e">:map-&lt;script&gt;</a>|。26 行目でも &quot;:noremenu&quot; で同樣のことをしてゐます |<a href="gui_002etxt.html#g_t_003amenu_002d_003cscript_003e">:menu-&lt;script&gt;</a>|。
</p></blockquote>


<span id="using_002d_003cPlug_003e"></span><span id="index-using_002d_003cPlug_003e"></span>
<span id="index-_003cSID_003e-to-_003cPlug_003e"></span>
<span id="g_t_003cSID_003e-to-_003cPlug_003e"></span><h4 class="unnumberedsubsec">&lt;SID&gt; と &lt;Plug&gt;</h4>

<p>&lt;SID&gt; と &lt;Plug&gt; は、入力したキーに對するマップと、他のマップの中だけで使はれるマップが干涉しないやうにするために使はれます。&lt;SID&gt; と &lt;Plug&gt; の違ひに注意してください:
</p>
<dl compact="compact">
<dt>&lt;Plug&gt;</dt>
<dd><p>これはスクリプトの外側からも見えます。ユーザーが自分でプラグインの機能をマップできるやうにするやうな場合に使ひます。&lt;Plug&gt; は特殊なコードで、キーボードから入力されることはありません。
キー列が他のプラグインとかぶらないやうに、&lt;Plug&gt; スクリプト名 マップ名、といふ形式で使つてください。
我々の例では、スクリプト名が &quot;Typecorr&quot;、マップ名が &quot;Add&quot; なので、&quot;&lt;Plug&gt;TypecorrAdd&quot; といふキー列になります。スクリプト名とマップ名の最初の文字だけを大文字にして、どこがマップ名なのかわかるやうにします。
</p>
</dd>
<dt>&lt;SID&gt;</dt>
<dd><p>これはスクリプト ID (スクリプト固有の識別子) です。
Vim は內部で &lt;SID&gt; を &quot;&lt;SNR&gt;123_&quot; に變換します (&quot;123&quot; の部分はいろいろな數字が入ります)。つまり、函數 &quot;&lt;SID&gt;Add()&quot; は、あるスクリプトでは &quot;&lt;SNR&gt;11_Add()&quot; といふ名前になり、別のスクリプトでは &quot;&lt;SNR&gt;22_Add()&quot; になります。これは &quot;<code>:function</code>&quot; コマンドで函數一覽を表示すると確認することができます。&lt;SID&gt; の變換はマップの中でも同樣におこなはれるので、マップの中からスクリプトローカル函數を呼び出すことができます。
</p></dd>
</dl>


<span id="yuzaDing-Yi-komando"></span><h4 class="unnumberedsubsec">ユーザー定義コマンド</h4>

<p>修正を追加するためのユーザー定義コマンドを追加します:
</p>
<pre class="verbatim">38    if !exists(&quot;:Correct&quot;)
39      command -nargs=1  Correct  :call s:Add(&lt;q-args&gt;, 0)
40    endif
</pre>
<p>ユーザー定義コマンドは、同じ名前のコマンドがまだない場合のみ定義できます。既に定義されてゐる場合はエラーになります。&quot;:command!&quot; を使つてユーザー定義函數を上書きするのは良いアイデアとは言へません。ユーザーは、自分が定義したコマンドがなぜ動かないのか不思議に思ふでせう。|<a href="map_002etxt.html#g_t_003acommand">:command</a>|
</p>

<span id="sukuriputoBian-Shu-"></span><h4 class="unnumberedsubsec">スクリプト變數</h4>

<p>先頭に &quot;s:&quot; が付いた變數はスクリプト變數です。これはスクリプトの中だけで使へます。スクリプトの外からは見えません。同じ名前の變數を複數のスクリプトで使つてしまふやうなトラブルを避けることができます。Vim が實行されてゐる閒、變數は保持されます。そして、同じスクリプトが再讀み込みされると、再び同じ變數が使はれます。|<a href="eval_002etxt.html#s_003avar">s:var</a>|
</p>
<p>スクリプト變數は、同じスクリプトの中で定義された函數、自動コマンド、ユーザー定義コマンドでも使へます。我々の例に、修正の數を數へるための數行のコードを追加します:
</p>
<pre class="verbatim">19  let s:count = 4
..
30  function s:Add(from, correct)
..
34    let s:count = s:count + 1
35    echo s:count . &quot; corrections now&quot;
36  endfunction
</pre>
<p>最初に s:count はスクリプトの中で 4 で初期化されます。その後、s:Add() 函數が呼び出されると、s:count が增加します。函數がどこから呼ばれたかにかかはらず、函數が定義されたスクリプトのローカル變數が使はれます。
</p>

<span id="matome"></span><h4 class="unnumberedsubsec">まとめ</h4>

<p>例題の完成形は以下のやうになります:
</p>
<pre class="verbatim">1 &quot; Vim global plugin for correcting typing mistakes
2 &quot; Last Change:  2000 Oct 15
3 &quot; Maintainer:   Bram Moolenaar &lt;Bram@@vim.org&gt;
4 &quot; License:  This file is placed in the public domain.
5
6 if exists(&quot;g:loaded_typecorr&quot;)
7   finish
8 endif
9 let g:loaded_typecorr = 1
10
11 let s:save_cpo = &amp;cpo
12 set cpo&amp;vim
13
14 iabbrev teh the
15 iabbrev otehr other
16 iabbrev wnat want
17 iabbrev synchronisation
18     \ synchronization
19 let s:count = 4
20
21 if !hasmapto('&lt;Plug&gt;TypecorrAdd')
22   map &lt;unique&gt; &lt;Leader&gt;a  &lt;Plug&gt;TypecorrAdd
23 endif
24 noremap &lt;unique&gt; &lt;script&gt; &lt;Plug&gt;TypecorrAdd  &lt;SID&gt;Add
25
26 noremenu &lt;script&gt; Plugin.Add\ Correction      &lt;SID&gt;Add
27
28 noremap &lt;SID&gt;Add  :call &lt;SID&gt;Add(expand(&quot;&lt;cword&gt;&quot;), 1)&lt;CR&gt;
29
30 function s:Add(from, correct)
31   let to = input(&quot;type the correction for &quot; . a:from . &quot;: &quot;)
32   exe &quot;:iabbrev &quot; . a:from . &quot; &quot; . to
33   if a:correct | exe &quot;normal viws\&lt;C-R&gt;\&quot; \b\e&quot; | endif
34   let s:count = s:count + 1
35   echo s:count . &quot; corrections now&quot;
36 endfunction
37
38 if !exists(&quot;:Correct&quot;)
39   command -nargs=1  Correct  :call s:Add(&lt;q-args&gt;, 0)
40 endif
41
42 let &amp;cpo = s:save_cpo
43 unlet s:save_cpo
</pre>
<p>33 行目は說明がまだでした。これは、新しい修正をカーソルの下の單語に適用します。|<a href="various_002etxt.html#g_t_003anormal">:normal</a>| コマンドを使つて新しい略語を適用してゐます。
</p><blockquote>
<p><strong>Note:</strong> マップと略語はその場で展開されます。&quot;:noremap&quot; で定義されたマップから函數が呼び出されたとしても動作は同じです。
</p></blockquote>

<p>&rsquo;<samp>fileformat</samp>&rsquo; オプションを &quot;unix&quot; に設定することが推奬されてゐます。さうすれば、Vim script はどこでも動作します。&rsquo;<samp>fileformat</samp>&rsquo; が &quot;dos&quot; に設定されたスクリプトは Unix では動作しません。|<a href="repeat_002etxt.html#g_t_003asource_005fcrnl">:source_crnl</a>| も參照。設定が正しいことを確實にするため、ファイルを保存する前に次のコマンドを實行してください:
</p>
<pre class="verbatim">:set fileformat=unix
</pre>

<span id="write_002dlocal_002dhelp"></span><span id="index-write_002dlocal_002dhelp"></span>
<span id="index-puraguinnodokiyumento"></span>
<p>ドキュメント
</p>
<p>プラグインのドキュメントを書くのは良いアイデアです。ユーザーが動作を變更できるやうな場合には特に重要です。|<a href="usr_005f05_002etxt.html#add_002dlocal_002dhelp">add-local-help</a>| ではどのやうにしてドキュメントがインストールされるか說明されてゐます。
</p>
<p>プラグインヘルプファイルの例を示します (&quot;typecorr.txt&quot;):
</p>
<pre class="verbatim">1 *typecorr.txt*  Plugin for correcting typing mistakes
2
3 If you make typing mistakes, this plugin will have them corrected
4 automatically.
5
6 There are currently only a few corrections.  Add your own if you like.
7
8 Mappings:
9 &lt;Leader&gt;a   or   &lt;Plug&gt;TypecorrAdd
10     Add a correction for the word under the cursor.
11
12 Commands:
13 :Correct {word}
14     Add a correction for {word}.
15
16                         *typecorr-settings*
17 This plugin doesn't have any settings.
</pre>
<p>書式に氣をつけなければならないのは一行目だけです。1 行目はコピーされ、help.txt の &quot;LOCAL ADDITIONS:&quot; の項に埋め込まれます |<a href="Mu-Ci-.html#local_002dadditions">local-additions</a>|。最初の &quot;*&quot; は 1 行目の 1 桁目に書いてください。ヘルプを追加したら &quot;:help&quot; を實行して項目が追加されたことを確認してください。
</p>
<p>ヘルプの中で ** で文字を圍むとタグを追加することができます。ただし、既存のヘルプタグと同じものを使はないでください。&quot;typecorr-settings&quot; のやうに、プラグインの名前を使つてタグを作るといいかもしれません。
</p>
<p>ヘルプの他の部分を參照するときは || で圍みます。さうすれば、ユーザーは簡單にヘルプの關聯した部分を參照することができます。
</p>

<span id="plugin_002dfiletype"></span><span id="index-plugin_002dfiletype"></span>
<span id="index-huairutaipunoRen-Shi-"></span>
<p>ファイルタイプの認識
</p>
<p>ファイルタイプが Vim によつて認識されない場合は、別ファイルにファイルタイプを認識するためにコードを作成する必要があります。通常は、自動コマンドを使つて、ファイル名がパターンにマッチしたときにファイルタイプを設定します。例:
</p>
<pre class="verbatim">au BufNewFile,BufRead *.foo         set filetype=foofoo
</pre>
<p>この 1 行を &rsquo;<samp>runtimepath</samp>&rsquo; の最初のディレクトリの &quot;ftdetect/foofoo.vim&quot; に書き込みます。例へば、Unix なら &quot;~/.vim/ftdetect/foofoo.vim&quot; などです。ファイルタイプとスクリプトファイルの名前を同じにする決まりになつてゐます。
</p>
<p>必要ならより複雜な處理をすることもできます。例へば、ファイルの中身を見て言語を判定したりできます。|<a href="filetype_002etxt.html#new_002dfiletype">new-filetype</a>| も參照。
</p>

<span id="plugin_002dspecial"></span><span id="index-plugin_002dspecial"></span>
<span id="index-puraguinYao-Yue-"></span>
<p>要約
</p>
<p>プラグインで使用する特有事項の要約を示します:
</p>
<dl compact="compact">
<dt>s:name</dt>
<dd><p>スクリプトローカル變數。
</p>
</dd>
<dt>&lt;SID&gt;</dt>
<dd><p>スクリプトID。マップや函數をスクリプトローカルにするのに使ふ。
</p>
</dd>
<dt>hasmapto()</dt>
<dd><p>スクリプトが提供してゐる機能に對して、ユーザーが既にマップを定義したかどうかをチェックする函數。
</p>
</dd>
<dt>&lt;Leader&gt;</dt>
<dd><p>&quot;mapleader&quot; の値。ユーザーがその變數にキーを設定することで、プラグインのマップの開始キーを指定できる。
</p>
</dd>
<dt>:map &lt;unique&gt;</dt>
<dd><p>マップが既に定義されてゐるなら警告を發する。
</p>
</dd>
<dt>:noremap &lt;script&gt;</dt>
<dd><p>スクリプトローカルマップだけを使ふ。グローバルマップは使はない。
</p>
</dd>
<dt>exists(&quot;:Cmd&quot;)</dt>
<dd><p>ユーザー定義コマンドが既にあるかどうかをチェックする。
</p></dd>
</dl>

<span id="g_t41_002e12"></span><span id="write_002dfiletype_002dplugin"></span><span id="ftplugin"></span><span id="index-write_002dfiletype_002dplugin"></span>
<span id="index-ftplugin"></span>
<span id="index-huairutaipupuraguinwoShu-ku"></span>
<span id="huairutaipupuraguinwoShu-ku"></span><h3 class="section">ファイルタイププラグインを書く</h3>

<p>ファイルタイププラグインはグローバルプラグインと似てゐますが、カレントバッファのマップやオプションだけを設定します。ファイルタイププラグインの使用方法については |<a href="usr_005f05_002etxt.html#add_002dfiletype_002dplugin">add-filetype-plugin</a>| を參照してください。
</p>
<p>先に |<a href="#g_t41_002e11">41.11</a>| 節のグローバルプラグインの項を讀んでください。そこで說明されてゐることはすべてファイルタイププラグインにもあてはまります。この節ではファイルタイププラグイン特有の事項だけを說明します。ファイルタイププラグインはカレントバッファに對してのみ機能するといふことが最も大切です。
</p>

<span id="Wu-Xiao-Hua-"></span><h4 class="unnumberedsubsec">無效化</h4>

<p>ファイルタイププラグインを書いて多くの人に使つてもらはうとするなら、プラグインを無效化できるやうにしておく必要があります。プラグインの先頭に次のやうな記述を追加してください:
</p>
<pre class="verbatim">&quot; このバッファに對してまだ實行されてゐない場合のみ處理を實行する
if exists(&quot;b:did_ftplugin&quot;)
finish
endif
let b:did_ftplugin = 1
</pre>
<p>これは同じプラグインが同じバッファで二重にロードされるのを防ぐためにも必要です (&quot;:edit&quot; コマンドを引數なしで實行したときに發生します)。
</p>
<p>ユーザーは、次の一行だけを書いたファイルタイププラグインを作成することで、標準プラグインのロードを無效化できます:
</p>
<pre class="verbatim">let b:did_ftplugin = 1
</pre>
<p>ただし、そのファイルを保存したファイルタイププラグインディレクトリが、&rsquo;<samp>runtimepath</samp>&rsquo; の中で <code>$VIMRUNTIME</code> よりも前にある必要があります。
</p>
<p>標準プラグインを使ひつつ、その設定を 1 つだけ變更したいといふ場合は、スクリプトの中で設定を變更することができます:
</p>
<pre class="verbatim">setlocal textwidth=70
</pre>
<p>このファイルを &quot;after&quot; ディレクトリに保存すると、(例へば filetype=vim なら) 標準配布の &quot;vim.vim&quot; が讀み込まれた後に、保存したファイルが讀み込まれるやうになります |<a href="options_002etxt.html#after_002ddirectory">after-directory</a>|。Unix ならファイルのパスは &quot;~/.vim/after/ftplugin/vim.vim&quot; です。
</p><blockquote>
<p><strong>Note:</strong> <br>
標準プラグインは &quot;b:did_ftplugin&quot; を設定しますが、ここではそれを無視してゐます。
</p></blockquote>


<span id="opusiyon-2"></span><h4 class="unnumberedsubsec">オプション</h4>

<p>ファイルタイププラグインでは、カレントバッファの設定だけを變更するため、次のコマンドを使つてオプションを設定してください:
</p>
<pre class="verbatim">:setlocal
</pre>
<p>そして、バッファローカルなオプションだけを設定してください (どのオプションがさうなのかはヘルプで確認してください)。|<a href="options_002etxt.html#g_t_003asetlocal">:setlocal</a>| コマンドでグローバルオプションやウィンドウローカルオプションを設定すると、たくさんのバッファの設定が變更されます。ファイルタイププラグインはそのやうな動作をすべきではありません。
</p>
<p>オプションの値がフラグや設定項目のリストなら、&quot;+=&quot; や &quot;-=&quot; を使ふことで既存の設定を維持することができます。ユーザーがそのオプションの設定を變更してゐる可能性もあるので注意してください。最初に初期設定に戾してから設定を變更するといいかもしれません。例:
</p>
<pre class="verbatim">:setlocal formatoptions&amp; formatoptions+=ro
</pre>

<span id="matupu-1"></span><h4 class="unnumberedsubsec">マップ</h4>

<p>カレントバッファの中だけで機能するマップを作るには次のコマンドを使ひます:
</p>
<pre class="verbatim">:map &lt;buffer&gt;
</pre>
<p>上述したやうに、マップは二段階に分けて作る必要があります。ファイルタイププラグインで機能を定義する例を示します:
</p>
<pre class="verbatim">if !hasmapto('&lt;Plug&gt;JavaImport')
map &lt;buffer&gt; &lt;unique&gt; &lt;LocalLeader&gt;i &lt;Plug&gt;JavaImport
endif
noremap &lt;buffer&gt; &lt;unique&gt; &lt;Plug&gt;JavaImport oimport &quot;&quot;&lt;Left&gt;&lt;Esc&gt;
</pre>
<p>|<a href="eval_002etxt.html#hasmapto_0028_0029">hasmapto()</a>| を使つて、ユーザーが既に &lt;Plug&gt;JavaImport に對してマップを定義してゐるかどうかを調べます。未定義ならファイルタイププラグインの標準のマップを定義します。マップは &lt;LocalLeader&gt; で開始します。さうすることで、ファイルタイププラグインのマップを開始するキーをユーザーが選擇できます。初期設定はバックスラッシュです。
</p>
<p>&quot;&lt;unique&gt;&quot; を使つて、マップが既に存在したとき、あるいは既存のマップと重複したときにエラーメッセージが表示されるやうにします。
</p>
<p>|<a href="map_002etxt.html#g_t_003anoremap">:noremap</a>| を使つて、ユーザーが定義した他のマップの影響を受けないやうにします。&quot;:noremap &lt;script&gt;&quot; を使ふと、スクリプトの中で定義した &lt;SID&gt; で始まるマップだけが再マップされます。
</p>
<p>ユーザーがファイルタイププラグインのマップを無效化できる仕組みを提供しなければなりません。例へば、&quot;mail&quot; ファイルタイプのプラグインなら次のやうにします:
</p>
<pre class="verbatim">&quot; マップを追加する。ユーザーが望まない場合は追加しない。
if !exists(&quot;no_plugin_maps&quot;) &amp;&amp; !exists(&quot;no_mail_maps&quot;)
&quot; &quot;&gt; &quot; を插入して引用する
if !hasmapto('&lt;Plug&gt;MailQuote')
vmap &lt;buffer&gt; &lt;LocalLeader&gt;q &lt;Plug&gt;MailQuote
nmap &lt;buffer&gt; &lt;LocalLeader&gt;q &lt;Plug&gt;MailQuote
endif
vnoremap &lt;buffer&gt; &lt;Plug&gt;MailQuote :s/^/&gt; /&lt;CR&gt;
nnoremap &lt;buffer&gt; &lt;Plug&gt;MailQuote :.,$s/^/&gt; /&lt;CR&gt;
endif
</pre>
<p>ここでは 2 つのグローバル變數が使はれてゐます:
</p><table>
<tr><td width="30%">|<a href="filetype_002etxt.html#no_005fplugin_005fmaps">no_plugin_maps</a>|</td><td width="70%">すべてのファイルタイププラグインのマップを無效化</td></tr>
<tr><td width="30%">|<a href="filetype_002etxt.html#no_005fmail_005fmaps">no_mail_maps</a>|</td><td width="70%">&quot;mail&quot; ファイルタイプのマップを無效化</td></tr>
</table>


<span id="yuzaDing-Yi-komando-1"></span><h4 class="unnumberedsubsec">ユーザー定義コマンド</h4>

<p>ファイルタイプ用のユーザー定義コマンドを追加して、それを 1 つのバッファの中だけで使へるやうにするには、|<a href="map_002etxt.html#g_t_003acommand">:command</a>| の引數に &quot;-buffer&quot; を指定します。例:
</p>
<pre class="verbatim">:command -buffer  Make  make %:r.s
</pre>

<span id="Bian-Shu--1"></span><h4 class="unnumberedsubsec">變數</h4>

<p>ファイルタイププラグインは對應するすべてのバッファに對して實行されます。スクリプトローカル變數 |<a href="eval_002etxt.html#s_003avar">s:var</a>| はすべての實行で共有されます。バッファごとの變數を使ひたい場合はバッファローカル變數 |<a href="eval_002etxt.html#b_003avar">b:var</a>| を使つてください。
</p>

<span id="Guan-Shu-"></span><h4 class="unnumberedsubsec">函數</h4>

<p>函數は一度だけ定義すれば十分です。しかし、ファイルタイププラグインは對應するファイルが開かれるたびに讀み込まれます。次のやうにすると函數が一度だけ定義されるやうになります:
</p>
<pre class="verbatim">:if !exists(&quot;*s:Func&quot;)
:  function s:Func(arg)
:    ...
:  endfunction
:endif
</pre>
<span id="undo_005findent"></span><span id="undo_005fftplugin"></span><span id="index-undo_005findent"></span>
<span id="index-undo_005fftplugin"></span>
<span id="index-puraguin-andou"></span>
<p>アンドゥ
</p>
<p>ユーザーが &quot;:setfiletype xyz&quot; としたとき、それ以前のファイルタイプの效果は無效になるべきです。b:undo_ftplugin 變數にコマンドを設定し、ファイルタイププラグインの設定をアンドゥするやうにしてください。例:
</p>
<pre class="verbatim">let b:undo_ftplugin = &quot;setlocal fo&lt; com&lt; tw&lt; commentstring&lt;&quot;
    \ . &quot;| unlet b:match_ignorecase b:match_words b:match_skip&quot;
</pre>
<p>&quot;<code>:setlocal</code>&quot; でオプション名の後に &quot;&lt;&quot; を付けると、そのオプションをグローバルな値でリセットします。オプションをリセットするにはこの方法が一番です。
</p>
<p>このやうに行繼續を使ふには &rsquo;<samp>cpoptions</samp>&rsquo; から &quot;C&quot; フラグを取り除く必要があります。上述の |<a href="#use_002dcpo_002dsave">use-cpo-save</a>| を參照してください。
</p>
<p>インデントスクリプトの效果をアンドゥする爲には、それに應じた b:undo_indent 變數を設定すべきです。
</p>

<span id="huairuMing-"></span><h4 class="unnumberedsubsec">ファイル名</h4>

<p>ファイルタイププラグインのファイル名にはファイルタイプ名が含まれてゐなければなりません |<a href="usr_005f05_002etxt.html#ftplugin_002dname">ftplugin-name</a>|。次の 3 つのうちのどれかにしてください:
</p>
<pre class="verbatim">.../ftplugin/stuff.vim
.../ftplugin/stuff_foo.vim
.../ftplugin/stuff/bar.vim
</pre>
<p>&quot;stuff&quot; はファイルタイプ名、&quot;foo&quot; と &quot;bar&quot; は任意の名前です。
</p>

<span id="ftplugin_002dspecial"></span><span id="index-ftplugin_002dspecial"></span>
<span id="index-puraguin-Yao-Yue-"></span>
<span id="Yao-Yue-"></span><h4 class="unnumberedsubsec">要約</h4>

<p>ファイルタイププラグインの特有事項を要約します:
</p>
<dl compact="compact">
<dt>&lt;LocalLeader&gt;</dt>
<dd><p>&quot;maplocalleader&quot; の値。ユーザーがその變數にキーを設定することで、ファイルタイププラグインのマップの開始キーを指定できる。
</p>
</dd>
<dt>:map &lt;buffer&gt;</dt>
<dd><p>バッファローカルなマップを定義する。
</p>
</dd>
<dt>:noremap &lt;script&gt;</dt>
<dd><p>同スクリプトで定義してゐる &lt;SID&gt; で始まるマップだけを再マップする。
</p>
</dd>
<dt>:setlocal</dt>
<dd><p>カレントバッファのオプションのみ設定する。
</p>
</dd>
<dt>:command -buffer</dt>
<dd><p>バッファローカルなユーザー定義コマンドを定義する。
</p>
</dd>
<dt>exists(&quot;*s:Func&quot;)</dt>
<dd><p>函數が定義濟かどうかをチェックする。
</p></dd>
</dl>

<p>プラグイン全般に關する事項は |<a href="#plugin_002dspecial">plugin-special</a>| を參照してください。
</p>
<span id="g_t41_002e13"></span><span id="write_002dcompiler_002dplugin"></span><span id="index-write_002dcompiler_002dplugin"></span>
<span id="index-konpairapuraguinwoShu-ku"></span>
<span id="konpairapuraguinwoShu-ku"></span><h3 class="section">コンパイラプラグインを書く</h3>

<p>コンパイラプラグインは特定のコンパイラを使ふためのオプションを設定します。ユーザーは |<a href="quickfix_002etxt.html#g_t_003acompiler">:compiler</a>| コマンドでその設定を讀み込むことができます。設定されるオプションは主に &rsquo;<samp>errorformat</samp>&rsquo; と &rsquo;<samp>makeprg</samp>&rsquo; です。
</p>
<p>百聞は一見に如かず。次のコマンドですべての標準コンパイラプラグインを開くことができます:
</p>
<pre class="verbatim">:next $VIMRUNTIME/compiler/*.vim
</pre>
<p>|<a href="editing_002etxt.html#g_t_003anext">:next</a>| を使つて次のプラグインファイルに移動してください。
</p>
<p>これらのファイルには 2 つの特有事項があります。1 つは、標準ファイルに對して設定を追加したり上書きしたりできる仕組みです。標準ファイルの先頭は次のやうになつてゐます:
</p>
<pre class="verbatim">:if exists(&quot;current_compiler&quot;)
:  finish
:endif
:let current_compiler = &quot;mine&quot;
</pre>
<p>コンパイラファイルを書いて、それを個人用のランタイムディレクトリ (例へば Unixなら ~/.vim/compiler) に置いたとき、&quot;current_compiler&quot; 變數を設定することで標準ファイルの設定をスキップすることができます。
<span id="g_t_003aCompilerSet"></span><span id="index-_003aCompilerSet"></span>
2 つ目は、&quot;:compiler!&quot; が使はれたときは &quot;:set&quot; を使ひ、&quot;:compiler&quot; が使はれたときは &quot;:setlocal&quot; を使ふ仕組みです。Vim はそのために &quot;:CompilerSet&quot; といふユーザーコマンドを定義します。古い Vim はそれを定義しないので、プラグインの中で定義してください。例:
</p>
<pre class="verbatim">if exists(&quot;:CompilerSet&quot;) != 2
command -nargs=* CompilerSet setlocal &lt;args&gt;
endif
CompilerSet errorformat&amp;                &quot; use the default 'errorformat'
CompilerSet makeprg=nmake
</pre>
<p>コンパイラプラグインを書いて、それを Vim の配布物に含めたり、システムのランタイムディレクトリに入れたりする場合は、上記の方法を使つてください。
&quot;current_compiler&quot; がユーザープラグインで設定された場合は何も實行しないやうにします。
</p>
<p>コンパイラプラグインを書いて標準プラグインの設定を上書きする場合は &quot;current_compiler&quot; をチェックしないやうにします。そのプラグインは最後に讀み込まれないといけないので、&rsquo;<samp>runtimepath</samp>&rsquo; の最後にあるディレクトリに置きます。例へば、Unix なら ~/.vim/after/compiler などです。
</p>
<span id="g_t41_002e14"></span><span id="write_002dplugin_002dquickload"></span><span id="index-write_002dplugin_002dquickload"></span>
<span id="index-puraguinwoShu-ku-_0028Gao-Su-rodoBan-_0029"></span>
<span id="puraguinwoShu-ku-_0028Gao-Su-rodoBan-_0029"></span><h3 class="section">プラグインを書く (高速ロード版)</h3>

<p>プラグインが成長し、とても大きくなることがあります。すると、起動速度は遲くなつてきます。例へそのプラグインをたまにしか使はないとしても遲くなります。さういふときはクイックロードプラグインの出番です。
</p>
<p>基本的なアイデアはプラグインを 2 回に分けて讀み込むといふことです。1 囘目はユーザー定義コマンドやマップを定義して機能を提供します。2 囘目は機能を實裝する函數を定義します。
</p>
<p>スクリプトを 2囘讀み込むことがクイックロードだといふと驚かれるかもしれません。この手法の意味は、1 囘目は高速に讀み込み、スクリプトの重い部分は 2 囘目に後回しにするといふことです。2 囘目の讀み込みは、ユーザーが實際にその機能を使用したときに發生します。あなたがその機能を常に使ふなら、これは逆に遲くなつてしまひます。
</p>
<blockquote>
<p><strong>Note:</strong> Vim 7 以降では代はりの方法があります。|<a href="#g_t41_002e15">41.15</a>| で說明されてゐる |<a href="eval_002etxt.html#autoload">autoload</a>| 機能を使ふ方法です。
</p></blockquote>

<p>次に例を示します:
</p>
<pre class="verbatim">&quot; クイックロードのデモ用のグローバルプラグイン
&quot; Last Change:  2005 Feb 25
&quot; Maintainer:   Bram Moolenaar &lt;Bram@vim.org&gt;
&quot; License:  This file is placed in the public domain.

if !exists(&quot;s:did_load&quot;)
command -nargs=* BNRead  call BufNetRead(&lt;f-args&gt;)
map &lt;F19&gt; :call BufNetWrite('something')&lt;CR&gt;

let s:did_load = 1
exe 'au FuncUndefined BufNet* source ' . expand('&lt;sfile&gt;')
finish
endif

function BufNetRead(...)
echo 'BufNetRead(' . string(a:000) . ')'
&quot; read 機能をここに書く
endfunction

function BufNetWrite(...)
echo 'BufNetWrite(' . string(a:000) . ')'
&quot; write 機能をここに書く
endfunction
</pre>
<p>このスクリプトが最初に讀み込まれたとき、&quot;s:did_load&quot; は設定されてゐません。&quot;if&quot; と &quot;endif&quot; の閒のコマンドが實行されます。|<a href="repeat_002etxt.html#g_t_003afinish">:finish</a>| コマンドによつて終了し、スクリプトの殘りの部分は實行されません。
</p>
<p>2 囘目に讀み込まれたときは &quot;s:did_load&quot; が存在するので、&quot;endif&quot; 以降のコマンドが實行されます。この部分では (長くなる可能性のある) BufNetRead() 函數と BufNetWrite() 函數を定義します。
</p>
<p>このスクリプトをプラグインディレクトリに置くと、Vim の起動時に實行されます。處理の流れは次のやうになります:
</p>
<ol>
<li> 起動時にスクリプトが讀み込まれる。&quot;BNRead&quot; コマンドが定義され、<code class="tt-key">&lt;F19&gt;</code> キーにマップが設定される。自動コマンドの |<a href="autocmd_002etxt.html#FuncUndefined">FuncUndefined</a>| が定義される。&quot;<code>:finish</code>&quot; コマンドによつてスクリプトが終了する。

</li><li> ユーザーが BNRead コマンド實行する、または <code class="tt-key">&lt;F19&gt;</code> キーを押す。BufNetRead() 函數か BufNetWrite() 函數が呼び出される。

</li><li> Vim はその函數を見つけることができず、自動コマンドの |<a href="autocmd_002etxt.html#FuncUndefined">FuncUndefined</a>| イベントを發行する。函數名が &quot;BufNet*&quot; といふパターンにマッチするので、&quot;source fname&quot; コマンドが實行される。&quot;fname&quot; はスクリプトの名前になります。スクリプトがどこに保存されてゐても、&quot;&lt;sfile&gt;&quot; が展開されてファイル名になります (|<a href="eval_002etxt.html#expand_0028_0029">expand()</a>|參照)。

</li><li> スクリプトが再び讀み込まれる。&quot;s:did_load&quot; 變數が存在するので函數が定義される。
</li></ol>

<p>遲延ロードされる函數の名前が |<a href="autocmd_002etxt.html#FuncUndefined">FuncUndefined</a>| 自動コマンドのパターンにマッチしてゐることに注意してください。他のプラグインがこのパターンにマッチする函數を定義してゐるとうまく動きません。
</p>
<span id="g_t41_002e15"></span><span id="write_002dlibrary_002dscript"></span><span id="index-write_002dlibrary_002dscript"></span>
<span id="index-raiburarisukuriputowoShu-ku"></span>
<span id="raiburarisukuriputowoShu-ku"></span><h3 class="section">ライブラリスクリプトを書く</h3>

<p>いろいろな場所で同じ機能が必要になることがあります。コードが 2、3 行以上になる場合は、それを 1 つのスクリプトに入れて、他のスクリプトから使へるやうにしたくなると思ひます。そのやうなスクリプトをライブラリスクリプトと呼びます。
</p>
<p>自分でライブラリスクリプトを讀み込むことは可能ですが、同じスクリプトを二重に讀み込まないやうにする必要があります。それには |<a href="eval_002etxt.html#exists_0028_0029">exists()</a>| 函數を使ひます。例:
</p>
<pre class="verbatim">if !exists('*MyLibFunction')
    runtime library/mylibscript.vim
endif
call MyLibFunction(arg)
</pre>
<p>&rsquo;<samp>runtimepath</samp>&rsquo; に設定されたディレクトリの中の &quot;library/mylibscript.vim&quot; の中で MyLibFunction() が定義されてゐる必要があります。
</p>
<p>これをより簡單にするために、Vim には autoload といふ仕組みがあります。同じことを次のやうに書くことができます:
</p>
<pre class="verbatim">call mylib#myfunction(arg)
</pre>
<p>この方がずつと簡單でせう？ Vim は函數の名前を見て、それが未定義なら、&rsquo;<samp>runtimepath</samp>&rsquo; の中から &quot;autoload/mylib.vim&quot; を探します。そのスクリプトは函數 &quot;mylib#myfunction()&quot; を定義してゐなければなりません。
</p>
<p>mylib.vim には他の函數も入れられます。ライブラリスクリプトの中では自由に函數を作ることができます。ただし、函數名の &rsquo;#&rsquo; より前の部分はスクリプトの名前と同じにする必要があります。さうしないと Vim はどのスクリプトを讀み込めばいいのかわかりません。
</p>
<p>ライブラリスクリプトをたくさん書く場合は、サブディレクトリを使ふといいかもしれません。例:
</p>
<pre class="verbatim">call netlib#ftp#read('somefile')
</pre>
<p>Unix では、このライブラリスクリプトは次のやうな場所に置かれます:
</p>
<pre class="verbatim">~/.vim/autoload/netlib/ftp.vim
</pre>
<p>函數は次のやうに定義します:
</p>
<pre class="verbatim">function netlib#ftp#read(fname)
    &quot;  ftp を使つてファイルを讀み込む
endfunction
</pre>
<p>函數定義と函數呼び出しではまつたく同じ名前が使はれます。最後の &rsquo;#&rsquo; より前の部分がサブディレクトリとスクリプトの名前に對應してゐます。
</p>
<p>同じ方法で變數を扱ふこともできます:
</p>
<pre class="verbatim">let weekdays = dutch#weekdays
</pre>
<p>これによつて &quot;autoload/dutch.vim&quot; が讀み込まれます。そのスクリプトには例へば次のやうなコードが書かれてゐます:
</p>
<pre class="verbatim">let dutch#weekdays = ['zondag', 'maandag', 'dinsdag', 'woensdag',
    \ 'donderdag', 'vrijdag', 'zaterdag']
</pre>
<p>より詳しくは |<a href="eval_002etxt.html#autoload">autoload</a>| を參照してください。
</p>
<span id="g_t41_002e16"></span><span id="distribute_002dscript"></span><span id="index-distribute_002dscript"></span>
<span id="index-Vim-script-woPei-Bu-suru"></span>
<span id="Vim-script-woPei-Bu-suru"></span><h3 class="section">Vim script を配布する</h3>

<p>Vim ユーザーは Vim のウェブサイト <a href="http://www.vim.org">http://www.vim.org</a> でスクリプトを探します。便利なスクリプトを作つたら、ぜひ共有しませう！
</p>
<p>Vim script はどのシステムでも使へます。tar や gzip コマンドは存在しないことがあります。ファイルをまとめたり壓縮したりするには &quot;zip&quot; ユーティリティが推奬されてゐます。
</p>
<p>可搬性を最大限に高めるには、Vim 自身を使つてスクリプトをパッケージ化します。それには Vimball ユーティリティを使ひます。|<a href="pi_005fvimball_002etxt.html#vimball">vimball</a>| を參照。
</p>
<p>自動更新するための行を書いておくと便利です。|<a href="pi_005fgetscript_002etxt.html#glvs_002dplugins">glvs-plugins</a>| を參照。
</p>
<hr>
<div class="header">
<p>
Next: <a href="usr_005f42_002etxt.html" accesskey="n" rel="next">usr_42.txt</a>, Previous: <a href="usr_005f40_002etxt.html" accesskey="p" rel="prev">usr_40.txt</a>, Up: <a href="Mu-Ci-.html" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
