<!DOCTYPE html>
<html lang="ja">
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>

<title>usr_07.txt (Vim Reference Manual)</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="description" content="usr_07.txt (Vim Reference Manual)">
<meta name="keywords" content="usr_07.txt (Vim Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="Mu-Ci-.html" rel="start" title="目次">
<link href="Indexes-CP.html" rel="index" title="Indexes CP">
<link href="Mu-Ci-.html" rel="up" title="目次">
<link href="usr_005f08_002etxt.html" rel="next" title="usr_08.txt">
<link href="usr_005f06_002etxt.html" rel="prev" title="usr_06.txt">
<style>
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="ja">
<span id="usr_005f07_002etxt"></span><div class="header">
<p>
Next: <a href="usr_005f08_002etxt.html" accesskey="n" rel="next">usr_08.txt</a>, Previous: <a href="usr_005f06_002etxt.html" accesskey="p" rel="prev">usr_06.txt</a>, Up: <a href="Mu-Ci-.html" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Fu-Shu-nohuairuwoKai-ku"></span><h2 class="unnumbered">複數のファイルを開く</h2>
<pre class="verbatim">*usr_07.txt*	For Vim バージョン 8.1.  Last change: 2017 Sep 18

		     VIM USER MANUAL - by Bram Moolenaar

			  複數のファイルを開く
</pre>

<p>どんなにファイルが多くても心配はいりません。Vim を複數起動することなしに、それらのファイルを編輯できます。作業するファイルのリストを定義して、他のファイルにジャンプしたりテキストをコピーしたりできます。
</p>
<table>
<tr><td width="30%">|<a href="#g_t07_002e1">07.1</a>|</td><td width="70%">他のファイルを開く</td></tr>
<tr><td width="30%">|<a href="#g_t07_002e2">07.2</a>|</td><td width="70%">ファイルのリスト</td></tr>
<tr><td width="30%">|<a href="#g_t07_002e3">07.3</a>|</td><td width="70%">他のファイルにジャンプする</td></tr>
<tr><td width="30%">|<a href="#g_t07_002e4">07.4</a>|</td><td width="70%">バックアップファイル</td></tr>
<tr><td width="30%">|<a href="#g_t07_002e5">07.5</a>|</td><td width="70%">他のファイルにテキストをコピーする</td></tr>
<tr><td width="30%">|<a href="#g_t07_002e6">07.6</a>|</td><td width="70%">讀み込み專用モード</td></tr>
<tr><td width="30%">|<a href="#g_t07_002e7">07.7</a>|</td><td width="70%">ファイル名の變更</td></tr>
</table>

<span id="g_t07_002e1"></span><span id="index-Ta-nohuairuwoKai-ku"></span>
<span id="Ta-nohuairuwoKai-ku"></span><h3 class="section">他のファイルを開く</h3>

<p>いままでは、ファイルを開くごとに Vim を起動しなければなりませんでしたが、もつと簡單な方法があります。次のコマンドを使つてください:
</p>
<pre class="verbatim">:edit foo.txt
</pre>
<p>ファイル名は &quot;<samp>foo.txt</samp>&quot; に限らず何でも使へます。Vim は現在のファイルを閉ぢて、指定されたファイルを開きます。ファイルの變更が保存されてゐない場合は、エラーメッセージが表示され、新しいファイルは開かれません。
</p>
<div class="display">
<pre class="display">E37: 最後の變更が保存されてゐません (! で變更を破毀)
</pre></div>

<blockquote>
<p><strong>Note:</strong> <br>
エラーメッセージの先頭には エラーID が表示されます。エラーの意味や原因がわからない場合は、この ID をヘルプで引いてください。上記エラーの場合は、このやうにします:
</p>
<pre class="verbatim">:help E37
</pre></blockquote>

<p>このエラーを囘避するには、次のコマンドでファイルを保存してください:
</p>
<pre class="verbatim">:write
</pre>
<p>あるいは、變更を破毀して新しいファイルを開くこともできます。(&lsquo;<samp>!</samp>&rsquo;) 文字を使つてください:
</p>
<pre class="verbatim">:edit! foo.txt
</pre>
<p>ファイルの變更を保存せずに他のファイルを開きたい場合は、ファイルを隱す方法もあります:
</p>
<pre class="verbatim">:hide edit foo.txt
</pre>
<p>ファイルの變更はまだ破毀されませんが、ファイルは畫面外に隱れてしまひます。詳しくは |<a href="usr_005f22_002etxt.html#g_t22_002e4">22.4</a>| バッファリスト で說明します。
</p>
<span id="g_t07_002e2"></span><span id="index-huairunorisuto"></span>
<span id="huairunorisuto"></span><h3 class="section">ファイルのリスト</h3>

<p>Vim を起動するときに、複數のファイルを指定することができます。例:
</p>
<pre class="verbatim">vim one.c two.c three.c
</pre>
<p>このコマンドは Vim を起動し、3 つのファイルを開くやうに指示してゐます。Vim は 1 つ目のファイル (<samp>one.c</samp>) だけを表示します。そのファイルの編輯が終はり、次のファイル (<samp>two.c</samp>) を編輯したい場合はこのコマンドを使ひます:
</p>
<pre class="verbatim">:next
</pre>
<p>ファイルの變更が保存されてゐない場合は、エラーメッセージが表示され、&quot;<code>:next</code>&quot; コマンドは中斷されます。前節で述べた &quot;<code>:edit</code>&quot; の場合と同じです。變更を破毀するには次のコマンドを使ひます。
</p>
<pre class="verbatim">:next!
</pre>
<p>しかしほとんどの場合、變更を保存してから次のファイルを開くと思ひます。それには專用のコマンドが用意されてゐます。
</p>
<pre class="verbatim">:wnext
</pre>
<p>これは次の 2 つのコマンドを使ふのと同じ結果となります。
</p>
<pre class="verbatim">:write
:next
</pre>

<span id="Si-hadokoniiruno_003f"></span><h4 class="unnumberedsubsec">私はドコにゐるの？</h4>

<p>今編輯してゐるのが引數リスト中のどのファイルなのかは、ウィンドウタイトルを見ればわかります。そこに &quot;(2 of 3)&quot; のやうな表示があります。この場合は全部で 3 つのファイルがあり、今は 2 つ目を編輯してゐるといふ意味です。次のコマンドでファイルの一覽を表示できます:
</p>
<pre class="verbatim">:args
</pre>
<p>これは &quot;arguments&quot; の省略形です。結果は次のやうに表示されます。
</p>
<pre class="verbatim">one.c [two.c] three.c
</pre>
<p>Vim を起動したときに指定したファイルが表示されます。編輯中のファイル (ここでは &quot;<samp>two.c</samp>&quot;) は &lsquo;<samp>[]</samp>&rsquo; 記號で圍んで表示されます。
</p>

<span id="Ta-nohuairuhenoYi-Dong-"></span><h4 class="unnumberedsubsec">他のファイルへの移動</h4>

<p>これはファイルを 1 つ戾るコマンドです。
</p>
<pre class="verbatim">:previous
</pre>
<p>&quot;<code>:next</code>&quot; コマンドと同じ動作ですが、移動する方向が違ひます。このコマンドにも、ファイル保存してから移動する專用のコマンドがあります。
</p>
<pre class="verbatim">:wprevious
</pre>
<p>一覽の最後のファイルに移動するには次のコマンドを使ひます。
</p>
<pre class="verbatim">:last
</pre>
<p>最初のファイルに戾るには次のコマンドです。
</p>
<pre class="verbatim">:first
</pre>
<p>&quot;:wlast&quot; とか &quot;:wfirst&quot; みたいなコマンドはありません。
</p>
<p>&quot;<code>:next</code>&quot; と &quot;<code>:previous</code>&quot; にはカウンタを指定できます。例へば、2 つ先のファイルに進むにはこのやうにします。
</p>
<pre class="verbatim">:2next
</pre>

<span id="Zi-Dong-Bao-Cun-"></span><h4 class="unnumberedsubsec">自動保存</h4>

<p>いろんなファイルを編輯して回るときには、&quot;<code>:write</code>&quot; で保存するのを忘れないでください。變更を保存せずに移動しようとすると、エラーメッセージが表示されます。移動するときはいつでも變更を保存したいと思つた場合は、次のやうに設定してください。變更が自動的に保存されるやうになります。
</p>
<pre class="verbatim">:set autowrite
</pre>
<p>保存して欲しくないファイルを編輯するときは、機能をオフに設定してください。
</p>
<pre class="verbatim">:set noautowrite
</pre>

<span id="Ta-nohuairurisutodeBian-Ji-suru"></span><h4 class="unnumberedsubsec">他のファイルリストで編輯する</h4>

<p>Vim を再起動しなくても、ファイルリストを變更できます。例へば、他の 3 つのファイルを編輯するには次のやうにします。
</p>
<pre class="verbatim">:args five.c six.c seven.h
</pre>
<p>シェルと同じやうにワイルドカードを使ふこともできます。
</p>
<pre class="verbatim">:args *.txt
</pre>
<p>リストの最初のファイルがまず開かれます。ここでも、現在のファイルの變更をまだ保存してゐない場合は、ファイルを保存するか、&quot;<code>:args!</code>&quot; (&lsquo;<samp>!</samp>&rsquo; が付いてゐます) を使つて變更を破毀する必要があります。
</p>

<span id="Zui-Hou-nohuairumadeBian-Ji-sita_003f"></span><h4 class="unnumberedsubsec">最後のファイルまで編輯した？</h4>
<span id="arglist_002dquit"></span><span id="index-arglist_002dquit"></span>
<p>ファイルリストが使はれると、Vim は、すべてのファイルが編輯對象だと判斷します。閒違つて Vim を終了してしまふことがないやうに、すべてのファイルをまだ開いてゐないのに終了しようとした場合は、エラーメッセージが表示されます:
</p>
<div class="display">
<pre class="display">E173: 編輯すべきファイルがあと 46 個あります。
</pre></div>

<p>本當に終了してよければ、もう一度終了コマンドを實行してください。今度は終了できます (閒に他のコマンドを挾まないでください)。
</p>
<span id="g_t07_002e3"></span><span id="index-Ta-nohuairuniziyanpusuru"></span>
<span id="Ta-nohuairuniziyanpusuru"></span><h3 class="section">他のファイルにジャンプする</h3>

<p><kbd>CTRL-^</kbd> を使ふと 2 つのファイル閒を素早く移動できます(日本語キーボードなら <code class="tt-key">^</code> は &rsquo;<code class="tt-key">-</code>&rsquo; キーの右側 (「<code class="tt-key">へ</code>」キー) にあります)。例:
</p>
<pre class="verbatim">:args one.c two.c three.c
</pre>
<p>上を實行すると &quot;<samp>one.c</samp>&quot; が開きます。
</p>
<pre class="verbatim">:next
</pre>
<p>これで、&quot;<samp>two.c</samp>&quot; になりました。ここで <kbd>CTRL-^</kbd> を使ふと &quot;<samp>one.c</samp>&quot; に戾ります。もう一度 <kbd>CTRL-^</kbd> を押すと &quot;<samp>two.c</samp>&quot; に戾ります。さらに <kbd>CTRL-^</kbd> を使ふと &quot;<samp>one.c</samp>&quot; になります。さて、ここで次のコマンドを實行します。
</p>
<pre class="verbatim">:next
</pre>
<p>すると、&quot;<samp>three.c</samp>&quot; になります。<kbd>CTRL-^</kbd> コマンドはファイルリスト中での現在地を變更しません。&quot;<code>:next</code>&quot; や &quot;<code>:previous</code>&quot; のやうなコマンドだけが現在地を變更します。
</p>
<p>直前に編輯していたファイルのことをオルタネートファイル (alternate file) と言ひます。Vim の起動直後はオルタネートファイルがまだ無いため <kbd>CTRL-^</kbd> は動作しません。
</p>

<span id="Ding-Yi-Ji-maku"></span><h4 class="unnumberedsubsec">定義濟マーク</h4>

<p>他のファイルにジャンプすると、2 つの定義濟マークが使へるやうになります。これは非常に便利です。
</p>
<pre class="verbatim">`&quot;
</pre>
<p>このコマンドを實行すると、以前にファイルを開いてゐたときにゐた場所にカーソルが移動します。もう 1 つは、最後に變更を加へた場所に設定されたマークです。
</p>
<pre class="verbatim">`.
</pre>
<p>例へば、&quot;<samp>one.txt</samp>&quot; を編輯してゐるとします。ファイルの眞ん中あたりで &quot;<code>x</code>&quot; を使つて文字を削除しました。そして、&quot;<code>G</code>&quot; を使つて最後の行に移動し、&quot;<code>:w</code>&quot; でファイルを保存します。他のファイルをいくつか編輯してから、&quot;<code>:edit one.txt</code>&quot; で &quot;<samp>one.txt</samp>&quot; に戾つてきました。ここで、<code>`&quot;</code> を實行すると、ファイルの最後の行にカーソルが移動します。<code>`.</code> を實行すると、文字を削除した場所に移動します。ファイル內をいろいろと移動した後でも、<code>`&quot;</code> と <code>`.</code> は同じ場所を覺えてゐます。少なくとも、他の變更を加へたり、別のファイルに移動したりするまでは。
</p>

<span id="huairumaku"></span><h4 class="unnumberedsubsec">ファイルマーク</h4>

<p>4 章 (|<a href="usr_005f04_002etxt.html#g_t04_002e1">04.1</a>|) では &quot;<code>mx</code>&quot; でマークを付け、&quot;<code>`x</code>&quot; でその場所にジャンプする方法を說明しました。そのマークはファイルの中だけで使へます。別のファイルを開いて、それに同じマークを付けても、マークはそのファイルに固有のものとなります。つまり各ファイルはそれぞれのマークを持つてゐて、ファイル內に閉ぢてゐるといふことです。
</p>
<p>いままでは、マークに小文字を使つてきましたが、大文字のマークも使へます。大文字のマークはグローバルで、どのファイルからでも使へます。例へば &quot;<samp>foo.txt</samp>&quot; といふファイルを開き、&quot;50%&quot; コマンドでファイルの眞ん中にジャンプして下がり、その場所に <var>F</var> といふマークを付けたとします:
</p>
<pre class="verbatim">50%mF
</pre>
<p>次に &quot;<samp>bar.txt</samp>&quot; を開き、最終行にマーク <var>B</var> を付けます:
</p><pre class="verbatim">GmB
</pre>
<p>さて、ここで &quot;<code>'F</code>&quot; コマンドを使ふと、いきなり <samp>foo.txt</samp> の眞ん中にジャンプできます。さらに、他のファイルを開いてから &quot;<code>'B</code>&quot; を入力すると、<samp>bar.txt</samp> の行末に移動できます。
</p>
<p>他の場所を設定するまで、ファイルマークは同じ場所を記憶してゐます。そのため、一度マークを付ければ、何時閒も編輯を行つてからでもそのマークに戾つて來ることができます。
</p>
<p>マークの文字とマークを付けた場所が聯想できるやうな單純なルールを決めておくとよいでせう。例へば、ヘッダーファイルは H、make ファイルは M、C 言語のソースには C といつた具合です。
</p>
<p>マークが置いてある場所を確認するには、&quot;<code>:marks</code>&quot; コマンドにそのマークを指定してください。
</p>
<pre class="verbatim">:marks M
</pre>
<p>マークを複數指定しても構ひません。
</p>
<pre class="verbatim">:marks MCP
</pre>
<p>マークを使はなくても、<kbd>CTRL-O</kbd> と <kbd>CTRL-I</kbd> を使へば、古い場所と新しい場所の閒をジャンプできることをお忘れなく。
</p>
<span id="g_t07_002e4"></span><span id="index-batukuatupuhuairu"></span>
<span id="batukuatupuhuairu"></span><h3 class="section">バックアップファイル</h3>

<p>初期設定ではバックアップファイルは作成されません。バックアップファイルが必要なら、次のコマンドを實行してください:
</p>
<pre class="verbatim">:set backup
</pre>
<p>バックアップファイルの名前は、ファイル名の後ろに ~ を加へた名前になります。例へば、ファイル名が <samp>data.txt</samp> なら、バックアップファイルは <samp>data.txt~</samp> です。
</p>
<p>&lsquo;<samp>~</samp>&rsquo; 以外の文字を使ひたい場合は、次のやうに設定してください:
</p>
<pre class="verbatim">:set backupext=.bak
</pre>
<p>これで、バックアップファイルの名前が <samp>data.txt.bak</samp> になります。
</p>
<p>もう 1 つのオプション &rsquo;<samp>backupdir</samp>&rsquo; についても說明しませう。これはバックアップファイルを保存するディレクトリを指定するオプションです。初期設定ではバックアップは元ファイルと同じディレクトリに保存されます。たいていの場合はこれで問題ないはずです。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
&rsquo;<samp>writebackup</samp>&rsquo; がオンの場合、&rsquo;<samp>backup</samp>&rsquo; がオフでもバックアップファイルは作成されますが、ファイルの保存が成功すると、そのバックアップファイルはすぐに削除されます。これは、ファイルを保存できなかつたときに、オリジナルファイルが失はれないやうにするための機能です。(失敗の原因は、例へば、ディスクがいつぱいになつたといふのが一番ありがちな理由です。雷にやられるといふのも可能性は低いですがありうることです)。
</p></blockquote>


<span id="orizinaruhuairuwoCan-su"></span><h4 class="unnumberedsubsec">オリジナルファイルを殘す</h4>

<p>ソースファイルを編輯してゐると、變更を加へる前のファイルを殘しておきたいときがあります。しかし、バックアップファイルはファイルを保存するたびに上書きされるので、直前のバックアップしか殘らず、最初のファイルはなくなつてしまひます。
</p>
<p>オリジナルのファイルを殘しておきたい場合は、&rsquo;<samp>patchmode</samp>&rsquo; オプションを設定してください。バックアップファイルを最初に作成するときに使ふ擴張子を指定します。次のやうに設定してください:
</p>
<pre class="verbatim">:set patchmode=.orig
</pre>
<p>例へば、はじめて <samp>data.txt</samp> を開いたときに、變更を加へ、保存しようとすると、變更前のファイルが &quot;<samp>data.txt.orig</samp>&quot; といふ名前でコピーされます。
</p>
<p>その後、ファイルを變更しても、既に &quot;<samp>data.txt.orig</samp>&quot; があるので、上書きはされません。この場合もバックアップファイルは &quot;<samp>data.txt~</samp>&quot; (もしくは &rsquo;<samp>backupext</samp>&rsquo; で指定した名前) で作成されます。
</p>
<p>&rsquo;<samp>patchmode</samp>&rsquo; が空のまま (初期設定) だと、オリジナルファイルは殘りません。
</p>
<span id="g_t07_002e5"></span><span id="index-Ta-nohuairunitekisutowokopisuru"></span>
<span id="Ta-nohuairunitekisutowokopisuru"></span><h3 class="section">他のファイルにテキストをコピーする</h3>

<p>ここではファイルから別のファイルにテキストをコピーする方法を說明します。簡單な例で始めませう。コピーしたいテキストを含んでゐるファイルを開きます。テキストの先頭にカーソルを移動して &quot;<code class="tt-key">v</code>&quot; を押すとビジュアルモードが開始します。テキストの末尾までカーソルを移動して &quot;<code class="tt-key">y</code>&quot; を押します。これでテキストがヤンク (コピー)されました。
</p>
<p>例へば、上の段落をコピーするには、次のやうにします。
</p>
<pre class="verbatim">:edit thisfile
/ここでは
vjjjj$y
</pre>
<p>次に、このテキストをプット (ペースト) したいファイルを開きます。テキストをプットしたい場所にカーソルを動かし、&quot;<code>p</code>&quot; コマンドでプットします。
</p><pre class="verbatim">:edit otherfile
/どこか
p
</pre>
<p>當然ながら、テキストのヤンクには他にもいろんなコマンドが使へます。例へば、&quot;<code>V</code>&quot; でビジュアルモードを開始すると行單位で選擇できますし、<kbd>CTRL-V</kbd> で矩形選擇もできます。&quot;<code>Y</code>&quot; で一行をヤンクしたり、&quot;<code>yaw</code>&quot; で單語をヤンク (yank-a-word) するなど、いろいろできます。
</p>
<p>&quot;<code>p</code>&quot; コマンドはカーソルの後にテキストをプットします。カーソルの前にプットするには &quot;<code>P</code>&quot; を使ひます。Vim はヤンクしたときの選擇單位 (行選擇や矩形選擇) を覺えてゐて、同じ單位でプットします。
</p>

<span id="rezisutawoShi-u"></span><h4 class="unnumberedsubsec">レジスタを使ふ</h4>

<p>あるファイルから別のファイルに數箇所のテキストをコピーしたいとき、何度も何度もファイルを切り換へると時閒がかかります。テキストをレジスタにコピーして手閒を省きませう。
</p>
<p>レジスタとは、Vim がテキストを保持する場所です。ここでは &lsquo;<samp>a</samp>&rsquo; から &lsquo;<samp>z</samp>&rsquo; までの名前が付いたレジスタを使ひます (レジスタは他にもあります)。では、テキストをレジスタ &lsquo;<samp>f</samp>&rsquo; (f は first のつもり) にヤンクしてみませう。
</p>
<pre class="verbatim">&quot;fyas
</pre>
<p>&quot;<code>yas</code>&quot; コマンドで文をヤンクしてゐます。<code>&quot;f</code> はテキストをレジスタ &lsquo;<samp>f</samp>&rsquo; に入れるための指定です。この指定はヤンクコマンドの直前に指定します。
</p>
<p>さらに 3 行をレジスタ &lsquo;<samp>l</samp>&rsquo; (l は line のつもり) にヤンクしてみませう。
</p>
<pre class="verbatim">&quot;l3Y
</pre>
<p>カウンタ (回數指定) は <code>&quot;l</code> の直前に指定することもできます。テキストのブロック(矩形選擇) をレジスタ &lsquo;<samp>b</samp>&rsquo; (b は block のつもり) にヤンクする場合は次のやうにします。
</p>
<pre class="verbatim">CTRL-Vjjww&quot;by
</pre>
<p>レジスタ指定 <code>&quot;b</code> を &quot;<code>y</code>&quot; コマンドの直前で指定してゐる點に注意してください。これは重要なことです。これを &quot;<code>w</code>&quot; コマンドより前に置いてしまふとうまく動きません。
</p>
<p>さて、&lsquo;<samp>f</samp>&rsquo;、&lsquo;<samp>l</samp>&rsquo;、&lsquo;<samp>b</samp>&rsquo; の 3 つのレジスタにテキストをヤンクできました。他のファイルを開いて、テキストを插入したい場所にカーソルを移動し、レジスタの內容をプットしませう。
</p>
<pre class="verbatim">&quot;fp
</pre>
<p>ヤンクの場合と同じく、レジスタ指定 <code>&quot;f</code> は &quot;<code>p</code>&quot; コマンドより前に指定します。どのレジスタからプットしても構ひません。他のテキストをヤンクし直さない限り、レジスタの內容は變はらないので、同じレジスタを何度でも好きなだけプットできます。
</p>
<p>テキストを削除するときにも、レジスタを指定できます。テキストを何ヶ所かに移動するときなどに使つてください。例へば、單語を削除 (delete-a-word) してその內容をレジスタ &lsquo;<samp>w</samp>&rsquo; に入れるには次のやうにします。
</p>
<pre class="verbatim">&quot;wdaw
</pre>
<p>何度も言ふやうですが、レジスタ指定は削除コマンド &quot;<code>d</code>&quot; の前に置いてください。
</p>

<span id="huairuniZhui-Ji-suru"></span><h4 class="unnumberedsubsec">ファイルに追記する</h4>

<p>文章を 1 つのファイルにまとめたい場合は、次のコマンドを使ひます。
</p>
<pre class="verbatim">:write &gt;&gt; logfile
</pre>
<p>カレントファイルの內容が &quot;logfile&quot; の末尾に追記されます。テキストをコピーして、&quot;logfile&quot; を開き、テキストをプットするより簡單です。作業を 2 手節約できます。ただし、ファイルの末尾への追加しかできません。
</p>
<p>ファイルの一部だけ追記したい場合は、ビジュアルモードでテキストを選擇してから &quot;<code>:write</code>&quot; を實行してください。テキストを選擇する方法は他にもありますが、10 章で說明します。
</p>
<span id="g_t07_002e6"></span><span id="index-Du-miIp-miZhuan-Yong-modo"></span>
<span id="Du-miIp-miZhuan-Yong-modo"></span><h3 class="section">讀み込み專用モード</h3>

<p>ファイルを變更する氣はなく、ただファイルの內容を見たいだけのときがあります。普通に開くと、うつかり &quot;<code>:w</code>&quot; を實行して元のファイルを上書きしてしまふ危險があります。さういふときは、讀み込み專用モードでファイルを開いてください。
</p>
<p>Vim を讀み込み專用モードで起動するには、次のコマンドを使ひます。
</p>
<pre class="verbatim">vim -R file
</pre>
<p>Unix なら、次のコマンドも同じ意味になります。
</p>
<pre class="verbatim">view file
</pre>
<p>&quot;file&quot; が讀み込み專用モードで開きます。&quot;<code>:w</code>&quot; をしようとしても、エラーメッセージが表示され保存はされません。
</p>
<p>ファイルに變更を加へようとすると、次のやうな警告が表示されます。
</p>
<div class="display">
<pre class="display">W10: 警告：讀込專用ファイルを變更します
</pre></div>

<p>警告は出ますが、變更は可能です。これは、例へばファイルを讀みやすくフォーマットしたりするためです。
</p>
<p>讀み込み專用モードであることを忘れて、ファイルを修正してしまつたやうなときは、<code>write</code> コマンドに ! を付けて强制保存してください。
</p>
<p>完全にファイルの變更を禁止したい場合は、次のやうにしてください。
</p>
<pre class="verbatim">vim -M file
</pre>
<p>これで、內容を變更しようとしてもエラーになります。例へば、ヘルプファイルはこのモードで表示されてゐます。變更しようとすると、次のエラーメッセージが表示されます。
</p>
<div class="display">
<pre class="display">E21: &rsquo;modifiable&rsquo; がオフなので、變更できません
</pre></div>

<p>-M 引數を使へば Vim を閱覽モードに設定できますが、これは自主規制みたいなもので、次のコマンドを使へば制限はなくなつてしまひます。
</p>
<pre class="verbatim">:set modifiable
:set write
</pre>
<span id="g_t07_002e7"></span><span id="index-huairuMing-noBian-Geng-"></span>
<span id="huairuMing-noBian-Geng-"></span><h3 class="section">ファイル名の變更</h3>

<p>新しいファイルを作成するときに、目的に近いファイルがあるなら、それを利用するのが效率的です。例へば、ファイルを移動するプログラムを作りたいとしませう。ファイルをコピーするプログラムがすでにあるので、それを流用することにしました。
</p>
<pre class="verbatim">:edit copy.c
</pre>
<p>新しいプログラムに必要ない部分は削除してしまひませう。次に、このファイルを新しい名前で保存する必要があります。そのためのコマンドが &quot;<code>:saveas</code>&quot; です。
</p>
<pre class="verbatim">:saveas move.c
</pre>
<p>指定した名前でファイルが保存され、そのファイルが開かれます。そのため、次に &quot;<code>:write</code>&quot; したときは &quot;<samp>move.c</samp>&quot; に保存されます。&quot;<samp>copy.c</samp>&quot; は變更されません。
</p>
<p>ファイルを保存せずに、ファイルの名前だけ變更したい場合は、次のコマンドを使ひます。
</p>
<pre class="verbatim">:file move.c
</pre>
<p>そのファイル (<samp>move.c</samp>) は、實際のファイルではないので、&quot;開いてゐない&quot; (not edited) 扱ひになります。ファイルを保存しようとすると、次のメッセージが表示されることがあります。
</p>
<div class="display">
<pre class="display">E13: ファイルが存在します (! を追加で上書)
</pre></div>

<p>これは、實際のファイルを閒違つて上書きしてしまはないやうにするためです。
</p>
<hr>
<div class="header">
<p>
Next: <a href="usr_005f08_002etxt.html" accesskey="n" rel="next">usr_08.txt</a>, Previous: <a href="usr_005f06_002etxt.html" accesskey="p" rel="prev">usr_06.txt</a>, Up: <a href="Mu-Ci-.html" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
