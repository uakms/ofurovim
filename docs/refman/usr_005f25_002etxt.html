<!DOCTYPE html>
<html lang="ja">
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>

<title>usr_25.txt (Vim Reference Manual)</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="description" content="usr_25.txt (Vim Reference Manual)">
<meta name="keywords" content="usr_25.txt (Vim Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="Mu-Ci-.html#g_t_76ee_6b21" rel="start" title="目次">
<link href="Indexes-CP.html#Indexes-CP" rel="index" title="Indexes CP">
<link href="Mu-Ci-.html#g_t_76ee_6b21" rel="up" title="目次">
<link href="usr_005f26_002etxt.html#usr_005f26_002etxt" rel="next" title="usr_26.txt">
<link href="usr_005f24_002etxt.html#usr_005f24_002etxt" rel="prev" title="usr_24.txt">
<style>
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="ja">
<a name="usr_005f25_002etxt"></a>
<div class="header">
<p>
Next: <a href="usr_005f26_002etxt.html#usr_005f26_002etxt" accesskey="n" rel="next">usr_26.txt</a>, Previous: <a href="usr_005f24_002etxt.html#usr_005f24_002etxt" accesskey="p" rel="prev">usr_24.txt</a>, Up: <a href="Mu-Ci-.html#g_t_76ee_6b21" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html#Indexes-CP" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="tekisutonoZheng-Xing--1"></a>
<h2 class="unnumbered">テキストの整形</h2>
<pre class="verbatim">*usr_25.txt*	For Vim バージョン 8.1.  Last change: 2016 Mar 28

		     VIM USER MANUAL - by Bram Moolenaar

				テキストの整形
</pre>

<p>文章を 1 行に 1 文ずつ書くやうなことはほとんどありません。この章では、テキストが畫面に收まるやうに整形する方法などを說明します。
1 行段落や表を編輯するための便利な機能もあります。
</p>
<table>
<tr><td width="30%">|<a href="#g_t25_002e1">25.1</a>|</td><td width="70%">行を改行する</td></tr>
<tr><td width="30%">|<a href="#g_t25_002e2">25.2</a>|</td><td width="70%">テキストの位置揃へ</td></tr>
<tr><td width="30%">|<a href="#g_t25_002e3">25.3</a>|</td><td width="70%">インデントとタブ</td></tr>
<tr><td width="30%">|<a href="#g_t25_002e4">25.4</a>|</td><td width="70%">長い行の扱ひ</td></tr>
<tr><td width="30%">|<a href="#g_t25_002e5">25.5</a>|</td><td width="70%">表の編輯</td></tr>
</table>

<a name="g_t25_002e1"></a><a name="index-Xing-woGai-Xing-suru"></a>
<a name="Xing-woGai-Xing-suru"></a>
<h3 class="section">行を改行する</h3>

<p>文章を快適に編輯するための機能がいくつかあります。初期設定では行は自動的に改行されません。つまり自分で <code class="tt-key">&lt;Enter&gt;</code> を押す必要があります。プログラムを書くときはその方が便利ですが、ドキュメントを書くときは少し不便です。文章が 70 桁の幅に收まるやうに自分で整形するのは大變でせう。
</p>
<p>&rsquo;<samp>textwidth</samp>&rsquo; オプションを設定すると、行が自動的に改行されるやうになります。例へば、30 桁の幅で文章を書きたい場合は次のやうに設定します:
</p>
<div class="example">
<pre class="example">:set textwidth=30
</pre></div>

<p>そして、テキストを入力します (上の數字はルーラーです):
</p>
<pre class="verbatim">1        2         3
12345678901234567890123456789012345
I taught programming for a whi
</pre>
<p>次に &quot;l&quot; を入力すると 1 行が 30 桁の制限を超えるので、自動的に改行が插入されます。その結果、次のやうになります:
</p>
<pre class="verbatim">1        2         3
12345678901234567890123456789012345
I taught programming for a
whil
</pre>
<p>そのまま續けて文章の殘りを入力しませう:
</p>
<pre class="verbatim">1        2         3
12345678901234567890123456789012345
I taught programming for a
while. One time, I was stopped
by the Fort Worth police,
because my homework was too
hard. True story.
</pre>
<p>自分で改行する必要はありません。改行は自動的に插入されます。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
&rsquo;<samp>wrap</samp>&rsquo; オプションを使ふと長い行を改行して表示できますが、實際に改行文字が插入されるわけではありません。
</p></blockquote>


<a name="Zai-Zheng-Xing-"></a>
<h4 class="unnumberedsubsec">再整形</h4>

<p>Vim はワードプロセッサーではありません。ワードプロセッサーなら、段落の最初の方で文字を削除すると、改行の位置が調整されますが、Vim は違ひます。つまり、1 行目の &quot;&lsquo;<samp>programming</samp>&rsquo;&quot; を削除すると、單にその行が短くなるだけです:
</p>
<pre class="verbatim">1        2         3
12345678901234567890123456789012345
I taught for a
while. One time, I was stopped
by the Fort Worth police,
because my homework was too
hard. True story.
</pre>
<p>これはよくありません。&quot;gq&quot; オペレータを使つて段落を整形しませう。
</p>
<p>まづ、ビジュアルモードを使つてやつてみます。1 行目に移動して次のやうに入力します:
</p>
<div class="example">
<pre class="example">v4jgq
</pre></div>

<p>&quot;v&quot; はビジュアルモードの開始、&quot;4j&quot; で段落の最後まで移動し、&quot;gq&quot; オペレータを實行します。結果:
</p>
<pre class="verbatim">1        2         3
12345678901234567890123456789012345
I taught for a while. One
time, I was stopped by the
Fort Worth police, because my
homework was too hard. True
story.
</pre>
<blockquote>
<p><strong>Note:</strong> <br>
特定の書式に從つた文章なら自動的に整形することもできます。|<a href="change_002etxt.html#auto_002dformat">auto-format</a>| 參照。
</p></blockquote>

<p>&quot;gp&quot; はオペレータなので、ビジュアルモード、カーソルモーション、テキストオブジェクト、の 3 つの方法で適用範圍を選擇できます。
</p>
<p>上記の例は &quot;gq4j&quot; とすることもできます。これはコマンドは短くなりますが、行數を數へないといけません。&quot;}&quot; といふモーションコマンドを使へばもつと簡單です。これは段落の末尾に移動するコマンドです。&quot;gq}&quot; でカーソル位置から段落の末尾までが整形されます。
</p>
<p>テキストオブジェクトを使ふともつと簡單にできます:
</p>
<div class="example">
<pre class="example">gqap
</pre></div>

<p>&quot;ap&quot; は &quot;a-paragraph&quot; といふ意味です。(空行區切りの) 1 つの段落が整形されます。カーソル位置より前の部分も範圍に入ります。
段落が空行で區切られてゐるなら、次のコマンドでファイル全體を整形できます:
</p>
<div class="example">
<pre class="example">gggqG
</pre></div>

<p>&quot;gg&quot; でファイル先頭に移動し、&quot;gqG&quot; でファイル末尾まで整形します。
</p><blockquote>
<p><strong>警告:</strong> <br>
段落が適切に區切られてゐない場合、それらの文章は 1 つにつながつてしまひます。スペースや Tab 文字だけの行があつたりするのはよくあるミスです。それは空白行です。空行ではありません。
</p></blockquote>

<p>整形できるのは單純なプレーンテキストだけではありません。整形の設定については |<a href="change_002etxt.html#fo_002dtable">fo-table</a>| を參照してください。ピリオドの後ろに插入されるスペースの數を變更するには &rsquo;<samp>joinspaces</samp>&rsquo; を參照してください。
</p>
<p>外部プログラムを使つて整形することもできます。Vim の組み込みコマンドで正しく整形できないやうなテキストを編輯するのに便利です。&rsquo;<samp>formatprg</samp>&rsquo; オプション參照。
</p>
<a name="g_t25_002e2"></a><a name="index-tekisutonoWei-Zhi-Jian-e"></a>
<a name="tekisutonoWei-Zhi-Jian-e"></a>
<h3 class="section">テキストの位置揃へ</h3>

<p>テキストを中央揃へするには、次のコマンドを使ひます:
</p>
<div class="example">
<pre class="example">:{range}center [width]
</pre></div>

<p>{range} は通常のコマンドライン範圍指定です。 [width] には中央揃へに使ふ行の幅を指定できます。 [width] を指定しなかつた場合は &rsquo;<samp>textwidth</samp>&rsquo; の設定が使はれます。(&rsquo;<samp>textwidth</samp>&rsquo; が 0 なら 80 が使はれます)
</p>
<p>例:
</p>
<div class="example">
<pre class="example">:1,5center 40
</pre></div>

<p>次のやうな結果になります:
</p>
<pre class="verbatim">  I taught for a while. One
  time, I was stopped by the
Fort Worth police, because my
 homework was too hard. True
            story.
</pre>

<a name="You-Duan-Jian-e"></a>
<h4 class="unnumberedsubsec">右端揃へ</h4>

<p>同樣に、右端揃へするには &quot;<code>:right</code>&quot; コマンドを使ひます:
</p>
<div class="example">
<pre class="example">:1,5right 37
</pre></div>

<p>結果:
</p>
<pre class="verbatim">    I taught for a while. One
   time, I was stopped by the
Fort Worth police, because my
  homework was too hard. True
                       story.
</pre>
<a name="Zuo-Duan-Jian-e"></a>
<h4 class="unnumberedsubsec">左端揃へ</h4>

<p>次のコマンドで左端揃へできます:
</p>
<div class="example">
<pre class="example">:{range}left [margin]
</pre></div>

<p>&quot;<code>:center</code>&quot; や &quot;<code>:right</code>&quot; と違ひ、&quot;<code>:left</code>&quot; の引數に指定する値は行の幅ではありません。左マージンを指定します。省略した場合は、文章は左端にぴつたり寄せられます (マージンに 0 を指定したのと同じ)。5 を指定した場合は 5 つのスペースでインデントされます。例へば、次のやうに使ひます:
</p>
<div class="example">
<pre class="example">:1left 5
:2,5left
</pre></div>

<p>次のやうな結果になります:
</p>
<pre class="verbatim">     I taught for a while. One
time, I was stopped by the
Fort Worth police, because my
homework was too hard. True
story.
</pre>

<a name="Liang-Duan-Jian-e"></a>
<h4 class="unnumberedsubsec">兩端揃へ</h4>

<p>兩端揃へするための組み込みコマンドはありません。しかし、そのためのマクロパッケージが用意されてゐます。パッケージを使ふには、次のコマンドを實行します:
</p>
<div class="example">
<pre class="example">:packadd justify
</pre></div>

<p>または次の行を |<a href="starting_002etxt.html#vimrc">vimrc</a>| に加へてください:
</p>
<div class="example">
<pre class="example">packadd! justify
</pre></div>

<p>新しいビジュアルモードコマンド &quot;<code>_j</code>&quot; が定義されます。ビジュアルモードで範圍選擇して &quot;<code>_j</code>&quot; を實行すればテキストを兩端揃へできます。
</p>
<p>詳しい說明はスクリプトファイルを參照してください。この名前の上で &quot;<code>gf</code>&quot; を使へばファイルを開けます: <samp>$VIMRUNTIME/pack/dist/opt/justify/plugin/justify.vim</samp>
</p>
<p>外部コマンドを使つて整形することもできます。例:
</p>
<div class="example">
<pre class="example">:%!fmt
</pre></div>

<a name="g_t25_002e3"></a><a name="index-indentototabu"></a>
<a name="indentototabu"></a>
<h3 class="section">インデントとタブ</h3>

<p>テキストをインデントすればその部分を目立たせることができます。例へばこのマニュアルでは、例文を示すときに 8 個のスペースまたは Tab 文字でインデントしてゐます。通常なら行頭で <code class="tt-key">Tab</code> キーを押せばインデントできます。例:
</p><pre class="verbatim">the first line
the second line
</pre>
<p><code class="tt-key">Tab</code> キーを押してテキストを插入、<code class="tt-key">&lt;Enter&gt;</code>、また <code class="tt-key">Tab</code> キーを押してテキストを插入します。
&rsquo;<samp>autoindent</samp>&rsquo; オプションを設定すると、自動的にインデントできます:
</p>
<div class="example">
<pre class="example">:set autoindent
</pre></div>

<p>新しい行を開始すると、直前の行と同じだけのインデントが插入されます。上の例なら、<code class="tt-key">&lt;Enter&gt;</code> を押した後の <code class="tt-key">Tab</code> キーが必要なくなります。
</p>

<a name="indentowoZeng-yasu"></a>
<h4 class="unnumberedsubsec">インデントを增やす</h4>

<p>行のインデント量を增やすには &quot;<code>&gt;</code>&quot; オペレータを使ひます。現在行のインデントを增やしたい場合は &quot;<code>&gt;&gt;</code>&quot; を使ふと簡單です。
</p>
<p>インデントの增加量は &rsquo;<samp>shiftwidth</samp>&rsquo; オプションで設定できます。初期設定は 8 です。例へば、&quot;<code>&gt;&gt;</code>&quot; でスペース 4 つ分のインデントを增やしたい場合は次のやうに設定します:
</p>
<div class="example">
<pre class="example">:set shiftwidth=4
</pre></div>

<p>上記例文の 2 行目で &quot;&gt;&gt;&quot; を使ふと、次のやうになります:
</p>
<pre class="verbatim">the first line
    the second line
</pre>
<p>&quot;4&gt;&gt;&quot; は 4 つの行のインデントを增やすコマンドです。
</p>

<a name="tabusutotupu"></a>
<h4 class="unnumberedsubsec">タブストップ</h4>

<p>インデントを 4 桁にしたい場合は &rsquo;<samp>shiftwidth</samp>&rsquo; を 4 に設定します。しかしそれだけでは、<code class="tt-key">&lt;Tab&gt;</code> を押したときのインデントの量はスペース 8 個分のままです。これを變更するには &rsquo;<samp>softtabstop</samp>&rsquo; オプションを設定します:
</p>
<div class="example">
<pre class="example">:set softtabstop=4
</pre></div>

<p>これで、<code class="tt-key">&lt;Tab&gt;</code> キーがスペース 4 個分のインデントになります。既に 4 つスペースでインデントされてゐる場合は &lt;Tab&gt; 文字に置き換へられます (7 バイト節約)。(Tab 文字を使ひたくない場合は &rsquo;<samp>expandtab</samp>&rsquo; を設定してください。)
</p>
<blockquote>
<p><strong>Note:</strong> <br>
&rsquo;<samp>tabstop</samp>&rsquo; オプションを 4 に設定することもできますが、その設定で編輯したファイルを &rsquo;<samp>tabstop</samp>&rsquo; の初期設定 (<var>8</var>) で見ると見た目が崩れてしまひます。他のプログラムで印刷する場合もインデントが崩れてしまふかもしれません。したがつて、&rsquo;<samp>tabstop</samp>&rsquo; は常に 8 のままにしておきませう。それが標準的な値です。
</p></blockquote>


<a name="TAB-Fu-woBian-Geng-suru"></a>
<h4 class="unnumberedsubsec">TAB 幅を變更する</h4>

<p>tabstop が 3 で書かれたファイルを (tabstop が 8 の) Vim で開くと表示が崩れてしまひます。&rsquo;<samp>tabstop</samp>&rsquo; を 3 に設定すれば表示を直すことができますが、ファイルを開くたびに設定を變更しなければなりません。
</p>
<p>ファイルの tabstop 幅を變更することができます。インデントが正しく表示されるやうに &rsquo;<samp>tabstop</samp>&rsquo; を設定してから &quot;<code>:retab</code>&quot; コマンドを使ひます:
</p>
<div class="example">
<pre class="example">:set tabstop=3
:retab 8
</pre></div>

<p>&quot;<code>:retab</code>&quot; コマンドを使つて &rsquo;<samp>tabstop</samp>&rsquo; を 8 に變更してゐます。ただし、テキストの見た目は變更されません。空白部分が Tab 文字とスペースに置き換へられます。その狀態でファイルを保存すれば、次からは設定を變更しなくてもインデントが正しく表示されます。
</p><blockquote>
<p><strong>警告:</strong> <br>
プログラムに對して &quot;<code>:retab</code>&quot; を使つた場合、文字列定數の中の空白記號が變更されてしまふかもしれません。文字列定數の中では Tab 文字ではなく &quot;\t&quot; を使ふやうにしませう。
</p></blockquote>

<a name="g_t25_002e4"></a><a name="index-Chang-iXing-noXi-i"></a>
<a name="Chang-iXing-noXi-i"></a>
<h3 class="section">長い行の扱ひ</h3>

<p>ウィンドウの幅に收まりきらないやうなファイルを編輯することがあると思ひます。その場合、すべての行が畫面に收まるやうに折り返して表示されます。
</p>
<p>&rsquo;<samp>wrap</samp>&rsquo; オプションをオフにすると、すべての行が 1 行で表示されます。長い行の畫面に收まりきらない部分は表示されません。
</p>
<p>表示されてゐない部分にカーソルを動かすと、テキストがスクロールされ、その部分が表示されます。ウィンドウの枠を右に動かすやうな感じです。
</p>
<p>初期設定では、GUI の水平スクロールバーは表示されません。表示したい場合は次のコマンドを使ひます:
</p>
<div class="example">
<pre class="example">:set guioptions+=b
</pre></div>

<p>Vim ウィンドウの下部に水平スクロールバーが表示されます。
</p>
<p>スクロールバーが使へない、または使ひたくない場合は、次のコマンドでテキストをスクロールしてください。カーソルは同じ位置にとどまりますが、畫面外に出てしまふときは畫面內に移動されます。
</p>
<table>
<tr><td width="20%">zh</td><td width="80%">右にスクロール</td></tr>
<tr><td width="20%">4zh</td><td width="80%">右に 4 文字分スクロール</td></tr>
<tr><td width="20%">zH</td><td width="80%">右にウィンドウの半分だけスクロール</td></tr>
<tr><td width="20%">ze</td><td width="80%">カーソル位置が右端になるやうに右スクロール</td></tr>
<tr><td width="20%">zl</td><td width="80%">左にスクロール</td></tr>
<tr><td width="20%">4zl</td><td width="80%">左に 4 文字分スクロール</td></tr>
<tr><td width="20%">zL</td><td width="80%">左にウィンドウの半分だけスクロール</td></tr>
<tr><td width="20%">zs</td><td width="80%">カーソル位置が左端になるやうに左スクロール</td></tr>
</table>

<p>例を使つて說明します。カーソルは &quot;&lsquo;<samp>which</samp>&rsquo;&quot; の &quot;&lsquo;<samp>w</samp>&rsquo;&quot; にあります。上部の &quot;&lsquo;<samp>current window</samp>&rsquo;&quot; はウィンドウに表示されてゐる範圍を示してゐます。コマンド實行後の表示範圍を &quot;&lsquo;<samp>window</samp>&rsquo;&quot; で示します。
</p>
<pre class="verbatim">                      |&lt;-- current window --&gt;|
        some long text, part of which is visible in the window
ze        |&lt;--     window     --&gt;|
zH         |&lt;--     window     --&gt;|
4zh               |&lt;--     window     --&gt;|
zh                   |&lt;--     window     --&gt;|
zl                     |&lt;--     window     --&gt;|
4zl                       |&lt;--     window     --&gt;|
zL                              |&lt;--     window     --&gt;|
zs                             |&lt;-- window     --&gt;|
</pre>

<a name="Zhe-riFan-siWu-sinoChang-He-noYi-Dong-"></a>
<h4 class="unnumberedsubsec">折り返し無しの場合の移動</h4>

<p>&rsquo;<samp>wrap</samp>&rsquo; がオフで、テキストが水平スクロールされてゐるとき、次のコマンドで畫面の表示範圍を基準にして移動できます。ウィンドウの左右のテキストは無視されます。これらのコマンドはテキストをスクロールしません:
</p>
<table>
<tr><td width="20%">g0</td><td width="80%">行の右端に移動</td></tr>
<tr><td width="20%">g^</td><td width="80%">行の右端の最初の非空白文字に移動</td></tr>
<tr><td width="20%">gm</td><td width="80%">行の中央に移動</td></tr>
<tr><td width="20%">g$</td><td width="80%">行の左端に移動</td></tr>
</table>

<pre class="verbatim">        |&lt;--     window    --&gt;|
some long    text, part of which is visible
         g0  g^    gm        g$
</pre>

<a name="edit_002dno_002dbreak"></a><a name="index-edit_002dno_002dbreak"></a>
<a name="index-Jin-Ze-Chu-Li-"></a>
<a name="Jin-Ze-Chu-Li-"></a>
<h4 class="unnumberedsubsec">禁則處理</h4>

<p>他のプログラムで使ふテキストを編輯する場合、1 つの段落を改行無しで書かなければならないことがあります。&rsquo;<samp>nowrap</samp>&rsquo; を使ふと編輯中の文全體を表示することができません。&rsquo;<samp>wrap</samp>&rsquo; をオンにすると單語の途中で行が折り返されて讀み難くなつてしまひます。
</p>
<p>そのやうな場合は &rsquo;<samp>linebreak</samp>&rsquo; オプションを使つてください。適切な場所で行が折り返されるやうになります。ファイルの內容は變更されません。
</p>
<p>&rsquo;<samp>linebreak</samp>&rsquo; がオフの狀態では次のやうに表示されますが:
</p>
<pre class="verbatim">+---------------------------------+
|letter generation program for a b|
|ank.  They wanted to send out a s|
|pecial, personalized letter to th|
|eir richest 1000 customers.  Unfo|
|rtunately for the programmer, he |
+---------------------------------+
</pre><p>&rsquo;<samp>linebreak</samp>&rsquo; を設定すると:
</p>
<div class="example">
<pre class="example">:set linebreak
</pre></div>

<p>次のやうに表示されます:
</p>
<pre class="verbatim">+---------------------------------+
|letter generation program for a  |
|bank.  They wanted to send out a |
|special, personalized letter to  |
|their richest 1000 customers.    |
|Unfortunately for the programmer,|
+---------------------------------+
</pre>
<p>關聯オプション:
</p><table>
<tr><td width="25%">&rsquo;<samp>breakat</samp>&rsquo;</td><td width="75%">折り返し可能な文字を指定する。</td></tr>
<tr><td width="25%">&rsquo;<samp>showbreak</samp>&rsquo;</td><td width="75%">折り返された行の先頭に表示される文字。</td></tr>
<tr><td width="25%">&rsquo;<samp>textwidth</samp>&rsquo;</td><td width="75%">0 に設定して段落が改行されないやうにしてください。</td></tr>
</table>


<a name="Biao-ShiXing-Dan-Wei-noYi-Dong-"></a>
<h4 class="unnumberedsubsec">表示行單位の移動</h4>

<p>&quot;<code>j</code>&quot; と &quot;<code>k</code>&quot; で上下の行に移動できますが、長い行の上で使ふと、1 度に複數の表示行を移動することになります。
</p>
<p>畫面上で 1 行だけ移動したい場合は &quot;<code>gj</code>&quot; と &quot;<code>gk</code>&quot; を使つてください。行が折り返されてゐないときは &quot;<code>j</code>&quot; と &quot;<code>k</code>&quot; と同じ動作をします。折り返されてゐるときは、畫面上の 1 行だけ移動します。
</p>
<p>次のやうなマップを定義しておくと便利かもしれません:
</p>
<div class="example">
<pre class="example">:map &lt;Up&gt; gk
:map &lt;Down&gt; gj
</pre></div>


<a name="edit_002dparagraph_002djoin"></a><a name="index-edit_002dparagraph_002djoin"></a>
<a name="index-Duan-Luo-wo-1-Xing-nitunageru"></a>
<a name="Duan-Luo-wo-1-Xing-nitunageru"></a>
<h4 class="unnumberedsubsec">段落を 1 行につなげる</h4>

<p>MS-Word のやうなプログラムにテキストをコピーするとき、段落は一行につながつてゐなければなりません。段落が空行で區切られてゐるなら、次のコマンドでそれぞれの段落を 1 行につなげることができます:
</p>
<div class="example">
<pre class="example">:g/./,/^$/join
</pre></div>

<p>すこし複雜ですね。分解して說明します:
</p>
<table>
<tr><td width="15%">:g/./</td><td width="85%">1 文字以上の文字を含んでゐる行を探す &quot;<code>:global</code>&quot; コマンド</td></tr>
<tr><td width="15%">,/^$/</td><td width="85%">現在行(非空行)から空行までの範圍を指定</td></tr>
<tr><td width="15%">join</td><td width="85%">指定された範圍の行を &quot;<code>:join</code>&quot; コマンドで 1 行につなげる</td></tr>
</table>

<p>30 桁で改行された次のやうなテキストが:
</p>
<pre class="verbatim">+----------------------------------+
|A letter generation program       |
|for a bank.  They wanted to       |
|send out a special,               |
|personalized letter.              |
|                                  |
|To their richest 1000             |
|customers.  Unfortunately for     |
|the programmer,                   |
+----------------------------------+
</pre>
<p>2 行にまとめられます:
</p>
<pre class="verbatim">+----------------------------------+
|A letter generation program for a |
|bank.  They wanted to send out a s|
|pecial, personalized letter.      |
|To their richest 1000 customers.  |
|Unfortunately for the programmer, |
+----------------------------------+
</pre>
<blockquote>
<p><strong>Note:</strong> <br>
スペースや Tab 文字を含んでゐる空白行 (空行ではない) で段落が區切られてゐる場合、上記のコマンドは機能しません。次のコマンドは空白行でも機能します:
</p></blockquote>
<div class="example">
<pre class="example">:g/\S/,/^\s*$/join
</pre></div>

<p>最後の段落を處理するには、ファイル末尾に空行または空白行が必要です。
</p>
<a name="g_t25_002e5"></a><a name="index-Biao-noBian-Ji-"></a>
<a name="Biao-noBian-Ji-"></a>
<h3 class="section">表の編輯</h3>

<p>次のやうな 4 列の表を編輯してゐて:
</p>
<table>
<tr><td width="25%">nice table</td><td width="25%">test 1</td><td width="25%">test 2</td><td width="25%">test 3</td></tr>
<tr><td width="25%">input A</td><td width="25%">0.534</td><td width="25%"></td><td width="25%"></td></tr>
<tr><td width="25%">input B</td><td width="25%">0.913</td><td width="25%"></td><td width="25%"></td></tr>
</table>

<p>4 列目に數字を入力したいと思ひました。2 行目に移動して &quot;A&quot; を使ひ、いくつかスペースとテキストを入力すればできます。
</p>
<p>このやうな編輯のための特別なオプションがあります:
</p>
<div class="example">
<pre class="example">set virtualedit=all
</pre></div>

<p>これを設定すると、文字が無い場所にもカーソルを移動できるやうになります。これを &quot;virtual space&quot; (假想空白) と呼びます。この方法を使へば簡單に表を編輯できます。
</p>
<p>檢索を實行して 4 列目のヘッダーに移動します:
</p>
<pre class="verbatim">/test 3
</pre>
<p>&quot;j&quot; を押すとカーソルが適切な場所に移動するので、そのまま &quot;input A&quot; の値を入力できます。&quot;0.693&quot; と入力します:
</p>
<table>
<tr><td width="25%">nice table</td><td width="25%">test 1</td><td width="25%">test 2</td><td width="25%">test 3</td></tr>
<tr><td width="25%">input A</td><td width="25%">0.534</td><td width="25%"></td><td width="25%">0.693</td></tr>
<tr><td width="25%">input B</td><td width="25%">0.913</td><td width="25%"></td><td width="25%"></td></tr>
</table>

<p>テキストが無かつた部分は空白で埋められます。&quot;<code>Bj</code>&quot; コマンドを使つて次の行に移動しませう。&quot;B&quot; で單語の先頭に移動し、&quot;j&quot; で次のフィールドに移動します。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
畫面上のどの場所にでもカーソルを移動できます。行末を超えて移動することもできます。文字を插入しない限り、スペースは插入されません。
</p></blockquote>


<a name="Lie-nokopi"></a>
<h4 class="unnumberedsubsec">列のコピー</h4>

<p>4 列目をコピーして &quot;test 1&quot; 列の前に追加します。次の手順でできます:
</p><ol>
<li> カーソルを列の左上隅に移動する。例: &quot;/test 3&quot;。
</li><li> <kbd>CTRL-V</kbd> を押して矩形選擇開始。
</li><li> &quot;2j&quot; で 2 行下に移動。カーソルは假想空白の上 (&quot;input B&quot; 行の &quot;test 3&quot; 列)
</li><li> 右に移動して列全體を選擇。列を區切るためのスペースも選擇する。例へば &quot;9l&quot; で移動する。
</li><li> &quot;y&quot; で選擇範圍をヤンク。
</li><li> カーソルを &quot;text 1&quot; に移動。この場所に新しい列を插入する。
</li><li> &quot;P&quot; を押す。
</li></ol>

<p>結果は次のやうになります:
</p>
<table>
<tr><td width="20%">nice table</td><td width="20%">test 3</td><td width="20%">test 1</td><td width="20%">test 2</td><td width="20%">test 3</td></tr>
<tr><td width="20%">input A</td><td width="20%">0.693</td><td width="20%">0.534</td><td width="20%"></td><td width="20%">0.693</td></tr>
<tr><td width="20%">input B</td><td width="20%"></td><td width="20%">0.913</td><td width="20%"></td><td width="20%"></td></tr>
</table>

<p>&quot;test 1&quot; 列全體が右側に押し出されます。&quot;test 3&quot; 列のテキストが無い行も同樣に移動してゐますね。
</p>
<p>次のコマンドでカーソル移動を通常に戾せます:
</p>
<div class="example">
<pre class="example">:set virtualedit=
</pre></div>


<a name="batiyaruZhi-Huan-modo"></a>
<h4 class="unnumberedsubsec">バーチャル置換モード</h4>

<p>&rsquo;<samp>virtualedit</samp>&rsquo; の不便なところは感覺が狂つてしまふところです。カーソルを動かしてゐるときに、カーソルが Tab 文字の上にあるのか、行末を越えた位置にあるのか、認識することができません。そこで「バーチャル置換モード」を使ひます。
</p>
<p>例へば、表の中で Tab 文字が使はれてゐるとします。その Tab 文字の上で &quot;rx&quot; を使つてみます:
</p>
<pre class="verbatim">inp     0.693   0.534   0.693

       |
   rx  |
       V

inpx0.693   0.534       0.693
</pre>
<p>レイアウトが崩れてしまひました。かうならないやうに、&quot;gr&quot; コマンドを使ひます:
</p>
<pre class="verbatim">inp     0.693   0.534   0.693

       |
  grx  |
       V

inpx    0.693   0.534   0.693
</pre>
<p>&quot;<code>gr</code>&quot; コマンドで置換すると、置換した結果がスクリーン上で同じ幅になるやうに調整されます。足りない分はスペースか Tab 文字で埋められます。つまり上の例は、Tab 文字が &quot;x&quot; で置換され、殘りの部分を埋めるやうに空白が追加されたのです。例では Tab 文字が插入されてます。
</p>
<p>複數の文字を置き換へたい場合は &quot;<code>R</code>&quot; コマンドの置換モード (|<a href="usr_005f04_002etxt.html#g_t04_002e9">04.9</a>|參照) を使ひますが、それだとレイアウトが崩れて意圖しない文字が置換されてしまひます:
</p>
<pre class="verbatim">inp     0       0.534   0.693

        |
 R0.786 |
        V

inp     0.78634 0.693
</pre>
<p>&quot;<code>gR</code>&quot; コマンドのバーチャル置換モードを使ひませう。これならレイアウトは崩れません:
</p>
<pre class="verbatim">inp     0       0.534   0.693

        |
gR0.786 |
        V

inp     0.786   0.534   0.693
</pre>
<hr>
<div class="header">
<p>
Next: <a href="usr_005f26_002etxt.html#usr_005f26_002etxt" accesskey="n" rel="next">usr_26.txt</a>, Previous: <a href="usr_005f24_002etxt.html#usr_005f24_002etxt" accesskey="p" rel="prev">usr_24.txt</a>, Up: <a href="Mu-Ci-.html#g_t_76ee_6b21" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html#Indexes-CP" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
