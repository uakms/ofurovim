<!DOCTYPE html>
<html lang="ja">
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>

<title>map.txt (Vim Reference Manual)</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="description" content="map.txt (Vim Reference Manual)">
<meta name="keywords" content="map.txt (Vim Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="Mu-Ci-.html#g_t_76ee_6b21" rel="start" title="目次">
<link href="Indexes-CP.html#Indexes-CP" rel="index" title="Indexes CP">
<link href="Mu-Ci-.html#g_t_76ee_6b21" rel="up" title="目次">
<link href="tagsrch_002etxt.html#tagsrch_002etxt" rel="next" title="tagsrch.txt">
<link href="pattern_002etxt.html#pattern_002etxt" rel="prev" title="pattern.txt">
<style>
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="ja">
<a name="map_002etxt"></a>
<div class="header">
<p>
Up: <a href="Mu-Ci-.html#g_t_76ee_6b21" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html#Indexes-CP" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="kimatuputoDuan-Suo-Ru-Li-"></a>
<h2 class="unnumbered">キーマップと短縮入力</h2>
<pre class="verbatim">*map.txt*       For Vim バージョン 8.1.  Last change: 2019 Jun 02


		  VIMリファレンスマニュアル	  by Bram Moolenaar
</pre>

<p>キーマップ、短縮入力、ユーザー定義コマンドについて。
</p>
<p>ユーザーマニュアルの |<a href="usr_005f05_002etxt.html#g_t05_002e3">05.3</a>|, |<a href="usr_005f24_002etxt.html#g_t24_002e7">24.7</a>|, |<a href="usr_005f40_002etxt.html#g_t40_002e1">40.1</a>| でこの機能について紹介してゐます。
</p>
<table>
<tr><td width="50%">1. マップ</td><td width="50%">|<a href="#key_002dmapping">key-mapping</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.1 マップコマンド</td><td width="50%">|<a href="#g_t_003amap_002dcommands">:map-commands</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.2 特別な引數</td><td width="50%">|<a href="#g_t_003amap_002darguments">:map-arguments</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.3 マップとモード</td><td width="50%">|<a href="#g_t_003amap_002dmodes">:map-modes</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.4 マップの一覽表示</td><td width="50%">|<a href="#map_002dlisting">map-listing</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.5 特殊キーのマップ</td><td width="50%">|<a href="#g_t_003amap_002dspecial_002dkeys">:map-special-keys</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.6 特殊文字</td><td width="50%">|<a href="#g_t_003amap_002dspecial_002dchars">:map-special-chars</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.7 マップに使ふキー</td><td width="50%">|<a href="#map_002dwhich_002dkeys">map-which-keys</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.8 例</td><td width="50%">|<a href="#map_002dexamples">map-examples</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.9 マップを使ふ</td><td width="50%">|<a href="#map_002dtyping">map-typing</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.10 Altキーを使つたマップ</td><td width="50%">|<a href="#g_t_003amap_002dalt_002dkeys">:map-alt-keys</a>|</td></tr>
<tr><td width="50%">&nbsp;&nbsp;&nbsp;&nbsp;1.11 オペレータの作成</td><td width="50%">|<a href="#g_t_003amap_002doperator">:map-operator</a>|</td></tr>
<tr><td width="50%">2. 短縮入力</td><td width="50%">|<a href="#abbreviations">abbreviations</a>|</td></tr>
<tr><td width="50%">3. ローカルマップとローカル函數</td><td width="50%">|<a href="#script_002dlocal">script-local</a>|</td></tr>
<tr><td width="50%">4. ユーザー定義コマンド</td><td width="50%">|<a href="#user_002dcommands">user-commands</a>|</td></tr>
</table>

<a name="key_002dmapping"></a><a name="mapping"></a><a name="macro"></a><a name="index-key_002dmapping"></a>
<a name="index-mapping"></a>
<a name="index-macro"></a>
<a name="g_t1_002e-matupu-_0028Key-mapping_0029"></a>
<h3 class="section">1. マップ (Key mapping)</h3>

<p>マップは入力キーの動作を變更するために使はれます。一般的にはファンクションキーにコマンドを割り當てるのに使はれます。例:
</p><pre class="verbatim">:map &lt;F2&gt; a&lt;C-R&gt;=strftime(&quot;%c&quot;)&lt;CR&gt;&lt;Esc&gt;
</pre><p>このマップはカーソルの位置に現在の日時を插入します。(&lt;F2&gt; などは |<a href="intro_002etxt.html#g_t_003c_003e">&lt;&gt;</a>| 表記法を參照)
</p>

<a name="g_t_003amap_002dcommands"></a><a name="index-_003amap_002dcommands"></a>
<a name="g_t1_002e1-matupukomando"></a>
<h4 class="subsection">1.1 マップコマンド</h4>

<p>マップを新しく作成、削除、一覽表示するコマンドがあります。マップコマンドの種類とモードの關係については |<a href="#map_002doverview">map-overview</a>| を參照してください。
</p>
<table>
<tr><td><a name="g_t_007blhs_007d"></a><a name="index-_007blhs_007d"></a></td></tr>
<tr><td width="20%">{lhs}</td><td width="80%">left-hand-side  (左邊値) の略
<a name="g_t_007brhs_007d"></a><a name="index-_007brhs_007d"></a></td></tr>
<tr><td width="20%">{rhs}</td><td width="80%">right-hand-side (右邊値) の略</td></tr>
</table>

<table>
<tr><td><a name="g_t_003amap"></a><a name="index-_003amap"></a></td></tr>
<tr><td width="30%">:map</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dnvo">mapmode-nvo</a>|
<a name="g_t_003anm"></a><a name="g_t_003anmap"></a><a name="index-_003anm"></a>
<a name="index-_003anmap"></a></td></tr>
<tr><td width="30%">:nm[ap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dn">mapmode-n</a>|
<a name="g_t_003avm"></a><a name="g_t_003avmap"></a><a name="index-_003avm"></a>
<a name="index-_003avmap"></a></td></tr>
<tr><td width="30%">:vm[ap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dv">mapmode-v</a>|
<a name="g_t_003axm"></a><a name="g_t_003axmap"></a><a name="index-_003axm"></a>
<a name="index-_003axmap"></a></td></tr>
<tr><td width="30%">:xm[ap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dx">mapmode-x</a>|
<a name="g_t_003asmap"></a><a name="index-_003asmap"></a></td></tr>
<tr><td width="30%">:smap</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002ds">mapmode-s</a>|
<a name="g_t_003aom"></a><a name="g_t_003aomap"></a><a name="index-_003aom"></a>
<a name="index-_003aomap"></a></td></tr>
<tr><td width="30%">:om[ap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002do">mapmode-o</a>|
<a name="g_t_003amap_0021"></a><a name="index-_003amap_0021"></a></td></tr>
<tr><td width="30%">:map!</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dic">mapmode-ic</a>|
<a name="g_t_003aim"></a><a name="g_t_003aimap"></a><a name="index-_003aim"></a>
<a name="index-_003aimap"></a></td></tr>
<tr><td width="30%">:im[ap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002di">mapmode-i</a>|
<a name="g_t_003alm"></a><a name="g_t_003alma"></a><a name="g_t_003almap"></a><a name="index-_003alm"></a>
<a name="index-_003alma"></a>
<a name="index-_003almap"></a></td></tr>
<tr><td width="30%">:lm[ap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dl">mapmode-l</a>|
<a name="g_t_003acm"></a><a name="g_t_003acmap"></a><a name="index-_003acm"></a>
<a name="index-_003acmap"></a></td></tr>
<tr><td width="30%">:cm[ap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dc">mapmode-c</a>|
<a name="g_t_003atma"></a><a name="g_t_003atmap"></a><a name="index-_003atma"></a>
<a name="index-_003atmap"></a></td></tr>
<tr><td width="30%">:tma[p]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dt">mapmode-t</a>|</td></tr>
</table>
<table>
<tr><td width="10%"></td><td width="90%">キー入力 {lhs} を {rhs} に割り當てます。作成したマップは、マップコマンドに對應したモードで使用できます。マップが使用されたときに {rhs} が調べられ、再マップされます。マップを入れ子にしたり再歸的にすることができます。</td></tr>
</table>

<a name="g_t_003anore"></a><a name="g_t_003anorem"></a><a name="index-_003anore"></a>
<a name="index-_003anorem"></a>
<table>
<tr><td><a name="g_t_003ano"></a><a name="g_t_003anoremap"></a><a name="g_t_003anor"></a><a name="index-_003ano"></a>
<a name="index-_003anoremap"></a>
<a name="index-_003anor"></a></td></tr>
<tr><td width="30%">:no[remap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dnvo">mapmode-nvo</a>|
<a name="g_t_003ann"></a><a name="g_t_003annoremap"></a><a name="index-_003ann"></a>
<a name="index-_003annoremap"></a></td></tr>
<tr><td width="30%">:nn[oremap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dn">mapmode-n</a>|
<a name="g_t_003avn"></a><a name="g_t_003avnoremap"></a><a name="index-_003avn"></a>
<a name="index-_003avnoremap"></a></td></tr>
<tr><td width="30%">:vn[oremap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dv">mapmode-v</a>|
<a name="g_t_003axn"></a><a name="g_t_003axnoremap"></a><a name="index-_003axn"></a>
<a name="index-_003axnoremap"></a></td></tr>
<tr><td width="30%">:xn[oremap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dx">mapmode-x</a>|
<a name="g_t_003asnor"></a><a name="g_t_003asnore"></a><a name="g_t_003asnoremap"></a><a name="index-_003asnor"></a>
<a name="index-_003asnore"></a>
<a name="index-_003asnoremap"></a></td></tr>
<tr><td width="30%">:snor[emap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002ds">mapmode-s</a>|
<a name="g_t_003aono"></a><a name="g_t_003aonoremap"></a><a name="index-_003aono"></a>
<a name="index-_003aonoremap"></a></td></tr>
<tr><td width="30%">:ono[remap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002do">mapmode-o</a>|
<a name="g_t_003ano_0021"></a><a name="g_t_003anoremap_0021"></a><a name="index-_003ano_0021"></a>
<a name="index-_003anoremap_0021"></a></td></tr>
<tr><td width="30%">:no[remap]!</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dic">mapmode-ic</a>|
<a name="g_t_003aino"></a><a name="g_t_003ainor"></a><a name="g_t_003ainoremap"></a><a name="index-_003aino"></a>
<a name="index-_003ainor"></a>
<a name="index-_003ainoremap"></a></td></tr>
<tr><td width="30%">:ino[remap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002di">mapmode-i</a>|
<a name="g_t_003aln"></a><a name="g_t_003alnoremap"></a><a name="index-_003aln"></a>
<a name="index-_003alnoremap"></a></td></tr>
<tr><td width="30%">:ln[oremap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dl">mapmode-l</a>|
<a name="g_t_003acno"></a><a name="g_t_003acnor"></a><a name="g_t_003acnoremap"></a><a name="index-_003acno"></a>
<a name="index-_003acnor"></a>
<a name="index-_003acnoremap"></a></td></tr>
<tr><td width="30%">:cno[remap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dc">mapmode-c</a>|
<a name="g_t_003atno"></a><a name="g_t_003atnoremap"></a><a name="index-_003atno"></a>
<a name="index-_003atnoremap"></a></td></tr>
<tr><td width="30%">:tno[remap]</td><td width="30%">{lhs} {rhs}</td><td width="40%">|<a href="#mapmode_002dt">mapmode-t</a>|</td></tr>
</table>
<table>
<tr><td width="10%"></td><td width="90%">キー入力 {lhs} を {rhs} に割り當てます。作成したマップ、はマップコマンドに對應したモードで使用できます。{rhs} は再マップされないので、マップが入れ子になつたり再歸的になることはありません。コマンドを再定義するときによく使はれます。</td></tr>
</table>


<table>
<tr><td><a name="g_t_003aunm"></a><a name="g_t_003aunmap"></a><a name="index-_003aunm"></a>
<a name="index-_003aunmap"></a></td></tr>
<tr><td width="30%">:unm[ap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dnvo">mapmode-nvo</a>|
<a name="g_t_003anun"></a><a name="g_t_003anunmap"></a><a name="index-_003anun"></a>
<a name="index-_003anunmap"></a></td></tr>
<tr><td width="30%">:nun[map]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dn">mapmode-n</a>|
<a name="g_t_003avu"></a><a name="g_t_003avunmap"></a><a name="index-_003avu"></a>
<a name="index-_003avunmap"></a></td></tr>
<tr><td width="30%">:vu[nmap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dv">mapmode-v</a>|
<a name="g_t_003axu"></a><a name="g_t_003axunmap"></a><a name="index-_003axu"></a>
<a name="index-_003axunmap"></a></td></tr>
<tr><td width="30%">:xu[nmap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dx">mapmode-x</a>|
<a name="g_t_003asunm"></a><a name="g_t_003asunmap"></a><a name="index-_003asunm"></a>
<a name="index-_003asunmap"></a></td></tr>
<tr><td width="30%">:sunm[ap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002ds">mapmode-s</a>|
<a name="g_t_003aou"></a><a name="g_t_003aounmap"></a><a name="index-_003aou"></a>
<a name="index-_003aounmap"></a></td></tr>
<tr><td width="30%">:ou[nmap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002do">mapmode-o</a>|
<a name="g_t_003aunm_0021"></a><a name="g_t_003aunmap_0021"></a><a name="index-_003aunm_0021"></a>
<a name="index-_003aunmap_0021"></a></td></tr>
<tr><td width="30%">:unm[ap]!</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dic">mapmode-ic</a>|
<a name="g_t_003aiu"></a><a name="g_t_003aiunmap"></a><a name="index-_003aiu"></a>
<a name="index-_003aiunmap"></a></td></tr>
<tr><td width="30%">:iu[nmap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002di">mapmode-i</a>|
<a name="g_t_003alu"></a><a name="g_t_003alunmap"></a><a name="index-_003alu"></a>
<a name="index-_003alunmap"></a></td></tr>
<tr><td width="30%">:lu[nmap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dl">mapmode-l</a>|
<a name="g_t_003acu"></a><a name="g_t_003acun"></a><a name="g_t_003acunmap"></a><a name="index-_003acu"></a>
<a name="index-_003acun"></a>
<a name="index-_003acunmap"></a></td></tr>
<tr><td width="30%">:cu[nmap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dc">mapmode-c</a>|
<a name="g_t_003atunma"></a><a name="g_t_003atunmap"></a><a name="index-_003atunma"></a>
<a name="index-_003atunmap"></a></td></tr>
<tr><td width="30%">:tunma[p]</td><td width="20%">!{lhs!}</td><td width="50%">|<a href="#mapmode_002dt">mapmode-t</a>|</td></tr>
</table>
<table>
<tr><td width="10%"></td><td width="90%">マップコマンドに對應したモードの {lhs} といふマップを削除します。他のモードのマップは殘ります。
<blockquote>
<p><strong>Note:</strong> <br>
末尾の空白は {lhs} に含まれます。次の <code>unmap</code> コマンドは機能しません:
</p><pre class="verbatim">:map @@ foo
:unmap @@ | print
</pre></blockquote></td></tr>
</table>

<table>
<tr><td><a name="g_t_003amapc"></a><a name="g_t_003amapclear"></a><a name="index-_003amapc"></a>
<a name="index-_003amapclear"></a></td></tr>
<tr><td width="30%">:mapc[lear]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dnvo">mapmode-nvo</a>|
<a name="g_t_003anmapc"></a><a name="g_t_003anmapclear"></a><a name="index-_003anmapc"></a>
<a name="index-_003anmapclear"></a></td></tr>
<tr><td width="30%">:nmapc[lear]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dn">mapmode-n</a>|
<a name="g_t_003avmapc"></a><a name="g_t_003avmapclear"></a><a name="index-_003avmapc"></a>
<a name="index-_003avmapclear"></a></td></tr>
<tr><td width="30%">:vmapc[lear]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dv">mapmode-v</a>|
<a name="g_t_003axmapc"></a><a name="g_t_003axmapclear"></a><a name="index-_003axmapc"></a>
<a name="index-_003axmapclear"></a></td></tr>
<tr><td width="30%">:xmapc[lear]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dx">mapmode-x</a>|
<a name="g_t_003asmapc"></a><a name="g_t_003asmapclear"></a><a name="index-_003asmapc"></a>
<a name="index-_003asmapclear"></a></td></tr>
<tr><td width="30%">:smapc[lear]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002ds">mapmode-s</a>|
<a name="g_t_003aomapc"></a><a name="g_t_003aomapclear"></a><a name="index-_003aomapc"></a>
<a name="index-_003aomapclear"></a></td></tr>
<tr><td width="30%">:omapc[lear]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002do">mapmode-o</a>|
<a name="g_t_003amapc_0021"></a><a name="g_t_003amapclear_0021"></a><a name="index-_003amapc_0021"></a>
<a name="index-_003amapclear_0021"></a></td></tr>
<tr><td width="30%">:mapc[lear]!</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dic">mapmode-ic</a>|
<a name="g_t_003aimapc"></a><a name="g_t_003aimapclear"></a><a name="index-_003aimapc"></a>
<a name="index-_003aimapclear"></a></td></tr>
<tr><td width="30%">:imapc[lear]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002di">mapmode-i</a>|
<a name="g_t_003almapc"></a><a name="g_t_003almapclear"></a><a name="index-_003almapc"></a>
<a name="index-_003almapclear"></a></td></tr>
<tr><td width="30%">:lmapc[lear]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dl">mapmode-l</a>|
<a name="g_t_003acmapc"></a><a name="g_t_003acmapclear"></a><a name="index-_003acmapc"></a>
<a name="index-_003acmapclear"></a></td></tr>
<tr><td width="30%">:cmapc[lear]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dc">mapmode-c</a>|
<a name="g_t_003atmapc"></a><a name="g_t_003atmapclear"></a><a name="index-_003atmapc"></a>
<a name="index-_003atmapclear"></a></td></tr>
<tr><td width="30%">:tmapc[lear]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dt">mapmode-t</a>|</td></tr>
</table>
<table>
<tr><td width="10%"></td><td width="90%">マップコマンドに對應したモードのすべてのマップを削除します。

<p>バッファローカルなマップを削除するには &lt;buffer&gt; 引數を付けてください |<a href="#g_t_003amap_002d_003cbuffer_003e">:map-&lt;buffer&gt;</a>|。
</p><blockquote>
<p><strong>警告:</strong> <br>
標準設定のマップも削除されます。
</p></blockquote></td></tr>
</table>

<table>
<tr><td width="30%">:map</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dnvo">mapmode-nvo</a>|</td></tr>
<tr><td width="30%">:nm[ap]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dn">mapmode-n</a>|</td></tr>
<tr><td width="30%">:vm[ap]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dv">mapmode-v</a>|</td></tr>
<tr><td width="30%">:xm[ap]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dx">mapmode-x</a>|</td></tr>
<tr><td width="30%">:sm[ap]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002ds">mapmode-s</a>|</td></tr>
<tr><td width="30%">:om[ap]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002do">mapmode-o</a>|</td></tr>
<tr><td width="30%">:map!</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dic">mapmode-ic</a>|</td></tr>
<tr><td width="30%">:im[ap]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002di">mapmode-i</a>|</td></tr>
<tr><td width="30%">:lm[ap]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dl">mapmode-l</a>|</td></tr>
<tr><td width="30%">:cm[ap]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dc">mapmode-c</a>|</td></tr>
<tr><td width="30%">:tma[p]</td><td width="20%"></td><td width="50%">|<a href="#mapmode_002dt">mapmode-t</a>|</td></tr>
</table>
<table>
<tr><td width="10%"></td><td width="90%">マップコマンドに對應したモードのすべてのマップを一覽表示します。
<blockquote>
<p><strong>Note:</strong> <br>
&quot;<code>:map</code>&quot; と &quot;<code>:map!</code>&quot; は複數のモードを表示できるのでよく使はれます。
</p></blockquote></td></tr>
</table>

<table>
<tr><td><a name="g_t_003amap_005fl"></a><a name="index-_003amap_005fl"></a></td></tr>
<tr><td width="30%">:map</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dnvo">mapmode-nvo</a>|
<a name="g_t_003anmap_005fl"></a><a name="index-_003anmap_005fl"></a></td></tr>
<tr><td width="30%">:nm[ap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dn">mapmode-n</a>|
<a name="g_t_003avmap_005fl"></a><a name="index-_003avmap_005fl"></a></td></tr>
<tr><td width="30%">:vm[ap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dv">mapmode-v</a>|
<a name="g_t_003axmap_005fl"></a><a name="index-_003axmap_005fl"></a></td></tr>
<tr><td width="30%">:xm[ap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dx">mapmode-x</a>|
<a name="g_t_003asmap_005fl"></a><a name="index-_003asmap_005fl"></a></td></tr>
<tr><td width="30%">:sm[ap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002ds">mapmode-s</a>|
<a name="g_t_003aomap_005fl"></a><a name="index-_003aomap_005fl"></a></td></tr>
<tr><td width="30%">:om[ap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002do">mapmode-o</a>|
<a name="g_t_003amap_005fl_0021"></a><a name="index-_003amap_005fl_0021"></a></td></tr>
<tr><td width="30%">:map!</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dic">mapmode-ic</a>|
<a name="g_t_003aimap_005fl"></a><a name="index-_003aimap_005fl"></a></td></tr>
<tr><td width="30%">:im[ap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002di">mapmode-i</a>|
<a name="g_t_003almap_005fl"></a><a name="index-_003almap_005fl"></a></td></tr>
<tr><td width="30%">:lm[ap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dl">mapmode-l</a>|
<a name="g_t_003acmap_005fl"></a><a name="index-_003acmap_005fl"></a></td></tr>
<tr><td width="30%">:cm[ap]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dc">mapmode-c</a>|
<a name="g_t_003atmap_005fl"></a><a name="index-_003atmap_005fl"></a></td></tr>
<tr><td width="30%">:tma[p]</td><td width="20%">{lhs}</td><td width="50%">|<a href="#mapmode_002dt">mapmode-t</a>|</td></tr>
</table>
<table>
<tr><td width="10%"></td><td width="90%">マップコマンドに對應したモードの {lhs} で始まるマップを一覽表示します。</td></tr>
</table>

<p>マップコマンドを使ふと、單キーまたは複數キーの入力を別の文字列にマップできます。ファンクションキーにコマンド列を割り當てたり、あるキーを別のキーに變換したりできます。マップを保存、復元する方法については |<a href="starting_002etxt.html#g_t_003amkexrc">:mkexrc</a>| を參照してください。
</p>
<a name="map_002dambiguous"></a><a name="index-map_002dambiguous"></a>
<p>2 つのマップがあつて、兩方とも同じ文字で始まつてゐる場合、どちらを使用するかがあゐまいになつてしまひます。例:
</p><pre class="verbatim">:imap aa foo
:imap aaa bar
</pre><p>&quot;aa&quot; と入力したとき、&quot;aa&quot; と &quot;aaa&quot; のどちらを使用するかを決定するためには、次の文字が必要になります。そのため、&quot;aa&quot; が入力された時點ではまだマップは適用されず、次の入力まで待機狀態になります。例へば空白文字を入力すれば &quot;foo&quot; と空白文字が插入されます。&quot;a&quot; を入力すれば &quot;bar&quot; が插入されます。
</p>

<a name="g_t_003amap_002darguments"></a><a name="index-_003amap_002darguments"></a>
<a name="g_t1_002e2-Te-Bie-naYin-Shu-"></a>
<h4 class="subsection">1.2 特別な引數</h4>

<p>引數に &quot;&lt;buffer&gt;&quot;, &quot;&lt;nowait&gt;&quot;, &quot;&lt;silent&gt;&quot;, &quot;&lt;special&gt;&quot;, &quot;&lt;script&gt;&quot;, &quot;&lt;expr&gt;&quot;, &quot;&lt;unique&gt;&quot; を指定できます。マップコマンドの直後 (他の引數の前) に置いてくださ
い。
</p>
<a name="g_t_003amap_002dlocal"></a><a name="g_t_003amap_002d_003cbuffer_003e"></a><a name="E224"></a><a name="E225"></a><a name="index-_003amap_002dlocal"></a>
<a name="index-_003amap_002d_003cbuffer_003e"></a>
<a name="index-E224"></a>
<a name="index-E225"></a>
<p>カレントバッファだけで使用できるマップを作成するには、マップコマンドの引數に &quot;&lt;buffer&gt;&quot; を指定します。例:
</p><pre class="verbatim">:map &lt;buffer&gt;  ,w  /[.,;]&lt;CR&gt;
</pre><p>この場合、他のバッファで、&quot;,w&quot; に對して別の操作を割り當てることができます:
</p><pre class="verbatim">:map &lt;buffer&gt;  ,w  /[#&amp;!]&lt;CR&gt;
</pre><p>バッファローカルなマップは通常のマップよりも優先して使用されます。長いグローバルなマップが存在する場合に短いローカルなマップが影響を受けないやうにするには下記の &lt;nowait&gt; を參照して下さい。
</p>
<p>&quot;&lt;buffer&gt;&quot; はマップを削除するときにも指定できます:
</p><pre class="verbatim">:unmap &lt;buffer&gt; ,w
:mapclear &lt;buffer&gt;
</pre><p>バッファローカルなマップはそのバッファが削除されるときにいつしよに消去されます。アンロード(|<a href="windows_002etxt.html#g_t_003abunload">:bunload</a>|)では消去されません。ローカルオプションと同じです。また、|<a href="#map_002dprecedence">map-precedence</a>| を參照して下さい。
</p>
<a name="g_t_003amap_002d_003cnowait_003e"></a><a name="g_t_003amap_002dnowait"></a><a name="index-_003amap_002d_003cnowait_003e"></a>
<a name="index-_003amap_002dnowait"></a>
<p>&quot;,&quot; にバッファローカルなマップを定義する場合に &quot;,&quot; から始まるグローバルなマップがあるかもしれません。その場合は Vim が &quot;,&quot; のマップか、あるいはより長いマップを使用するかどうか知るために別の文字を入力する必要があります。これを避けるには引數に &lt;nowait&gt; を追加します。そしてそのマップは一致する場合に使用され、Vim はそれ以上入力される文字を待ちません。しかし、既に文字が入力されてゐた場合はそれが使はれます。
</p>
<a name="g_t_003amap_002d_003csilent_003e"></a><a name="g_t_003amap_002dsilent"></a><a name="index-_003amap_002d_003csilent_003e"></a>
<a name="index-_003amap_002dsilent"></a>
<p>實行するコマンドがコマンドラインに表示されないやうにするには、マップコマンドの引數に &quot;&lt;silent&gt;&quot; を指定します。例:
</p><pre class="verbatim">:map &lt;silent&gt; ,h /Header&lt;CR&gt;
</pre><p>このマップを使用するとき、檢索文字列はコマンドラインに表示されません。しかし、實行されたコマンドが出力するメッセージは表示されてしまひます。それを靜かにさせるには &quot;<code>:silent</code>&quot; を使ひます。
</p><pre class="verbatim">:map &lt;silent&gt; ,h :exe &quot;:silent normal /Header\r&quot;&lt;CR&gt;
</pre><p>それでもまだ、例へば inputdialog() のプロンプトなどは表示されます。&quot;&lt;silent&gt;&quot; は短縮入力にも使へますが、コマンドラインで使ふと正しく表示されなくなります。
</p>
<a name="g_t_003amap_002d_003cscript_003e"></a><a name="g_t_003amap_002dscript"></a><a name="index-_003amap_002d_003cscript_003e"></a>
<a name="index-_003amap_002dscript"></a>
<p>マップや短縮入力を定義するときに &quot;&lt;script&gt;&quot; 引數を指定すると、{rhs} の中の &quot;&lt;SID&gt;&quot; で始まるスクリプトローカルなマップだけが再マップされます。別の場所でマップが定義されてゐても (例へば <samp>mswin.vim</samp> で <kbd>CTRL-V</kbd> にマップが定義されてゐても)、その影響を避けることができます。その場合でも同じスクリプトで定義されたマップは使ふことができます。
</p><blockquote>
<p><strong>Note:</strong> <br>
&quot;:map &lt;script&gt;&quot; と &quot;:noremap &lt;script&gt;&quot; の動作は同じです。コマンド名より &quot;&lt;script&gt;&quot; の效果が優先されます。再マップが制限されることが明確になるため &quot;:noremap &lt;script&gt;&quot; を使ふ方がいいでせう。
</p></blockquote>

<a name="g_t_003amap_002d_003cunique_003e"></a><a name="E226"></a><a name="E227"></a><a name="index-_003amap_002d_003cunique_003e"></a>
<a name="index-E226"></a>
<a name="index-E227"></a>
<p>マップや短縮入力を定義するときに &quot;&lt;unique&gt;&quot; 引數を指定すると、同じ名前のものがすでに定義されてゐた場合に、コマンドは失敗します。例:
</p><pre class="verbatim">:map &lt;unique&gt; ,w  /[#&amp;!]&lt;CR&gt;
</pre><p>バッファローカルのマップを定義するときは、通常のマップも檢査の對象となります。失敗する例:
</p><pre class="verbatim">:map ,w  /[#&amp;!]&lt;CR&gt;
:map &lt;buffer&gt; &lt;unique&gt; ,w  /[.,;]&lt;CR&gt;
</pre><p>すでにマップされてゐる機能をそのままに、新たにマップを設定したい場合は、|<a href="eval_002etxt.html#maparg_0028_0029">maparg()</a>| を參照してください。
</p>
<a name="g_t_003amap_002d_003cexpr_003e"></a><a name="g_t_003amap_002dexpression"></a><a name="index-_003amap_002d_003cexpr_003e"></a>
<a name="index-_003amap_002dexpression"></a>
<p>マップや短縮入力を定義するときに &quot;&lt;expr&gt;&quot; 引數を指定すると、引數が式 (スクリプト) として扱はれます。マップが實行されたときに、式が評價され、その値が {rhs} として使はれます。例:
</p><pre class="verbatim">:inoremap &lt;expr&gt; . InsertDot()
</pre><p>InsertDot() 函數の戾り値が插入されます。カーソルの前のテキストをチェックして、ある條件に一致するなら omni 補完を開始する、といふやうなことができます。
</p>
<p>短縮入力では、入力されて短縮入力展開のトリガーとなつた文字が |<a href="eval_002etxt.html#v_003achar">v:char</a>| にセットされます。これを使つて {lhs} の展開方法を決めることもできます。自分で v:char を插入したり變更したりすべきではありません。
</p>
<p>副作用に注意してください。式は文字の取得中に評價されるため、簡單に異常動作を起こせてしまひます。そのため、次のものは制限されます:
</p><ul>
<li> バッファのテキストの變更 |<a href="eval_002etxt.html#textlock">textlock</a>|。
</li><li> 他のバッファの編輯。
</li><li> |<a href="various_002etxt.html#g_t_003anormal">:normal</a>| コマンド。
</li><li> カーソルの移動は可能ですが、後で元に戾されます。
</li></ul>
<p>以上のことを實現したい場合は、そのためのコマンド文字列を返してください。
</p>
<p>getchar() が使用できます。先行入力があればそれが消費されます。例へば次のやうなマップを定義します:
</p><pre class="verbatim">inoremap &lt;expr&gt; &lt;C-L&gt; nr2char(getchar())
inoremap &lt;expr&gt; &lt;C-L&gt;x &quot;foo&quot;
</pre><p>そして <kbd>CTRL-L</kbd> を押してみます。すぐには何も起きません。どのマップを使ふかを決定するためには文字がもう 1 つ必要です。次に &rsquo;<code class="tt-key">x</code>&rsquo; を押すと後者のマップが使はれ、&quot;foo&quot; が插入されます。他のキーを押すと前者のマップが使はれ、その文字が getchar() によつて取得され、返されます。
</p>
<p>例を示します。リスト番號を自動的に增加させつつ插入します:
</p><pre class="verbatim">let counter = 0
inoremap &lt;expr&gt; &lt;C-L&gt; ListItem()
inoremap &lt;expr&gt; &lt;C-R&gt; ListReset()

func ListItem()
  let g:counter += 1
  return g:counter . '. '
endfunc

func ListReset()
  let g:counter = 0
  return ''
endfunc
</pre>

<p><kbd>CTRL-L</kbd> で次の番號を插入し、<kbd>CTRL-R</kbd> で番號をリセットします。<kbd>CTRL-R</kbd> は空文字列を返すので、何も插入されません。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
特殊キーが機能するやうにしたり、テキスト中の CSI バイトをエスケープしたりするために、特別な處理が行はれてゐます。|<a href="#g_t_003amap">:map</a>| コマンドも同樣の處理を行ふので、それが二重に實行されるのを防ぐ必要があります。次のものは機能しません:
</p><pre class="verbatim">:imap &lt;expr&gt; &lt;F3&gt; &quot;&lt;Char-0x611B&gt;&quot;
</pre><p>なぜなら、&lt;Char- で表記した文字 (あるいは本物の文字) のバイト列は |<a href="#g_t_003aimap">:imap</a>| コマンドが解釋されるときにエスケープされ、&lt;expr&gt; で使はれるときにもう一度エスケープされるからです。次のものは機能します:
</p><pre class="verbatim">:imap &lt;expr&gt; &lt;F3&gt; &quot;\u611B&quot;
</pre><p>テキストの末尾以外で 0x80 をシングルバイトとして使つた場合、それは機能しません。特殊キーとして認識されます。
</p></blockquote>


<a name="g_t_003amap_002dmodes"></a><a name="mapmode_002dnvo"></a><a name="mapmode_002dn"></a><a name="mapmode_002dv"></a><a name="mapmode_002do"></a><a name="index-_003amap_002dmodes"></a>
<a name="index-mapmode_002dnvo"></a>
<a name="index-mapmode_002dn"></a>
<a name="index-mapmode_002dv"></a>
<a name="index-mapmode_002do"></a>
<a name="g_t1_002e3-matuputomodo"></a>
<h4 class="subsection">1.3 マップとモード</h4>

<p>マップには 6 つの種類があります。
</p><ul>
<li> ノーマルモード: ノーマルモードのコマンドを入力するとき。
</li><li> ビジュアルモード: ビジュアルモードのコマンドを入力するとき。
</li><li> 選擇モード: ビジュアルモードに似てゐますが入力したテキストによつて選擇範圍が置換されます。
</li><li> オペレータ待機モード: オペレータを待機してゐるとき。(&quot;d&quot;、&quot;y&quot;、&quot;c&quot;、などの後)。|<a href="#omap_002dinfo">omap-info</a>| 參照。
</li><li> 插入モード: 置換モードでも使はれます。
</li><li> コマンドラインモード: &quot;:&quot; もしくは &quot;/&quot; コマンドを入力したとき。
</li></ul>

<p>例外として、ノーマルモードでカウント (コマンドの繰り返し回數) を入力してゐるときは、0 (ゼロ) に對するマップは適用されません。これは 0 がマップされてゐても、カウントの指定でゼロを入力できるやうにするためです。
</p>
<a name="map_002doverview"></a><a name="map_002dmodes"></a><a name="index-map_002doverview"></a>
<a name="index-map_002dmodes"></a>
<p>マップコマンドとモードの對應表。詳細は以後に。
</p><table>
<thead><tr><th width="45%">コマンド</th><th width="55%">モード</th></tr></thead>
<tr><td width="45%">:map   :noremap  :unmap</td><td width="55%">ノーマル、ビジュアル、選擇、オペレータ待機</td></tr>
<tr><td width="45%">:nmap  :nnoremap :nunmap</td><td width="55%">ノーマル</td></tr>
<tr><td width="45%">:vmap  :vnoremap :vunmap</td><td width="55%">ビジュアル、選擇</td></tr>
<tr><td width="45%">:smap  :snoremap :sunmap</td><td width="55%">選擇</td></tr>
<tr><td width="45%">:xmap  :xnoremap :xunmap</td><td width="55%">ビジュアル</td></tr>
<tr><td width="45%">:omap  :onoremap :ounmap</td><td width="55%">オペレータ待機</td></tr>
<tr><td width="45%">:map!  :noremap! :unmap!</td><td width="55%">插入、コマンドライン</td></tr>
<tr><td width="45%">:imap  :inoremap :iunmap</td><td width="55%">插入</td></tr>
<tr><td width="45%">:lmap  :lnoremap :lunmap</td><td width="55%">插入、コマンドライン、Lang-Arg</td></tr>
<tr><td width="45%">:cmap  :cnoremap :cunmap</td><td width="55%">コマンドライン</td></tr>
<tr><td width="45%">:tmap  :tnoremap :tunmap</td><td width="55%">Terminal-Job</td></tr>
</table>
<p>{譯注: Lang-Arg については |<a href="#language_002dmapping">language-mapping</a>| を參照}
</p>

<table>
<thead><tr><th width="55%">コマンド</th><th width="15%">ノーマルモード</th><th width="15%">ビジュアル+選擇モード</th><th width="15%">オペレータ待機モード</th></tr></thead>
<tr><td width="55%">:map   :noremap   :unmap   :mapclear</td><td width="15%">yes</td><td width="15%">yes</td><td width="15%">yes</td></tr>
<tr><td width="55%">:nmap  :nnoremap  :nunmap  :nmapclear</td><td width="15%">yes</td><td width="15%">-</td><td width="15%">-</td></tr>
<tr><td width="55%">:vmap  :vnoremap  :vunmap  :vmapclear</td><td width="15%">-</td><td width="15%">yes</td><td width="15%">-</td></tr>
<tr><td width="55%">:omap  :onoremap  :ounmap  :omapclear</td><td width="15%">-</td><td width="15%">-</td><td width="15%">yes</td></tr>
</table>
<p>:nunmap は修道院の外でも使へます。{譯注: nunは修道女の意}
</p>
<a name="mapmode_002dx"></a><a name="mapmode_002ds"></a><a name="index-mapmode_002dx"></a>
<a name="index-mapmode_002ds"></a>
<p>いくつかのコマンドはビジュアルモードと選擇モードの兩方で機能しますが、さうでないコマンドもあります。「ビジュアル」といふ言葉がビジュアルモードと選擇モードの兩方を指してゐる場合が多々あるので注意してください。|<a href="visual_002etxt.html#Select_002dmode_002dmapping">Select-mode-mapping</a>|
</p><blockquote>
<p><strong>Note:</strong> <br>
選擇モードで印字可能文字にマップを定義するとユーザーの混亂を招くかもしれません。印字可能文字に對しては明示的に :xmap と :smap を使ひ分けるのがいいでせう。マップを定義したあとで :sunmap を使ふ方法もあります。
</p></blockquote>

<table>
<thead><tr><th width="50%">コマンド</th><th width="25%">ビジュアルモード</th><th width="25%">選擇モード</th></tr></thead>
<tr><td width="50%">:vmap  :vnoremap  :vunmap  :vmapclear</td><td width="25%">yes</td><td width="25%">yes</td></tr>
<tr><td width="50%">:xmap  :xnoremap  :xunmap  :xmapclear</td><td width="25%">yes</td><td width="25%">-</td></tr>
<tr><td width="50%">:smap  :snoremap  :sunmap  :smapclear</td><td width="25%">-</td><td width="25%">yes</td></tr>
</table>

<a name="mapmode_002dic"></a><a name="mapmode_002di"></a><a name="mapmode_002dc"></a><a name="mapmode_002dl"></a><a name="index-mapmode_002dic"></a>
<a name="index-mapmode_002di"></a>
<a name="index-mapmode_002dc"></a>
<a name="index-mapmode_002dl"></a>
<p>一部のコマンドは、插入モードとコマンドラインモードの兩方で使へますが、一部はさうではありません:
</p>
<table>
<thead><tr><th width="55%">コマンド</th><th width="15%">插入モード</th><th width="15%">コマンドラインモード</th><th width="15%">Lang-Argモード</th></tr></thead>
<tr><td width="55%">:map!  :noremap!  :unmap!  :mapclear!</td><td width="15%">yes</td><td width="15%">yes</td><td width="15%">-</td></tr>
<tr><td width="55%">:imap  :inoremap  :iunmap  :imapclear</td><td width="15%">yes</td><td width="15%">-</td><td width="15%">-</td></tr>
<tr><td width="55%">:cmap  :cnoremap  :cunmap  :cmapclear</td><td width="15%">-</td><td width="15%">yes</td><td width="15%">-</td></tr>
<tr><td width="55%">:lmap  :lnoremap  :lunmap  :lmapclear</td><td width="15%">yes*</td><td width="15%">yes*</td><td width="15%">yes*</td></tr>
</table>

<p>{譯注: Lang-Arg については |<a href="#language_002dmapping">language-mapping</a>| を參照}
</p>
<p>オリジナルの Vi はノーマルモード、ビジュアルモード、オペレータ待機モード、でひとまとまり、插入モード、コマンドラインモード、でさらにひとまとまりのマップを持ち、それぞれ區別されてゐませんでした。そのため、Vim の &quot;<code>:map</code>&quot; と &quot;<code>:map!</code>&quot; コマンドは複數のモードに對してマップを設定したり表示したりします。Vim では &quot;<code>:nmap</code>&quot;, &quot;<code>:vmap</code>&quot;, &quot;<code>:omap</code>&quot;, &quot;<code>:cmap</code>&quot;, &quot;<code>:imap</code>&quot; を使ひ分けることで、それぞれのモード別にマップを設定することができます。
</p>
<a name="mapmode_002dt"></a><a name="index-mapmode_002dt"></a>
<p>ターミナルマップは、ターミナルウィンドウの中で動作してゐるジョブに對してキーが入力されたときに機能します。|<a href="terminal_002etxt.html#terminal_002dtyping">terminal-typing</a>| を參照してください。
</p>
<a name="omap_002dinfo"></a><a name="index-omap_002dinfo"></a>
<p>オペレータ待機マップを使ふと、移動コマンドを定義できます。そして、オペレータと組み合はせて使ふことができます。簡單な例:
</p><pre class="verbatim">:omap { w
</pre><p>これを定義した場合、&quot;y{&quot; が &quot;yw&quot; として、&quot;d{&quot; が &quot;dw&quot; として機能するやうになります。
</p>
<p>マップ適用時のカーソル位置を無視し、異なるテキストを選擇するには、omap 內でビジュアルモードを開始して對象となるテキストを選擇してください。例へば、現在行の函數名を選擇するには次のやうにします:
</p><pre class="verbatim">onoremap &lt;silent&gt; F :&lt;C-U&gt;normal! 0f(hviw&lt;CR&gt;
</pre><p>CTRL-U (&lt;C-U&gt;) を使つて (Vim によつて插入される) 範圍指定を削除してゐます。ノーマルモードコマンドを使つて、最初の &rsquo;(&rsquo; 文字を探し、その前にある單語を選擇します。通常はこれで函數名を選擇できるでせう。
</p>
<p>あるマップをノーマルモードとビジュアルモードで使用し、そして、オペレータ待機モードでは使用しないといふ場合は、3 つのモードに對してマップを定義してからオペレータ待機モードのマップだけを削除します:
</p><pre class="verbatim">:map	xx something-difficult
:ounmap xx
</pre><p>ビジュアルモードとオペレータ待機モードの場合や、ノーマルモードとオペレータ待機モードの場合も同樣にします。
</p>
<a name="language_002dmapping"></a><a name="index-language_002dmapping"></a>
<p>&quot;:lmap&quot; で定義したマップ(以下、言語マップ)は次の場面で利用できます:
</p><ul>
<li> 插入モード
</li><li> コマンドラインモード
</li><li> 檢索パターンを入力するとき
</li><li> &quot;r&quot; や &quot;f&quot; などのコマンドに續いて文字を入力するとき
</li><li> input() の入力
</li></ul>
<p>大まかに說明すると、Vim コマンドとしてではなく、テキストの一部として入力するやうなときにはいつでも利用できます。&quot;Lang-Arg&quot; は別個のモードではなく、そのやうな場面の總稱です。
</p>
<p>ある言語用の言語マップをロードするには、オプション &rsquo;<samp>keymap</samp>&rsquo; を設定するのが簡單です。|<a href="usr_005f45_002etxt.html#g_t45_002e5">45.5</a>|を參照してください。
</p>
<p>插入モードとコマンドラインモードでは <kbd>CTRL-^</kbd> で言語マップの使用の有無を切り替へることができます |<a href="insert_002etxt.html#i_005fCTRL_002d_005e">i_CTRL-^</a>| |<a href="cmdline_002etxt.html#c_005fCTRL_002d_005e">c_CTRL-^</a>|。これらのコマンドは &rsquo;<samp>iminsert</samp>&rsquo; オプションの値を變更します。(檢索パターンの入力ではなく) コマンドラインに入力するときには <kbd>CTRL-^</kbd> で切り替へるまで言語マップは無效になつてゐます。插入モードと檢索パターンでの使用狀態は別々に記錄されます。插入モードの使用狀態は &quot;f&quot; や &quot;t&quot; などのコマンドで文字を入力するときにも使用されます。
</p>
<p>言語マップは、既にマップが適用された文字には適用されません。言語マップは入力された文字に對してのみ使用されます。これは、言語マップは文字が入力されたときに適用されたはずといふ想定によるものです。
</p>

<a name="map_002dlisting"></a><a name="index-map_002dlisting"></a>
<a name="g_t1_002e4-matupunoYiLan-Biao-Shi"></a>
<h4 class="subsection">1.4 マップの一覽表示</h4>

<p>マップを一覽表示したときの行頭の 2 文字は使用できるモードを表してゐます:
</p>
<table>
<thead><tr><th width="20%">文字</th><th width="80%">モード</th></tr></thead>
<tr><td width="20%">&lt;Space&gt;</td><td width="80%">ノーマル、ビジュアル、選擇、オペレータ待機</td></tr>
<tr><td width="20%">n</td><td width="80%">ノーマル</td></tr>
<tr><td width="20%">v</td><td width="80%">ビジュアル、選擇</td></tr>
<tr><td width="20%">s</td><td width="80%">選擇</td></tr>
<tr><td width="20%">x</td><td width="80%">ビジュアル</td></tr>
<tr><td width="20%">o</td><td width="80%">オペレータ待機</td></tr>
<tr><td width="20%">!</td><td width="80%">插入、コマンドライン</td></tr>
<tr><td width="20%">i</td><td width="80%">插入</td></tr>
<tr><td width="20%">l</td><td width="80%">插入、コマンドライン、Lang-Arg での &quot;:lmap&quot; マップ</td></tr>
<tr><td width="20%">c</td><td width="80%">コマンドライン</td></tr>
<tr><td width="20%">t</td><td width="80%">Terminal-Job</td></tr>
</table>
<p>{譯注: Lang-Arg については |<a href="#language_002dmapping">language-mapping</a>| を參照}
</p>
<p>{rhs} の直前に特殊な文字が表示されてゐるものは次のことを意味します:
</p><table>
<tr><td width="20%">*</td><td width="80%">再マップされません</td></tr>
<tr><td width="20%">&amp;</td><td width="80%">スクリプトローカルなマップだけが再マップされます</td></tr>
<tr><td width="20%">&nbsp;</td><td width="80%">バッファローカルなマップです。</td></tr>
</table>

<p>{lhs} の後ろの最初の非空白文字から行末 (もしくは &rsquo;|&rsquo;) までのすべての文字は {rhs} の一部です。そのため {rhs} の末尾を空白文字にすることができます。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
ビジュアルモードのマップでは &quot;&rsquo;&lt;&quot; マークが使へます。これはカレントバッファで選擇されてゐた範圍の開始位置を示してゐます |<a href="motion_002etxt.html#g_t_0027_003c">'&lt;</a>|。
</p></blockquote>

<p>何がマッピングされてゐるか調べるのに |<a href="various_002etxt.html#g_t_003afilter">:filter</a>| コマンドを使ふことができます。パターンは {lhs} と {rhs} に對しては、生の形式で (譯注: 實際のキャラクターコードを用ゐて)マッチします。
</p>
<a name="g_t_003amap_002dverbose"></a><a name="index-_003amap_002dverbose"></a>
<p>&rsquo;<samp>verbose</samp>&rsquo; がゼロ以外のときにマップ一覽を表示すると、どこで定義されたのかも表示されます。例:
</p><pre class="verbatim">:verbose map &lt;C-W&gt;*
</pre><pre class="verbatim">n  &lt;C-W&gt;*      * &lt;C-W&gt;&lt;C-S&gt;*
        Last set from /home/abcd/.vimrc
</pre><p>詳しくは |<a href="various_002etxt.html#g_t_003averbose_002dcmd">:verbose-cmd</a>| を參照してください。
</p>

<a name="g_t_003amap_002dspecial_002dkeys"></a><a name="index-_003amap_002dspecial_002dkeys"></a>
<a name="g_t1_002e5-Te-Shu-kinomatupu"></a>
<h4 class="subsection">1.5 特殊キーのマップ</h4>

<p>特殊キーをマップに含めるのには次の 3 つの方法があります:
</p><ol>
<li> Vi 互換の方法: 生のキーコードをマップします。それはほとんどの場合 &lt;Esc&gt; で始まるキーコード列です。このやうなマップを入力するには、まづ &quot;:map &quot; と入力し、<kbd>CTRL-V</kbd> を押してからファンクションキーを押します。
<blockquote>
<p><strong>Note:</strong> <br>
そのキーのキーコードが termcap(t_options) にある場合は、自動的に內部コードの形式に變換され、次の 2. のやうなマップになります (&rsquo;<samp>cpoptions</samp>&rsquo; に &rsquo;<var>k</var>&rsquo; フラグが指定されてゐる場合は除く)
</p></blockquote>
</li><li> ファンクションキーの內部コードを使ひます。そのやうなマップを入力するには、<kbd>CTRL-K</kbd> を押してからファンクションキーを押します。もしくは、&quot;#1&quot;、&quot;#2&quot;、.. &quot;#9&quot;、&quot;#0&quot;、&quot;&lt;Up&gt;&quot;、&quot;&lt;S-Down&gt;&quot;、&quot;&lt;S-F7&gt;&quot;、などの形式で指定します。(キーの表は |<a href="intro_002etxt.html#key_002dnotation">key-notation</a>| 參照。&lt;Up&gt; 以下のすべてのキーを使ふことができます)。

<p>1 から 10 までのファンクションキーは 2 つの方法で定義できます:&quot;#2&quot; のやうな番號だけの方法と、&quot;&lt;F2&gt;&quot; といふ表記で指定する方法です。この兩方がファンクションキー 2 を表します。&quot;#0&quot; はファンクションキー 10 を表し、&rsquo;<samp>t_f10</samp>&rsquo; で定義されます。&quot;#0&quot; は、キーボードによつてはファンクションキー 0 になることがあります。
</p>
<p>&rsquo;<samp>cpoptions</samp>&rsquo; に &rsquo;<var>&lt;</var>&rsquo; フラグが指定されてゐる場合は、|<a href="intro_002etxt.html#g_t_003c_003e">&lt;&gt;</a>| 表記は使へません。
</p></li><li> termcap エントリを &lt;t_xx&gt; といふ形式で指定します。&quot;xx&quot; は termcap エントリの名前です。どんなエントリの文字列も使ふことができます。例:
<pre class="verbatim">:map &lt;t_F3&gt; G
</pre><p>これはファンクションキー 13 を &quot;G&quot; にマップします。&rsquo;<samp>cpoptions</samp>&rsquo; に &rsquo;<var>&lt;</var>&rsquo; フラグが指定されてゐる場合は使へません。
</p></li></ol>

<p>2. と 3. の方法の利點は、異なる端末でもマップを修正する必要がないことです(ファンクションキーは、同じ意味の內部コード、もしくは實際のキーコードに變換されます。使用してゐる端末に依存しません。termcap が正しく設定されてゐれば、異なる端末で同じマップを共有できます)。
</p>
<blockquote>
<p><strong>詳細:</strong> <br>
まず Vim はキーボードから送られたキーコードがマップされてゐるかどうかを調べます。マップされてゐなければ、端末のキーコードかどうか調べます(參照 |<a href="term_002etxt.html#terminal_002doptions">terminal-options</a>|)。端末コードであれば、內部コードで置き換へます。それからもう一度、マップされてゐるかどうかをチェックします (これにより內部コードをマップできます)。
</p>
<p>スクリプトファイルに書き込まれる內容は、どのやうに解釋されたかによります。端末のキーコードがマップとして認識された場合は、キーコードそのものがスクリプトファイルに書き込まれます。端末コードとして認識された場合は、內部コードがスクリプトファイルに書き込まれます。
</p>
<p>{譯注: &gt; スクリプトファイルに書き込まれる...おそらく |<a href="starting_002etxt.html#g_t_002dw">-w</a>| の話。}
</p></blockquote>


<a name="g_t_003amap_002dspecial_002dchars"></a><a name="map_005fbackslash"></a><a name="map_002dbackslash"></a><a name="index-_003amap_002dspecial_002dchars"></a>
<a name="index-map_005fbackslash"></a>
<a name="index-map_002dbackslash"></a>
<a name="g_t1_002e6-Te-Shu-WenZi-"></a>
<h4 class="subsection">1.6 特殊文字</h4>
<blockquote>
<p><strong>Note:</strong> <br>
このドキュメントでは、マップや短縮入力を定義するときに、<kbd>CTRL-V</kbd> だけが特殊な文字として觸れられてゐますが、&rsquo;<samp>cpoptions</samp>&rsquo; が &rsquo;<var>B</var>&rsquo; を含んでゐない場合は、バックスラッシュも <kbd>CTRL-V</kbd> と同樣の特殊な働きをします。|<a href="intro_002etxt.html#g_t_003c_003e">&lt;&gt;</a>| 表記も問題なく使用できます。しかし、&quot;&lt;C-V&gt;&quot; を <kbd>CTRL-V</kbd> と同じやうに、(マップを入力するときに) 次の文字をエスケープする目的で使ふことはできません。
</p></blockquote>

<p>バックスラッシュにマップしたり、バックスラッシュをそのまま {rhs} に使ひたい場合は、特別文字 &quot;&lt;Bslash&gt;&quot; を使ひます。マップを入れ子にした場合などにバックスラッシュを二重にする必要がなくなります。
</p>
<a name="map_005fCTRL_002dC"></a><a name="map_002dCTRL_002dC"></a><a name="index-map_005fCTRL_002dC"></a>
<a name="index-map_002dCTRL_002dC"></a>
<p><kbd>CTRL-C</kbd> を {lhs} で使ふことはできますが、それは Vim がキー入力を待機中のときだけ機能します。Vim がビジー狀態 (何かを實行中) のときは機能しません。Vim がビジー狀態の場合、<kbd>CTRL-C</kbd> は實行中のコマンドを中斷します。
</p>
<p>MS-Windows の GUI 環境では、<kbd>CTRL-C</kbd> にマップすることができるので、クリップボードにコピーする機能を割り當てることができます。Vim の動作を中斷するには <kbd>CTRL-Break</kbd> を使ひます。
</p>
<a name="map_005fspace_005fin_005flhs"></a><a name="map_002dspace_005fin_005flhs"></a><a name="index-map_005fspace_005fin_005flhs"></a>
<a name="index-map_002dspace_005fin_005flhs"></a>
<p>{lhs} に空白文字を含めるには <kbd>CTRL-V</kbd> を前置してください (空白文字の前で <kbd>CTRL-V</kbd> を 2 度押しで入力)。
</p>
<a name="map_005fspace_005fin_005frhs"></a><a name="map_002dspace_005fin_005frhs"></a><a name="index-map_005fspace_005fin_005frhs"></a>
<a name="index-map_002dspace_005fin_005frhs"></a>
<p>{rhs} を空白文字で開始するには &quot;&lt;Space&gt;&quot; を使つてください。Vi との互換性を完全に保ちたい場合は |<a href="intro_002etxt.html#g_t_003c_003e">&lt;&gt;</a>| 表記を使はずに、{rhs} の直前に <kbd>CTRL-V</kbd> (<kbd>CTRL-V</kbd> を 2 度押しで入力)を前置してください。
</p>
<a name="map_005fempty_005frhs"></a><a name="map_002dempty_002drhs"></a><a name="index-map_005fempty_005frhs"></a>
<a name="index-map_002dempty_002drhs"></a>
<p><kbd>CTRL-V</kbd> を 1 つだけ入力した後に (<kbd>CTRL-V</kbd> を 2 度押しで入力) 何も入力しないことで空の {rhs} を作ることもできます。殘念ながら <samp>vimrc</samp> ファイル內ではこの方法は使用できません。
</p>
<a name="g_t_003cNop_003e"></a><a name="index-_003cNop_003e"></a>
<p>空のマップを作るには {rhs} に &quot;&lt;Nop&gt;&quot; を指定する方法が簡單です。これは |<a href="intro_002etxt.html#g_t_003c_003e">&lt;&gt;</a>| 表記を使へるやうにしてゐれば動作します。例へば、ファンクションキー 8 は何もしない、としたい場合は次のやうにします:
</p><pre class="verbatim">:map  &lt;F8&gt;  &lt;Nop&gt;
:map! &lt;F8&gt;  &lt;Nop&gt;
</pre>
<a name="map_002dmultibyte"></a><a name="index-map_002dmultibyte"></a>
<p>マルチバイト文字をマップすることができます。ただし、マルチバイト文字の一部のバイトだけをマップすることはできません。それは次のやうな問題が起こるのを防ぐためです:
</p><pre class="verbatim">:set encoding=latin1
:imap &lt;M-C&gt; foo
:set encoding=utf-8
</pre><p>latin1 環境で文字「Ã」(0xc3 または &lt;M-C&gt;) をマップしてゐます。例へば、「á」(0xe1 または &lt;M-a&gt;) は UTF-8 では 0xc3 0xa1 の 2 バイトで表現されるので、0xc3 をマップしてしまふと á が入力できなくなつてしまひます。
</p>
<a name="g_t_003cLeader_003e"></a><a name="mapleader"></a><a name="index-_003cLeader_003e"></a>
<a name="index-mapleader"></a>
<p>マップコマンドで特別な文字列 &quot;&lt;Leader&gt;&quot; を使用すると、その部分が變數 &quot;mapleader&quot; に設定された文字列で置き換はります。&quot;mapleader&quot; が空文字列のときや設定されてゐない場合にはバックスラッシュが使用されます。例:
</p><pre class="verbatim">:map &lt;Leader&gt;A  oanother line&lt;Esc&gt;
</pre><p>これは次のものと同じ意味です: &gt;
</p><pre class="verbatim">:map \A  oanother line&lt;Esc&gt;
</pre><p>しかし次のやうに設定したあとでは:
</p><pre class="verbatim">:let mapleader = &quot;,&quot;
</pre><p>次のものと同じ意味になります:
</p><pre class="verbatim">:map ,A  oanother line&lt;Esc&gt;
</pre>
<blockquote>
<p><strong>Note:</strong> <br>
變數 &quot;mapleader&quot; はマップを定義するときに使用されます。&quot;mapleader&quot; を變更しても、すでに定義されてゐるマップには影響しません。
</p></blockquote>

<a name="g_t_003cLocalLeader_003e"></a><a name="maplocalleader"></a><a name="index-_003cLocalLeader_003e"></a>
<a name="index-maplocalleader"></a>
<p>&lt;LocalLeader&gt; は &lt;Leader&gt; に似てゐますが、&quot;mapleader&quot; ではなく &quot;maplocalleader&quot; を使用します。&lt;LocalLeader&gt; はバッファローカルのマップに使用するといいでせう。例:
</p><pre class="verbatim">:map &lt;buffer&gt; &lt;LocalLeader&gt;A  oanother line&lt;Esc&gt;
</pre><p>グローバルプラグインでは &lt;Leader&gt; を使用し、ファイルタイププラグインでは &lt;LocalLeader&gt; を使用するといいでせう。&quot;mapleader&quot; と &quot;maplocalleader&quot; の設定は同じでも構ひませんが、別の値を設定すれば、グローバルプラグインとファイルタイププラグインのマップが重なる可能性が低くなります。設定例としては、&quot;mapleader&quot; をバックスラッシュのままにしておいて、&quot;maplocalleader&quot; をアンダースコア (_) にするなど。
</p>
<a name="map_002d_003cSID_003e"></a><a name="index-map_002d_003cSID_003e"></a>
<p>特別な文字列 &quot;&lt;SID&gt;&quot; を使つてスクリプトローカルなマップを定義できます。詳細は |<a href="#g_t_003cSID_003e">&lt;SID&gt;</a>| を參照してください。
</p>
<a name="g_t_003cPlug_003e"></a><a name="index-_003cPlug_003e"></a>
<p>特別な文字列 &quot;&lt;Plug&gt;&quot; を使つてスクリプトの內部作業用のマップを定義できます。これはどのキー入力にもマッチしません。プラグインを作成するときに便利です |<a href="usr_005f41_002etxt.html#using_002d_003cPlug_003e">using-&lt;Plug&gt;</a>|。
</p>
<a name="g_t_003cChar_003e"></a><a name="g_t_003cChar_002d_003e"></a><a name="index-_003cChar_003e"></a>
<a name="index-_003cChar_002d_003e"></a>
<p>&lt;Char&gt; を使つて、文字を 10 進數、8 進數、16 進數の數値指定でマップできます:
</p><table>
<tr><td width="50%">&lt;Char-123&gt;</td><td width="50%">character 123</td></tr>
<tr><td width="50%">&lt;Char-033&gt;</td><td width="50%">character 27</td></tr>
<tr><td width="50%">&lt;Char-0x7f&gt;</td><td width="50%">character 127</td></tr>
<tr><td width="50%">&lt;S-Char-114&gt;</td><td width="50%">character 114 (&rsquo;r&rsquo;) shifted (&rsquo;R&rsquo;)</td></tr>
</table>
<p>これは &rsquo;<samp>keymap</samp>&rsquo; ファイルで (マルチバイト) 文字を定義するのに便利です。表記は大文字でも小文字でも構ひません。
</p>
<a name="map_002dcomments"></a><a name="index-map_002dcomments"></a>
<p>マップコマンドでは &rsquo;&quot;&rsquo; (ダブルクォート) も {lhs} や {rhs} の一部と見なされるため、マップコマンドの後ろにコメントを置くことはできません。しかし、|&quot; を使ふことができます。これはコメント付きの空の新しいコマンドを開始するからです。
</p>
<a name="map_005fbar"></a><a name="map_002dbar"></a><a name="index-map_005fbar"></a>
<a name="index-map_002dbar"></a>
<p>&rsquo;|&rsquo; 文字は、マップコマンドと次のコマンドを分けるために使はれるので、&rsquo;|&rsquo; 文字を {rhs} に含めるには特殊な方法が必要です。次の 3 つの方法があります:
</p><table>
<thead><tr><th width="15%">方法</th><th width="45%">使用できる條件</th><th width="40%">例</th></tr></thead>
<tr><td width="15%">&lt;Bar&gt;</td><td width="45%">&rsquo;cpoptions&rsquo;に&rsquo;&lt;&rsquo;が含まれてゐない</td><td width="40%">:map _l :!ls &lt;Bar&gt; more^M</td></tr>
<tr><td width="15%">\|</td><td width="45%">&rsquo;cpoptions&rsquo;に&rsquo;b&rsquo;が含まれてゐない</td><td width="40%">:map _l :!ls \| more^M</td></tr>
<tr><td width="15%">^V|</td><td width="45%">VimとViで常に使用できる</td><td width="40%">:map _l :!ls ^V| more^M</td></tr>
</table>

<p>(ここで ^V は CTRL-V を表します。1 つの CTRL-V を插入するには CTRL-V を 2 度押しで入力します。この用途では、|<a href="intro_002etxt.html#g_t_003c_003e">&lt;&gt;</a>| 表記を使つて &quot;&lt;C-V&gt;&quot; とすることはできません)。
</p>
<p>&rsquo;<samp>cpoptions</samp>&rsquo; が標準設定のままなら、3 つ全ての方法が使用できます。
</p>
<p>&rsquo;<samp>cpoptions</samp>&rsquo; に &rsquo;<var>b</var>&rsquo; が含まれてゐる場合、&quot;\|&quot; は、&rsquo;\&rsquo; で終はるマップコマンドの後に、別のコマンドが續いてゐるとみなされます。これは Vi 互換ですが、他のコマンドの場合を考へるとあまり論理的ではありません。
</p>
<a name="map_005freturn"></a><a name="map_002dreturn"></a><a name="index-map_005freturn"></a>
<a name="index-map_002dreturn"></a>
<p>マップに Ex コマンドを含める場合、そのコマンドラインを實行するために改行文字を插入する必要があります。これには &lt;CR&gt; を使ふことが推奬されてゐます (參照 |<a href="intro_002etxt.html#g_t_003c_003e">&lt;&gt;</a>|)。例:
</p><pre class="verbatim">:map  _ls  :!ls -l %:S&lt;CR&gt;:echo &quot;the end&quot;&lt;CR&gt;
</pre>
<p>插入モードやコマンドラインモードで、入力する文字がマップされないやうにするには、その文字を入力する前に <kbd>CTRL-V</kbd> を (1 回) 押してください。&rsquo;<samp>paste</samp>&rsquo; がオンの場合には、插入モードでマップを使用できません。
<a name="map_002derror"></a><a name="index-map_002derror"></a>
</p><blockquote>
<p><strong>Note:</strong> <br>
マップを使用したときに、エラーが起きた場合 (エラーメッセージやビープ音が出ます)、マップのまだ實行されてゐない部分は實行されません。これは Vi 互換です。
</p></blockquote>

<blockquote>
<p><strong>Note:</strong> <br>
コマンド「@zZtTfF[]rm&rsquo;&lsquo;&quot;v」と <kbd>CTRL-X</kbd> の引數にはマップは適用されません。どのやうなマップがあつても、レジスタやマークを指定できるやうにするためです。
</p></blockquote>


<a name="map_002dwhich_002dkeys"></a><a name="index-map_002dwhich_002dkeys"></a>
<a name="g_t1_002e7-matupuniShi-uki"></a>
<h4 class="subsection">1.7 マップに使ふキー</h4>

<p>マップを定義するときに {lhs} に指定するキーを選ぶことができますが、Vim のコマンドに使はれてゐるキーをマップしてしまふとそれらのコマンドを使用できなくなります。そこで、いくつかの提案があります:
</p><ul>
<li> ファンクションキー (<code class="tt-key">&lt;F2&gt;</code>、<code class="tt-key">&lt;F3&gt;</code>など) や <code class="tt-key">Shift</code>+ファンクションキー(<kbd>&lt;S-F1&gt;</kbd>、<kbd>&lt;S-F2&gt;</kbd> など) を使用する。<code class="tt-key">&lt;F1&gt;</code> には既にヘルプコマンドが割り當てられてゐます。
</li><li> Meta キー (<code class="tt-key">ALT</code>キー) を使用する。あなたのキーボードのアクセント記號付き文字の使用頻度に依存します。|<a href="#g_t_003amap_002dalt_002dkeys">:map-alt-keys</a>|
</li><li> &quot;_&quot; や &quot;,&quot; などの文字と別の文字を組み合はせて使用する。コマンド &quot;_&quot; と&quot;,&quot; はすでに存在してゐますが (|<a href="motion_002etxt.html#g_t_005f">_</a>| と |<a href="motion_002etxt.html#g_t_002c">,</a>| を參照)、使ふ機會はあまりないでせう。
</li><li> 他に類するコマンドがあるキーを使用する。例へば、<kbd>CTRL-P</kbd> と <kbd>CTRL-N</kbd>。さらに多くのマップを使用するには、複數文字を使用します。
</li><li> &lt;Leader&gt; と 1 つまたは複數のキーを組み合はせて使用する。これは特にスクリプトで便利です。|<a href="#mapleader">mapleader</a>|
</li></ul>

<p>標準のキー操作を損なふことなくマップできるキーや、使はれてゐないキーを探すには |<a href="index_002etxt.html#index_002etxt">index.txt</a>| を參照してください。&quot;<code>:help {key}^D</code>&quot; を使用してそのキーが使はれてゐるかどうかを調べることもできます ({key} は調べたいキー、^D は <kbd>CTRL-D</kbd> の入力)。
</p>

<a name="map_002dexamples"></a><a name="index-map_002dexamples"></a>
<a name="g_t1_002e8-Li"></a>
<h4 class="subsection">1.8 例</h4>

<p>マップの例をいくつか示します (見た通り入力してください。&quot;&lt;CR&gt;&quot; は 4 文字です。このやうな表記(|<a href="intro_002etxt.html#g_t_003c_003e">&lt;&gt;</a>|)は &rsquo;<samp>cpoptions</samp>&rsquo; に &rsquo;&lt;&rsquo; が含まれてゐると使用できません)。
</p><pre class="verbatim">:map &lt;F3&gt;  o#include
:map &lt;M-g&gt; /foo&lt;CR&gt;cwbar&lt;Esc&gt;
:map _x    d/END/e&lt;CR&gt;
:map! qq   quadrillion questions
</pre>

<a name="kauntoZhi-Ding-noGua-keSuan-"></a>
<h4 class="unnumberedsubsubsec">カウント指定の掛け算</h4>

<p>マップの展開前にカウント指定が入力されると、そのカウントは {lhs} の前に入力されたものとして扱はれます。例へば、次のマップを定義したとき:
</p><pre class="verbatim">:map &lt;F4&gt;  3w
</pre><p>2&lt;F4&gt; は &quot;23w&quot; となります。つまり、2 * 3 單語移動するのではなく、23 單語の移動になります。カウントを掛けたい場合は式レジスタを使つてください:
</p><pre class="verbatim">:map &lt;F4&gt;  @='3w'&lt;CR&gt;
</pre><p>クォートで圍まれた部分が實行される式です。|<a href="change_002etxt.html#g_t_0040_003d">@=</a>|
</p>

<a name="map_002dtyping"></a><a name="index-map_002dtyping"></a>
<a name="g_t1_002e9-matupuwoShi-u"></a>
<h4 class="subsection">1.9 マップを使ふ</h4>

<p>Vim は、入力されたキーで始まるマップがあるかどうかを調べ、そのやうなマップがある場合は、入力とマップが完全に一致するか一致しないと判斷できるまで、次の入力を待ちます。
</p>
<p>例へば、&quot;qq&quot; といふマップがあるとして、最初に入力した &rsquo;q&rsquo; は、次の文字を入力するまで實際に入力されません。なぜなら、Vim には次に入力される文字が &rsquo;q&rsquo; であるかさうでないかを知ることができないからです。
</p>
<p>&rsquo;<samp>timeout</samp>&rsquo; がオンになつてゐると (標準設定はオンです)、Vim は 1 秒閒 (または &rsquo;<samp>timeoutlen</samp>&rsquo; で指定されてゐる時閒) だけ待機します。待機した後に、&rsquo;&lsquo;<samp>q</samp>&rsquo;&rsquo; といふ文字が入力されたのだと判斷します。
</p>
<p>ゆつくり入力したい場合や、遲いシステムを使用してゐる場合は、&rsquo;<samp>timeout</samp>&rsquo; をオフにしてください。&rsquo;<samp>ttimeout</samp>&rsquo; を設定するのもいいでせう。
</p>
<a name="map_002dprecedence"></a><a name="index-map_002dprecedence"></a>
<p>バッファローカルなマップ (|<a href="#g_t_003amap_002d_003cbuffer_003e">:map-&lt;buffer&gt;</a>| を使用して定義された) はどのグローバルなマップよりも優先されます。バッファローカルなマップがグローバルなマップと同じ場合、Vim はバッファローカルなマップを使用します。
</p>
<p>加へて、&lt;nowait&gt; で定義された場合はより長いマップが同じ接頭辭を持つてゐるとしても、直ちに完了したマップを使用します。例へば、次の 2 つのマップがあるとします:
</p><pre class="verbatim">:map &lt;buffer&gt; &lt;nowait&gt; \a   :echo &quot;Local \a&quot;&lt;CR&gt;
:map                   \abc :echo &quot;Global \abc&quot;&lt;CR&gt;
</pre><p>\a を入力するとバッファローカルなマップが直ちに使用されます。Vim はユーザーが \abc を入力するかどうかを知るためにそれ以上の文字を待つことはしません。
</p>
<a name="map_002dkeys_002dfails"></a><a name="index-map_002dkeys_002dfails"></a>
<p>次のやうな狀況では、キーコードが認識されないことがあります:
</p><ul>
<li> Vim がキーコードを部分的にしか讀めない。これは最初の文字だけ讀める場合が多いです。特定の Unix 版と xterm の組み合はせで起こります。
</li><li> 文字(列)の後にキーコードがあるマップ。例、&quot;&lt;F1&gt;&lt;F1&gt;&quot; や &quot;g&lt;F1&gt;&quot;。
</li></ul>

<p>このやうに、キーコードが認識されない狀況では、そのやうなマップを使用することができません。對處方が 2 つあります:
</p>
<ul>
<li> &rsquo;<samp>cpoptions</samp>&rsquo; から &rsquo;<var>K</var>&rsquo; フラグを除く。さうすると Vim はファンクションキーの殘りのコードを待つやうになります。
</li><li> &lt;F1&gt; から &lt;F4&gt; のキーによつて生成される實際のキーコードが &lt;xF1&gt; から &lt;xF4&gt; と同じ場合があります。&lt;xF1&gt; を &lt;F1&gt; へ、&lt;xF2&gt; を &lt;F2&gt; へ、といつたマップが存在しますが、これはマップの後半では認識されません。&lt;F1&gt; から &lt;F4&gt; のキーのキーコードを正しく設定してください:
<pre class="verbatim">:set &lt;F1&gt;=&lt;type CTRL-V&gt;&lt;type F1&gt;
</pre><p>&lt;F1&gt; を 4 文字として入力してください。&quot;=&quot; の後の部分は文字通りにではなく、實際のキーを入力してください。
</p>
<p>マップを定義するときに 2 番目の特殊キーを實際のキーコードで指定することでも解決できます:
</p><pre class="verbatim">:map &lt;F1&gt;&lt;Esc&gt;OP :echo &quot;yes&quot;&lt;CR&gt;
</pre><p>本物の <code class="tt-key">&lt;Esc&gt;</code> を入力しないでください。Vim がキーコードを認識し、&lt;F1&gt; に置き換へてしまひます。
</p></li></ul>

<p>他にも、<kbd>ALT</kbd> や <kbd>Meta</kbd> キーを押しながらキーを入力したときに、コードの 8 ビット目をセットする代はりにそのキーに ESC を前置するやうな端末で問題が起こることがあります。|<a href="#g_t_003amap_002dalt_002dkeys">:map-alt-keys</a>| を參照。
</p>
<a name="recursive_005fmapping"></a><a name="index-recursive_005fmapping"></a>
<p>{rhs} の中に {lhs} を含めて、再歸マップを作成できます。{lhs} を入力すると {rhs} に置き換へられ、{rhs} の中に {lhs} があるとその {lhs} がさらに {rhs} に置き換へられ、さらに {rhs} の中の {lhs} が置き換へられ...。といふやうにコマンドを無限に繰り返すことができます。エラーを生じさせないと止めることができないのが唯一の問題です。
</p>
<p>例外として、{rhs} が {lhs} で始まつてゐる場合は、その文字は再歸的にマップされません (これは Vi 互換です)。
</p>
<p>例へば次のマップは:
</p><pre class="verbatim">:map ab abcd
</pre><p>&quot;a&quot; コマンドを實行して &quot;bcd&quot; を插入します。{rhs} の中の &quot;ab&quot; は再歸的にマップされません。
</p>
<p>2 つのキーの意味を入れ換へるやうな場合は :noremap を使つてください。例へば:
</p><pre class="verbatim">:noremap k j
:noremap j k
</pre><p>これは、カーソルの上下移動のコマンドを入れ換へます。
</p>
<p>普通の :map コマンドでマップを定義した場合、&rsquo;<samp>remap</samp>&rsquo; オプションがオンになつてゐると、そのマップが使用された後のテキスト ({rhs}) に {lhs} が含まれてゐる限り、マップが再歸的に繰り返されます。例へば、次のやうなマップを使用する場合:
</p><pre class="verbatim">:map x y
:map y x
</pre><p>Vim はまづ、x を y で置き換へ、それから y を x で置き換へ、...。これを &rsquo;<samp>maxmapdepth</samp>&rsquo; に設定された回數だけ (標準設定は 1000 回) 繰り返し、&quot;recursive mapping&quot; といふエラーメッセージを表示します。
</p>
<a name="g_t_003amap_002dundo"></a><a name="index-_003amap_002dundo"></a>
<p>マップされたもの ({rhs}) がアンドゥコマンドを含んでゐると、その操作を實行する前の狀態に戾すことになります。アンドゥが 1 回だけなら、その動作はオリジナルの Vi 互換です (オリジナルの Vi では、2 回アンドゥしても意味がなく、最初のアンドゥを實行する前の狀態に戾るだけです)。
</p>

<a name="g_t_003amap_002dalt_002dkeys"></a><a name="index-_003amap_002dalt_002dkeys"></a>
<a name="g_t1_002e10-ALT-kiwoShi-tutamatupu"></a>
<h4 class="subsection">1.10 ALT キーを使つたマップ</h4>

<p>GUI では、Vim は <kbd>Alt</kbd> キーを直接取り扱ふので、<kbd>ALT</kbd> キーを使つたマップは常に機能します。CUI 端末では、Vim は受け取つたバイト列から、<kbd>ALT</kbd> キーが押されてゐるかどうかを割り出さなければなりません。
</p>
<p>初期設定では、<kbd>ALT</kbd> キーが押されてゐるときは、文字の 8 ビット目が設定されるものと假定してゐます。xterm, aterm, rxvt など、ほとんどの端末はこの方法で問題ありません。&lt;A-k&gt; のやうなマップが動作しない場合は、その端末が、文字の前に ESC を付けてゐるのかもしれません。ユーザーが文字の前に ESC を入力することもできますから、Vim は何が起きたか知ることはできません (ただし、ESC と文字の閒に延滯があるかどうかをチェックする方法はあります。確實な方法ではありませんが)。
</p>
<p>現在、gnome-terminal や konsole などの主要な端末が ESC を前置します。代はりに 8 ビット目を使ふやうに設定する方法はないやうです。Xterm では設定なしで機能します。Aterm と rxvt では &quot;<code>--meta8</code>&quot; 引數を使へば機能します。&quot;metaSendsEscape&quot;, &quot;eightBitInput&quot;, eightBitOutput&quot; のやうなリソースを設定することでも動作を變更できます。
</p>
<p>Linux コンソールでは、&quot;setmetamode&quot; コマンドで動作を切り替へることができます。ESC の前置を使はないやうにすると、他のプログラムで問題が起こる可能性があるので注意してください。bash の &quot;<samp>convert-meta</samp>&quot; が &quot;<var>on</var>&quot; になつてゐることを確認し、Meta キーバインディングが動作するやうにしてください。(システム固有の設定變更をしてゐなければ、これは readline の標準の動作です)次の行を ~/<samp>.inputrc</samp> に追加すると、その設定をすることができます:
</p><pre class="verbatim">set convert-meta on
</pre><p>ファイルをはじめて作成した場合は、システム全體の設定を維持するために、次の行を最初に加へる必要があるかもしれません(そのファイルがシステムにある場合):
</p><pre class="verbatim">$include /etc/inputrc
</pre><p>このやうに設定すると、ウムラウトのやうな特殊な文字を入力できなくなるかもしれません。その場合は、文字の前に <kbd>CTRL-V</kbd> を入力してください。
</p>
<p><samp>convert-meta</samp> は UTF-8 ロケールでは問題を起こすことがすでに報告されてゐます。xterm のやうな端末では、起動してゐるときに、メニューの &quot;Main Options&quot; から &quot;metaSendsEscape&quot; リソースを設定できます。メニューは端末を Ctrl-LeftClick すると表示できます。他のアプリケーションでは ESC を使ひ、Vim では使ひたくない、といふ場合にこのリソースを使ふと便利です。
</p>

<a name="g_t_003amap_002doperator"></a><a name="index-_003amap_002doperator"></a>
<a name="g_t1_002e11-operetanoZuo-Cheng-"></a>
<h4 class="subsection">1.11 オペレータの作成</h4>

<p>オペレータは {motion} コマンドと合はせて使はれます。獨自のオペレータを定義するには、最初に &rsquo;<samp>operatorfunc</samp>&rsquo; を設定し、そして、|<a href="#g_0040">g@</a>| オペレータを呼びます。ユーザーが {motion} コマンドを實行した後、設定した函數が實行されます。
</p>
<a name="g_0040"></a><a name="index-g_0040"></a>
<a name="E774"></a><a name="E775"></a><a name="index-E774"></a>
<a name="index-E775"></a>
<dl compact="compact">
<dt>g@{motion}</dt>
<dd><p>&rsquo;<samp>operatorfunc</samp>&rsquo; に設定された函數を實行します。&rsquo;[ マークに {motion} で選擇された範圍の最初の位置が設定されます。&rsquo;] マークには選擇範圍の最後の位置が設定されます。函數の引數には、文字列が 1 つ渡されます:
</p><table>
<tr><td width="50%">&quot;line&quot;  {motion}</td><td width="50%">は行單位 |<a href="motion_002etxt.html#linewise">linewise</a>|</td></tr>
<tr><td width="50%">&quot;char&quot;  {motion}</td><td width="50%">は文字單位 |<a href="motion_002etxt.html#characterwise">characterwise</a>|</td></tr>
<tr><td width="50%">&quot;block&quot; {motion}</td><td width="50%">は矩形 |<a href="visual_002etxt.html#blockwise_002dvisual">blockwise-visual</a>|</td></tr>
</table>
<p>&quot;block&quot; はたまにしか使はれません。ビジュアルモードの場合だけ渡されるのですが、&quot;g@&quot; と合はせてもそれほど便利ではないからです。
</p>
<p>{|<a href="various_002etxt.html#g_t_002beval">+eval</a>| が有效な場合のみ利用できます}
</p></dd>
</dl>

<p>例を示します。これは <code class="tt-key">&lt;F4&gt;</code> を使つてスペースの數を數へます:
</p><pre class="verbatim">nmap &lt;silent&gt; &lt;F4&gt; :set opfunc=CountSpaces&lt;CR&gt;g@
vmap &lt;silent&gt; &lt;F4&gt; :&lt;C-U&gt;call CountSpaces(visualmode(), 1)&lt;CR&gt;
</pre><pre class="verbatim">function! CountSpaces(type, ...)
  let sel_save = &amp;selection
  let &amp;selection = &quot;inclusive&quot;
  let reg_save = @@

  if a:0  &quot; ビジュアルモードから呼び出すのに、gv コマンドを使用します。
    silent exe &quot;normal! gvy&quot;
  elseif a:type == 'line'
    silent exe &quot;normal! '[V']y&quot;
  else
    silent exe &quot;normal! `[v`]y&quot;
  endif

  echomsg strlen(substitute(@@, '[^ ]', '', 'g'))

  let &amp;selection = sel_save
  let @@ = reg_save
endfunction
</pre>
<blockquote>
<p><strong>Note:</strong> <br>
一時的に &rsquo;<samp>selection</samp>&rsquo; を &quot;<var>inclusive</var>&quot; に設定し、&rsquo;[ から &rsquo;] まで選擇した範圍を正しくヤンクできるやうにしてゐます。
</p></blockquote>

<blockquote>
<p><strong>Note:</strong> <br>
ビジュアルモードのために別のマップを定義してゐます。ビジュアルモードで &quot;:&quot; を押した場合に插入される &quot;&rsquo;&lt;,&rsquo;&gt;&quot; を削除し、函數に visualmode() の値と追加の引數を渡してゐます。
</p></blockquote>

<a name="abbreviations"></a><a name="Abbreviations"></a><a name="index-abbreviations"></a>
<a name="index-Abbreviations"></a>
<a name="g_t2_002e-Duan-Suo-Ru-Li--_0028Abbreviations_0029"></a>
<h3 class="section">2. 短縮入力 (Abbreviations)</h3>

<p>短縮入力は、插入モード、置換モード、コマンドラインモードで使へます。短縮入力として登錄されてゐる單語を入力すると、それが表す單語に置き換へられます。よく使ふ長い單語を打ち込むときのタイプ數を減らしたり、明確なスペルミスを自動的に修正するのに使へます。
</p>
<p>例:
</p><pre class="verbatim">:iab ms Microsoft
:iab tihs this
</pre>
<p>短縮入力には 3 つの種類があります:
</p><dl compact="compact">
<dt>full-id</dt>
<dd><p>&quot;full-id&quot; タイプは完全なキーワード文字から構成されます(&rsquo;<samp>iskeyword</samp>&rsquo; オプションに含まれる文字です)。最も一般的な短縮入力です。
</p>
<p>例:
</p><pre class="verbatim">&quot;foo&quot;, &quot;g3&quot;, &quot;-1&quot;
</pre>
</dd>
<dt>end-id</dt>
<dd><p>&quot;end-id&quot; タイプはキーワード文字で終はりますが、他の文字はキーワード文字ではありません。
</p>
<p>例:
</p><pre class="verbatim">&quot;#i&quot;, &quot;..f&quot;, &quot;$/7&quot;
</pre>
</dd>
<dt>non-id</dt>
<dd><p>&quot;non-id&quot; タイプは非キーワード文字で終はります。他の文字はスペースとタブ文字以外のどんな文字でもよいです。
</p>
<p>{Vi では、このタイプはサポートされてゐません}
</p>
<p>例:
</p><pre class="verbatim">&quot;def#&quot;, &quot;4/7$&quot;
</pre></dd>
</dl>

<p>短縮入力にできない文字列の例: &quot;a.b&quot;, &quot;#def&quot;, &quot;a b&quot;, &quot;_$r&quot;
</p>
<p>短縮入力は非キーワード文字を入力したときに展開されます。これは、插入モードを終はらせる &lt;Esc&gt; を入力したり、コマンドを終はらせる &lt;CR&gt; を入力したときにも起こります。短縮入力を終はらせる非キーワード文字は、短縮入力を展開した後に插入されます。&lt;C-]&gt; 文字は例外で、短縮入力だけが展開され插入されます。
</p>
<p>例:
</p><pre class="verbatim">:ab hh	hello
</pre><table>
<tr><td width="10%"></td><td width="90%">&quot;hh&lt;Space&gt;&quot; で &quot;hello&lt;Space&gt;&quot; に展開されます。</td></tr>
<tr><td width="10%"></td><td width="90%">&quot;hh&lt;C-]&gt;&quot; で &quot;hello&quot; に展開されます。</td></tr>
</table>

<p>カーソルの前の文字が短縮入力とマッチする場合のみ機能します。短縮入力の種類によつて、さらに條件があります:
</p><dl compact="compact">
<dt>full-id</dt>
<dd><p>マッチした場所の前が非キーワード文字、行頭、插入を開始した場所、であること。例外: 短縮入力が 1 文字の場合、その前の文字がスペース、タブ、以外の非キーワード文字なら短縮入力は展開されません。ただし、コマンドラインにおける &quot;&rsquo;&lt;,&rsquo;&gt;&quot; (もしくはその他のマーク) は無視され、コマンドラインがその後から始まつてゐるやうに動作します。
</p>
</dd>
<dt>end-id</dt>
<dd><p>マッチした場所の前が非キーワード文字、スペース、タブ、行頭、插入を開始した場所、であること。
</p>
</dd>
<dt>non-id</dt>
<dd><p>マッチした場所の前がタブ、行頭、插入を開始した場所、であること。
</p></dd>
</dl>

<p>例: ({CURSOR} は非キーワード文字を入力する場所です)
</p><pre class="verbatim">:ab foo   four old otters
</pre><table>
<tr><td width="10%"></td><td width="90%">&quot; foo{CURSOR}&quot; は &quot; four old otters&quot; に展開されます</td></tr>
<tr><td width="10%"></td><td width="90%">&quot; foobar{CURSOR}&quot; は展開されません</td></tr>
<tr><td width="10%"></td><td width="90%">&quot;barfoo{CURSOR}&quot; は展開されません</td></tr>
</table>
<pre class="verbatim">:ab #i #include
</pre><table>
<tr><td width="10%"></td><td width="90%">&quot;#i{CURSOR}&quot; は &quot;#include&quot; に展開されます</td></tr>
<tr><td width="10%"></td><td width="90%">&quot;&gt;#i{CURSOR}&quot; は展開されません</td></tr>
</table>
<pre class="verbatim">:ab ;; &lt;endofline&gt;
</pre><table>
<tr><td width="10%"></td><td width="90%">&quot;test;;&quot; は展開されません</td></tr>
<tr><td width="10%"></td><td width="90%">&quot;test ;;&quot; は &quot;test &lt;endofline&gt;&quot; に展開されます</td></tr>
</table>

<p>插入モードで短縮入力の展開を避けるには、短縮入力を發動する可能性のある文字を入力する前に <kbd>CTRL-V</kbd> を押します。 例: <kbd>CTRL-V</kbd> <code class="tt-key">&lt;Space&gt;</code> もしくは短縮入力の一部を入力してから插入モードを &lt;Esc&gt; で拔け、再度插入モードに &quot;a&quot; で入つて殘りを入力します。
</p>
<p>コマンドラインモードで短縮入力の展開を避けるには、短縮入力の文字の途中で <kbd>CTRL-V</kbd> を入力します (<kbd>CTRL-V</kbd> を 2 度押し)。展開されなかつた場合、普通の文字の前の <kbd>CTRL-V</kbd> は普通は無視されます。
</p>
<p>短縮入力の後で、カーソルを動かすこともできます:
</p><pre class="verbatim">:iab if if ()&lt;Left&gt;
</pre><p>これは、&rsquo;<samp>cpoptions</samp>&rsquo; に &rsquo;<var>&lt;</var>&rsquo; フラグが含まれてゐると、うまく動作しません。|<a href="intro_002etxt.html#g_t_003c_003e">&lt;&gt;</a>|
</p>
<p>さらに手の込んだこともできます。例へば、短縮入力を展開するときに入力したスペースを消してしまふには:
</p><pre class="verbatim">func Eatchar(pat)
   let c = nr2char(getchar(0))
   return (c =~ a:pat) ? '' : c
endfunc
iabbr &lt;silent&gt; if if ()&lt;Left&gt;&lt;C-R&gt;=Eatchar('\s')&lt;CR&gt;
</pre>
<p>標準設定されてゐる短縮入力はありません。
</p>
<p>短縮入力の展開は再歸的には行はれません。&quot;<code>:ab f f-o-o</code>&quot; といふ短縮入力を問題なく使ふことができます。しかし、展開された文字にはマップが適用されます。{Vi のいくつかのバージョンで再歸的な短縮入力をサポートしてゐますが、そこになんら明確な理由はありません}
</p>
<p>&rsquo;<samp>paste</samp>&rsquo; オプションがオンの場合、短縮入力は使用できません。
</p>
<a name="g_t_003aabbreviate_002dlocal"></a><a name="g_t_003aabbreviate_002d_003cbuffer_003e"></a><a name="index-_003aabbreviate_002dlocal"></a>
<a name="index-_003aabbreviate_002d_003cbuffer_003e"></a>
<p>マップと同じやうに、バッファローカルな短縮入力を作成できます。これは主に |<a href="usr_005f43_002etxt.html#filetype_002dplugin">filetype-plugin</a>| などで使用されます。C 言語用プラグインの例:
</p><pre class="verbatim">:abb &lt;buffer&gt; FF  for (i = 0; i &lt; ; ++i)
</pre><a name="g_t_003aab"></a><a name="g_t_003aabbreviate"></a><a name="index-_003aab"></a>
<a name="index-_003aabbreviate"></a>
<dl compact="compact">
<dt>:ab[breviate]</dt>
<dd><p>すべての短縮入力を一覽表示します。行頭の文字は、その短縮入力を使用できるモードを示してゐます: &rsquo;i&rsquo; は插入モード、&rsquo;c&rsquo; はコマンドラインモード、&rsquo;!&rsquo; はその兩方。マップの一覽表示と同じです。|<a href="#map_002dlisting">map-listing</a>| を參照。
</p></dd>
</dl>

<a name="g_t_003aabbreviate_002dverbose"></a><a name="index-_003aabbreviate_002dverbose"></a>
<p>&rsquo;<samp>verbose</samp>&rsquo; がゼロ以外のときに短縮入力一覽を表示すると、どこで定義されたのかも表示されます。例:
</p><pre class="verbatim">:verbose abbreviate
</pre><pre class="verbatim">!  teh           the
        Last set from /home/abcd/vim/abbr.vim
</pre><p>詳しくは |<a href="various_002etxt.html#g_t_003averbose_002dcmd">:verbose-cmd</a>| を參照してください。
</p>
<dl compact="compact">
<dt>:ab[breviate] {lhs}</dt>
<dd><p>{lhs} で始まる短縮入力を一覽表示します。{lhs} に入力した文字が短縮入力として展開されないやうにするには <kbd>CTRL-V</kbd> (2 度押しで入力する) を插入します。さうしないとコマンドライン用の短縮入力があつた場合にそれが展開されてしまひます。
</p>
</dd>
<dt>:ab[breviate] [&lt;expr&gt;] [&lt;buffer&gt;] {lhs} {rhs}</dt>
<dd><p>{rhs} の短縮入力を {lhs} として定義します。既に {lhs} が定義されてゐると、新しい {rhs} で置き換へられます。{rhs} はスペースを含んでゐてもかまひません。
</p>
<p>&lt;expr&gt; 引數については |<a href="#g_t_003amap_002d_003cexpr_003e">:map-&lt;expr&gt;</a>| を參照してください。
</p>
<p>&lt;buffer&gt; 引數については |<a href="#g_t_003amap_002d_003cbuffer_003e">:map-&lt;buffer&gt;</a>| を參照してください。
</p>
<a name="g_t_003auna"></a><a name="g_t_003aunabbreviate"></a><a name="index-_003auna"></a>
<a name="index-_003aunabbreviate"></a>
</dd>
<dt>:una[bbreviate] {lhs}</dt>
<dd><p>{lhs} といふ短縮入力を全て削除します。見つからなかつた場合は、{lhs} に入力した文字を各短縮入力の {rhs} から探して見つかつたものを削除します。これは短縮入力が展開されてしまつた狀態でも削除できるやうにするためです。短縮入力の展開を防ぐには <kbd>CTRL-V</kbd> (2 度押しで入力する) を插入します。
</p>
<a name="g_t_003anorea"></a><a name="g_t_003anoreabbrev"></a><a name="index-_003anorea"></a>
<a name="index-_003anoreabbrev"></a>
</dd>
<dt>:norea[bbrev] [&lt;expr&gt;] [&lt;buffer&gt;] [lhs] [rhs]</dt>
<dd><p>&quot;:ab&quot; と同じですが、展開後にマップを適用しません。
</p>
<a name="g_t_003aca"></a><a name="g_t_003acab"></a><a name="g_t_003acabbrev"></a><a name="index-_003aca"></a>
<a name="index-_003acab"></a>
<a name="index-_003acabbrev"></a>
</dd>
<dt>:ca[bbrev] [&lt;expr&gt;] [&lt;buffer&gt;] [lhs] [rhs]</dt>
<dd><p>&quot;:ab&quot; と同じですが、コマンドラインモード用の短縮入力のみ對象です。
</p>
<a name="g_t_003acuna"></a><a name="g_t_003acunabbrev"></a><a name="index-_003acuna"></a>
<a name="index-_003acunabbrev"></a>
</dd>
<dt>:cuna[bbrev] {lhs}</dt>
<dd><p>&quot;:una&quot; と同じですが、コマンドラインモード用の短縮入力のみ對象です。
</p>
<a name="g_t_003acnorea"></a><a name="g_t_003acnoreabbrev"></a><a name="index-_003acnorea"></a>
<a name="index-_003acnoreabbrev"></a>
</dd>
<dt>:cnorea[bbrev] [&lt;expr&gt;] [&lt;buffer&gt;] [lhs] [rhs]</dt>
<dd><p>&quot;:ab&quot; と同じですが、コマンドラインモード用の短縮入力のみ對象で、展開後にマップを適用しません。
</p>
<a name="g_t_003aia"></a><a name="g_t_003aiabbrev"></a><a name="index-_003aia"></a>
<a name="index-_003aiabbrev"></a>
</dd>
<dt>:ia[bbrev] [&lt;expr&gt;] [&lt;buffer&gt;] [lhs] [rhs]</dt>
<dd><p>&quot;:ab&quot; と同じですが、插入モード用の短縮入力のみ對象です。
</p>
<a name="g_t_003aiuna"></a><a name="g_t_003aiunabbrev"></a><a name="index-_003aiuna"></a>
<a name="index-_003aiunabbrev"></a>
</dd>
<dt>:iuna[bbrev] {lhs}</dt>
<dd><p>&quot;:una&quot; と同じですが、插入モード用の短縮入力のみ對象です。
</p>
<a name="g_t_003ainorea"></a><a name="g_t_003ainoreabbrev"></a><a name="index-_003ainorea"></a>
<a name="index-_003ainoreabbrev"></a>
</dd>
<dt>:inorea[bbrev] [&lt;expr&gt;] [&lt;buffer&gt;] [lhs] [rhs]</dt>
<dd><p>&quot;:ab&quot; と同じですが、插入モード用の短縮入力のみ對象で、展開後にマップを適用しません。
</p>
<a name="g_t_003aabc"></a><a name="g_t_003aabclear"></a><a name="index-_003aabc"></a>
<a name="index-_003aabclear"></a>
</dd>
<dt>:abc[lear] [&lt;buffer&gt;]</dt>
<dd><p>すべての短縮入力を削除します。
</p>
<a name="g_t_003aiabc"></a><a name="g_t_003aiabclear"></a><a name="index-_003aiabc"></a>
<a name="index-_003aiabclear"></a>
</dd>
<dt>:iabc[lear] [&lt;buffer&gt;]</dt>
<dd><p>插入モード用の短縮入力を削除します。
</p>
<a name="g_t_003acabc"></a><a name="g_t_003acabclear"></a><a name="index-_003acabc"></a>
<a name="index-_003acabclear"></a>
</dd>
<dt>:cabc[lear] [&lt;buffer&gt;]</dt>
<dd><p>コマンドラインモード用の短縮入力を削除します。
</p></dd>
</dl>

<a name="using_005fCTRL_002dV"></a><a name="index-using_005fCTRL_002dV"></a>
<p>特殊な文字を短縮入力の {rhs} で使ふことができます。非印字可能文字の特殊な意味を打ち消す(クォートする)には、<kbd>CTRL-V</kbd> を使用します。必要な <kbd>CTRL-V</kbd> の數は、どのやうな短縮入力を作成するかによります。これはマップでも同樣です。例を示します。
</p>
<p>&quot;esc&quot; を實際の &lt;Esc&gt; 文字を插入する短縮入力にしたいとしませう。Vim で &quot;:ab&quot; コマンドを使ふときには、次のやうにしなければなりません: (ここで ^V は <kbd>CTRL-V</kbd> で、^[ は &lt;Esc&gt; です)
</p>
<dl compact="compact">
<dt>入力:   ab esc ^V^V^V^V^V^[</dt>
<dd><p>キー入力はすべて ^V によるクォートが適用されます。つまり、1 番目、3 番目、5 番目の ^V は、2 番目と 4 番目の ^V と、^[ がコマンドラインに入力されるやうにしてゐます。
</p>
</dd>
<dt>見え方:   ab esc ^V^V^[</dt>
<dd><p>コマンドラインには實際には 2 つの ^V と ^[ が表示されてゐます。もしさうするつもりがあれば、これは <samp>.exrc</samp> ファイルでの見え方になるはずです。始めの ^V は 2 番目の ^V をクォートするためにあります。:ab コマンドは ^V をクォート文字として扱ひますので、短縮入力の中で、クォートされた空白文字や &rsquo;|&rsquo; 文字を使ふことができます。:ab コマンドは ^[ に對しては何も特殊な處理は行ひません。だからクォートする必要もないです。(クォートしても問題はありません。上の例は 7 ( 8 はだめです！) 個の ^V を入力しても動作します)。
</p>
</dd>
<dt>格納:   esc     ^V^[</dt>
<dd><p>コマンドが解析された後、短い形式 (&quot;esc&quot;) と長い形式 (&quot;^V^[&quot; の 2 文字) として、短縮入力の一覽に加へられます。:ab コマンドを引數なしで實行したときに、この形の短縮入力が表示されます。
</p>
<p>あとで、ユーザーが &quot;esc&quot; を入力し、短縮入力が展開されたとき、長い形式は實際のキー入力と同樣に ^V によるクォートが適用されます。つまり、^V が ^[ をクォートし、&quot;插入モードから拔ける&quot; 文字として解釋されることを防ぐのです。その代はりに、^[ がテキストに插入されます。
</p>
</dd>
<dt>展開: ^[</dt>
</dl>

<p>[例は Steve Kirkendall によつて提供されました]
</p>
<a name="script_002dlocal"></a><a name="index-script_002dlocal"></a>
<a name="g_t3_002e-rokarumatuputorokaruGuan-Shu--_0028Local-mappings-and-functions_0029"></a>
<h3 class="section">3. ローカルマップとローカル函數 (Local mappings and functions)</h3>

<p>いくつかの Vim script を倂用すると、あるスクリプトで使はれてゐるマップや函數と同じ名前のものが別のスクリプトでも使用される恐れがあります。それを避けるには、スクリプトローカルなマップや函數を使用します。
</p>
<a name="g_t_003cSID_003e"></a><a name="g_t_003cSNR_003e"></a><a name="E81"></a><a name="index-_003cSID_003e"></a>
<a name="index-_003cSNR_003e"></a>
<a name="index-E81"></a>
<p>マップやメニューに &quot;&lt;SID&gt;&quot; といふ特別な文字列を使用できます。これは &rsquo;<samp>cpoptions</samp>&rsquo;にフラグ &rsquo;<var>&lt;</var>&rsquo; が含まれてゐると利用できません。マップコマンドを實行すると、&quot;&lt;SID&gt;&quot; は、&lt;SNR&gt; といふ特別なキーコードとスクリプト固有の番號、そしてアンダースコアに置換されます。例:
</p><pre class="verbatim">:map &lt;SID&gt;Add
</pre><p>これは &quot;&lt;SNR&gt;23_Add&quot; といつたマップを定義します。
</p>
<p>スクリプトで函數を作成するときに、函數名の前に &quot;s:&quot; を付けると、ローカル函數を作成できます。しかし、その函數をマップで使用する場合、そのマップをスクリプト以外の場所で實行すると、その函數がどのスクリプトで定義されたのか分かりません。これを解決するには、マップ中で &quot;s:&quot; ではなく &quot;&lt;SID&gt;&quot; を使用します。この場合も &quot;&lt;SID&gt;&quot; は上記の例と同じやうに置換されます。これでローカル函數の呼び出しを含むマップを定義できます。
</p>
<p>ローカル函數は、その函數を定義したスクリプトのコンテキストで實行されます。そのため、その函數內で新たに定義した函數やマップにも &quot;s:&quot; や &quot;&lt;SID&gt;&quot; を使用できます。その場合、その函數自身と同じスクリプト番號が使用されます。&quot;s:var&quot; といつたスクリプトローカル變數も同樣です。
</p>
<p>オートコマンドやユーザー定義コマンドもそれを定義したスクリプトのコンテキストで實行されます。そのコマンドからローカル函數を呼び出したり、ローカルマップを使用することができます。
</p>
<p>スクリプト以外の場所で &quot;&lt;SID&gt;&quot; を使ふとエラーになります。
</p>
<p>複雜な處理をするスクリプトで、スクリプト番號が必要な場合は、次の函數で番號を得られます:
</p><pre class="verbatim">function s:SID()
  return matchstr(expand('&lt;sfile&gt;'), '&lt;SNR&gt;\zs\d\+\ze_SID$')
endfun
</pre>
<p>函數やマップを一覽表示するときには &quot;&lt;SNR&gt;&quot; も表示されます。それらがどのやうに定義されてゐるのか調べるときに便利です。
</p>
<p>コマンド |<a href="repeat_002etxt.html#g_t_003ascriptnames">:scriptnames</a>| を使つて、それまでに實行されたスクリプトとそのスクリプト番號を確認できます。
</p>
<p>これらはすべて {|<a href="various_002etxt.html#g_t_002beval">+eval</a>| が有效な場合のみ利用できます}
</p>
<a name="user_002dcommands"></a><a name="index-user_002dcommands"></a>
<a name="g_t4_002e-yuzaDing-Yi-komando-_0028User_002ddefined-command_0029"></a>
<h3 class="section">4. ユーザー定義コマンド (User-defined command)</h3>

<p>ユーザー獨自の Ex コマンドを定義することできます。ユーザー定義コマンドはビルトインコマンドと同樣に振る舞ふことができます (範圍指定や、引數を取ることができます。引數の入力では、ファイル名、バッファ名などを補完できます)。違ひは、コマンドが實行されると、通常の Ex コマンドに變換してから實行されるといふことです。
</p>
<p>まづはユーザーマニュアルの |<a href="usr_005f40_002etxt.html#g_t40_002e2">40.2</a>| を參照してください。
</p>
<a name="E183"></a><a name="E841"></a><a name="user_002dcmd_002dambiguous"></a><a name="index-E183"></a>
<a name="index-E841"></a>
<a name="index-user_002dcmd_002dambiguous"></a>
<p>すべてのユーザー定義コマンドは大文字で開始する必要があります。これはビルトインコマンドと混同しないやうにするためです。特例として次のやうなビルトインコマンドもありますが:
</p><pre class="verbatim">:Next
:X
</pre><p>これらの名前もユーザー定義コマンドには使へません。&quot;<code>:Print</code>&quot; コマンドも存在しますがこれは非推奬 (deprecated) になつてをり、上書きすることができます。
</p>
<p>ユーザーコマンドの開始文字以外は、大文字であつても小文字であつても、數字であつてもかまひません。數字を使ふ場合、數字を引數に取る他のコマンドが曖昧になるかもしれないので注意してください。例へば、&quot;Cc2&quot; コマンドは &quot;:Cc2&quot; といふ引數なしのユーザーコマンドとしても、&quot;2&quot; といふ引數を取つた &quot;:Cc&quot; コマンドとしても解釋できます。これらの問題を避けるため、コマンド名と引數の閒にスペースを插入することを勸めます。
</p>
<p>ユーザー定義コマンドを使ふときに、コマンドの省略形を使ふこともできます。しかしながら、その省略形が唯一でなければエラーが起きます。加へて、ビルトインコマンドが常に優先されます。
</p>
<p>例:
</p><pre class="verbatim">:command Rename ...
:command Renumber ...
:Rena                           &quot; &quot;Rename&quot; を意味します
:Renu                           &quot; &quot;Renumber&quot; を意味します
:Ren                            &quot; エラー - 曖昧
:command Paste ...
:P                              &quot; ビルトインコマンドの:Print です
</pre><p>スクリプトの中で使ふときは、ユーザー定義コマンドの完全な名前を使ふやうにしませう。
</p>
<dl compact="compact">
<dd><a name="g_t_003acom"></a><a name="g_t_003acommand"></a><a name="index-_003acom"></a>
<a name="index-_003acommand"></a>
</dd>
<dt>:com[mand]</dt>
<dd><p>すべてのユーザー定義コマンドを一覽表示します。表示中の行頭の文字は次の意味です:
</p><table>
<tr><td width="10%">!</td><td width="90%">-bang 屬性を持つコマンド</td></tr>
<tr><td width="10%">&quot;</td><td width="90%">-register 屬性を持つコマンド</td></tr>
<tr><td width="10%">|</td><td width="90%">-bar 屬性を持つコマンド</td></tr>
<tr><td width="10%">b</td><td width="90%">カレントバッファのローカルコマンド</td></tr>
</table>
<p>(屬性に關する詳細は下記參照)
</p>
<p>一覽は |<a href="various_002etxt.html#g_t_003afilter">:filter</a>| を用ゐてコマンド名でフィルタできます。例へば名前に &quot;Pyth&quot; を含む全コマンドを一覽するならば次のやうにします:
</p><pre class="verbatim">filter Pyth command
</pre>
</dd>
<dt>:com[mand] {cmd}</dt>
<dd><p>{cmd} で始まるユーザー定義コマンドを一覽表示します。
</p></dd>
</dl>

<a name="g_t_003acommand_002dverbose"></a><a name="index-_003acommand_002dverbose"></a>
<p>&rsquo;<samp>verbose</samp>&rsquo; がゼロ以外のときにコマンド一覽を表示すると、どこで定義されたのかも表示されます。例:
</p><pre class="verbatim">:verbose command TOhtml
</pre><pre class="verbatim">Name        Args Range Complete  Definition
TOhtml      0    %               :call Convert2HTML(&lt;line1&gt;, &lt;line2&gt;)
    Last set from /usr/share/vim/vim-7.0/plugin/tohtml.vim
</pre><p>詳しくは |<a href="various_002etxt.html#g_t_003averbose_002dcmd">:verbose-cmd</a>| を參照してください。
</p>
<dl compact="compact">
<dd><a name="E174"></a><a name="E182"></a><a name="index-E174"></a>
<a name="index-E182"></a>
</dd>
<dt>:com[mand][!] [{attr}...] {cmd} {rep}</dt>
<dd><p>ユーザー定義コマンドを定義します。コマンド名は {cmd} でそれを置き換へるテキストが {rep} です。{attr} はコマンド屬性 (下記參照) です。既にコマンドが存在してゐる場合はエラーになります。! を指定した場合は再定義されます。
</p>
<p>1 つ例外があります: スクリプトを再讀み込みする場合、そのスクリプトで以前に定義されてゐたコマンドは、靜かに置き換へられます。
</p>

<a name="g_t_003adelc"></a><a name="g_t_003adelcommand"></a><a name="E184"></a><a name="index-_003adelc"></a>
<a name="index-_003adelcommand"></a>
<a name="index-E184"></a>
</dd>
<dt>:delc[ommand] {cmd}</dt>
<dd><p>ユーザー定義コマンド {cmd} を削除します。
</p>
<a name="g_t_003acomc"></a><a name="g_t_003acomclear"></a><a name="index-_003acomc"></a>
<a name="index-_003acomclear"></a>
</dd>
<dt>:comc[lear]</dt>
<dd><p>すべてのユーザー定義コマンドを削除します。
</p></dd>
</dl>


<a name="komandoShu-Xing-"></a>
<h4 class="unnumberedsubsec">コマンド屬性</h4>

<p>ユーザー定義コマンドは、他のビルトインコマンドと同樣に扱はれます。引數や範圍も指定できます。引數の入力時にはファイル名やバッファ名などを補完することができます。どのやうに動作するかはコマンドを定義するときに指定したコマンド屬性に依存します。
</p>
<p>たくさんの屬性がありますが、それらは、引數の扱ひ方、補完の種類、範圍指定の仕方、特殊なケース、の 4 つの分野に分けることができます。以下、分野別に說明します。
</p>

<a name="E175"></a><a name="E176"></a><a name="g_t_003acommand_002dnargs"></a><a name="index-E175"></a>
<a name="index-E176"></a>
<a name="index-_003acommand_002dnargs"></a>
<a name="Yin-Shu-noXi-iFang-"></a>
<h4 class="unnumberedsubsec">引數の扱ひ方</h4>

<p>屬性を指定しなかつた場合、ユーザー定義コマンドは引數を取りません (引數が與へられた場合はエラーになります)。-nargs 屬性を指定すると、ユーザー定義コマンドが引數指定できるやうになります。次の屬性が指定できます:
</p>
<table>
<tr><td width="30%">-nargs=0</td><td width="70%">引數を取らない (デフォルト)</td></tr>
<tr><td width="30%">-nargs=1</td><td width="70%">1個の引數が必要 (空白で區切られない)</td></tr>
<tr><td width="30%">-nargs=*</td><td width="70%">いくつでも引數を取れる (0 個以上)、空白で區切られる</td></tr>
<tr><td width="30%">-nargs=?</td><td width="70%">0 もしくは 1 個の引數が取れる</td></tr>
<tr><td width="30%">-nargs=+</td><td width="70%">引數が必ず必要。數はいくつでもよい</td></tr>
</table>

<p>引數は (エスケープされてゐない) スペースやタブ文字で區切られます。ただし、引數を 1 つだけ取る場合は空白は引數の一部として解釋されます。
</p>
<blockquote>
<p><strong>Note:</strong> <br>
引數は Vim script の式としてではなく、テキストとして解釋されることに注意してください。具體的な例を上げると、&quot;s:var&quot; を引數として渡すと、そのコマンドを實行したスクリプトのローカル變數ではなく、そのコマンドを定義したスクリプトのローカル變數が使用されます。例:
</p><pre class="verbatim">script1.vim:
    :let s:error = &quot;None&quot;
    :command -nargs=1 Error echoerr &lt;args&gt;
script2.vim:
    :source script1.vim
    :let s:error = &quot;Wrong!&quot;
    :Error s:error
</pre><p>script2.vim を實行すると &quot;None&quot; が表示されます。期待した結果とは違ふでせう。代はりに函數呼び出しを使つてください。
</p></blockquote>


<a name="g_t_003acommand_002dcompletion"></a><a name="E179"></a><a name="E180"></a><a name="E181"></a><a name="g_t_003acommand_002dcomplete"></a><a name="index-_003acommand_002dcompletion"></a>
<a name="index-E179"></a>
<a name="index-E180"></a>
<a name="index-E181"></a>
<a name="index-_003acommand_002dcomplete"></a>
<a name="Bu-Wan-noZhong-Lei-"></a>
<h4 class="unnumberedsubsec">補完の種類</h4>
<p>屬性を指定しない場合、ユーザー定義コマンドの入力時に引數は補完されません。下記の屬性のうちいづれか 1 つを指定することで、引數が補完されるやうになります。
</p>
<table>
<tr><td width="50%">-complete=arglist</td><td width="50%">引數リストのファイル名</td></tr>
<tr><td width="50%">-complete=augroup</td><td width="50%">オートコマンドのグループ</td></tr>
<tr><td width="50%">-complete=buffer</td><td width="50%">バッファ</td></tr>
<tr><td width="50%">-complete=behave</td><td width="50%">|<a href="gui_002etxt.html#g_t_003abehave">:behave</a>| サブオプション</td></tr>
<tr><td width="50%">-complete=color</td><td width="50%">カラースキーム</td></tr>
<tr><td width="50%">-complete=command</td><td width="50%">Ex コマンド (と、引數)</td></tr>
<tr><td width="50%">-complete=compiler</td><td width="50%">コンパイラ</td></tr>
<tr><td width="50%">-complete=cscope</td><td width="50%">|<a href="if_005fcscop_002etxt.html#g_t_003acscope">:cscope</a>| サブオプション</td></tr>
<tr><td width="50%">-complete=dir</td><td width="50%">ディレクトリ</td></tr>
<tr><td width="50%">-complete=environment</td><td width="50%">環境變數</td></tr>
<tr><td width="50%">-complete=event</td><td width="50%">オートコマンドのイベント</td></tr>
<tr><td width="50%">-complete=expression</td><td width="50%">Vim の式</td></tr>
<tr><td width="50%">-complete=file</td><td width="50%">ファイルとディレクトリ</td></tr>
<tr><td width="50%">-complete=file_in_path</td><td width="50%">|<a href="options_002etxt.html#g_t_0027path_0027">'path'</a>| 內のファイルとディレクトリ</td></tr>
<tr><td width="50%">-complete=filetype</td><td width="50%">ファイルタイプ名 |<a href="options_002etxt.html#g_t_0027filetype_0027">'filetype'</a>|</td></tr>
<tr><td width="50%">-complete=function</td><td width="50%">函數</td></tr>
<tr><td width="50%">-complete=help</td><td width="50%">ヘルプの主題</td></tr>
<tr><td width="50%">-complete=highlight</td><td width="50%">强調グループ</td></tr>
<tr><td width="50%">-complete=history</td><td width="50%">|<a href="cmdline_002etxt.html#g_t_003ahistory">:history</a>| サブオプション</td></tr>
<tr><td width="50%">-complete=locale</td><td width="50%">ロケール名 (locale -a の出力)</td></tr>
<tr><td width="50%">-complete=mapclear</td><td width="50%">バッファ引數</td></tr>
<tr><td width="50%">-complete=mapping</td><td width="50%">マップ</td></tr>
<tr><td width="50%">-complete=menu</td><td width="50%">メニュー</td></tr>
<tr><td width="50%">-complete=messages</td><td width="50%">|<a href="message_002etxt.html#g_t_003amessages">:messages</a>| サブオプション</td></tr>
<tr><td width="50%">-complete=option</td><td width="50%">オプション</td></tr>
<tr><td width="50%">-complete=packadd</td><td width="50%">オプショナルパッケージの |<a href="repeat_002etxt.html#pack_002dadd">pack-add</a>| 名</td></tr>
<tr><td width="50%">-complete=shellcmd</td><td width="50%">シェルコマンド</td></tr>
<tr><td width="50%">-complete=sign</td><td width="50%">|<a href="sign_002etxt.html#g_t_003asign">:sign</a>| サブオプション</td></tr>
<tr><td width="50%">-complete=syntax</td><td width="50%">シンタックスファイル名 |<a href="options_002etxt.html#g_t_0027syntax_0027">'syntax'</a>|</td></tr>
<tr><td width="50%">-complete=syntime</td><td width="50%">|<a href="syntax_002etxt.html#g_t_003asyntime">:syntime</a>| サブオプション</td></tr>
<tr><td width="50%">-complete=tag</td><td width="50%">タグ</td></tr>
<tr><td width="50%">-complete=tag_listfiles</td><td width="50%"><kbd>CTRL-D</kbd> を押した時にタグ、ファイル名を表示</td></tr>
<tr><td width="50%">-complete=user</td><td width="50%">ユーザー名</td></tr>
<tr><td width="50%">-complete=var</td><td width="50%">ユーザー變數</td></tr>
<tr><td width="50%">-complete=custom,{func}</td><td width="50%">{func} によるユーザー定義の補完</td></tr>
<tr><td width="50%">-complete=customlist,{func}</td><td width="50%">{func} によるユーザー定義の補完</td></tr>
</table>

<blockquote>
<p><strong>Note:</strong> <br>
いくつかの補完方法は環境變數を展開します。
</p></blockquote>


<a name="g_t_003acommand_002dcompletion_002dcustom"></a><a name="g_t_003acommand_002dcompletion_002dcustomlist"></a><a name="E467"></a><a name="E468"></a><a name="index-_003acommand_002dcompletion_002dcustom"></a>
<a name="index-_003acommand_002dcompletion_002dcustomlist"></a>
<a name="index-E467"></a>
<a name="index-E468"></a>
<a name="yuzaDing-Yi-noBu-Wan-"></a>
<h4 class="unnumberedsubsec">ユーザー定義の補完</h4>
<p>補完方法に &quot;custom,{func}&quot;、&quot;customlist,{func}&quot; を指定すると獨自の補完を使用できます。{func}には次のやうな函數を指定します。
</p><pre class="verbatim">:function {func}(ArgLead, CmdLine, CursorPos)
</pre>
<p>すべての引數を使ふ必要はありません。函數の戾り値として、補完候補のリストを返してください。
</p>
<p>&quot;custom&quot; を使つた場合は、補完候補のリストを 1 つずつ改行で區切つてください。
</p>
<p>&quot;customlist&quot; を使つた場合は、補完候補のリストを |<a href="eval_002etxt.html#List">List</a>| で返してください。リスト中の文字列以外の變數は無視されます。
</p>
<p>引數には次の意味があります:
</p><table>
<tr><td width="30%">ArgLead</td><td width="70%">すでに入力されてゐる補完對象の文字列</td></tr>
<tr><td width="30%">CmdLine</td><td width="70%">コマンドライン全體</td></tr>
<tr><td width="30%">CursorPos</td><td width="70%">カーソル位置 (バイト單位のインデックス)</td></tr>
</table>
<p>これらの引數を使へば文脈を判斷することができるでせう。&quot;custom&quot; を使つた場合、補完候補のリストから ArgLead にそぐはない候補 (ArgLead で始まらない文字) を取り除く必要はありません。Vim は補完函數を實行した後にふさはしくない候補を取り除きます。おそらくその方がほとんどの場面で有用です。&quot;customlist&quot; を使つた場合、Vim は補完候補のリストをフィルタしません。補完候補のリストを自分でフィルタしてください。
</p>
<p>次の例はFingerコマンドでユーザー名を補完します
</p><pre class="verbatim">:com -complete=custom,ListUsers -nargs=1 Finger !finger &lt;args&gt;
:fun ListUsers(A,L,P)
:    return system(&quot;cut -d: -f1 /etc/passwd&quot;)
:endfun
</pre>
<p>次の例では、&rsquo;<samp>path</samp>&rsquo; に指定されたディレクトリのファイル名を補完してゐます:
</p><pre class="verbatim">:com -nargs=1 -bang -complete=customlist,EditFileComplete
\ EditFile edit&lt;bang&gt; &lt;args&gt;
:fun EditFileComplete(A,L,P)
:    return split(globpath(&amp;path, a:A), &quot;\n&quot;)
:endfun
</pre><p>この例はファイル名にスペースが含まれてゐると機能しません！
</p>

<a name="E177"></a><a name="E178"></a><a name="g_t_003acommand_002drange"></a><a name="g_t_003acommand_002dcount"></a><a name="index-E177"></a>
<a name="index-E178"></a>
<a name="index-_003acommand_002drange"></a>
<a name="index-_003acommand_002dcount"></a>
<a name="Fan-Wei-Zhi-Ding--1"></a>
<h4 class="unnumberedsubsec">範圍指定</h4>
<p>屬性を指定しない場合、ユーザー定義コマンドは行番號による範圍指定を受け付けません。-range 屬性を指定して、コマンドが範圍指定を受け付けるやうにできます。任意のカウント値を取るやうにすることもできます。この場合、行番號の位置 (|<a href="windows_002etxt.html#g_t_003asplit">:split</a>| コマンドのやうに -range=N) で指定するか、&quot;count&quot; 引數 (|<a href="editing_002etxt.html#g_t_003aNext">:Next</a>| コマンドのやうに -count=N) で指定します。カウント指定は |<a href="#g_t_003ccount_003e">&lt;count&gt;</a>| で取得できます。
</p>
<p>次の屬性が利用できます:
</p><table>
<tr><td width="20%">-range</td><td width="80%">範圍指定が可能になります、無指定時は現在行</td></tr>
<tr><td width="20%">-range=%</td><td width="80%">範圍指定が可能になります、無指定時はファイル全體 (1,$)</td></tr>
<tr><td width="20%">-range=N</td><td width="80%">カウント (無指定時は N) を行番號位置に指定できます (例 |<a href="windows_002etxt.html#g_t_003asplit">:split</a>|)。行番號に 0 を指定可能になる。</td></tr>
<tr><td width="20%">-count=N</td><td width="80%">カウント (無指定時は N) を行番號位置か、初期化引數に指定できます (例 |<a href="editing_002etxt.html#g_t_003aNext">:Next</a>|)。</td></tr>
<tr><td width="20%">-count</td><td width="80%">-count=0 と同じです</td></tr>
</table>
<blockquote>
<p><strong>Note:</strong> <br>
-range=N と -count=N は相互に排他的であるといふことに注意してください。どちらか一方のみを指定することができます。
</p></blockquote>

<a name="g_t_003acommand_002daddr"></a><a name="index-_003acommand_002daddr"></a>
<p>範圍指定には ., $, % といつた特殊文字を含むことができ、それぞれ現在行、最終行、バッファ全體を表します。これらは引數、(ロードされた) バッファ、ウィンドウ及びタブページに關聯付けすることができます。
</p>
<p>次の値を利用できます (2 列目は一覽表示で使はれる短い名前です):
</p><table>
<tr><td width="30%">-addr=lines</td><td width="20%"></td><td width="60%">行 (-range のデフォルトです)</td></tr>
<tr><td width="30%">-addr=arguments</td><td width="20%">arg</td><td width="60%">引數</td></tr>
<tr><td width="30%">-addr=buffers</td><td width="20%">buf</td><td width="60%">バッファ (ロードされてゐないバッファも)</td></tr>
<tr><td width="30%">-addr=loaded_buffers</td><td width="20%">load</td><td width="60%">ロードされたバッファ</td></tr>
<tr><td width="30%">-addr=windows</td><td width="20%">win</td><td width="60%">ウィンドウ</td></tr>
<tr><td width="30%">-addr=tabs</td><td width="20%">tab</td><td width="60%">タブページ</td></tr>
<tr><td width="30%">-addr=quickfix</td><td width="20%">qf</td><td width="60%">quickfix のエントリ</td></tr>
<tr><td width="30%">-addr=other</td><td width="20%">?</td><td width="60%">他の種類の範圍; &quot;lines&quot; をつけるのと同樣に &quot;.&quot;, &quot;$&quot;, &quot;%&quot; が使へます (-count のデフォルトです)</td></tr>
</table>


<a name="g_t_003acommand_002dbang"></a><a name="g_t_003acommand_002dbar"></a><a name="g_t_003acommand_002dregister"></a><a name="g_t_003acommand_002dbuffer"></a><a name="index-_003acommand_002dbang"></a>
<a name="index-_003acommand_002dbar"></a>
<a name="index-_003acommand_002dregister"></a>
<a name="index-_003acommand_002dbuffer"></a>
<a name="Te-Shu-nakesu"></a>
<h4 class="unnumberedsubsec">特殊なケース</h4>
<p>特殊なケースがいくつかあります:
</p><table>
<tr><td width="20%">-bang</td><td width="80%">コマンドは ! 修飾子を取ることができます (:q や :w のやうに)</td></tr>
<tr><td width="20%">-bar</td><td width="80%">コマンドは &quot;|&quot; を使用して別のコマンドを續けて實行することができます。引數に &quot;|&quot; を含めることはできなくなります。&quot; がコメントの開始になつてしまふことにも注意してください。</td></tr>
<tr><td width="20%">-register</td><td width="80%">コマンドの 1 つ目の引數にレジスタ名を指定することができます(:del, :put, :yank のやうに)。</td></tr>
<tr><td width="20%">-buffer</td><td width="80%">コマンドはカレントバッファでのみ利用できます。</td></tr>
</table>

<p>ユーザー定義コマンドの定義に -count や -register が指定された場合に、その省略可能な引數が與へられた場合、それは引數リストから削除され、それぞれの引數に對應する特別な文字列が利用できるやうになります。
</p><blockquote>
<p><strong>Note:</strong> <br>
これらの引數は省略できますが、これは廢止される機能です。新しいスクリプトでは完全な名前を使用して下さい。
</p></blockquote>


<a name="Zhi-kiHuan-etekisuto"></a>
<h4 class="unnumberedsubsec">置き換へテキスト</h4>

<p>ユーザー定義コマンドでは、&lt;...&gt; 表記を使つた特別な文字列を使用できます。その文字列はコマンドラインに入力された實際の引數に置き換へられます。その他のテキストは變更されません。そして特別な文字列を實際の引數で置換したものが Ex コマンドとして實行されます。&lt;&gt; 表記が置き換へられないやうにするには、最初の &lt; の代はりに &lt;lt&gt; を使つてください。例へば、&quot;&lt;bang&gt;&quot; をリテラル文字として使ふには &quot;&lt;lt&gt;bang&gt;&quot; とします。
</p>
<p>次のものを使用できます
</p><dl compact="compact">
<dd><a name="g_t_003cline1_003e"></a><a name="index-_003cline1_003e"></a>
</dd>
<dt>&lt;line1&gt;</dt>
<dd><p>コマンド範圍の最初の行
<a name="g_t_003cline2_003e"></a><a name="index-_003cline2_003e"></a>
</p></dd>
<dt>&lt;line2&gt;</dt>
<dd><p>コマンド範圍の最後の行
<a name="g_t_003crange_003e"></a><a name="index-_003crange_003e"></a>
</p></dd>
<dt>&lt;range&gt;</dt>
<dd><p>コマンド範圍を指定するために使はれた要素の數: 0, 1 もしくは 2
<a name="g_t_003ccount_003e"></a><a name="index-_003ccount_003e"></a>
</p></dd>
<dt>&lt;count&gt;</dt>
<dd><p>與へられたカウント (&rsquo;-range&rsquo; と &rsquo;-count&rsquo; 屬性で記述されてゐる)
<a name="g_t_003cbang_003e"></a><a name="index-_003cbang_003e"></a>
</p></dd>
<dt>&lt;bang&gt;</dt>
<dd><p>(&rsquo;-bang&rsquo; 屬性を參照) コマンドが ! 修飾子付きで實行された場合に ! に置換されます。指定なしの場合は空文字列になります。
<a name="g_t_003cmods_003e"></a><a name="index-_003cmods_003e"></a>
</p></dd>
<dt>&lt;mods&gt;</dt>
<dd><p>指定されてゐる場合はコマンド修飾子。されてゐない場合は何も展開しません。對應してゐる修飾子は次の通り: |<a href="windows_002etxt.html#g_t_003aaboveleft">:aboveleft</a>|, |<a href="windows_002etxt.html#g_t_003abelowright">:belowright</a>|, |<a href="windows_002etxt.html#g_t_003abotright">:botright</a>|, |<a href="editing_002etxt.html#g_t_003abrowse">:browse</a>|, |<a href="editing_002etxt.html#g_t_003aconfirm">:confirm</a>|, |<a href="windows_002etxt.html#g_t_003ahide">:hide</a>|, |<a href="editing_002etxt.html#g_t_003akeepalt">:keepalt</a>|, |<a href="motion_002etxt.html#g_t_003akeepjumps">:keepjumps</a>|, |<a href="motion_002etxt.html#g_t_003akeepmarks">:keepmarks</a>|, |<a href="cmdline_002etxt.html#g_t_003akeeppatterns">:keeppatterns</a>|, |<a href="windows_002etxt.html#g_t_003aleftabove">:leftabove</a>|, |<a href="motion_002etxt.html#g_t_003alockmarks">:lockmarks</a>|, |<a href="recover_002etxt.html#g_t_003anoswapfile">:noswapfile</a>| |<a href="windows_002etxt.html#g_t_003arightbelow">:rightbelow</a>|, |<a href="various_002etxt.html#g_t_003asilent">:silent</a>|, |<a href="tabpage_002etxt.html#g_t_003atab">:tab</a>|, |<a href="windows_002etxt.html#g_t_003atopleft">:topleft</a>|, |<a href="various_002etxt.html#g_t_003averbose">:verbose</a>| そして |<a href="windows_002etxt.html#g_t_003avertical">:vertical</a>|。
</p><blockquote>
<p><strong>Note:</strong> <br>
次のコマンド修飾子には對應してゐないことに注意してください: |<a href="autocmd_002etxt.html#g_t_003anoautocmd">:noautocmd</a>|, |<a href="eval_002etxt.html#g_t_003asandbox">:sandbox</a>| そして |<a href="various_002etxt.html#g_t_003aunsilent">:unsilent</a>|。
</p></blockquote>
<p>例:
</p><pre class="verbatim">command! -nargs=+ -complete=file MyEdit
            \ for f in expand(&lt;q-args&gt;, 0, 1) |
            \ exe '&lt;mods&gt; split ' . f |
            \ endfor

function! SpecialEdit(files, mods)
    for f in expand(a:files, 0, 1)
        exe a:mods . ' split ' . f
    endfor
endfunction
command! -nargs=+ -complete=file Sedit
            \ call SpecialEdit(&lt;q-args&gt;, &lt;q-mods&gt;)
</pre><a name="g_t_003creg_003e"></a><a name="g_t_003cregister_003e"></a><a name="index-_003creg_003e"></a>
<a name="index-_003cregister_003e"></a>
</dd>
<dt>&lt;reg&gt;</dt>
<dd><p>(&rsquo;-register&rsquo; 屬性を參照) レジスタ名に置換されます。指定なしの場合は空文字列になります。&lt;register&gt; も同義です。
<a name="g_t_003cargs_003e"></a><a name="index-_003cargs_003e"></a>
</p></dd>
<dt>&lt;args&gt;</dt>
<dd><p>與へられた通りのコマンド引數 (上記の通り、カウントやレジスタが指定された場合は &lt;args&gt; に含まれません)。
</p></dd>
<dt>&lt;lt&gt;</dt>
<dd><p>1 つの &rsquo;&lt;&rsquo; (小なり)文字。特別な文字列を文字どほりに使用したい場合に必要となります。例へば &lt;bang&gt; を得るには &lt;lt&gt;bang&gt; とします。
</p></dd>
</dl>

<a name="g_t_003cq_002dargs_003e"></a><a name="index-_003cq_002dargs_003e"></a>
<p>特別な文字列の始めの2文字が &quot;q-&quot; なら(例へば &lt;q-args&gt;)、引數は式で使へるやうにクォートされます (&quot;で圍まれる)。これは引數を 1 つの値として扱ひます。引數がない場合は &lt;q-args&gt; は空文字列になります。
<a name="g_t_003cf_002dargs_003e"></a><a name="index-_003cf_002dargs_003e"></a>
ユーザー定義コマンドの引數を函數に渡すには、&lt;f-args&gt;(&quot;function args&quot;) が利用できます。これはコマンドの引數をスペースやタブ文字で區切り、それぞれの引數を別々にクォート (&quot;で圍む) し、コンマで區切つたリストにして &lt;f-args&gt; と置き換へます。下の Mycmd の例をご覽下さい。引數がない場合は &lt;f-args&gt; は取り除かれます。
</p>
<p>&lt;f-args&gt; の引數にスペースを含めるには、バックスラッシュを前置します。&lt;f-args&gt; では 2 つのバックスラッシュ (\\) は 1 つのバックスラッシュに置換されます。スペースとバックスラッシュ以外の文字に付いてゐるバックスラッシュはそのまま使はれます。
</p>
<p>要約:
</p>
<table>
<thead><tr><th width="50%">コマンド</th><th width="50%">&lt;f-args&gt;</th></tr></thead>
<tr><td width="50%">XX ab</td><td width="50%">&rsquo;ab&rsquo;</td></tr>
<tr><td width="50%">XX a\b</td><td width="50%">&rsquo;a\b&rsquo;</td></tr>
<tr><td width="50%">XX a\ b</td><td width="50%">&rsquo;a b&rsquo;</td></tr>
<tr><td width="50%">XX a\  b</td><td width="50%">&rsquo;a &rsquo;, &rsquo;b&rsquo;</td></tr>
<tr><td width="50%">XX a\\b</td><td width="50%">&rsquo;a\b&rsquo;</td></tr>
<tr><td width="50%">XX a\\ b</td><td width="50%">&rsquo;a\&rsquo;, &rsquo;b&rsquo;</td></tr>
<tr><td width="50%">XX a\\\b</td><td width="50%">&rsquo;a\\b&rsquo;</td></tr>
<tr><td width="50%">XX a\\\ b</td><td width="50%">&rsquo;a\ b&rsquo;</td></tr>
<tr><td width="50%">XX a\\\\b</td><td width="50%">&rsquo;a\\b&rsquo;</td></tr>
<tr><td width="50%">XX a\\\\ b</td><td width="50%">&rsquo;a\\&rsquo;, &rsquo;b&rsquo;</td></tr>
</table>

<p>例
</p><pre class="verbatim">&quot; 現在行から最後行までを削除します
:com Ddel +,$d

&quot; 現在のバッファ名を變更します
:com -nargs=1 -bang -complete=file Ren f &lt;args&gt;|w&lt;bang&gt;

&quot; 指定された範圍をあるファイルの內容に置き換へます
&quot; (1 行に書きます)
:com -range -nargs=1 -complete=file
      Replace &lt;line1&gt;-pu_|&lt;line1&gt;,&lt;line2&gt;d|r &lt;args&gt;|&lt;line1&gt;d

&quot; 指定された範圍の行數を數へる
:com! -range -nargs=0 Lines  echo &lt;line2&gt; - &lt;line1&gt; + 1 &quot;lines&quot;

&quot; ユーザー函數を呼びます (&lt;f-args&gt; の例)
:com -nargs=* Mycmd call Myfunc(&lt;f-args&gt;)
</pre>
<p>次のやうに實行された場合は:
</p><pre class="verbatim">:Mycmd arg1 arg2
</pre><p>次のものを實行します:
</p><pre class="verbatim">:call Myfunc(&quot;arg1&quot;,&quot;arg2&quot;)
</pre><pre class="verbatim">&quot; より現實的な例
:function Allargs(command)
:   let i = 0
:   while i &lt; argc()
:      if filereadable(argv(i))
:         execute &quot;e &quot; . argv(i)
:         execute a:command
:       endif
:       let i = i + 1
:    endwhile
:endfunction
:command -nargs=+ -complete=command Allargs call Allargs(&lt;q-args&gt;)
</pre>
<p>Allargs コマンドは、引數としてどの Vim コマンドでも取ることができ、引數リスト |<a href="editing_002etxt.html#argument_002dlist">argument-list</a>| のすべてのファイルに對して與へられたコマンドを實行します。使ひ方の例 (&quot;e&quot; フラグをつけてエラーを無視してをり、また &quot;update&quot; コマンドで變更されたバッファを書き込んでゐるので注意してください):
</p><pre class="verbatim">:Allargs %s/foo/bar/ge|update
</pre><p>これは、次のものを起動します:
</p><pre class="verbatim">:call Allargs(&quot;%s/foo/bar/ge|update&quot;)
</pre><p>スクリプトでユーザー定義コマンドを定義するとき、そのスクリプトのローカル函數やローカルマップを使用できます。ユーザー定義コマンドはユーザー定義コマンドを定義したスクリプトのコンテキストで實行されます。これはユーザー定義コマンドで |<a href="#g_t_003cSID_003e">&lt;SID&gt;</a>| を使用するときに重要です。
</p>
<hr>
<div class="header">
<p>
Up: <a href="Mu-Ci-.html#g_t_76ee_6b21" accesskey="u" rel="up">目次</a> &nbsp; [<a href="Indexes-CP.html#Indexes-CP" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
